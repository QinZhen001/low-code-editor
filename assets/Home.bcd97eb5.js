import{c as fi,g as Zr,s as fe,e as ze,m as st,n as Ve,a as Vr,$ as ci,d as li,b as Yr}from"./index.7587bc70.js";function Rt(){return Rt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},Rt.apply(this,arguments)}var Xr={epsilon:1e-12,matrix:"Matrix",number:"number",precision:64,predictable:!1,randomSeed:null};function le(e){return typeof e=="number"}function Ce(e){return!e||typeof e!="object"||typeof e.constructor!="function"?!1:e.isBigNumber===!0&&typeof e.constructor.prototype=="object"&&e.constructor.prototype.isBigNumber===!0||typeof e.constructor.isDecimal=="function"&&e.constructor.isDecimal(e)===!0}function Gt(e){return e&&typeof e=="object"&&Object.getPrototypeOf(e).isComplex===!0||!1}function Kt(e){return e&&typeof e=="object"&&Object.getPrototypeOf(e).isFraction===!0||!1}function Jt(e){return e&&e.constructor.prototype.isUnit===!0||!1}function Ue(e){return typeof e=="string"}var se=Array.isArray;function _e(e){return e&&e.constructor.prototype.isMatrix===!0||!1}function Hr(e){return Array.isArray(e)||_e(e)}function hi(e){return e&&e.isDenseMatrix&&e.constructor.prototype.isMatrix===!0||!1}function pi(e){return e&&e.isSparseMatrix&&e.constructor.prototype.isMatrix===!0||!1}function kr(e){return e&&e.constructor.prototype.isRange===!0||!1}function Nt(e){return e&&e.constructor.prototype.isIndex===!0||!1}function vi(e){return typeof e=="boolean"}function Wr(e){return e&&e.constructor.prototype.isResultSet===!0||!1}function Gr(e){return e&&e.constructor.prototype.isHelp===!0||!1}function di(e){return typeof e=="function"}function mi(e){return e instanceof Date}function gi(e){return e instanceof RegExp}function wi(e){return!!(e&&typeof e=="object"&&e.constructor===Object&&!Gt(e)&&!Kt(e))}function yi(e){return e===null}function _i(e){return e===void 0}function bi(e){return e&&e.isAccessorNode===!0&&e.constructor.prototype.isNode===!0||!1}function Ni(e){return e&&e.isArrayNode===!0&&e.constructor.prototype.isNode===!0||!1}function Mi(e){return e&&e.isAssignmentNode===!0&&e.constructor.prototype.isNode===!0||!1}function Ei(e){return e&&e.isBlockNode===!0&&e.constructor.prototype.isNode===!0||!1}function Si(e){return e&&e.isConditionalNode===!0&&e.constructor.prototype.isNode===!0||!1}function xi(e){return e&&e.isConstantNode===!0&&e.constructor.prototype.isNode===!0||!1}function Ci(e){return e&&e.isFunctionAssignmentNode===!0&&e.constructor.prototype.isNode===!0||!1}function Ai(e){return e&&e.isFunctionNode===!0&&e.constructor.prototype.isNode===!0||!1}function Di(e){return e&&e.isIndexNode===!0&&e.constructor.prototype.isNode===!0||!1}function Kr(e){return e&&e.isNode===!0&&e.constructor.prototype.isNode===!0||!1}function Oi(e){return e&&e.isObjectNode===!0&&e.constructor.prototype.isNode===!0||!1}function $i(e){return e&&e.isOperatorNode===!0&&e.constructor.prototype.isNode===!0||!1}function zi(e){return e&&e.isParenthesisNode===!0&&e.constructor.prototype.isNode===!0||!1}function Fi(e){return e&&e.isRangeNode===!0&&e.constructor.prototype.isNode===!0||!1}function Ii(e){return e&&e.isSymbolNode===!0&&e.constructor.prototype.isNode===!0||!1}function Jr(e){return e&&e.constructor.prototype.isChain===!0||!1}function ke(e){var t=typeof e;return t==="object"?e===null?"null":Array.isArray(e)?"Array":e instanceof Date?"Date":e instanceof RegExp?"RegExp":Ce(e)?"BigNumber":Gt(e)?"Complex":Kt(e)?"Fraction":_e(e)?"Matrix":Jt(e)?"Unit":Nt(e)?"Index":kr(e)?"Range":Wr(e)?"ResultSet":Kr(e)?e.type:Jr(e)?"Chain":Gr(e)?"Help":"Object":t==="function"?"Function":t}function ve(e){var t=typeof e;if(t==="number"||t==="string"||t==="boolean"||e===null||e===void 0)return e;if(typeof e.clone=="function")return e.clone();if(Array.isArray(e))return e.map(function(r){return ve(r)});if(e instanceof Date)return new Date(e.valueOf());if(Ce(e))return e;if(e instanceof RegExp)throw new TypeError("Cannot clone "+e);return Pi(e,ve)}function Pi(e,t){var r={};for(var i in e)ft(e,i)&&(r[i]=t(e[i]));return r}function jr(e,t){for(var r in t)ft(t,r)&&(e[r]=t[r]);return e}function dt(e,t){var r,i,n;if(Array.isArray(e)){if(!Array.isArray(t)||e.length!==t.length)return!1;for(i=0,n=e.length;i<n;i++)if(!dt(e[i],t[i]))return!1;return!0}else{if(typeof e=="function")return e===t;if(e instanceof Object){if(Array.isArray(t)||!(t instanceof Object))return!1;for(r in e)if(!(r in t)||!dt(e[r],t[r]))return!1;for(r in t)if(!(r in e))return!1;return!0}else return e===t}}function ft(e,t){return e&&Object.hasOwnProperty.call(e,t)}function Ti(e,t){for(var r={},i=0;i<t.length;i++){var n=t[i],a=e[n];a!==void 0&&(r[n]=a)}return r}var Bi=["Matrix","Array"],Li=["number","BigNumber","Fraction"],lt=function(t){if(t)throw new Error(`The global config is readonly. 
Please create a mathjs instance if you want to change the default configuration. 
Example:

  import { create, all } from 'mathjs';
  const mathjs = create(all);
  mathjs.config({ number: 'BigNumber' });
`);return Object.freeze(Xr)};Rt(lt,Xr,{MATRIX_OPTIONS:Bi,NUMBER_OPTIONS:Li});var Qr={exports:{}};(function(e,t){(function(r,i){e.exports=i()})(fi,function(){function r(){return!0}function i(){return!1}function n(){}function a(){var c=[{name:"number",test:function(E){return typeof E=="number"}},{name:"string",test:function(E){return typeof E=="string"}},{name:"boolean",test:function(E){return typeof E=="boolean"}},{name:"Function",test:function(E){return typeof E=="function"}},{name:"Array",test:Array.isArray},{name:"Date",test:function(E){return E instanceof Date}},{name:"RegExp",test:function(E){return E instanceof RegExp}},{name:"Object",test:function(E){return typeof E=="object"&&E!==null&&E.constructor===Object}},{name:"null",test:function(E){return E===null}},{name:"undefined",test:function(E){return E===void 0}}],p={name:"any",test:r},v=[],d=[],s={types:c,conversions:d,ignore:v};function o(E){var A=De(s.types,function(C){return C.name===E});if(A)return A;if(E==="any")return p;var D=De(s.types,function(C){return C.name.toLowerCase()===E.toLowerCase()});throw new TypeError('Unknown type "'+E+'"'+(D?'. Did you mean "'+D.name+'"?':""))}function f(E){return E===p?999:s.types.indexOf(E)}function l(E){var A=De(s.types,function(D){return D.test(E)});if(A)return A.name;throw new TypeError("Value has unknown type. Value: "+E)}function h(E,A){if(!E.signatures)throw new TypeError("Function is no typed-function");var D;if(typeof A=="string"){D=A.split(",");for(var C=0;C<D.length;C++)D[C]=D[C].trim()}else if(Array.isArray(A))D=A;else throw new TypeError("String array or a comma separated string expected");var B=D.join(","),X=E.signatures[B];if(X)return X;throw new TypeError("Signature not found (signature: "+(E.name||"unnamed")+"("+D.join(", ")+"))")}function u(E,A){var D=l(E);if(A===D)return E;for(var C=0;C<s.conversions.length;C++){var B=s.conversions[C];if(B.from===D&&B.to===A)return B.convert(E)}throw new Error("Cannot convert from "+D+" to "+A)}function m(E){return E.map(function(A){var D=A.types.map(S);return(A.restParam?"...":"")+D.join("|")}).join(",")}function g(E,A){var D=E.indexOf("...")===0,C=D?E.length>3?E.slice(3):"any":E,B=C.split("|").map(me).filter(oe).filter(pe),X=V(A,B),k=B.map(function(L){var K=o(L);return{name:L,typeIndex:f(K),test:K.test,conversion:null,conversionIndex:-1}}),U=X.map(function(L){var K=o(L.from);return{name:L.from,typeIndex:f(K),test:K.test,conversion:L,conversionIndex:A.indexOf(L)}});return{types:k.concat(U),restParam:D}}function N(E,A,D){var C=[];return E.trim()!==""&&(C=E.split(",").map(me).map(function(B,X,k){var U=g(B,D);if(U.restParam&&X!==k.length-1)throw new SyntaxError('Unexpected rest parameter "'+B+'": only allowed for the last parameter');return U})),C.some(ce)?null:{params:C,fn:A}}function w(E){var A=Ae(E);return A?A.restParam:!1}function M(E){return E.types.some(function(A){return A.conversion!=null})}function _(E){if(!E||E.types.length===0)return r;if(E.types.length===1)return o(E.types[0].name).test;if(E.types.length===2){var A=o(E.types[0].name).test,D=o(E.types[1].name).test;return function(X){return A(X)||D(X)}}else{var C=E.types.map(function(B){return o(B.name).test});return function(X){for(var k=0;k<C.length;k++)if(C[k](X))return!0;return!1}}}function y(E){var A,D,C;if(w(E)){A=ie(E).map(_);var B=A.length,X=_(Ae(E)),k=function(U){for(var L=B;L<U.length;L++)if(!X(U[L]))return!1;return!0};return function(L){for(var K=0;K<A.length;K++)if(!A[K](L[K]))return!1;return k(L)&&L.length>=B+1}}else return E.length===0?function(L){return L.length===0}:E.length===1?(D=_(E[0]),function(L){return D(L[0])&&L.length===1}):E.length===2?(D=_(E[0]),C=_(E[1]),function(L){return D(L[0])&&C(L[1])&&L.length===2}):(A=E.map(_),function(L){for(var K=0;K<A.length;K++)if(!A[K](L[K]))return!1;return L.length===A.length})}function x(E,A){return A<E.params.length?E.params[A]:w(E.params)?Ae(E.params):null}function b(E,A,D){var C=x(E,A),B=C?D?C.types.filter(O):C.types:[];return B.map(S)}function S(E){return E.name}function O(E){return E.conversion===null||E.conversion===void 0}function $(E,A){var D=Ye(Be(E,function(C){return b(C,A,!1)}));return D.indexOf("any")!==-1?["any"]:D}function I(E,A,D){var C,B,X=E||"unnamed",k=D,U;for(U=0;U<A.length;U++){var L=k.filter(function(Le){var zt=_(x(Le,U));return(U<Le.params.length||w(Le.params))&&zt(A[U])});if(L.length===0){if(B=$(k,U),B.length>0){var K=l(A[U]);return C=new TypeError("Unexpected type of argument in function "+X+" (expected: "+B.join(" or ")+", actual: "+K+", index: "+U+")"),C.data={category:"wrongType",fn:X,index:U,actual:K,expected:B},C}}else k=L}var Fe=k.map(function(Le){return w(Le.params)?1/0:Le.params.length});if(A.length<Math.min.apply(null,Fe))return B=$(k,U),C=new TypeError("Too few arguments in function "+X+" (expected: "+B.join(" or ")+", index: "+A.length+")"),C.data={category:"tooFewArgs",fn:X,index:A.length,expected:B},C;var Ie=Math.max.apply(null,Fe);return A.length>Ie?(C=new TypeError("Too many arguments in function "+X+" (expected: "+Ie+", actual: "+A.length+")"),C.data={category:"tooManyArgs",fn:X,index:A.length,expectedLength:Ie},C):(C=new TypeError('Arguments of type "'+A.join(", ")+'" do not match any of the defined signatures of function '+X+"."),C.data={category:"mismatch",actual:A.map(l)},C)}function R(E){for(var A=999,D=0;D<E.types.length;D++)O(E.types[D])&&(A=Math.min(A,E.types[D].typeIndex));return A}function P(E){for(var A=999,D=0;D<E.types.length;D++)O(E.types[D])||(A=Math.min(A,E.types[D].conversionIndex));return A}function T(E,A){var D;return D=E.restParam-A.restParam,D!==0||(D=M(E)-M(A),D!==0)||(D=R(E)-R(A),D!==0)?D:P(E)-P(A)}function F(E,A){var D=Math.min(E.params.length,A.params.length),C,B;if(B=E.params.some(M)-A.params.some(M),B!==0)return B;for(C=0;C<D;C++)if(B=M(E.params[C])-M(A.params[C]),B!==0)return B;for(C=0;C<D;C++)if(B=T(E.params[C],A.params[C]),B!==0)return B;return E.params.length-A.params.length}function V(E,A){var D={};return E.forEach(function(C){A.indexOf(C.from)===-1&&A.indexOf(C.to)!==-1&&!D[C.from]&&(D[C.from]=C)}),Object.keys(D).map(function(C){return D[C]})}function q(E,A){var D=A;if(E.some(M)){var C=w(E),B=E.map(Y);D=function(){for(var L=[],K=C?arguments.length-1:arguments.length,Fe=0;Fe<K;Fe++)L[Fe]=B[Fe](arguments[Fe]);return C&&(L[K]=arguments[K].map(B[K])),A.apply(this,L)}}var X=D;if(w(E)){var k=E.length-1;X=function(){return D.apply(this,be(arguments,0,k).concat([be(arguments,k)]))}}return X}function Y(E){var A,D,C,B,X=[],k=[];switch(E.types.forEach(function(U){U.conversion&&(X.push(o(U.conversion.from).test),k.push(U.conversion.convert))}),k.length){case 0:return function(L){return L};case 1:return A=X[0],C=k[0],function(L){return A(L)?C(L):L};case 2:return A=X[0],D=X[1],C=k[0],B=k[1],function(L){return A(L)?C(L):D(L)?B(L):L};default:return function(L){for(var K=0;K<k.length;K++)if(X[K](L))return k[K](L);return L}}}function G(E){var A={};return E.forEach(function(D){D.params.some(M)||Q(D.params,!0).forEach(function(C){A[m(C)]=D.fn})}),A}function Q(E,A){function D(C,B,X){if(B<C.length){var k=C[B],U=A?k.types.filter(O):k.types,L;if(k.restParam){var K=U.filter(O);L=K.length<U.length?[K,U]:[U]}else L=U.map(function(Ie){return[Ie]});return Be(L,function(Ie){return D(C,B+1,X.concat([Ie]))})}else{var Fe=X.map(function(Ie,Le){return{types:Ie,restParam:Le===C.length-1&&w(C)}});return[Fe]}}return D(E,0,[])}function ee(E,A){for(var D=Math.max(E.params.length,A.params.length),C=0;C<D;C++){var B=b(E,C,!0),X=b(A,C,!0);if(!Ne(B,X))return!1}var k=E.params.length,U=A.params.length,L=w(E.params),K=w(A.params);return L?K?k===U:U>=k:K?k>=U:k===U}function J(E,A){if(Object.keys(A).length===0)throw new SyntaxError("No signatures provided");var D=[];Object.keys(A).map(function(ae){return N(ae,A[ae],s.conversions)}).filter(xe).forEach(function(ae){var Ee=De(D,function(Re){return ee(Re,ae)});if(Ee)throw new TypeError('Conflicting signatures "'+m(Ee.params)+'" and "'+m(ae.params)+'".');D.push(ae)});var C=Be(D,function(ae){var Ee=ae?Q(ae.params,!1):[];return Ee.map(function(Re){return{params:Re,fn:ae.fn}})}).filter(xe);C.sort(F);var B=C[0]&&C[0].params.length<=2&&!w(C[0].params),X=C[1]&&C[1].params.length<=2&&!w(C[1].params),k=C[2]&&C[2].params.length<=2&&!w(C[2].params),U=C[3]&&C[3].params.length<=2&&!w(C[3].params),L=C[4]&&C[4].params.length<=2&&!w(C[4].params),K=C[5]&&C[5].params.length<=2&&!w(C[5].params),Fe=B&&X&&k&&U&&L&&K,Ie=C.map(function(ae){return y(ae.params)}),Le=B?_(C[0].params[0]):i,zt=X?_(C[1].params[0]):i,Ln=k?_(C[2].params[0]):i,Rn=U?_(C[3].params[0]):i,qn=L?_(C[4].params[0]):i,Un=K?_(C[5].params[0]):i,Zn=B?_(C[0].params[1]):i,Vn=X?_(C[1].params[1]):i,Yn=k?_(C[2].params[1]):i,Xn=U?_(C[3].params[1]):i,Hn=L?_(C[4].params[1]):i,kn=K?_(C[5].params[1]):i,Qe=C.map(function(ae){return q(ae.params,ae.fn)}),Wn=B?Qe[0]:n,Gn=X?Qe[1]:n,Kn=k?Qe[2]:n,Jn=U?Qe[3]:n,jn=L?Qe[4]:n,Qn=K?Qe[5]:n,ei=B?C[0].params.length:-1,ti=X?C[1].params.length:-1,ri=k?C[2].params.length:-1,ni=U?C[3].params.length:-1,ii=L?C[4].params.length:-1,ai=K?C[5].params.length:-1,oi=Fe?6:0,si=C.length,ui=function(){for(var Ee=oi;Ee<si;Ee++)if(Ie[Ee](arguments))return Qe[Ee].apply(this,arguments);return s.onMismatch(E,arguments,C)},Ft=function ae(Ee,Re){return arguments.length===ei&&Le(Ee)&&Zn(Re)?Wn.apply(ae,arguments):arguments.length===ti&&zt(Ee)&&Vn(Re)?Gn.apply(ae,arguments):arguments.length===ri&&Ln(Ee)&&Yn(Re)?Kn.apply(ae,arguments):arguments.length===ni&&Rn(Ee)&&Xn(Re)?Jn.apply(ae,arguments):arguments.length===ii&&qn(Ee)&&Hn(Re)?jn.apply(ae,arguments):arguments.length===ai&&Un(Ee)&&kn(Re)?Qn.apply(ae,arguments):ui.apply(ae,arguments)};try{Object.defineProperty(Ft,"name",{value:E})}catch{}return Ft.signatures=G(C),Ft}function he(E,A,D){throw I(E,A,D)}function pe(E){return s.ignore.indexOf(E)===-1}function me(E){return E.trim()}function oe(E){return!!E}function xe(E){return E!==null}function ce(E){return E.types.length===0}function ie(E){return E.slice(0,E.length-1)}function Ae(E){return E[E.length-1]}function be(E,A,D){return Array.prototype.slice.call(E,A,D)}function re(E,A){return E.indexOf(A)!==-1}function Ne(E,A){for(var D=0;D<E.length;D++)if(re(A,E[D]))return!0;return!1}function De(E,A){for(var D=0;D<E.length;D++)if(A(E[D]))return E[D]}function Ye(E){for(var A={},D=0;D<E.length;D++)A[E[D]]=!0;return Object.keys(A)}function Be(E,A){return Array.prototype.concat.apply([],E.map(A))}function tt(E){for(var A="",D=0;D<E.length;D++){var C=E[D];if((typeof C.signatures=="object"||typeof C.signature=="string")&&C.name!==""){if(A==="")A=C.name;else if(A!==C.name){var B=new Error("Function names do not match (expected: "+A+", actual: "+C.name+")");throw B.data={actual:C.name,expected:A},B}}}return A}function je(E){var A,D={};function C(U,L){if(D.hasOwnProperty(U)&&L!==D[U])throw A=new Error('Signature "'+U+'" is defined twice'),A.data={signature:U},A}for(var B=0;B<E.length;B++){var X=E[B];if(typeof X.signatures=="object")for(var k in X.signatures)X.signatures.hasOwnProperty(k)&&(C(k,X.signatures[k]),D[k]=X.signatures[k]);else if(typeof X.signature=="string")C(X.signature,X),D[X.signature]=X;else throw A=new TypeError("Function is no typed-function (index: "+B+")"),A.data={index:B},A}return D}return s=J("typed",{"string, Object":J,Object:function(E){var A=[];for(var D in E)E.hasOwnProperty(D)&&A.push(E[D]);var C=tt(A);return J(C,E)},"...Function":function(E){return J(tt(E),je(E))},"string, ...Function":function(E,A){return J(E,je(A))}}),s.create=a,s.types=c,s.conversions=d,s.ignore=v,s.onMismatch=he,s.throwMismatchError=he,s.createError=I,s.convert=u,s.find=h,s.addType=function(E,A){if(!E||typeof E.name!="string"||typeof E.test!="function")throw new TypeError("Object with properties {name: string, test: function} expected");if(A!==!1){for(var D=0;D<s.types.length;D++)if(s.types[D].name==="Object"){s.types.splice(D,0,E);return}}s.types.push(E)},s.addConversion=function(E){if(!E||typeof E.from!="string"||typeof E.to!="string"||typeof E.convert!="function")throw new TypeError("Object with properties {from: string, to: string, convert: function} expected");s.conversions.push(E)},s}return a()})})(Qr);var ar=Qr.exports;function ye(e){return typeof e=="boolean"?!0:isFinite(e)?e===Math.round(e):!1}function It(e,t,r){var i={2:"0b",8:"0o",16:"0x"},n=i[t],a="";if(r){if(r<1)throw new Error("size must be in greater than 0");if(!ye(r))throw new Error("size must be an integer");if(e>2**(r-1)-1||e<-(2**(r-1)))throw new Error("Value must be in range [-2^".concat(r-1,", 2^").concat(r-1,"-1]"));if(!ye(e))throw new Error("Value must be an integer");e<0&&(e=e+2**r),a="i".concat(r)}var c="";return e<0&&(e=-e,c="-"),"".concat(c).concat(n).concat(e.toString(t)).concat(a)}function qt(e,t){if(typeof t=="function")return t(e);if(e===1/0)return"Infinity";if(e===-1/0)return"-Infinity";if(isNaN(e))return"NaN";var r="auto",i,n;if(t&&(t.notation&&(r=t.notation),le(t)?i=t:le(t.precision)&&(i=t.precision),t.wordSize&&(n=t.wordSize,typeof n!="number")))throw new Error('Option "wordSize" must be a number');switch(r){case"fixed":return qi(e,i);case"exponential":return en(e,i);case"engineering":return Ri(e,i);case"bin":return It(e,2,n);case"oct":return It(e,8,n);case"hex":return It(e,16,n);case"auto":return Ui(e,i,t&&t).replace(/((\.\d*?)(0+))($|e)/,function(){var a=arguments[2],c=arguments[4];return a!=="."?a+c:c});default:throw new Error('Unknown notation "'+r+'". Choose "auto", "exponential", "fixed", "bin", "oct", or "hex.')}}function Mt(e){var t=String(e).toLowerCase().match(/^(-?)(\d+\.?\d*)(e([+-]?\d+))?$/);if(!t)throw new SyntaxError("Invalid number "+e);var r=t[1],i=t[2],n=parseFloat(t[4]||"0"),a=i.indexOf(".");n+=a!==-1?a-1:i.length-1;var c=i.replace(".","").replace(/^0*/,function(p){return n-=p.length,""}).replace(/0*$/,"").split("").map(function(p){return parseInt(p)});return c.length===0&&(c.push(0),n++),{sign:r,coefficients:c,exponent:n}}function Ri(e,t){if(isNaN(e)||!isFinite(e))return String(e);var r=Mt(e),i=Et(r,t),n=i.exponent,a=i.coefficients,c=n%3===0?n:n<0?n-3-n%3:n-n%3;if(le(t))for(;t>a.length||n-c+1>a.length;)a.push(0);else for(var p=Math.abs(n-c)-(a.length-1),v=0;v<p;v++)a.push(0);for(var d=Math.abs(n-c),s=1;d>0;)s++,d--;var o=a.slice(s).join(""),f=le(t)&&o.length||o.match(/[1-9]/)?"."+o:"",l=a.slice(0,s).join("")+f+"e"+(n>=0?"+":"")+c.toString();return i.sign+l}function qi(e,t){if(isNaN(e)||!isFinite(e))return String(e);var r=Mt(e),i=typeof t=="number"?Et(r,r.exponent+1+t):r,n=i.coefficients,a=i.exponent+1,c=a+(t||0);return n.length<c&&(n=n.concat(it(c-n.length))),a<0&&(n=it(-a+1).concat(n),a=1),a<n.length&&n.splice(a,0,a===0?"0.":"."),i.sign+n.join("")}function en(e,t){if(isNaN(e)||!isFinite(e))return String(e);var r=Mt(e),i=t?Et(r,t):r,n=i.coefficients,a=i.exponent;n.length<t&&(n=n.concat(it(t-n.length)));var c=n.shift();return i.sign+c+(n.length>0?"."+n.join(""):"")+"e"+(a>=0?"+":"")+a}function Ui(e,t,r){if(isNaN(e)||!isFinite(e))return String(e);var i=r&&r.lowerExp!==void 0?r.lowerExp:-3,n=r&&r.upperExp!==void 0?r.upperExp:5,a=Mt(e),c=t?Et(a,t):a;if(c.exponent<i||c.exponent>=n)return en(e,t);var p=c.coefficients,v=c.exponent;p.length<t&&(p=p.concat(it(t-p.length))),p=p.concat(it(v-p.length+1+(p.length<t?t-p.length:0))),p=it(-v).concat(p);var d=v>0?v:0;return d<p.length-1&&p.splice(d+1,0,"."),c.sign+p.join("")}function Et(e,t){for(var r={sign:e.sign,coefficients:e.coefficients,exponent:e.exponent},i=r.coefficients;t<=0;)i.unshift(0),r.exponent++,t++;if(i.length>t){var n=i.splice(t,i.length-t);if(n[0]>=5){var a=t-1;for(i[a]++;i[a]===10;)i.pop(),a===0&&(i.unshift(0),r.exponent++,a++),a--,i[a]++}}return r}function it(e){for(var t=[],r=0;r<e;r++)t.push(0);return t}function Zi(e){return e.toExponential().replace(/e.*$/,"").replace(/^0\.?0*|\./,"").length}var Vi=Number.EPSILON||2220446049250313e-31;function mt(e,t,r){if(r==null)return e===t;if(e===t)return!0;if(isNaN(e)||isNaN(t))return!1;if(isFinite(e)&&isFinite(t)){var i=Math.abs(e-t);return i<Vi?!0:i<=Math.max(Math.abs(e),Math.abs(t))*r}return!1}function Pt(e,t,r){var i=e.constructor,n=new i(2),a="";if(r){if(r<1)throw new Error("size must be in greater than 0");if(!ye(r))throw new Error("size must be an integer");if(e.greaterThan(n.pow(r-1).sub(1))||e.lessThan(n.pow(r-1).mul(-1)))throw new Error("Value must be in range [-2^".concat(r-1,", 2^").concat(r-1,"-1]"));if(!e.isInteger())throw new Error("Value must be an integer");e.lessThan(0)&&(e=e.add(n.pow(r))),a="i".concat(r)}switch(t){case 2:return"".concat(e.toBinary()).concat(a);case 8:return"".concat(e.toOctal()).concat(a);case 16:return"".concat(e.toHexadecimal()).concat(a);default:throw new Error("Base ".concat(t," not supported "))}}function Yi(e,t){if(typeof t=="function")return t(e);if(!e.isFinite())return e.isNaN()?"NaN":e.gt(0)?"Infinity":"-Infinity";var r="auto",i,n;if(t!==void 0&&(t.notation&&(r=t.notation),typeof t=="number"?i=t:t.precision&&(i=t.precision),t.wordSize&&(n=t.wordSize,typeof n!="number")))throw new Error('Option "wordSize" must be a number');switch(r){case"fixed":return Hi(e,i);case"exponential":return or(e,i);case"engineering":return Xi(e,i);case"bin":return Pt(e,2,n);case"oct":return Pt(e,8,n);case"hex":return Pt(e,16,n);case"auto":{var a=t&&t.lowerExp!==void 0?t.lowerExp:-3,c=t&&t.upperExp!==void 0?t.upperExp:5;if(e.isZero())return"0";var p,v=e.toSignificantDigits(i),d=v.e;return d>=a&&d<c?p=v.toFixed():p=or(e,i),p.replace(/((\.\d*?)(0+))($|e)/,function(){var s=arguments[2],o=arguments[4];return s!=="."?s+o:o})}default:throw new Error('Unknown notation "'+r+'". Choose "auto", "exponential", "fixed", "bin", "oct", or "hex.')}}function Xi(e,t){var r=e.e,i=r%3===0?r:r<0?r-3-r%3:r-r%3,n=e.mul(Math.pow(10,-i)),a=n.toPrecision(t);return a.indexOf("e")!==-1&&(a=n.toString()),a+"e"+(r>=0?"+":"")+i.toString()}function or(e,t){return t!==void 0?e.toExponential(t-1):e.toExponential()}function Hi(e,t){return e.toFixed(t)}function ge(e,t){var r=ki(e,t);return t&&typeof t=="object"&&"truncate"in t&&r.length>t.truncate?r.substring(0,t.truncate-3)+"...":r}function ki(e,t){if(typeof e=="number")return qt(e,t);if(Ce(e))return Yi(e,t);if(Wi(e))return!t||t.fraction!=="decimal"?e.s*e.n+"/"+e.d:e.toString();if(Array.isArray(e))return tn(e,t);if(Ue(e))return'"'+e+'"';if(typeof e=="function")return e.syntax?String(e.syntax):"function";if(e&&typeof e=="object"){if(typeof e.format=="function")return e.format(t);if(e&&e.toString(t)!=={}.toString())return e.toString(t);var r=Object.keys(e).map(i=>'"'+i+'": '+ge(e[i],t));return"{"+r.join(", ")+"}"}return String(e)}function tn(e,t){if(Array.isArray(e)){for(var r="[",i=e.length,n=0;n<i;n++)n!==0&&(r+=", "),r+=tn(e[n],t);return r+="]",r}else return ge(e,t)}function Wi(e){return e&&typeof e=="object"&&typeof e.s=="number"&&typeof e.n=="number"&&typeof e.d=="number"||!1}function te(e,t,r){if(!(this instanceof te))throw new SyntaxError("Constructor must be called with the new operator");this.actual=e,this.expected=t,this.relation=r,this.message="Dimension mismatch ("+(Array.isArray(e)?"["+e.join(", ")+"]":e)+" "+(this.relation||"!=")+" "+(Array.isArray(t)?"["+t.join(", ")+"]":t)+")",this.stack=new Error().stack}te.prototype=new RangeError;te.prototype.constructor=RangeError;te.prototype.name="DimensionError";te.prototype.isDimensionError=!0;function ut(e,t,r){if(!(this instanceof ut))throw new SyntaxError("Constructor must be called with the new operator");this.index=e,arguments.length<3?(this.min=0,this.max=t):(this.min=t,this.max=r),this.min!==void 0&&this.index<this.min?this.message="Index out of range ("+this.index+" < "+this.min+")":this.max!==void 0&&this.index>=this.max?this.message="Index out of range ("+this.index+" > "+(this.max-1)+")":this.message="Index out of range ("+this.index+")",this.stack=new Error().stack}ut.prototype=new RangeError;ut.prototype.constructor=RangeError;ut.prototype.name="IndexError";ut.prototype.isIndexError=!0;function We(e){for(var t=[];Array.isArray(e);)t.push(e.length),e=e[0];return t}function rn(e,t,r){var i,n=e.length;if(n!==t[r])throw new te(n,t[r]);if(r<t.length-1){var a=r+1;for(i=0;i<n;i++){var c=e[i];if(!Array.isArray(c))throw new te(t.length-1,t.length,"<");rn(e[i],t,a)}}else for(i=0;i<n;i++)if(Array.isArray(e[i]))throw new te(t.length+1,t.length,">")}function sr(e,t){var r=t.length===0;if(r){if(Array.isArray(e))throw new te(e.length,0)}else rn(e,t,0)}function ue(e,t){if(!le(e)||!ye(e))throw new TypeError("Index must be an integer (value: "+e+")");if(e<0||typeof t=="number"&&e>=t)throw new ut(e,t)}function Ut(e,t,r){if(!Array.isArray(e)||!Array.isArray(t))throw new TypeError("Array expected");if(t.length===0)throw new Error("Resizing to scalar is not supported");t.forEach(function(n){if(!le(n)||!ye(n)||n<0)throw new TypeError("Invalid size, must contain positive integers (size: "+ge(t)+")")});var i=r!==void 0?r:0;return Zt(e,t,0,i),e}function Zt(e,t,r,i){var n,a,c=e.length,p=t[r],v=Math.min(c,p);if(e.length=p,r<t.length-1){var d=r+1;for(n=0;n<v;n++)a=e[n],Array.isArray(a)||(a=[a],e[n]=a),Zt(a,t,d,i);for(n=v;n<p;n++)a=[],e[n]=a,Zt(a,t,d,i)}else{for(n=0;n<v;n++)for(;Array.isArray(e[n]);)e[n]=e[n][0];for(n=v;n<p;n++)e[n]=i}}function Gi(e,t){var r=Ji(e),i=r.length;if(!Array.isArray(e)||!Array.isArray(t))throw new TypeError("Array expected");if(t.length===0)throw new te(0,i,"!=");t=jt(t,i);var n=nn(t);if(i!==n)throw new te(n,i,"!=");try{return Ki(r,t)}catch(a){throw a instanceof te?new te(n,i,"!="):a}}function jt(e,t){var r=nn(e),i=e.slice(),n=-1,a=e.indexOf(n),c=e.indexOf(n,a+1)>=0;if(c)throw new Error("More than one wildcard in sizes");var p=a>=0,v=t%r===0;if(p)if(v)i[a]=-t/r;else throw new Error("Could not replace wildcard, since "+t+" is no multiple of "+-r);return i}function nn(e){return e.reduce((t,r)=>t*r,1)}function Ki(e,t){for(var r=e,i,n=t.length-1;n>0;n--){var a=t[n];i=[];for(var c=r.length/a,p=0;p<c;p++)i.push(r.slice(p*a,(p+1)*a));r=i}return r}function an(e,t,r,i){var n=i||We(e);if(r)for(var a=0;a<r;a++)e=[e],n.unshift(1);for(e=on(e,t,0);n.length<t;)n.push(1);return e}function on(e,t,r){var i,n;if(Array.isArray(e)){var a=r+1;for(i=0,n=e.length;i<n;i++)e[i]=on(e[i],t,a)}else for(var c=r;c<t;c++)e=[e];return e}function Ji(e){if(!Array.isArray(e))return e;var t=[];return e.forEach(function r(i){Array.isArray(i)?i.forEach(r):t.push(i)}),t}function gt(e,t){for(var r,i=0,n=0;n<e.length;n++){var a=e[n],c=Array.isArray(a);if(n===0&&c&&(i=a.length),c&&a.length!==i)return;var p=c?gt(a,t):t(a);if(r===void 0)r=p;else if(r!==p)return"mixed"}return r}function j(e,t,r,i){function n(a){var c=Ti(a,t.map(ea));return ji(e,t,a),r(c)}return n.isFactory=!0,n.fn=e,n.dependencies=t.slice().sort(),i&&(n.meta=i),n}function ji(e,t,r){var i=t.filter(a=>!Qi(a)).every(a=>r[a]!==void 0);if(!i){var n=t.filter(a=>r[a]===void 0);throw new Error('Cannot create function "'.concat(e,'", ')+"some dependencies are missing: ".concat(n.map(a=>'"'.concat(a,'"')).join(", "),"."))}}function Qi(e){return e&&e[0]==="?"}function ea(e){return e&&e[0]==="?"?e.slice(1):e}function ta(e,t){if(un(e)&&sn(e,t))return e[t];throw typeof e[t]=="function"&&ia(e,t)?new Error('Cannot access method "'+t+'" as a property'):new Error('No access to property "'+t+'"')}function ra(e,t,r){if(un(e)&&sn(e,t))return e[t]=r,r;throw new Error('No access to property "'+t+'"')}function na(e,t){return t in e}function sn(e,t){return!e||typeof e!="object"?!1:ft(aa,t)?!0:!(t in Object.prototype||t in Function.prototype)}function ia(e,t){return e==null||typeof e[t]!="function"||ft(e,t)&&Object.getPrototypeOf&&t in Object.getPrototypeOf(e)?!1:ft(oa,t)?!0:!(t in Object.prototype||t in Function.prototype)}function un(e){return typeof e=="object"&&e&&e.constructor===Object}var aa={length:!0,name:!0},oa={toString:!0,valueOf:!0,toLocaleString:!0};class sa{constructor(t){this.wrappedObject=t}keys(){return Object.keys(this.wrappedObject)}get(t){return ta(this.wrappedObject,t)}set(t,r){return ra(this.wrappedObject,t,r),this}has(t){return na(this.wrappedObject,t)}}function ua(e){return e?e instanceof Map||e instanceof sa||typeof e.set=="function"&&typeof e.get=="function"&&typeof e.keys=="function"&&typeof e.has=="function":!1}var fn=function(){return fn=ar.create,ar},fa=["?BigNumber","?Complex","?DenseMatrix","?Fraction"],ca=j("typed",fa,function(t){var{BigNumber:r,Complex:i,DenseMatrix:n,Fraction:a}=t,c=fn();return c.types=[{name:"number",test:le},{name:"Complex",test:Gt},{name:"BigNumber",test:Ce},{name:"Fraction",test:Kt},{name:"Unit",test:Jt},{name:"string",test:Ue},{name:"Chain",test:Jr},{name:"Array",test:se},{name:"Matrix",test:_e},{name:"DenseMatrix",test:hi},{name:"SparseMatrix",test:pi},{name:"Range",test:kr},{name:"Index",test:Nt},{name:"boolean",test:vi},{name:"ResultSet",test:Wr},{name:"Help",test:Gr},{name:"function",test:di},{name:"Date",test:mi},{name:"RegExp",test:gi},{name:"null",test:yi},{name:"undefined",test:_i},{name:"AccessorNode",test:bi},{name:"ArrayNode",test:Ni},{name:"AssignmentNode",test:Mi},{name:"BlockNode",test:Ei},{name:"ConditionalNode",test:Si},{name:"ConstantNode",test:xi},{name:"FunctionNode",test:Ai},{name:"FunctionAssignmentNode",test:Ci},{name:"IndexNode",test:Di},{name:"Node",test:Kr},{name:"ObjectNode",test:Oi},{name:"OperatorNode",test:$i},{name:"ParenthesisNode",test:zi},{name:"RangeNode",test:Fi},{name:"SymbolNode",test:Ii},{name:"Map",test:ua},{name:"Object",test:wi}],c.conversions=[{from:"number",to:"BigNumber",convert:function(v){if(r||Tt(v),Zi(v)>15)throw new TypeError("Cannot implicitly convert a number with >15 significant digits to BigNumber (value: "+v+"). Use function bignumber(x) to convert to BigNumber.");return new r(v)}},{from:"number",to:"Complex",convert:function(v){return i||ht(v),new i(v,0)}},{from:"number",to:"string",convert:function(v){return v+""}},{from:"BigNumber",to:"Complex",convert:function(v){return i||ht(v),new i(v.toNumber(),0)}},{from:"Fraction",to:"BigNumber",convert:function(v){throw new TypeError("Cannot implicitly convert a Fraction to BigNumber or vice versa. Use function bignumber(x) to convert to BigNumber or fraction(x) to convert to Fraction.")}},{from:"Fraction",to:"Complex",convert:function(v){return i||ht(v),new i(v.valueOf(),0)}},{from:"number",to:"Fraction",convert:function(v){a||Bt(v);var d=new a(v);if(d.valueOf()!==v)throw new TypeError("Cannot implicitly convert a number to a Fraction when there will be a loss of precision (value: "+v+"). Use function fraction(x) to convert to Fraction.");return d}},{from:"string",to:"number",convert:function(v){var d=Number(v);if(isNaN(d))throw new Error('Cannot convert "'+v+'" to a number');return d}},{from:"string",to:"BigNumber",convert:function(v){r||Tt(v);try{return new r(v)}catch{throw new Error('Cannot convert "'+v+'" to BigNumber')}}},{from:"string",to:"Fraction",convert:function(v){a||Bt(v);try{return new a(v)}catch{throw new Error('Cannot convert "'+v+'" to Fraction')}}},{from:"string",to:"Complex",convert:function(v){i||ht(v);try{return new i(v)}catch{throw new Error('Cannot convert "'+v+'" to Complex')}}},{from:"boolean",to:"number",convert:function(v){return+v}},{from:"boolean",to:"BigNumber",convert:function(v){return r||Tt(v),new r(+v)}},{from:"boolean",to:"Fraction",convert:function(v){return a||Bt(v),new a(+v)}},{from:"boolean",to:"string",convert:function(v){return String(v)}},{from:"Array",to:"Matrix",convert:function(v){return n||la(),new n(v)}},{from:"Matrix",to:"Array",convert:function(v){return v.valueOf()}}],c});function Tt(e){throw new Error("Cannot convert value ".concat(e," into a BigNumber: no class 'BigNumber' provided"))}function ht(e){throw new Error("Cannot convert value ".concat(e," into a Complex number: no class 'Complex' provided"))}function la(){throw new Error("Cannot convert array into a Matrix: no class 'DenseMatrix' provided")}function Bt(e){throw new Error("Cannot convert value ".concat(e," into a Fraction, no class 'Fraction' provided."))}var nt=9e15,Ke=1e9,Vt="0123456789abcdef",wt="2.3025850929940456840179914546843642076011014886287729760333279009675726096773524802359972050895982983419677840422862486334095254650828067566662873690987816894829072083255546808437998948262331985283935053089653777326288461633662222876982198867465436674744042432743651550489343149393914796194044002221051017141748003688084012647080685567743216228355220114804663715659121373450747856947683463616792101806445070648000277502684916746550586856935673420670581136429224554405758925724208241314695689016758940256776311356919292033376587141660230105703089634572075440370847469940168269282808481184289314848524948644871927809676271275775397027668605952496716674183485704422507197965004714951050492214776567636938662976979522110718264549734772662425709429322582798502585509785265383207606726317164309505995087807523710333101197857547331541421808427543863591778117054309827482385045648019095610299291824318237525357709750539565187697510374970888692180205189339507238539205144634197265287286965110862571492198849978748873771345686209167058",yt="3.1415926535897932384626433832795028841971693993751058209749445923078164062862089986280348253421170679821480865132823066470938446095505822317253594081284811174502841027019385211055596446229489549303819644288109756659334461284756482337867831652712019091456485669234603486104543266482133936072602491412737245870066063155881748815209209628292540917153643678925903600113305305488204665213841469519415116094330572703657595919530921861173819326117931051185480744623799627495673518857527248912279381830119491298336733624406566430860213949463952247371907021798609437027705392171762931767523846748184676694051320005681271452635608277857713427577896091736371787214684409012249534301465495853710507922796892589235420199561121290219608640344181598136297747713099605187072113499999983729780499510597317328160963185950244594553469083026425223082533446850352619311881710100031378387528865875332083814206171776691473035982534904287554687311595628638823537875937519577818577805321712268066130019278766111959092164201989380952572010654858632789",Yt={precision:20,rounding:4,modulo:1,toExpNeg:-7,toExpPos:21,minE:-nt,maxE:nt,crypto:!1},cn,Ze,W=!0,St="[DecimalError] ",Ge=St+"Invalid argument: ",ln=St+"Precision limit exceeded",hn=St+"crypto unavailable",pn="[object Decimal]",Se=Math.floor,we=Math.pow,ha=/^0b([01]+(\.[01]*)?|\.[01]+)(p[+-]?\d+)?$/i,pa=/^0x([0-9a-f]+(\.[0-9a-f]*)?|\.[0-9a-f]+)(p[+-]?\d+)?$/i,va=/^0o([0-7]+(\.[0-7]*)?|\.[0-7]+)(p[+-]?\d+)?$/i,vn=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Te=1e7,H=7,da=9007199254740991,ma=wt.length-1,Xt=yt.length-1,z={toStringTag:pn};z.absoluteValue=z.abs=function(){var e=new this.constructor(this);return e.s<0&&(e.s=1),Z(e)};z.ceil=function(){return Z(new this.constructor(this),this.e+1,2)};z.clampedTo=z.clamp=function(e,t){var r,i=this,n=i.constructor;if(e=new n(e),t=new n(t),!e.s||!t.s)return new n(NaN);if(e.gt(t))throw Error(Ge+t);return r=i.cmp(e),r<0?e:i.cmp(t)>0?t:new n(i)};z.comparedTo=z.cmp=function(e){var t,r,i,n,a=this,c=a.d,p=(e=new a.constructor(e)).d,v=a.s,d=e.s;if(!c||!p)return!v||!d?NaN:v!==d?v:c===p?0:!c^v<0?1:-1;if(!c[0]||!p[0])return c[0]?v:p[0]?-d:0;if(v!==d)return v;if(a.e!==e.e)return a.e>e.e^v<0?1:-1;for(i=c.length,n=p.length,t=0,r=i<n?i:n;t<r;++t)if(c[t]!==p[t])return c[t]>p[t]^v<0?1:-1;return i===n?0:i>n^v<0?1:-1};z.cosine=z.cos=function(){var e,t,r=this,i=r.constructor;return r.d?r.d[0]?(e=i.precision,t=i.rounding,i.precision=e+Math.max(r.e,r.sd())+H,i.rounding=1,r=ga(i,yn(i,r)),i.precision=e,i.rounding=t,Z(Ze==2||Ze==3?r.neg():r,e,t,!0)):new i(1):new i(NaN)};z.cubeRoot=z.cbrt=function(){var e,t,r,i,n,a,c,p,v,d,s=this,o=s.constructor;if(!s.isFinite()||s.isZero())return new o(s);for(W=!1,a=s.s*we(s.s*s,1/3),!a||Math.abs(a)==1/0?(r=Me(s.d),e=s.e,(a=(e-r.length+1)%3)&&(r+=a==1||a==-2?"0":"00"),a=we(r,1/3),e=Se((e+1)/3)-(e%3==(e<0?-1:2)),a==1/0?r="5e"+e:(r=a.toExponential(),r=r.slice(0,r.indexOf("e")+1)+e),i=new o(r),i.s=s.s):i=new o(a.toString()),c=(e=o.precision)+3;;)if(p=i,v=p.times(p).times(p),d=v.plus(s),i=ne(d.plus(s).times(p),d.plus(v),c+2,1),Me(p.d).slice(0,c)===(r=Me(i.d)).slice(0,c))if(r=r.slice(c-3,c+1),r=="9999"||!n&&r=="4999"){if(!n&&(Z(p,e+1,0),p.times(p).times(p).eq(s))){i=p;break}c+=4,n=1}else{(!+r||!+r.slice(1)&&r.charAt(0)=="5")&&(Z(i,e+1,1),t=!i.times(i).times(i).eq(s));break}return W=!0,Z(i,e,o.rounding,t)};z.decimalPlaces=z.dp=function(){var e,t=this.d,r=NaN;if(t){if(e=t.length-1,r=(e-Se(this.e/H))*H,e=t[e],e)for(;e%10==0;e/=10)r--;r<0&&(r=0)}return r};z.dividedBy=z.div=function(e){return ne(this,new this.constructor(e))};z.dividedToIntegerBy=z.divToInt=function(e){var t=this,r=t.constructor;return Z(ne(t,new r(e),0,1,1),r.precision,r.rounding)};z.equals=z.eq=function(e){return this.cmp(e)===0};z.floor=function(){return Z(new this.constructor(this),this.e+1,3)};z.greaterThan=z.gt=function(e){return this.cmp(e)>0};z.greaterThanOrEqualTo=z.gte=function(e){var t=this.cmp(e);return t==1||t===0};z.hyperbolicCosine=z.cosh=function(){var e,t,r,i,n,a=this,c=a.constructor,p=new c(1);if(!a.isFinite())return new c(a.s?1/0:NaN);if(a.isZero())return p;r=c.precision,i=c.rounding,c.precision=r+Math.max(a.e,a.sd())+4,c.rounding=1,n=a.d.length,n<32?(e=Math.ceil(n/3),t=(1/Ct(4,e)).toString()):(e=16,t="2.3283064365386962890625e-10"),a=at(c,1,a.times(t),new c(1),!0);for(var v,d=e,s=new c(8);d--;)v=a.times(a),a=p.minus(v.times(s.minus(v.times(s))));return Z(a,c.precision=r,c.rounding=i,!0)};z.hyperbolicSine=z.sinh=function(){var e,t,r,i,n=this,a=n.constructor;if(!n.isFinite()||n.isZero())return new a(n);if(t=a.precision,r=a.rounding,a.precision=t+Math.max(n.e,n.sd())+4,a.rounding=1,i=n.d.length,i<3)n=at(a,2,n,n,!0);else{e=1.4*Math.sqrt(i),e=e>16?16:e|0,n=n.times(1/Ct(5,e)),n=at(a,2,n,n,!0);for(var c,p=new a(5),v=new a(16),d=new a(20);e--;)c=n.times(n),n=n.times(p.plus(c.times(v.times(c).plus(d))))}return a.precision=t,a.rounding=r,Z(n,t,r,!0)};z.hyperbolicTangent=z.tanh=function(){var e,t,r=this,i=r.constructor;return r.isFinite()?r.isZero()?new i(r):(e=i.precision,t=i.rounding,i.precision=e+7,i.rounding=1,ne(r.sinh(),r.cosh(),i.precision=e,i.rounding=t)):new i(r.s)};z.inverseCosine=z.acos=function(){var e,t=this,r=t.constructor,i=t.abs().cmp(1),n=r.precision,a=r.rounding;return i!==-1?i===0?t.isNeg()?Pe(r,n,a):new r(0):new r(NaN):t.isZero()?Pe(r,n+4,a).times(.5):(r.precision=n+6,r.rounding=1,t=t.asin(),e=Pe(r,n+4,a).times(.5),r.precision=n,r.rounding=a,e.minus(t))};z.inverseHyperbolicCosine=z.acosh=function(){var e,t,r=this,i=r.constructor;return r.lte(1)?new i(r.eq(1)?0:NaN):r.isFinite()?(e=i.precision,t=i.rounding,i.precision=e+Math.max(Math.abs(r.e),r.sd())+4,i.rounding=1,W=!1,r=r.times(r).minus(1).sqrt().plus(r),W=!0,i.precision=e,i.rounding=t,r.ln()):new i(r)};z.inverseHyperbolicSine=z.asinh=function(){var e,t,r=this,i=r.constructor;return!r.isFinite()||r.isZero()?new i(r):(e=i.precision,t=i.rounding,i.precision=e+2*Math.max(Math.abs(r.e),r.sd())+6,i.rounding=1,W=!1,r=r.times(r).plus(1).sqrt().plus(r),W=!0,i.precision=e,i.rounding=t,r.ln())};z.inverseHyperbolicTangent=z.atanh=function(){var e,t,r,i,n=this,a=n.constructor;return n.isFinite()?n.e>=0?new a(n.abs().eq(1)?n.s/0:n.isZero()?n:NaN):(e=a.precision,t=a.rounding,i=n.sd(),Math.max(i,e)<2*-n.e-1?Z(new a(n),e,t,!0):(a.precision=r=i-n.e,n=ne(n.plus(1),new a(1).minus(n),r+e,1),a.precision=e+4,a.rounding=1,n=n.ln(),a.precision=e,a.rounding=t,n.times(.5))):new a(NaN)};z.inverseSine=z.asin=function(){var e,t,r,i,n=this,a=n.constructor;return n.isZero()?new a(n):(t=n.abs().cmp(1),r=a.precision,i=a.rounding,t!==-1?t===0?(e=Pe(a,r+4,i).times(.5),e.s=n.s,e):new a(NaN):(a.precision=r+6,a.rounding=1,n=n.div(new a(1).minus(n.times(n)).sqrt().plus(1)).atan(),a.precision=r,a.rounding=i,n.times(2)))};z.inverseTangent=z.atan=function(){var e,t,r,i,n,a,c,p,v,d=this,s=d.constructor,o=s.precision,f=s.rounding;if(d.isFinite()){if(d.isZero())return new s(d);if(d.abs().eq(1)&&o+4<=Xt)return c=Pe(s,o+4,f).times(.25),c.s=d.s,c}else{if(!d.s)return new s(NaN);if(o+4<=Xt)return c=Pe(s,o+4,f).times(.5),c.s=d.s,c}for(s.precision=p=o+10,s.rounding=1,r=Math.min(28,p/H+2|0),e=r;e;--e)d=d.div(d.times(d).plus(1).sqrt().plus(1));for(W=!1,t=Math.ceil(p/H),i=1,v=d.times(d),c=new s(d),n=d;e!==-1;)if(n=n.times(v),a=c.minus(n.div(i+=2)),n=n.times(v),c=a.plus(n.div(i+=2)),c.d[t]!==void 0)for(e=t;c.d[e]===a.d[e]&&e--;);return r&&(c=c.times(2<<r-1)),W=!0,Z(c,s.precision=o,s.rounding=f,!0)};z.isFinite=function(){return!!this.d};z.isInteger=z.isInt=function(){return!!this.d&&Se(this.e/H)>this.d.length-2};z.isNaN=function(){return!this.s};z.isNegative=z.isNeg=function(){return this.s<0};z.isPositive=z.isPos=function(){return this.s>0};z.isZero=function(){return!!this.d&&this.d[0]===0};z.lessThan=z.lt=function(e){return this.cmp(e)<0};z.lessThanOrEqualTo=z.lte=function(e){return this.cmp(e)<1};z.logarithm=z.log=function(e){var t,r,i,n,a,c,p,v,d=this,s=d.constructor,o=s.precision,f=s.rounding,l=5;if(e==null)e=new s(10),t=!0;else{if(e=new s(e),r=e.d,e.s<0||!r||!r[0]||e.eq(1))return new s(NaN);t=e.eq(10)}if(r=d.d,d.s<0||!r||!r[0]||d.eq(1))return new s(r&&!r[0]?-1/0:d.s!=1?NaN:r?0:1/0);if(t)if(r.length>1)a=!0;else{for(n=r[0];n%10===0;)n/=10;a=n!==1}if(W=!1,p=o+l,c=He(d,p),i=t?_t(s,p+10):He(e,p),v=ne(c,i,p,1),ct(v.d,n=o,f))do if(p+=10,c=He(d,p),i=t?_t(s,p+10):He(e,p),v=ne(c,i,p,1),!a){+Me(v.d).slice(n+1,n+15)+1==1e14&&(v=Z(v,o+1,0));break}while(ct(v.d,n+=10,f));return W=!0,Z(v,o,f)};z.minus=z.sub=function(e){var t,r,i,n,a,c,p,v,d,s,o,f,l=this,h=l.constructor;if(e=new h(e),!l.d||!e.d)return!l.s||!e.s?e=new h(NaN):l.d?e.s=-e.s:e=new h(e.d||l.s!==e.s?l:NaN),e;if(l.s!=e.s)return e.s=-e.s,l.plus(e);if(d=l.d,f=e.d,p=h.precision,v=h.rounding,!d[0]||!f[0]){if(f[0])e.s=-e.s;else if(d[0])e=new h(l);else return new h(v===3?-0:0);return W?Z(e,p,v):e}if(r=Se(e.e/H),s=Se(l.e/H),d=d.slice(),a=s-r,a){for(o=a<0,o?(t=d,a=-a,c=f.length):(t=f,r=s,c=d.length),i=Math.max(Math.ceil(p/H),c)+2,a>i&&(a=i,t.length=1),t.reverse(),i=a;i--;)t.push(0);t.reverse()}else{for(i=d.length,c=f.length,o=i<c,o&&(c=i),i=0;i<c;i++)if(d[i]!=f[i]){o=d[i]<f[i];break}a=0}for(o&&(t=d,d=f,f=t,e.s=-e.s),c=d.length,i=f.length-c;i>0;--i)d[c++]=0;for(i=f.length;i>a;){if(d[--i]<f[i]){for(n=i;n&&d[--n]===0;)d[n]=Te-1;--d[n],d[i]+=Te}d[i]-=f[i]}for(;d[--c]===0;)d.pop();for(;d[0]===0;d.shift())--r;return d[0]?(e.d=d,e.e=xt(d,r),W?Z(e,p,v):e):new h(v===3?-0:0)};z.modulo=z.mod=function(e){var t,r=this,i=r.constructor;return e=new i(e),!r.d||!e.s||e.d&&!e.d[0]?new i(NaN):!e.d||r.d&&!r.d[0]?Z(new i(r),i.precision,i.rounding):(W=!1,i.modulo==9?(t=ne(r,e.abs(),0,3,1),t.s*=e.s):t=ne(r,e,0,i.modulo,1),t=t.times(e),W=!0,r.minus(t))};z.naturalExponential=z.exp=function(){return Ht(this)};z.naturalLogarithm=z.ln=function(){return He(this)};z.negated=z.neg=function(){var e=new this.constructor(this);return e.s=-e.s,Z(e)};z.plus=z.add=function(e){var t,r,i,n,a,c,p,v,d,s,o=this,f=o.constructor;if(e=new f(e),!o.d||!e.d)return!o.s||!e.s?e=new f(NaN):o.d||(e=new f(e.d||o.s===e.s?o:NaN)),e;if(o.s!=e.s)return e.s=-e.s,o.minus(e);if(d=o.d,s=e.d,p=f.precision,v=f.rounding,!d[0]||!s[0])return s[0]||(e=new f(o)),W?Z(e,p,v):e;if(a=Se(o.e/H),i=Se(e.e/H),d=d.slice(),n=a-i,n){for(n<0?(r=d,n=-n,c=s.length):(r=s,i=a,c=d.length),a=Math.ceil(p/H),c=a>c?a+1:c+1,n>c&&(n=c,r.length=1),r.reverse();n--;)r.push(0);r.reverse()}for(c=d.length,n=s.length,c-n<0&&(n=c,r=s,s=d,d=r),t=0;n;)t=(d[--n]=d[n]+s[n]+t)/Te|0,d[n]%=Te;for(t&&(d.unshift(t),++i),c=d.length;d[--c]==0;)d.pop();return e.d=d,e.e=xt(d,i),W?Z(e,p,v):e};z.precision=z.sd=function(e){var t,r=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(Ge+e);return r.d?(t=dn(r.d),e&&r.e+1>t&&(t=r.e+1)):t=NaN,t};z.round=function(){var e=this,t=e.constructor;return Z(new t(e),e.e+1,t.rounding)};z.sine=z.sin=function(){var e,t,r=this,i=r.constructor;return r.isFinite()?r.isZero()?new i(r):(e=i.precision,t=i.rounding,i.precision=e+Math.max(r.e,r.sd())+H,i.rounding=1,r=ya(i,yn(i,r)),i.precision=e,i.rounding=t,Z(Ze>2?r.neg():r,e,t,!0)):new i(NaN)};z.squareRoot=z.sqrt=function(){var e,t,r,i,n,a,c=this,p=c.d,v=c.e,d=c.s,s=c.constructor;if(d!==1||!p||!p[0])return new s(!d||d<0&&(!p||p[0])?NaN:p?c:1/0);for(W=!1,d=Math.sqrt(+c),d==0||d==1/0?(t=Me(p),(t.length+v)%2==0&&(t+="0"),d=Math.sqrt(t),v=Se((v+1)/2)-(v<0||v%2),d==1/0?t="5e"+v:(t=d.toExponential(),t=t.slice(0,t.indexOf("e")+1)+v),i=new s(t)):i=new s(d.toString()),r=(v=s.precision)+3;;)if(a=i,i=a.plus(ne(c,a,r+2,1)).times(.5),Me(a.d).slice(0,r)===(t=Me(i.d)).slice(0,r))if(t=t.slice(r-3,r+1),t=="9999"||!n&&t=="4999"){if(!n&&(Z(a,v+1,0),a.times(a).eq(c))){i=a;break}r+=4,n=1}else{(!+t||!+t.slice(1)&&t.charAt(0)=="5")&&(Z(i,v+1,1),e=!i.times(i).eq(c));break}return W=!0,Z(i,v,s.rounding,e)};z.tangent=z.tan=function(){var e,t,r=this,i=r.constructor;return r.isFinite()?r.isZero()?new i(r):(e=i.precision,t=i.rounding,i.precision=e+10,i.rounding=1,r=r.sin(),r.s=1,r=ne(r,new i(1).minus(r.times(r)).sqrt(),e+10,0),i.precision=e,i.rounding=t,Z(Ze==2||Ze==4?r.neg():r,e,t,!0)):new i(NaN)};z.times=z.mul=function(e){var t,r,i,n,a,c,p,v,d,s=this,o=s.constructor,f=s.d,l=(e=new o(e)).d;if(e.s*=s.s,!f||!f[0]||!l||!l[0])return new o(!e.s||f&&!f[0]&&!l||l&&!l[0]&&!f?NaN:!f||!l?e.s/0:e.s*0);for(r=Se(s.e/H)+Se(e.e/H),v=f.length,d=l.length,v<d&&(a=f,f=l,l=a,c=v,v=d,d=c),a=[],c=v+d,i=c;i--;)a.push(0);for(i=d;--i>=0;){for(t=0,n=v+i;n>i;)p=a[n]+l[i]*f[n-i-1]+t,a[n--]=p%Te|0,t=p/Te|0;a[n]=(a[n]+t)%Te|0}for(;!a[--c];)a.pop();return t?++r:a.shift(),e.d=a,e.e=xt(a,r),W?Z(e,o.precision,o.rounding):e};z.toBinary=function(e,t){return Qt(this,2,e,t)};z.toDecimalPlaces=z.toDP=function(e,t){var r=this,i=r.constructor;return r=new i(r),e===void 0?r:($e(e,0,Ke),t===void 0?t=i.rounding:$e(t,0,8),Z(r,e+r.e+1,t))};z.toExponential=function(e,t){var r,i=this,n=i.constructor;return e===void 0?r=qe(i,!0):($e(e,0,Ke),t===void 0?t=n.rounding:$e(t,0,8),i=Z(new n(i),e+1,t),r=qe(i,!0,e+1)),i.isNeg()&&!i.isZero()?"-"+r:r};z.toFixed=function(e,t){var r,i,n=this,a=n.constructor;return e===void 0?r=qe(n):($e(e,0,Ke),t===void 0?t=a.rounding:$e(t,0,8),i=Z(new a(n),e+n.e+1,t),r=qe(i,!1,e+i.e+1)),n.isNeg()&&!n.isZero()?"-"+r:r};z.toFraction=function(e){var t,r,i,n,a,c,p,v,d,s,o,f,l=this,h=l.d,u=l.constructor;if(!h)return new u(l);if(d=r=new u(1),i=v=new u(0),t=new u(i),a=t.e=dn(h)-l.e-1,c=a%H,t.d[0]=we(10,c<0?H+c:c),e==null)e=a>0?t:d;else{if(p=new u(e),!p.isInt()||p.lt(d))throw Error(Ge+p);e=p.gt(t)?a>0?t:d:p}for(W=!1,p=new u(Me(h)),s=u.precision,u.precision=a=h.length*H*2;o=ne(p,t,0,1,1),n=r.plus(o.times(i)),n.cmp(e)!=1;)r=i,i=n,n=d,d=v.plus(o.times(n)),v=n,n=t,t=p.minus(o.times(n)),p=n;return n=ne(e.minus(r),i,0,1,1),v=v.plus(n.times(d)),r=r.plus(n.times(i)),v.s=d.s=l.s,f=ne(d,i,a,1).minus(l).abs().cmp(ne(v,r,a,1).minus(l).abs())<1?[d,i]:[v,r],u.precision=s,W=!0,f};z.toHexadecimal=z.toHex=function(e,t){return Qt(this,16,e,t)};z.toNearest=function(e,t){var r=this,i=r.constructor;if(r=new i(r),e==null){if(!r.d)return r;e=new i(1),t=i.rounding}else{if(e=new i(e),t===void 0?t=i.rounding:$e(t,0,8),!r.d)return e.s?r:e;if(!e.d)return e.s&&(e.s=r.s),e}return e.d[0]?(W=!1,r=ne(r,e,0,t,1).times(e),W=!0,Z(r)):(e.s=r.s,r=e),r};z.toNumber=function(){return+this};z.toOctal=function(e,t){return Qt(this,8,e,t)};z.toPower=z.pow=function(e){var t,r,i,n,a,c,p=this,v=p.constructor,d=+(e=new v(e));if(!p.d||!e.d||!p.d[0]||!e.d[0])return new v(we(+p,d));if(p=new v(p),p.eq(1))return p;if(i=v.precision,a=v.rounding,e.eq(1))return Z(p,i,a);if(t=Se(e.e/H),t>=e.d.length-1&&(r=d<0?-d:d)<=da)return n=mn(v,p,r,i),e.s<0?new v(1).div(n):Z(n,i,a);if(c=p.s,c<0){if(t<e.d.length-1)return new v(NaN);if((e.d[t]&1)==0&&(c=1),p.e==0&&p.d[0]==1&&p.d.length==1)return p.s=c,p}return r=we(+p,d),t=r==0||!isFinite(r)?Se(d*(Math.log("0."+Me(p.d))/Math.LN10+p.e+1)):new v(r+"").e,t>v.maxE+1||t<v.minE-1?new v(t>0?c/0:0):(W=!1,v.rounding=p.s=1,r=Math.min(12,(t+"").length),n=Ht(e.times(He(p,i+r)),i),n.d&&(n=Z(n,i+5,1),ct(n.d,i,a)&&(t=i+10,n=Z(Ht(e.times(He(p,t+r)),t),t+5,1),+Me(n.d).slice(i+1,i+15)+1==1e14&&(n=Z(n,i+1,0)))),n.s=c,W=!0,v.rounding=a,Z(n,i,a))};z.toPrecision=function(e,t){var r,i=this,n=i.constructor;return e===void 0?r=qe(i,i.e<=n.toExpNeg||i.e>=n.toExpPos):($e(e,1,Ke),t===void 0?t=n.rounding:$e(t,0,8),i=Z(new n(i),e,t),r=qe(i,e<=i.e||i.e<=n.toExpNeg,e)),i.isNeg()&&!i.isZero()?"-"+r:r};z.toSignificantDigits=z.toSD=function(e,t){var r=this,i=r.constructor;return e===void 0?(e=i.precision,t=i.rounding):($e(e,1,Ke),t===void 0?t=i.rounding:$e(t,0,8)),Z(new i(r),e,t)};z.toString=function(){var e=this,t=e.constructor,r=qe(e,e.e<=t.toExpNeg||e.e>=t.toExpPos);return e.isNeg()&&!e.isZero()?"-"+r:r};z.truncated=z.trunc=function(){return Z(new this.constructor(this),this.e+1,1)};z.valueOf=z.toJSON=function(){var e=this,t=e.constructor,r=qe(e,e.e<=t.toExpNeg||e.e>=t.toExpPos);return e.isNeg()?"-"+r:r};function Me(e){var t,r,i,n=e.length-1,a="",c=e[0];if(n>0){for(a+=c,t=1;t<n;t++)i=e[t]+"",r=H-i.length,r&&(a+=Xe(r)),a+=i;c=e[t],i=c+"",r=H-i.length,r&&(a+=Xe(r))}else if(c===0)return"0";for(;c%10===0;)c/=10;return a+c}function $e(e,t,r){if(e!==~~e||e<t||e>r)throw Error(Ge+e)}function ct(e,t,r,i){var n,a,c,p;for(a=e[0];a>=10;a/=10)--t;return--t<0?(t+=H,n=0):(n=Math.ceil((t+1)/H),t%=H),a=we(10,H-t),p=e[n]%a|0,i==null?t<3?(t==0?p=p/100|0:t==1&&(p=p/10|0),c=r<4&&p==99999||r>3&&p==49999||p==5e4||p==0):c=(r<4&&p+1==a||r>3&&p+1==a/2)&&(e[n+1]/a/100|0)==we(10,t-2)-1||(p==a/2||p==0)&&(e[n+1]/a/100|0)==0:t<4?(t==0?p=p/1e3|0:t==1?p=p/100|0:t==2&&(p=p/10|0),c=(i||r<4)&&p==9999||!i&&r>3&&p==4999):c=((i||r<4)&&p+1==a||!i&&r>3&&p+1==a/2)&&(e[n+1]/a/1e3|0)==we(10,t-3)-1,c}function vt(e,t,r){for(var i,n=[0],a,c=0,p=e.length;c<p;){for(a=n.length;a--;)n[a]*=t;for(n[0]+=Vt.indexOf(e.charAt(c++)),i=0;i<n.length;i++)n[i]>r-1&&(n[i+1]===void 0&&(n[i+1]=0),n[i+1]+=n[i]/r|0,n[i]%=r)}return n.reverse()}function ga(e,t){var r,i,n;if(t.isZero())return t;i=t.d.length,i<32?(r=Math.ceil(i/3),n=(1/Ct(4,r)).toString()):(r=16,n="2.3283064365386962890625e-10"),e.precision+=r,t=at(e,1,t.times(n),new e(1));for(var a=r;a--;){var c=t.times(t);t=c.times(c).minus(c).times(8).plus(1)}return e.precision-=r,t}var ne=function(){function e(i,n,a){var c,p=0,v=i.length;for(i=i.slice();v--;)c=i[v]*n+p,i[v]=c%a|0,p=c/a|0;return p&&i.unshift(p),i}function t(i,n,a,c){var p,v;if(a!=c)v=a>c?1:-1;else for(p=v=0;p<a;p++)if(i[p]!=n[p]){v=i[p]>n[p]?1:-1;break}return v}function r(i,n,a,c){for(var p=0;a--;)i[a]-=p,p=i[a]<n[a]?1:0,i[a]=p*c+i[a]-n[a];for(;!i[0]&&i.length>1;)i.shift()}return function(i,n,a,c,p,v){var d,s,o,f,l,h,u,m,g,N,w,M,_,y,x,b,S,O,$,I,R=i.constructor,P=i.s==n.s?1:-1,T=i.d,F=n.d;if(!T||!T[0]||!F||!F[0])return new R(!i.s||!n.s||(T?F&&T[0]==F[0]:!F)?NaN:T&&T[0]==0||!F?P*0:P/0);for(v?(l=1,s=i.e-n.e):(v=Te,l=H,s=Se(i.e/l)-Se(n.e/l)),$=F.length,S=T.length,g=new R(P),N=g.d=[],o=0;F[o]==(T[o]||0);o++);if(F[o]>(T[o]||0)&&s--,a==null?(y=a=R.precision,c=R.rounding):p?y=a+(i.e-n.e)+1:y=a,y<0)N.push(1),h=!0;else{if(y=y/l+2|0,o=0,$==1){for(f=0,F=F[0],y++;(o<S||f)&&y--;o++)x=f*v+(T[o]||0),N[o]=x/F|0,f=x%F|0;h=f||o<S}else{for(f=v/(F[0]+1)|0,f>1&&(F=e(F,f,v),T=e(T,f,v),$=F.length,S=T.length),b=$,w=T.slice(0,$),M=w.length;M<$;)w[M++]=0;I=F.slice(),I.unshift(0),O=F[0],F[1]>=v/2&&++O;do f=0,d=t(F,w,$,M),d<0?(_=w[0],$!=M&&(_=_*v+(w[1]||0)),f=_/O|0,f>1?(f>=v&&(f=v-1),u=e(F,f,v),m=u.length,M=w.length,d=t(u,w,m,M),d==1&&(f--,r(u,$<m?I:F,m,v))):(f==0&&(d=f=1),u=F.slice()),m=u.length,m<M&&u.unshift(0),r(w,u,M,v),d==-1&&(M=w.length,d=t(F,w,$,M),d<1&&(f++,r(w,$<M?I:F,M,v))),M=w.length):d===0&&(f++,w=[0]),N[o++]=f,d&&w[0]?w[M++]=T[b]||0:(w=[T[b]],M=1);while((b++<S||w[0]!==void 0)&&y--);h=w[0]!==void 0}N[0]||N.shift()}if(l==1)g.e=s,cn=h;else{for(o=1,f=N[0];f>=10;f/=10)o++;g.e=o+s*l-1,Z(g,p?a+g.e+1:a,c,h)}return g}}();function Z(e,t,r,i){var n,a,c,p,v,d,s,o,f,l=e.constructor;e:if(t!=null){if(o=e.d,!o)return e;for(n=1,p=o[0];p>=10;p/=10)n++;if(a=t-n,a<0)a+=H,c=t,s=o[f=0],v=s/we(10,n-c-1)%10|0;else if(f=Math.ceil((a+1)/H),p=o.length,f>=p)if(i){for(;p++<=f;)o.push(0);s=v=0,n=1,a%=H,c=a-H+1}else break e;else{for(s=p=o[f],n=1;p>=10;p/=10)n++;a%=H,c=a-H+n,v=c<0?0:s/we(10,n-c-1)%10|0}if(i=i||t<0||o[f+1]!==void 0||(c<0?s:s%we(10,n-c-1)),d=r<4?(v||i)&&(r==0||r==(e.s<0?3:2)):v>5||v==5&&(r==4||i||r==6&&(a>0?c>0?s/we(10,n-c):0:o[f-1])%10&1||r==(e.s<0?8:7)),t<1||!o[0])return o.length=0,d?(t-=e.e+1,o[0]=we(10,(H-t%H)%H),e.e=-t||0):o[0]=e.e=0,e;if(a==0?(o.length=f,p=1,f--):(o.length=f+1,p=we(10,H-a),o[f]=c>0?(s/we(10,n-c)%we(10,c)|0)*p:0),d)for(;;)if(f==0){for(a=1,c=o[0];c>=10;c/=10)a++;for(c=o[0]+=p,p=1;c>=10;c/=10)p++;a!=p&&(e.e++,o[0]==Te&&(o[0]=1));break}else{if(o[f]+=p,o[f]!=Te)break;o[f--]=0,p=1}for(a=o.length;o[--a]===0;)o.pop()}return W&&(e.e>l.maxE?(e.d=null,e.e=NaN):e.e<l.minE&&(e.e=0,e.d=[0])),e}function qe(e,t,r){if(!e.isFinite())return wn(e);var i,n=e.e,a=Me(e.d),c=a.length;return t?(r&&(i=r-c)>0?a=a.charAt(0)+"."+a.slice(1)+Xe(i):c>1&&(a=a.charAt(0)+"."+a.slice(1)),a=a+(e.e<0?"e":"e+")+e.e):n<0?(a="0."+Xe(-n-1)+a,r&&(i=r-c)>0&&(a+=Xe(i))):n>=c?(a+=Xe(n+1-c),r&&(i=r-n-1)>0&&(a=a+"."+Xe(i))):((i=n+1)<c&&(a=a.slice(0,i)+"."+a.slice(i)),r&&(i=r-c)>0&&(n+1===c&&(a+="."),a+=Xe(i))),a}function xt(e,t){var r=e[0];for(t*=H;r>=10;r/=10)t++;return t}function _t(e,t,r){if(t>ma)throw W=!0,r&&(e.precision=r),Error(ln);return Z(new e(wt),t,1,!0)}function Pe(e,t,r){if(t>Xt)throw Error(ln);return Z(new e(yt),t,r,!0)}function dn(e){var t=e.length-1,r=t*H+1;if(t=e[t],t){for(;t%10==0;t/=10)r--;for(t=e[0];t>=10;t/=10)r++}return r}function Xe(e){for(var t="";e--;)t+="0";return t}function mn(e,t,r,i){var n,a=new e(1),c=Math.ceil(i/H+4);for(W=!1;;){if(r%2&&(a=a.times(t),fr(a.d,c)&&(n=!0)),r=Se(r/2),r===0){r=a.d.length-1,n&&a.d[r]===0&&++a.d[r];break}t=t.times(t),fr(t.d,c)}return W=!0,a}function ur(e){return e.d[e.d.length-1]&1}function gn(e,t,r){for(var i,n=new e(t[0]),a=0;++a<t.length;)if(i=new e(t[a]),i.s)n[r](i)&&(n=i);else{n=i;break}return n}function Ht(e,t){var r,i,n,a,c,p,v,d=0,s=0,o=0,f=e.constructor,l=f.rounding,h=f.precision;if(!e.d||!e.d[0]||e.e>17)return new f(e.d?e.d[0]?e.s<0?0:1/0:1:e.s?e.s<0?0:e:0/0);for(t==null?(W=!1,v=h):v=t,p=new f(.03125);e.e>-2;)e=e.times(p),o+=5;for(i=Math.log(we(2,o))/Math.LN10*2+5|0,v+=i,r=a=c=new f(1),f.precision=v;;){if(a=Z(a.times(e),v,1),r=r.times(++s),p=c.plus(ne(a,r,v,1)),Me(p.d).slice(0,v)===Me(c.d).slice(0,v)){for(n=o;n--;)c=Z(c.times(c),v,1);if(t==null)if(d<3&&ct(c.d,v-i,l,d))f.precision=v+=10,r=a=p=new f(1),s=0,d++;else return Z(c,f.precision=h,l,W=!0);else return f.precision=h,c}c=p}}function He(e,t){var r,i,n,a,c,p,v,d,s,o,f,l=1,h=10,u=e,m=u.d,g=u.constructor,N=g.rounding,w=g.precision;if(u.s<0||!m||!m[0]||!u.e&&m[0]==1&&m.length==1)return new g(m&&!m[0]?-1/0:u.s!=1?NaN:m?0:u);if(t==null?(W=!1,s=w):s=t,g.precision=s+=h,r=Me(m),i=r.charAt(0),Math.abs(a=u.e)<15e14){for(;i<7&&i!=1||i==1&&r.charAt(1)>3;)u=u.times(e),r=Me(u.d),i=r.charAt(0),l++;a=u.e,i>1?(u=new g("0."+r),a++):u=new g(i+"."+r.slice(1))}else return d=_t(g,s+2,w).times(a+""),u=He(new g(i+"."+r.slice(1)),s-h).plus(d),g.precision=w,t==null?Z(u,w,N,W=!0):u;for(o=u,v=c=u=ne(u.minus(1),u.plus(1),s,1),f=Z(u.times(u),s,1),n=3;;){if(c=Z(c.times(f),s,1),d=v.plus(ne(c,new g(n),s,1)),Me(d.d).slice(0,s)===Me(v.d).slice(0,s))if(v=v.times(2),a!==0&&(v=v.plus(_t(g,s+2,w).times(a+""))),v=ne(v,new g(l),s,1),t==null)if(ct(v.d,s-h,N,p))g.precision=s+=h,d=c=u=ne(o.minus(1),o.plus(1),s,1),f=Z(u.times(u),s,1),n=p=1;else return Z(v,g.precision=w,N,W=!0);else return g.precision=w,v;v=d,n+=2}}function wn(e){return String(e.s*e.s/0)}function kt(e,t){var r,i,n;for((r=t.indexOf("."))>-1&&(t=t.replace(".","")),(i=t.search(/e/i))>0?(r<0&&(r=i),r+=+t.slice(i+1),t=t.substring(0,i)):r<0&&(r=t.length),i=0;t.charCodeAt(i)===48;i++);for(n=t.length;t.charCodeAt(n-1)===48;--n);if(t=t.slice(i,n),t){if(n-=i,e.e=r=r-i-1,e.d=[],i=(r+1)%H,r<0&&(i+=H),i<n){for(i&&e.d.push(+t.slice(0,i)),n-=H;i<n;)e.d.push(+t.slice(i,i+=H));t=t.slice(i),i=H-t.length}else i-=n;for(;i--;)t+="0";e.d.push(+t),W&&(e.e>e.constructor.maxE?(e.d=null,e.e=NaN):e.e<e.constructor.minE&&(e.e=0,e.d=[0]))}else e.e=0,e.d=[0];return e}function wa(e,t){var r,i,n,a,c,p,v,d,s;if(t.indexOf("_")>-1){if(t=t.replace(/(\d)_(?=\d)/g,"$1"),vn.test(t))return kt(e,t)}else if(t==="Infinity"||t==="NaN")return+t||(e.s=NaN),e.e=NaN,e.d=null,e;if(pa.test(t))r=16,t=t.toLowerCase();else if(ha.test(t))r=2;else if(va.test(t))r=8;else throw Error(Ge+t);for(a=t.search(/p/i),a>0?(v=+t.slice(a+1),t=t.substring(2,a)):t=t.slice(2),a=t.indexOf("."),c=a>=0,i=e.constructor,c&&(t=t.replace(".",""),p=t.length,a=p-a,n=mn(i,new i(r),a,a*2)),d=vt(t,r,Te),s=d.length-1,a=s;d[a]===0;--a)d.pop();return a<0?new i(e.s*0):(e.e=xt(d,s),e.d=d,W=!1,c&&(e=ne(e,n,p*4)),v&&(e=e.times(Math.abs(v)<54?we(2,v):ot.pow(2,v))),W=!0,e)}function ya(e,t){var r,i=t.d.length;if(i<3)return t.isZero()?t:at(e,2,t,t);r=1.4*Math.sqrt(i),r=r>16?16:r|0,t=t.times(1/Ct(5,r)),t=at(e,2,t,t);for(var n,a=new e(5),c=new e(16),p=new e(20);r--;)n=t.times(t),t=t.times(a.plus(n.times(c.times(n).minus(p))));return t}function at(e,t,r,i,n){var a,c,p,v,d=e.precision,s=Math.ceil(d/H);for(W=!1,v=r.times(r),p=new e(i);;){if(c=ne(p.times(v),new e(t++*t++),d,1),p=n?i.plus(c):i.minus(c),i=ne(c.times(v),new e(t++*t++),d,1),c=p.plus(i),c.d[s]!==void 0){for(a=s;c.d[a]===p.d[a]&&a--;);if(a==-1)break}a=p,p=i,i=c,c=a}return W=!0,c.d.length=s+1,c}function Ct(e,t){for(var r=e;--t;)r*=e;return r}function yn(e,t){var r,i=t.s<0,n=Pe(e,e.precision,1),a=n.times(.5);if(t=t.abs(),t.lte(a))return Ze=i?4:1,t;if(r=t.divToInt(n),r.isZero())Ze=i?3:2;else{if(t=t.minus(r.times(n)),t.lte(a))return Ze=ur(r)?i?2:3:i?4:1,t;Ze=ur(r)?i?1:4:i?3:2}return t.minus(n).abs()}function Qt(e,t,r,i){var n,a,c,p,v,d,s,o,f,l=e.constructor,h=r!==void 0;if(h?($e(r,1,Ke),i===void 0?i=l.rounding:$e(i,0,8)):(r=l.precision,i=l.rounding),!e.isFinite())s=wn(e);else{for(s=qe(e),c=s.indexOf("."),h?(n=2,t==16?r=r*4-3:t==8&&(r=r*3-2)):n=t,c>=0&&(s=s.replace(".",""),f=new l(1),f.e=s.length-c,f.d=vt(qe(f),10,n),f.e=f.d.length),o=vt(s,10,n),a=v=o.length;o[--v]==0;)o.pop();if(!o[0])s=h?"0p+0":"0";else{if(c<0?a--:(e=new l(e),e.d=o,e.e=a,e=ne(e,f,r,i,0,n),o=e.d,a=e.e,d=cn),c=o[r],p=n/2,d=d||o[r+1]!==void 0,d=i<4?(c!==void 0||d)&&(i===0||i===(e.s<0?3:2)):c>p||c===p&&(i===4||d||i===6&&o[r-1]&1||i===(e.s<0?8:7)),o.length=r,d)for(;++o[--r]>n-1;)o[r]=0,r||(++a,o.unshift(1));for(v=o.length;!o[v-1];--v);for(c=0,s="";c<v;c++)s+=Vt.charAt(o[c]);if(h){if(v>1)if(t==16||t==8){for(c=t==16?4:3,--v;v%c;v++)s+="0";for(o=vt(s,n,t),v=o.length;!o[v-1];--v);for(c=1,s="1.";c<v;c++)s+=Vt.charAt(o[c])}else s=s.charAt(0)+"."+s.slice(1);s=s+(a<0?"p":"p+")+a}else if(a<0){for(;++a;)s="0"+s;s="0."+s}else if(++a>v)for(a-=v;a--;)s+="0";else a<v&&(s=s.slice(0,a)+"."+s.slice(a))}s=(t==16?"0x":t==2?"0b":t==8?"0o":"")+s}return e.s<0?"-"+s:s}function fr(e,t){if(e.length>t)return e.length=t,!0}function _a(e){return new this(e).abs()}function ba(e){return new this(e).acos()}function Na(e){return new this(e).acosh()}function Ma(e,t){return new this(e).plus(t)}function Ea(e){return new this(e).asin()}function Sa(e){return new this(e).asinh()}function xa(e){return new this(e).atan()}function Ca(e){return new this(e).atanh()}function Aa(e,t){e=new this(e),t=new this(t);var r,i=this.precision,n=this.rounding,a=i+4;return!e.s||!t.s?r=new this(NaN):!e.d&&!t.d?(r=Pe(this,a,1).times(t.s>0?.25:.75),r.s=e.s):!t.d||e.isZero()?(r=t.s<0?Pe(this,i,n):new this(0),r.s=e.s):!e.d||t.isZero()?(r=Pe(this,a,1).times(.5),r.s=e.s):t.s<0?(this.precision=a,this.rounding=1,r=this.atan(ne(e,t,a,1)),t=Pe(this,a,1),this.precision=i,this.rounding=n,r=e.s<0?r.minus(t):r.plus(t)):r=this.atan(ne(e,t,a,1)),r}function Da(e){return new this(e).cbrt()}function Oa(e){return Z(e=new this(e),e.e+1,2)}function $a(e,t,r){return new this(e).clamp(t,r)}function za(e){if(!e||typeof e!="object")throw Error(St+"Object expected");var t,r,i,n=e.defaults===!0,a=["precision",1,Ke,"rounding",0,8,"toExpNeg",-nt,0,"toExpPos",0,nt,"maxE",0,nt,"minE",-nt,0,"modulo",0,9];for(t=0;t<a.length;t+=3)if(r=a[t],n&&(this[r]=Yt[r]),(i=e[r])!==void 0)if(Se(i)===i&&i>=a[t+1]&&i<=a[t+2])this[r]=i;else throw Error(Ge+r+": "+i);if(r="crypto",n&&(this[r]=Yt[r]),(i=e[r])!==void 0)if(i===!0||i===!1||i===0||i===1)if(i)if(typeof crypto!="undefined"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))this[r]=!0;else throw Error(hn);else this[r]=!1;else throw Error(Ge+r+": "+i);return this}function Fa(e){return new this(e).cos()}function Ia(e){return new this(e).cosh()}function _n(e){var t,r,i;function n(a){var c,p,v,d=this;if(!(d instanceof n))return new n(a);if(d.constructor=n,cr(a)){d.s=a.s,W?!a.d||a.e>n.maxE?(d.e=NaN,d.d=null):a.e<n.minE?(d.e=0,d.d=[0]):(d.e=a.e,d.d=a.d.slice()):(d.e=a.e,d.d=a.d?a.d.slice():a.d);return}if(v=typeof a,v==="number"){if(a===0){d.s=1/a<0?-1:1,d.e=0,d.d=[0];return}if(a<0?(a=-a,d.s=-1):d.s=1,a===~~a&&a<1e7){for(c=0,p=a;p>=10;p/=10)c++;W?c>n.maxE?(d.e=NaN,d.d=null):c<n.minE?(d.e=0,d.d=[0]):(d.e=c,d.d=[a]):(d.e=c,d.d=[a]);return}else if(a*0!==0){a||(d.s=NaN),d.e=NaN,d.d=null;return}return kt(d,a.toString())}else if(v!=="string")throw Error(Ge+a);return(p=a.charCodeAt(0))===45?(a=a.slice(1),d.s=-1):(p===43&&(a=a.slice(1)),d.s=1),vn.test(a)?kt(d,a):wa(d,a)}if(n.prototype=z,n.ROUND_UP=0,n.ROUND_DOWN=1,n.ROUND_CEIL=2,n.ROUND_FLOOR=3,n.ROUND_HALF_UP=4,n.ROUND_HALF_DOWN=5,n.ROUND_HALF_EVEN=6,n.ROUND_HALF_CEIL=7,n.ROUND_HALF_FLOOR=8,n.EUCLID=9,n.config=n.set=za,n.clone=_n,n.isDecimal=cr,n.abs=_a,n.acos=ba,n.acosh=Na,n.add=Ma,n.asin=Ea,n.asinh=Sa,n.atan=xa,n.atanh=Ca,n.atan2=Aa,n.cbrt=Da,n.ceil=Oa,n.clamp=$a,n.cos=Fa,n.cosh=Ia,n.div=Pa,n.exp=Ta,n.floor=Ba,n.hypot=La,n.ln=Ra,n.log=qa,n.log10=Za,n.log2=Ua,n.max=Va,n.min=Ya,n.mod=Xa,n.mul=Ha,n.pow=ka,n.random=Wa,n.round=Ga,n.sign=Ka,n.sin=Ja,n.sinh=ja,n.sqrt=Qa,n.sub=eo,n.sum=to,n.tan=ro,n.tanh=no,n.trunc=io,e===void 0&&(e={}),e&&e.defaults!==!0)for(i=["precision","rounding","toExpNeg","toExpPos","maxE","minE","modulo","crypto"],t=0;t<i.length;)e.hasOwnProperty(r=i[t++])||(e[r]=this[r]);return n.config(e),n}function Pa(e,t){return new this(e).div(t)}function Ta(e){return new this(e).exp()}function Ba(e){return Z(e=new this(e),e.e+1,3)}function La(){var e,t,r=new this(0);for(W=!1,e=0;e<arguments.length;)if(t=new this(arguments[e++]),t.d)r.d&&(r=r.plus(t.times(t)));else{if(t.s)return W=!0,new this(1/0);r=t}return W=!0,r.sqrt()}function cr(e){return e instanceof ot||e&&e.toStringTag===pn||!1}function Ra(e){return new this(e).ln()}function qa(e,t){return new this(e).log(t)}function Ua(e){return new this(e).log(2)}function Za(e){return new this(e).log(10)}function Va(){return gn(this,arguments,"lt")}function Ya(){return gn(this,arguments,"gt")}function Xa(e,t){return new this(e).mod(t)}function Ha(e,t){return new this(e).mul(t)}function ka(e,t){return new this(e).pow(t)}function Wa(e){var t,r,i,n,a=0,c=new this(1),p=[];if(e===void 0?e=this.precision:$e(e,1,Ke),i=Math.ceil(e/H),this.crypto)if(crypto.getRandomValues)for(t=crypto.getRandomValues(new Uint32Array(i));a<i;)n=t[a],n>=429e7?t[a]=crypto.getRandomValues(new Uint32Array(1))[0]:p[a++]=n%1e7;else if(crypto.randomBytes){for(t=crypto.randomBytes(i*=4);a<i;)n=t[a]+(t[a+1]<<8)+(t[a+2]<<16)+((t[a+3]&127)<<24),n>=214e7?crypto.randomBytes(4).copy(t,a):(p.push(n%1e7),a+=4);a=i/4}else throw Error(hn);else for(;a<i;)p[a++]=Math.random()*1e7|0;for(i=p[--a],e%=H,i&&e&&(n=we(10,H-e),p[a]=(i/n|0)*n);p[a]===0;a--)p.pop();if(a<0)r=0,p=[0];else{for(r=-1;p[0]===0;r-=H)p.shift();for(i=1,n=p[0];n>=10;n/=10)i++;i<H&&(r-=H-i)}return c.e=r,c.d=p,c}function Ga(e){return Z(e=new this(e),e.e+1,this.rounding)}function Ka(e){return e=new this(e),e.d?e.d[0]?e.s:0*e.s:e.s||NaN}function Ja(e){return new this(e).sin()}function ja(e){return new this(e).sinh()}function Qa(e){return new this(e).sqrt()}function eo(e,t){return new this(e).sub(t)}function to(){var e=0,t=arguments,r=new this(t[e]);for(W=!1;r.s&&++e<t.length;)r=r.plus(t[e]);return W=!0,Z(r,this.precision,this.rounding)}function ro(e){return new this(e).tan()}function no(e){return new this(e).tanh()}function io(e){return Z(e=new this(e),e.e+1,1)}z[Symbol.for("nodejs.util.inspect.custom")]=z.toString;z[Symbol.toStringTag]="Decimal";var ot=z.constructor=_n(Yt);wt=new ot(wt);yt=new ot(yt);var ao="BigNumber",oo=["?on","config"],so=j(ao,oo,e=>{var{on:t,config:r}=e,i=ot.clone({precision:r.precision,modulo:ot.EUCLID});return i.prototype=Object.create(i.prototype),i.prototype.type="BigNumber",i.prototype.isBigNumber=!0,i.prototype.toJSON=function(){return{mathjs:"BigNumber",value:this.toString()}},i.fromJSON=function(n){return new i(n.value)},t&&t("config",function(n,a){n.precision!==a.precision&&i.config({precision:n.precision})}),i},{isClass:!0}),bn={exports:{}};/**
 * @license Complex.js v2.1.1 12/05/2020
 *
 * Copyright (c) 2020, Robert Eisele (robert@xarg.org)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 **/(function(e,t){(function(r){var i=Math.cosh||function(o){return Math.abs(o)<1e-9?1-o:(Math.exp(o)+Math.exp(-o))*.5},n=Math.sinh||function(o){return Math.abs(o)<1e-9?o:(Math.exp(o)-Math.exp(-o))*.5},a=function(o){var f=Math.PI/4;if(-f>o||o>f)return Math.cos(o)-1;var l=o*o;return l*(l*(l*(l*(l*(l*(l*(l/20922789888e3-1/87178291200)+1/479001600)-1/3628800)+1/40320)-1/720)+1/24)-1/2)},c=function(o,f){var l=Math.abs(o),h=Math.abs(f);return l<3e3&&h<3e3?Math.sqrt(l*l+h*h):(l<h?(l=h,h=o/f):h=f/o,l*Math.sqrt(1+h*h))},p=function(){throw SyntaxError("Invalid Param")};function v(o,f){var l=Math.abs(o),h=Math.abs(f);return o===0?Math.log(h):f===0?Math.log(l):l<3e3&&h<3e3?Math.log(o*o+f*f)*.5:(o=o/2,f=f/2,.5*Math.log(o*o+f*f)+Math.LN2)}var d=function(o,f){var l={re:0,im:0};if(o==null)l.re=l.im=0;else if(f!==void 0)l.re=o,l.im=f;else switch(typeof o){case"object":if("im"in o&&"re"in o)l.re=o.re,l.im=o.im;else if("abs"in o&&"arg"in o){if(!Number.isFinite(o.abs)&&Number.isFinite(o.arg))return s.INFINITY;l.re=o.abs*Math.cos(o.arg),l.im=o.abs*Math.sin(o.arg)}else if("r"in o&&"phi"in o){if(!Number.isFinite(o.r)&&Number.isFinite(o.phi))return s.INFINITY;l.re=o.r*Math.cos(o.phi),l.im=o.r*Math.sin(o.phi)}else o.length===2?(l.re=o[0],l.im=o[1]):p();break;case"string":l.im=l.re=0;var h=o.match(/\d+\.?\d*e[+-]?\d+|\d+\.?\d*|\.\d+|./g),u=1,m=0;h===null&&p();for(var g=0;g<h.length;g++){var N=h[g];N===" "||N==="	"||N===`
`||(N==="+"?u++:N==="-"?m++:N==="i"||N==="I"?(u+m===0&&p(),h[g+1]!==" "&&!isNaN(h[g+1])?(l.im+=parseFloat((m%2?"-":"")+h[g+1]),g++):l.im+=parseFloat((m%2?"-":"")+"1"),u=m=0):((u+m===0||isNaN(N))&&p(),h[g+1]==="i"||h[g+1]==="I"?(l.im+=parseFloat((m%2?"-":"")+N),g++):l.re+=parseFloat((m%2?"-":"")+N),u=m=0))}u+m>0&&p();break;case"number":l.im=0,l.re=o;break;default:p()}return isNaN(l.re)||isNaN(l.im),l};function s(o,f){if(!(this instanceof s))return new s(o,f);var l=d(o,f);this.re=l.re,this.im=l.im}s.prototype={re:0,im:0,sign:function(){var o=this.abs();return new s(this.re/o,this.im/o)},add:function(o,f){var l=new s(o,f);return this.isInfinite()&&l.isInfinite()?s.NAN:this.isInfinite()||l.isInfinite()?s.INFINITY:new s(this.re+l.re,this.im+l.im)},sub:function(o,f){var l=new s(o,f);return this.isInfinite()&&l.isInfinite()?s.NAN:this.isInfinite()||l.isInfinite()?s.INFINITY:new s(this.re-l.re,this.im-l.im)},mul:function(o,f){var l=new s(o,f);return this.isInfinite()&&l.isZero()||this.isZero()&&l.isInfinite()?s.NAN:this.isInfinite()||l.isInfinite()?s.INFINITY:l.im===0&&this.im===0?new s(this.re*l.re,0):new s(this.re*l.re-this.im*l.im,this.re*l.im+this.im*l.re)},div:function(o,f){var l=new s(o,f);if(this.isZero()&&l.isZero()||this.isInfinite()&&l.isInfinite())return s.NAN;if(this.isInfinite()||l.isZero())return s.INFINITY;if(this.isZero()||l.isInfinite())return s.ZERO;o=this.re,f=this.im;var h=l.re,u=l.im,m,g;return u===0?new s(o/h,f/h):Math.abs(h)<Math.abs(u)?(g=h/u,m=h*g+u,new s((o*g+f)/m,(f*g-o)/m)):(g=u/h,m=u*g+h,new s((o+f*g)/m,(f-o*g)/m))},pow:function(o,f){var l=new s(o,f);if(o=this.re,f=this.im,l.isZero())return s.ONE;if(l.im===0){if(f===0&&o>0)return new s(Math.pow(o,l.re),0);if(o===0)switch((l.re%4+4)%4){case 0:return new s(Math.pow(f,l.re),0);case 1:return new s(0,Math.pow(f,l.re));case 2:return new s(-Math.pow(f,l.re),0);case 3:return new s(0,-Math.pow(f,l.re))}}if(o===0&&f===0&&l.re>0&&l.im>=0)return s.ZERO;var h=Math.atan2(f,o),u=v(o,f);return o=Math.exp(l.re*u-l.im*h),f=l.im*u+l.re*h,new s(o*Math.cos(f),o*Math.sin(f))},sqrt:function(){var o=this.re,f=this.im,l=this.abs(),h,u;if(o>=0){if(f===0)return new s(Math.sqrt(o),0);h=.5*Math.sqrt(2*(l+o))}else h=Math.abs(f)/Math.sqrt(2*(l-o));return o<=0?u=.5*Math.sqrt(2*(l-o)):u=Math.abs(f)/Math.sqrt(2*(l+o)),new s(h,f<0?-u:u)},exp:function(){var o=Math.exp(this.re);return this.im,new s(o*Math.cos(this.im),o*Math.sin(this.im))},expm1:function(){var o=this.re,f=this.im;return new s(Math.expm1(o)*Math.cos(f)+a(f),Math.exp(o)*Math.sin(f))},log:function(){var o=this.re,f=this.im;return new s(v(o,f),Math.atan2(f,o))},abs:function(){return c(this.re,this.im)},arg:function(){return Math.atan2(this.im,this.re)},sin:function(){var o=this.re,f=this.im;return new s(Math.sin(o)*i(f),Math.cos(o)*n(f))},cos:function(){var o=this.re,f=this.im;return new s(Math.cos(o)*i(f),-Math.sin(o)*n(f))},tan:function(){var o=2*this.re,f=2*this.im,l=Math.cos(o)+i(f);return new s(Math.sin(o)/l,n(f)/l)},cot:function(){var o=2*this.re,f=2*this.im,l=Math.cos(o)-i(f);return new s(-Math.sin(o)/l,n(f)/l)},sec:function(){var o=this.re,f=this.im,l=.5*i(2*f)+.5*Math.cos(2*o);return new s(Math.cos(o)*i(f)/l,Math.sin(o)*n(f)/l)},csc:function(){var o=this.re,f=this.im,l=.5*i(2*f)-.5*Math.cos(2*o);return new s(Math.sin(o)*i(f)/l,-Math.cos(o)*n(f)/l)},asin:function(){var o=this.re,f=this.im,l=new s(f*f-o*o+1,-2*o*f).sqrt(),h=new s(l.re-f,l.im+o).log();return new s(h.im,-h.re)},acos:function(){var o=this.re,f=this.im,l=new s(f*f-o*o+1,-2*o*f).sqrt(),h=new s(l.re-f,l.im+o).log();return new s(Math.PI/2-h.im,h.re)},atan:function(){var o=this.re,f=this.im;if(o===0){if(f===1)return new s(0,1/0);if(f===-1)return new s(0,-1/0)}var l=o*o+(1-f)*(1-f),h=new s((1-f*f-o*o)/l,-2*o/l).log();return new s(-.5*h.im,.5*h.re)},acot:function(){var o=this.re,f=this.im;if(f===0)return new s(Math.atan2(1,o),0);var l=o*o+f*f;return l!==0?new s(o/l,-f/l).atan():new s(o!==0?o/0:0,f!==0?-f/0:0).atan()},asec:function(){var o=this.re,f=this.im;if(o===0&&f===0)return new s(0,1/0);var l=o*o+f*f;return l!==0?new s(o/l,-f/l).acos():new s(o!==0?o/0:0,f!==0?-f/0:0).acos()},acsc:function(){var o=this.re,f=this.im;if(o===0&&f===0)return new s(Math.PI/2,1/0);var l=o*o+f*f;return l!==0?new s(o/l,-f/l).asin():new s(o!==0?o/0:0,f!==0?-f/0:0).asin()},sinh:function(){var o=this.re,f=this.im;return new s(n(o)*Math.cos(f),i(o)*Math.sin(f))},cosh:function(){var o=this.re,f=this.im;return new s(i(o)*Math.cos(f),n(o)*Math.sin(f))},tanh:function(){var o=2*this.re,f=2*this.im,l=i(o)+Math.cos(f);return new s(n(o)/l,Math.sin(f)/l)},coth:function(){var o=2*this.re,f=2*this.im,l=i(o)-Math.cos(f);return new s(n(o)/l,-Math.sin(f)/l)},csch:function(){var o=this.re,f=this.im,l=Math.cos(2*f)-i(2*o);return new s(-2*n(o)*Math.cos(f)/l,2*i(o)*Math.sin(f)/l)},sech:function(){var o=this.re,f=this.im,l=Math.cos(2*f)+i(2*o);return new s(2*i(o)*Math.cos(f)/l,-2*n(o)*Math.sin(f)/l)},asinh:function(){var o=this.im;this.im=-this.re,this.re=o;var f=this.asin();return this.re=-this.im,this.im=o,o=f.re,f.re=-f.im,f.im=o,f},acosh:function(){var o=this.acos();if(o.im<=0){var f=o.re;o.re=-o.im,o.im=f}else{var f=o.im;o.im=-o.re,o.re=f}return o},atanh:function(){var o=this.re,f=this.im,l=o>1&&f===0,h=1-o,u=1+o,m=h*h+f*f,g=m!==0?new s((u*h-f*f)/m,(f*h+u*f)/m):new s(o!==-1?o/0:0,f!==0?f/0:0),N=g.re;return g.re=v(g.re,g.im)/2,g.im=Math.atan2(g.im,N)/2,l&&(g.im=-g.im),g},acoth:function(){var o=this.re,f=this.im;if(o===0&&f===0)return new s(0,Math.PI/2);var l=o*o+f*f;return l!==0?new s(o/l,-f/l).atanh():new s(o!==0?o/0:0,f!==0?-f/0:0).atanh()},acsch:function(){var o=this.re,f=this.im;if(f===0)return new s(o!==0?Math.log(o+Math.sqrt(o*o+1)):1/0,0);var l=o*o+f*f;return l!==0?new s(o/l,-f/l).asinh():new s(o!==0?o/0:0,f!==0?-f/0:0).asinh()},asech:function(){var o=this.re,f=this.im;if(this.isZero())return s.INFINITY;var l=o*o+f*f;return l!==0?new s(o/l,-f/l).acosh():new s(o!==0?o/0:0,f!==0?-f/0:0).acosh()},inverse:function(){if(this.isZero())return s.INFINITY;if(this.isInfinite())return s.ZERO;var o=this.re,f=this.im,l=o*o+f*f;return new s(o/l,-f/l)},conjugate:function(){return new s(this.re,-this.im)},neg:function(){return new s(-this.re,-this.im)},ceil:function(o){return o=Math.pow(10,o||0),new s(Math.ceil(this.re*o)/o,Math.ceil(this.im*o)/o)},floor:function(o){return o=Math.pow(10,o||0),new s(Math.floor(this.re*o)/o,Math.floor(this.im*o)/o)},round:function(o){return o=Math.pow(10,o||0),new s(Math.round(this.re*o)/o,Math.round(this.im*o)/o)},equals:function(o,f){var l=new s(o,f);return Math.abs(l.re-this.re)<=s.EPSILON&&Math.abs(l.im-this.im)<=s.EPSILON},clone:function(){return new s(this.re,this.im)},toString:function(){var o=this.re,f=this.im,l="";return this.isNaN()?"NaN":this.isInfinite()?"Infinity":(Math.abs(o)<s.EPSILON&&(o=0),Math.abs(f)<s.EPSILON&&(f=0),f===0?l+o:(o!==0?(l+=o,l+=" ",f<0?(f=-f,l+="-"):l+="+",l+=" "):f<0&&(f=-f,l+="-"),f!==1&&(l+=f),l+"i"))},toVector:function(){return[this.re,this.im]},valueOf:function(){return this.im===0?this.re:null},isNaN:function(){return isNaN(this.re)||isNaN(this.im)},isZero:function(){return this.im===0&&this.re===0},isFinite:function(){return isFinite(this.re)&&isFinite(this.im)},isInfinite:function(){return!(this.isNaN()||this.isFinite())}},s.ZERO=new s(0,0),s.ONE=new s(1,0),s.I=new s(0,1),s.PI=new s(Math.PI,0),s.E=new s(Math.E,0),s.INFINITY=new s(1/0,1/0),s.NAN=new s(NaN,NaN),s.EPSILON=1e-15,Object.defineProperty(s,"__esModule",{value:!0}),s.default=s,s.Complex=s,e.exports=s})()})(bn);var Oe=Zr(bn.exports),uo="Complex",fo=[],co=j(uo,fo,()=>(Oe.prototype.type="Complex",Oe.prototype.isComplex=!0,Oe.prototype.toJSON=function(){return{mathjs:"Complex",re:this.re,im:this.im}},Oe.prototype.toPolar=function(){return{r:this.abs(),phi:this.arg()}},Oe.prototype.format=function(e){var t="",r=this.im,i=this.re,n=qt(this.re,e),a=qt(this.im,e),c=le(e)?e:e?e.precision:null;if(c!==null){var p=Math.pow(10,-c);Math.abs(i/r)<p&&(i=0),Math.abs(r/i)<p&&(r=0)}return r===0?t=n:i===0?r===1?t="i":r===-1?t="-i":t=a+"i":r<0?r===-1?t=n+" - i":t=n+" - "+a.substring(1)+"i":r===1?t=n+" + i":t=n+" + "+a+"i",t},Oe.fromPolar=function(e){switch(arguments.length){case 1:{var t=arguments[0];if(typeof t=="object")return Oe(t);throw new TypeError("Input has to be an object with r and phi keys.")}case 2:{var r=arguments[0],i=arguments[1];if(le(r)){if(Jt(i)&&i.hasBase("ANGLE")&&(i=i.toNumber("rad")),le(i))return new Oe({r,phi:i});throw new TypeError("Phi is not a number nor an angle unit.")}else throw new TypeError("Radius r is not a number.")}default:throw new SyntaxError("Wrong number of arguments in function fromPolar")}},Oe.prototype.valueOf=Oe.prototype.toString,Oe.fromJSON=function(e){return new Oe(e)},Oe.compare=function(e,t){return e.re>t.re?1:e.re<t.re?-1:e.im>t.im?1:e.im<t.im?-1:0},Oe),{isClass:!0}),Nn={exports:{}};/**
 * @license Fraction.js v4.2.0 05/03/2022
 * https://www.xarg.org/2014/03/rational-numbers-in-javascript/
 *
 * Copyright (c) 2021, Robert Eisele (robert@xarg.org)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 **/(function(e,t){(function(r){var i=2e3,n={s:1,n:0,d:1};function a(h,u){if(isNaN(h=parseInt(h,10)))throw l.InvalidParameter;return h*u}function c(h,u){if(u===0)throw l.DivisionByZero;var m=Object.create(l.prototype);m.s=h<0?-1:1,h=h<0?-h:h;var g=f(h,u);return m.n=h/g,m.d=u/g,m}function p(h){for(var u={},m=h,g=2,N=4;N<=m;){for(;m%g===0;)m/=g,u[g]=(u[g]||0)+1;N+=1+2*g++}return m!==h?m>1&&(u[m]=(u[m]||0)+1):u[h]=(u[h]||0)+1,u}var v=function(h,u){var m=0,g=1,N=1,w=0,M=0,_=0,y=1,x=1,b=0,S=1,O=1,$=1,I=1e7,R;if(h!=null)if(u!==void 0){if(m=h,g=u,N=m*g,m%1!==0||g%1!==0)throw l.NonIntegerParameter}else switch(typeof h){case"object":{if("d"in h&&"n"in h)m=h.n,g=h.d,"s"in h&&(m*=h.s);else if(0 in h)m=h[0],1 in h&&(g=h[1]);else throw l.InvalidParameter;N=m*g;break}case"number":{if(h<0&&(N=h,h=-h),h%1===0)m=h;else if(h>0){for(h>=1&&(x=Math.pow(10,Math.floor(1+Math.log(h)/Math.LN10)),h/=x);S<=I&&$<=I;)if(R=(b+O)/(S+$),h===R){S+$<=I?(m=b+O,g=S+$):$>S?(m=O,g=$):(m=b,g=S);break}else h>R?(b+=O,S+=$):(O+=b,$+=S),S>I?(m=O,g=$):(m=b,g=S);m*=x}else(isNaN(h)||isNaN(u))&&(g=m=NaN);break}case"string":{if(S=h.match(/\d+|./g),S===null)throw l.InvalidParameter;if(S[b]==="-"?(N=-1,b++):S[b]==="+"&&b++,S.length===b+1?M=a(S[b++],N):S[b+1]==="."||S[b]==="."?(S[b]!=="."&&(w=a(S[b++],N)),b++,(b+1===S.length||S[b+1]==="("&&S[b+3]===")"||S[b+1]==="'"&&S[b+3]==="'")&&(M=a(S[b],N),y=Math.pow(10,S[b].length),b++),(S[b]==="("&&S[b+2]===")"||S[b]==="'"&&S[b+2]==="'")&&(_=a(S[b+1],N),x=Math.pow(10,S[b+1].length)-1,b+=3)):S[b+1]==="/"||S[b+1]===":"?(M=a(S[b],N),y=a(S[b+2],1),b+=3):S[b+3]==="/"&&S[b+1]===" "&&(w=a(S[b],N),M=a(S[b+2],N),y=a(S[b+4],1),b+=5),S.length<=b){g=y*x,N=m=_+g*w+x*M;break}}default:throw l.InvalidParameter}if(g===0)throw l.DivisionByZero;n.s=N<0?-1:1,n.n=Math.abs(m),n.d=Math.abs(g)};function d(h,u,m){for(var g=1;u>0;h=h*h%m,u>>=1)u&1&&(g=g*h%m);return g}function s(h,u){for(;u%2===0;u/=2);for(;u%5===0;u/=5);if(u===1)return 0;for(var m=10%u,g=1;m!==1;g++)if(m=m*10%u,g>i)return 0;return g}function o(h,u,m){for(var g=1,N=d(10,m,u),w=0;w<300;w++){if(g===N)return w;g=g*10%u,N=N*10%u}return 0}function f(h,u){if(!h)return u;if(!u)return h;for(;;){if(h%=u,!h)return u;if(u%=h,!u)return h}}function l(h,u){if(v(h,u),this instanceof l)h=f(n.d,n.n),this.s=n.s,this.n=n.n/h,this.d=n.d/h;else return c(n.s*n.n,n.d)}l.DivisionByZero=new Error("Division by Zero"),l.InvalidParameter=new Error("Invalid argument"),l.NonIntegerParameter=new Error("Parameters must be integer"),l.prototype={s:1,n:0,d:1,abs:function(){return c(this.n,this.d)},neg:function(){return c(-this.s*this.n,this.d)},add:function(h,u){return v(h,u),c(this.s*this.n*n.d+n.s*this.d*n.n,this.d*n.d)},sub:function(h,u){return v(h,u),c(this.s*this.n*n.d-n.s*this.d*n.n,this.d*n.d)},mul:function(h,u){return v(h,u),c(this.s*n.s*this.n*n.n,this.d*n.d)},div:function(h,u){return v(h,u),c(this.s*n.s*this.n*n.d,this.d*n.n)},clone:function(){return c(this.s*this.n,this.d)},mod:function(h,u){if(isNaN(this.n)||isNaN(this.d))return new l(NaN);if(h===void 0)return c(this.s*this.n%this.d,1);if(v(h,u),n.n===0&&this.d===0)throw l.DivisionByZero;return c(this.s*(n.d*this.n)%(n.n*this.d),n.d*this.d)},gcd:function(h,u){return v(h,u),c(f(n.n,this.n)*f(n.d,this.d),n.d*this.d)},lcm:function(h,u){return v(h,u),n.n===0&&this.n===0?c(0,1):c(n.n*this.n,f(n.n,this.n)*f(n.d,this.d))},ceil:function(h){return h=Math.pow(10,h||0),isNaN(this.n)||isNaN(this.d)?new l(NaN):c(Math.ceil(h*this.s*this.n/this.d),h)},floor:function(h){return h=Math.pow(10,h||0),isNaN(this.n)||isNaN(this.d)?new l(NaN):c(Math.floor(h*this.s*this.n/this.d),h)},round:function(h){return h=Math.pow(10,h||0),isNaN(this.n)||isNaN(this.d)?new l(NaN):c(Math.round(h*this.s*this.n/this.d),h)},inverse:function(){return c(this.s*this.d,this.n)},pow:function(h,u){if(v(h,u),n.d===1)return n.s<0?c(Math.pow(this.s*this.d,n.n),Math.pow(this.n,n.n)):c(Math.pow(this.s*this.n,n.n),Math.pow(this.d,n.n));if(this.s<0)return null;var m=p(this.n),g=p(this.d),N=1,w=1;for(var M in m)if(M!=="1"){if(M==="0"){N=0;break}if(m[M]*=n.n,m[M]%n.d===0)m[M]/=n.d;else return null;N*=Math.pow(M,m[M])}for(var M in g)if(M!=="1"){if(g[M]*=n.n,g[M]%n.d===0)g[M]/=n.d;else return null;w*=Math.pow(M,g[M])}return n.s<0?c(w,N):c(N,w)},equals:function(h,u){return v(h,u),this.s*this.n*n.d===n.s*n.n*this.d},compare:function(h,u){v(h,u);var m=this.s*this.n*n.d-n.s*n.n*this.d;return(0<m)-(m<0)},simplify:function(h){if(isNaN(this.n)||isNaN(this.d))return this;h=h||.001;for(var u=this.abs(),m=u.toContinued(),g=1;g<m.length;g++){for(var N=c(m[g-1],1),w=g-2;w>=0;w--)N=N.inverse().add(m[w]);if(N.sub(u).abs().valueOf()<h)return N.mul(this.s)}return this},divisible:function(h,u){return v(h,u),!(!(n.n*this.d)||this.n*n.d%(n.n*this.d))},valueOf:function(){return this.s*this.n/this.d},toFraction:function(h){var u,m="",g=this.n,N=this.d;return this.s<0&&(m+="-"),N===1?m+=g:(h&&(u=Math.floor(g/N))>0&&(m+=u,m+=" ",g%=N),m+=g,m+="/",m+=N),m},toLatex:function(h){var u,m="",g=this.n,N=this.d;return this.s<0&&(m+="-"),N===1?m+=g:(h&&(u=Math.floor(g/N))>0&&(m+=u,g%=N),m+="\\frac{",m+=g,m+="}{",m+=N,m+="}"),m},toContinued:function(){var h,u=this.n,m=this.d,g=[];if(isNaN(u)||isNaN(m))return g;do g.push(Math.floor(u/m)),h=u%m,u=m,m=h;while(u!==1);return g},toString:function(h){var u=this.n,m=this.d;if(isNaN(u)||isNaN(m))return"NaN";h=h||15;var g=s(u,m),N=o(u,m,g),w=this.s<0?"-":"";if(w+=u/m|0,u%=m,u*=10,u&&(w+="."),g){for(var M=N;M--;)w+=u/m|0,u%=m,u*=10;w+="(";for(var M=g;M--;)w+=u/m|0,u%=m,u*=10;w+=")"}else for(var M=h;u&&M--;)w+=u/m|0,u%=m,u*=10;return w}},Object.defineProperty(l,"__esModule",{value:!0}),l.default=l,l.Fraction=l,e.exports=l})()})(Nn);var rt=Zr(Nn.exports),lo="Fraction",ho=[],po=j(lo,ho,()=>(rt.prototype.type="Fraction",rt.prototype.isFraction=!0,rt.prototype.toJSON=function(){return{mathjs:"Fraction",n:this.s*this.n,d:this.d}},rt.fromJSON=function(e){return new rt(e)},rt),{isClass:!0}),vo="Matrix",mo=[],go=j(vo,mo,()=>{function e(){if(!(this instanceof e))throw new SyntaxError("Constructor must be called with the new operator")}return e.prototype.type="Matrix",e.prototype.isMatrix=!0,e.prototype.storage=function(){throw new Error("Cannot invoke storage on a Matrix interface")},e.prototype.datatype=function(){throw new Error("Cannot invoke datatype on a Matrix interface")},e.prototype.create=function(t,r){throw new Error("Cannot invoke create on a Matrix interface")},e.prototype.subset=function(t,r,i){throw new Error("Cannot invoke subset on a Matrix interface")},e.prototype.get=function(t){throw new Error("Cannot invoke get on a Matrix interface")},e.prototype.set=function(t,r,i){throw new Error("Cannot invoke set on a Matrix interface")},e.prototype.resize=function(t,r){throw new Error("Cannot invoke resize on a Matrix interface")},e.prototype.reshape=function(t,r){throw new Error("Cannot invoke reshape on a Matrix interface")},e.prototype.clone=function(){throw new Error("Cannot invoke clone on a Matrix interface")},e.prototype.size=function(){throw new Error("Cannot invoke size on a Matrix interface")},e.prototype.map=function(t,r){throw new Error("Cannot invoke map on a Matrix interface")},e.prototype.forEach=function(t){throw new Error("Cannot invoke forEach on a Matrix interface")},e.prototype[Symbol.iterator]=function(){throw new Error("Cannot iterate a Matrix interface")},e.prototype.toArray=function(){throw new Error("Cannot invoke toArray on a Matrix interface")},e.prototype.valueOf=function(){throw new Error("Cannot invoke valueOf on a Matrix interface")},e.prototype.format=function(t){throw new Error("Cannot invoke format on a Matrix interface")},e.prototype.toString=function(){throw new Error("Cannot invoke toString on a Matrix interface")},e},{isClass:!0}),wo="DenseMatrix",yo=["Matrix"],_o=j(wo,yo,e=>{var{Matrix:t}=e;function r(s,o){if(!(this instanceof r))throw new SyntaxError("Constructor must be called with the new operator");if(o&&!Ue(o))throw new Error("Invalid datatype: "+o);if(_e(s))s.type==="DenseMatrix"?(this._data=ve(s._data),this._size=ve(s._size),this._datatype=o||s._datatype):(this._data=s.toArray(),this._size=s.size(),this._datatype=o||s._datatype);else if(s&&se(s.data)&&se(s.size))this._data=s.data,this._size=s.size,sr(this._data,this._size),this._datatype=o||s.datatype;else if(se(s))this._data=d(s),this._size=We(this._data),sr(this._data,this._size),this._datatype=o;else{if(s)throw new TypeError("Unsupported type of data ("+ke(s)+")");this._data=[],this._size=[0],this._datatype=o}}r.prototype=new t,r.prototype.createDenseMatrix=function(s,o){return new r(s,o)},r.prototype.type="DenseMatrix",r.prototype.isDenseMatrix=!0,r.prototype.getDataType=function(){return gt(this._data,ke)},r.prototype.storage=function(){return"dense"},r.prototype.datatype=function(){return this._datatype},r.prototype.create=function(s,o){return new r(s,o)},r.prototype.subset=function(s,o,f){switch(arguments.length){case 1:return i(this,s);case 2:case 3:return a(this,s,o,f);default:throw new SyntaxError("Wrong number of arguments")}},r.prototype.get=function(s){if(!se(s))throw new TypeError("Array expected");if(s.length!==this._size.length)throw new te(s.length,this._size.length);for(var o=0;o<s.length;o++)ue(s[o],this._size[o]);for(var f=this._data,l=0,h=s.length;l<h;l++){var u=s[l];ue(u,f.length),f=f[u]}return f},r.prototype.set=function(s,o,f){if(!se(s))throw new TypeError("Array expected");if(s.length<this._size.length)throw new te(s.length,this._size.length,"<");var l,h,u,m=s.map(function(N){return N+1});v(this,m,f);var g=this._data;for(l=0,h=s.length-1;l<h;l++)u=s[l],ue(u,g.length),g=g[u];return u=s[s.length-1],ue(u,g.length),g[u]=o,this};function i(s,o){if(!Nt(o))throw new TypeError("Invalid index");var f=o.isScalar();if(f)return s.get(o.min());var l=o.size();if(l.length!==s._size.length)throw new te(l.length,s._size.length);for(var h=o.min(),u=o.max(),m=0,g=s._size.length;m<g;m++)ue(h[m],s._size[m]),ue(u[m],s._size[m]);return new r(n(s._data,o,l.length,0),s._datatype)}function n(s,o,f,l){var h=l===f-1,u=o.dimension(l);return h?u.map(function(m){return ue(m,s.length),s[m]}).valueOf():u.map(function(m){ue(m,s.length);var g=s[m];return n(g,o,f,l+1)}).valueOf()}function a(s,o,f,l){if(!o||o.isIndex!==!0)throw new TypeError("Invalid index");var h=o.size(),u=o.isScalar(),m;if(_e(f)?(m=f.size(),f=f.valueOf()):m=We(f),u){if(m.length!==0)throw new TypeError("Scalar expected");s.set(o.min(),f,l)}else{if(h.length<s._size.length)throw new te(h.length,s._size.length,"<");if(m.length<h.length){for(var g=0,N=0;h[g]===1&&m[g]===1;)g++;for(;h[g]===1;)N++,g++;f=an(f,h.length,N,m)}if(!dt(h,m))throw new te(h,m,">");var w=o.max().map(function(y){return y+1});v(s,w,l);var M=h.length,_=0;c(s._data,o,f,M,_)}return s}function c(s,o,f,l,h){var u=h===l-1,m=o.dimension(h);u?m.forEach(function(g,N){ue(g),s[g]=f[N[0]]}):m.forEach(function(g,N){ue(g),c(s[g],o,f[N[0]],l,h+1)})}r.prototype.resize=function(s,o,f){if(!Hr(s))throw new TypeError("Array or Matrix expected");var l=s.valueOf().map(u=>Array.isArray(u)&&u.length===1?u[0]:u),h=f?this.clone():this;return p(h,l,o)};function p(s,o,f){if(o.length===0){for(var l=s._data;se(l);)l=l[0];return l}return s._size=o.slice(0),s._data=Ut(s._data,s._size,f),s}r.prototype.reshape=function(s,o){var f=o?this.clone():this;f._data=Gi(f._data,s);var l=f._size.reduce((h,u)=>h*u);return f._size=jt(s,l),f};function v(s,o,f){for(var l=s._size.slice(0),h=!1;l.length<o.length;)l.push(0),h=!0;for(var u=0,m=o.length;u<m;u++)o[u]>l[u]&&(l[u]=o[u],h=!0);h&&p(s,l,f)}r.prototype.clone=function(){var s=new r({data:ve(this._data),size:ve(this._size),datatype:this._datatype});return s},r.prototype.size=function(){return this._size.slice(0)},r.prototype.map=function(s){var o=this,f=function u(m,g){return se(m)?m.map(function(N,w){return u(N,g.concat(w))}):s(m,g,o)},l=f(this._data,[]),h=this._datatype!==void 0?gt(l,ke):void 0;return new r(l,h)},r.prototype.forEach=function(s){var o=this,f=function l(h,u){se(h)?h.forEach(function(m,g){l(m,u.concat(g))}):s(h,u,o)};f(this._data,[])},r.prototype[Symbol.iterator]=function*(){var s=function*o(f,l){if(se(f))for(var h=0;h<f.length;h++)yield*o(f[h],l.concat(h));else yield{value:f,index:l}};yield*s(this._data,[])},r.prototype.rows=function(){var s=[],o=this.size();if(o.length!==2)throw new TypeError("Rows can only be returned for a 2D matrix.");var f=this._data;for(var l of f)s.push(new r([l],this._datatype));return s},r.prototype.columns=function(){var s=this,o=[],f=this.size();if(f.length!==2)throw new TypeError("Rows can only be returned for a 2D matrix.");for(var l=this._data,h=function(g){var N=l.map(w=>[w[g]]);o.push(new r(N,s._datatype))},u=0;u<f[1];u++)h(u);return o},r.prototype.toArray=function(){return ve(this._data)},r.prototype.valueOf=function(){return this._data},r.prototype.format=function(s){return ge(this._data,s)},r.prototype.toString=function(){return ge(this._data)},r.prototype.toJSON=function(){return{mathjs:"DenseMatrix",data:this._data,size:this._size,datatype:this._datatype}},r.prototype.diagonal=function(s){if(s){if(Ce(s)&&(s=s.toNumber()),!le(s)||!ye(s))throw new TypeError("The parameter k must be an integer number")}else s=0;for(var o=s>0?s:0,f=s<0?-s:0,l=this._size[0],h=this._size[1],u=Math.min(l-f,h-o),m=[],g=0;g<u;g++)m[g]=this._data[g+f][g+o];return new r({data:m,size:[u],datatype:this._datatype})},r.diagonal=function(s,o,f,l){if(!se(s))throw new TypeError("Array expected, size parameter");if(s.length!==2)throw new Error("Only two dimensions matrix are supported");if(s=s.map(function(x){if(Ce(x)&&(x=x.toNumber()),!le(x)||!ye(x)||x<1)throw new Error("Size values must be positive integers");return x}),f){if(Ce(f)&&(f=f.toNumber()),!le(f)||!ye(f))throw new TypeError("The parameter k must be an integer number")}else f=0;var h=f>0?f:0,u=f<0?-f:0,m=s[0],g=s[1],N=Math.min(m-u,g-h),w;if(se(o)){if(o.length!==N)throw new Error("Invalid value array length");w=function(b){return o[b]}}else if(_e(o)){var M=o.size();if(M.length!==1||M[0]!==N)throw new Error("Invalid matrix length");w=function(b){return o.get([b])}}else w=function(){return o};l||(l=Ce(w(0))?w(0).mul(0):0);var _=[];if(s.length>0){_=Ut(_,s,l);for(var y=0;y<N;y++)_[y+u][y+h]=w(y)}return new r({data:_,size:[m,g]})},r.fromJSON=function(s){return new r(s)},r.prototype.swapRows=function(s,o){if(!le(s)||!ye(s)||!le(o)||!ye(o))throw new Error("Row index must be positive integers");if(this._size.length!==2)throw new Error("Only two dimensional matrix is supported");return ue(s,this._size[0]),ue(o,this._size[0]),r._swapRows(s,o,this._data),this},r._swapRows=function(s,o,f){var l=f[s];f[s]=f[o],f[o]=l};function d(s){for(var o=0,f=s.length;o<f;o++){var l=s[o];se(l)?s[o]=d(l):l&&l.isMatrix===!0&&(s[o]=d(l.valueOf()))}return s}return r},{isClass:!0});function Je(e,t,r){return e&&typeof e.map=="function"?e.map(function(i){return Je(i,t)}):t(e)}var Mn="number",En="number, number";function Sn(e){return Math.abs(e)}Sn.signature=Mn;function xn(e,t){return e+t}xn.signature=En;function Cn(e,t){return e*t}Cn.signature=En;function An(e){return-e}An.signature=Mn;var bo="number";function Dn(e){return e===0}Dn.signature=bo;var lr="isZero",No=["typed"],Mo=j(lr,No,e=>{var{typed:t}=e;return t(lr,{number:Dn,BigNumber:function(i){return i.isZero()},Complex:function(i){return i.re===0&&i.im===0},Fraction:function(i){return i.d===1&&i.n===0},Unit:function(i){return this(i.value)},"Array | Matrix":function(i){return Je(i,this)}})});function Eo(e,t,r){if(r==null)return e.eq(t);if(e.eq(t))return!0;if(e.isNaN()||t.isNaN())return!1;if(e.isFinite()&&t.isFinite()){var i=e.minus(t).abs();if(i.isZero())return!0;var n=e.constructor.max(e.abs(),t.abs());return i.lte(n.times(r))}return!1}function So(e,t,r){return mt(e.re,t.re,r)&&mt(e.im,t.im,r)}var bt="equalScalar",xo=["typed","config"],Co=j(bt,xo,e=>{var{typed:t,config:r}=e;return t(bt,{"boolean, boolean":function(n,a){return n===a},"number, number":function(n,a){return mt(n,a,r.epsilon)},"BigNumber, BigNumber":function(n,a){return n.eq(a)||Eo(n,a,r.epsilon)},"Fraction, Fraction":function(n,a){return n.equals(a)},"Complex, Complex":function(n,a){return So(n,a,r.epsilon)},"Unit, Unit":function(n,a){if(!n.equalBase(a))throw new Error("Cannot compare units with different base");return this(n.value,a.value)}})});j(bt,["typed","config"],e=>{var{typed:t,config:r}=e;return t(bt,{"number, number":function(n,a){return mt(n,a,r.epsilon)}})});var Ao="SparseMatrix",Do=["typed","equalScalar","Matrix"],Oo=j(Ao,Do,e=>{var{typed:t,equalScalar:r,Matrix:i}=e;function n(u,m){if(!(this instanceof n))throw new SyntaxError("Constructor must be called with the new operator");if(m&&!Ue(m))throw new Error("Invalid datatype: "+m);if(_e(u))a(this,u,m);else if(u&&se(u.index)&&se(u.ptr)&&se(u.size))this._values=u.values,this._index=u.index,this._ptr=u.ptr,this._size=u.size,this._datatype=m||u.datatype;else if(se(u))c(this,u,m);else{if(u)throw new TypeError("Unsupported type of data ("+ke(u)+")");this._values=[],this._index=[],this._ptr=[0],this._size=[0,0],this._datatype=m}}function a(u,m,g){m.type==="SparseMatrix"?(u._values=m._values?ve(m._values):void 0,u._index=ve(m._index),u._ptr=ve(m._ptr),u._size=ve(m._size),u._datatype=g||m._datatype):c(u,m.valueOf(),g||m._datatype)}function c(u,m,g){u._values=[],u._index=[],u._ptr=[],u._datatype=g;var N=m.length,w=0,M=r,_=0;if(Ue(g)&&(M=t.find(r,[g,g])||r,_=t.convert(0,g)),N>0){var y=0;do{u._ptr.push(u._index.length);for(var x=0;x<N;x++){var b=m[x];if(se(b)){if(y===0&&w<b.length&&(w=b.length),y<b.length){var S=b[y];M(S,_)||(u._values.push(S),u._index.push(x))}}else y===0&&w<1&&(w=1),M(b,_)||(u._values.push(b),u._index.push(x))}y++}while(y<w)}u._ptr.push(u._index.length),u._size=[N,w]}n.prototype=new i,n.prototype.createSparseMatrix=function(u,m){return new n(u,m)},n.prototype.type="SparseMatrix",n.prototype.isSparseMatrix=!0,n.prototype.getDataType=function(){return gt(this._values,ke)},n.prototype.storage=function(){return"sparse"},n.prototype.datatype=function(){return this._datatype},n.prototype.create=function(u,m){return new n(u,m)},n.prototype.density=function(){var u=this._size[0],m=this._size[1];return u!==0&&m!==0?this._index.length/(u*m):0},n.prototype.subset=function(u,m,g){if(!this._values)throw new Error("Cannot invoke subset on a Pattern only matrix");switch(arguments.length){case 1:return p(this,u);case 2:case 3:return v(this,u,m,g);default:throw new SyntaxError("Wrong number of arguments")}};function p(u,m){if(!Nt(m))throw new TypeError("Invalid index");var g=m.isScalar();if(g)return u.get(m.min());var N=m.size();if(N.length!==u._size.length)throw new te(N.length,u._size.length);var w,M,_,y,x=m.min(),b=m.max();for(w=0,M=u._size.length;w<M;w++)ue(x[w],u._size[w]),ue(b[w],u._size[w]);var S=u._values,O=u._index,$=u._ptr,I=m.dimension(0),R=m.dimension(1),P=[],T=[];I.forEach(function(Y,G){T[Y]=G[0],P[Y]=!0});var F=S?[]:void 0,V=[],q=[];return R.forEach(function(Y){for(q.push(V.length),_=$[Y],y=$[Y+1];_<y;_++)w=O[_],P[w]===!0&&(V.push(T[w]),F&&F.push(S[_]))}),q.push(V.length),new n({values:F,index:V,ptr:q,size:N,datatype:u._datatype})}function v(u,m,g,N){if(!m||m.isIndex!==!0)throw new TypeError("Invalid index");var w=m.size(),M=m.isScalar(),_;if(_e(g)?(_=g.size(),g=g.toArray()):_=We(g),M){if(_.length!==0)throw new TypeError("Scalar expected");u.set(m.min(),g,N)}else{if(w.length!==1&&w.length!==2)throw new te(w.length,u._size.length,"<");if(_.length<w.length){for(var y=0,x=0;w[y]===1&&_[y]===1;)y++;for(;w[y]===1;)x++,y++;g=an(g,w.length,x,_)}if(!dt(w,_))throw new te(w,_,">");if(w.length===1){var b=m.dimension(0);b.forEach(function($,I){ue($),u.set([$,0],g[I[0]],N)})}else{var S=m.dimension(0),O=m.dimension(1);S.forEach(function($,I){ue($),O.forEach(function(R,P){ue(R),u.set([$,R],g[I[0]][P[0]],N)})})}}return u}n.prototype.get=function(u){if(!se(u))throw new TypeError("Array expected");if(u.length!==this._size.length)throw new te(u.length,this._size.length);if(!this._values)throw new Error("Cannot invoke get on a Pattern only matrix");var m=u[0],g=u[1];ue(m,this._size[0]),ue(g,this._size[1]);var N=d(m,this._ptr[g],this._ptr[g+1],this._index);return N<this._ptr[g+1]&&this._index[N]===m?this._values[N]:0},n.prototype.set=function(u,m,g){if(!se(u))throw new TypeError("Array expected");if(u.length!==this._size.length)throw new te(u.length,this._size.length);if(!this._values)throw new Error("Cannot invoke set on a Pattern only matrix");var N=u[0],w=u[1],M=this._size[0],_=this._size[1],y=r,x=0;Ue(this._datatype)&&(y=t.find(r,[this._datatype,this._datatype])||r,x=t.convert(0,this._datatype)),(N>M-1||w>_-1)&&(f(this,Math.max(N+1,M),Math.max(w+1,_),g),M=this._size[0],_=this._size[1]),ue(N,M),ue(w,_);var b=d(N,this._ptr[w],this._ptr[w+1],this._index);return b<this._ptr[w+1]&&this._index[b]===N?y(m,x)?s(b,w,this._values,this._index,this._ptr):this._values[b]=m:o(b,N,w,m,this._values,this._index,this._ptr),this};function d(u,m,g,N){if(g-m===0)return g;for(var w=m;w<g;w++)if(N[w]===u)return w;return m}function s(u,m,g,N,w){g.splice(u,1),N.splice(u,1);for(var M=m+1;M<w.length;M++)w[M]--}function o(u,m,g,N,w,M,_){w.splice(u,0,N),M.splice(u,0,m);for(var y=g+1;y<_.length;y++)_[y]++}n.prototype.resize=function(u,m,g){if(!Hr(u))throw new TypeError("Array or Matrix expected");var N=u.valueOf().map(M=>Array.isArray(M)&&M.length===1?M[0]:M);if(N.length!==2)throw new Error("Only two dimensions matrix are supported");N.forEach(function(M){if(!le(M)||!ye(M)||M<0)throw new TypeError("Invalid size, must contain positive integers (size: "+ge(N)+")")});var w=g?this.clone():this;return f(w,N[0],N[1],m)};function f(u,m,g,N){var w=N||0,M=r,_=0;Ue(u._datatype)&&(M=t.find(r,[u._datatype,u._datatype])||r,_=t.convert(0,u._datatype),w=t.convert(w,u._datatype));var y=!M(w,_),x=u._size[0],b=u._size[1],S,O,$;if(g>b){for(O=b;O<g;O++)if(u._ptr[O]=u._values.length,y)for(S=0;S<x;S++)u._values.push(w),u._index.push(S);u._ptr[g]=u._values.length}else g<b&&(u._ptr.splice(g+1,b-g),u._values.splice(u._ptr[g],u._values.length),u._index.splice(u._ptr[g],u._index.length));if(b=g,m>x){if(y){var I=0;for(O=0;O<b;O++){u._ptr[O]=u._ptr[O]+I,$=u._ptr[O+1]+I;var R=0;for(S=x;S<m;S++,R++)u._values.splice($+R,0,w),u._index.splice($+R,0,S),I++}u._ptr[b]=u._values.length}}else if(m<x){var P=0;for(O=0;O<b;O++){u._ptr[O]=u._ptr[O]-P;var T=u._ptr[O],F=u._ptr[O+1]-P;for($=T;$<F;$++)S=u._index[$],S>m-1&&(u._values.splice($,1),u._index.splice($,1),P++)}u._ptr[O]=u._values.length}return u._size[0]=m,u._size[1]=g,u}n.prototype.reshape=function(u,m){if(!se(u))throw new TypeError("Array expected");if(u.length!==2)throw new Error("Sparse matrices can only be reshaped in two dimensions");u.forEach(function(Y){if(!le(Y)||!ye(Y)||Y<=-2||Y===0)throw new TypeError("Invalid size, must contain positive integers or -1 (size: "+ge(u)+")")});var g=this._size[0]*this._size[1];u=jt(u,g);var N=u[0]*u[1];if(g!==N)throw new Error("Reshaping sparse matrix will result in the wrong number of elements");var w=m?this.clone():this;if(this._size[0]===u[0]&&this._size[1]===u[1])return w;for(var M=[],_=0;_<w._ptr.length;_++)for(var y=0;y<w._ptr[_+1]-w._ptr[_];y++)M.push(_);for(var x=w._values.slice(),b=w._index.slice(),S=0;S<w._index.length;S++){var O=b[S],$=M[S],I=O*w._size[1]+$;M[S]=I%u[1],b[S]=Math.floor(I/u[1])}w._values.length=0,w._index.length=0,w._ptr.length=u[1]+1,w._size=u.slice();for(var R=0;R<w._ptr.length;R++)w._ptr[R]=0;for(var P=0;P<x.length;P++){var T=b[P],F=M[P],V=x[P],q=d(T,w._ptr[F],w._ptr[F+1],w._index);o(q,T,F,V,w._values,w._index,w._ptr)}return w},n.prototype.clone=function(){var u=new n({values:this._values?ve(this._values):void 0,index:ve(this._index),ptr:ve(this._ptr),size:ve(this._size),datatype:this._datatype});return u},n.prototype.size=function(){return this._size.slice(0)},n.prototype.map=function(u,m){if(!this._values)throw new Error("Cannot invoke map on a Pattern only matrix");var g=this,N=this._size[0],w=this._size[1],M=function(y,x,b){return u(y,[x,b],g)};return l(this,0,N-1,0,w-1,M,m)};function l(u,m,g,N,w,M,_){var y=[],x=[],b=[],S=r,O=0;Ue(u._datatype)&&(S=t.find(r,[u._datatype,u._datatype])||r,O=t.convert(0,u._datatype));for(var $=function(J,he,pe){J=M(J,he,pe),S(J,O)||(y.push(J),x.push(he))},I=N;I<=w;I++){b.push(y.length);var R=u._ptr[I],P=u._ptr[I+1];if(_)for(var T=R;T<P;T++){var F=u._index[T];F>=m&&F<=g&&$(u._values[T],F-m,I-N)}else{for(var V={},q=R;q<P;q++){var Y=u._index[q];V[Y]=u._values[q]}for(var G=m;G<=g;G++){var Q=G in V?V[G]:0;$(Q,G-m,I-N)}}}return b.push(y.length),new n({values:y,index:x,ptr:b,size:[g-m+1,w-N+1]})}n.prototype.forEach=function(u,m){if(!this._values)throw new Error("Cannot invoke forEach on a Pattern only matrix");for(var g=this,N=this._size[0],w=this._size[1],M=0;M<w;M++){var _=this._ptr[M],y=this._ptr[M+1];if(m)for(var x=_;x<y;x++){var b=this._index[x];u(this._values[x],[b,M],g)}else{for(var S={},O=_;O<y;O++){var $=this._index[O];S[$]=this._values[O]}for(var I=0;I<N;I++){var R=I in S?S[I]:0;u(R,[I,M],g)}}}},n.prototype[Symbol.iterator]=function*(){if(!this._values)throw new Error("Cannot iterate a Pattern only matrix");for(var u=this._size[1],m=0;m<u;m++)for(var g=this._ptr[m],N=this._ptr[m+1],w=g;w<N;w++){var M=this._index[w];yield{value:this._values[w],index:[M,m]}}},n.prototype.toArray=function(){return h(this._values,this._index,this._ptr,this._size,!0)},n.prototype.valueOf=function(){return h(this._values,this._index,this._ptr,this._size,!1)};function h(u,m,g,N,w){var M=N[0],_=N[1],y=[],x,b;for(x=0;x<M;x++)for(y[x]=[],b=0;b<_;b++)y[x][b]=0;for(b=0;b<_;b++)for(var S=g[b],O=g[b+1],$=S;$<O;$++)x=m[$],y[x][b]=u?w?ve(u[$]):u[$]:1;return y}return n.prototype.format=function(u){for(var m=this._size[0],g=this._size[1],N=this.density(),w="Sparse Matrix ["+ge(m,u)+" x "+ge(g,u)+"] density: "+ge(N,u)+`
`,M=0;M<g;M++)for(var _=this._ptr[M],y=this._ptr[M+1],x=_;x<y;x++){var b=this._index[x];w+=`
    (`+ge(b,u)+", "+ge(M,u)+") ==> "+(this._values?ge(this._values[x],u):"X")}return w},n.prototype.toString=function(){return ge(this.toArray())},n.prototype.toJSON=function(){return{mathjs:"SparseMatrix",values:this._values,index:this._index,ptr:this._ptr,size:this._size,datatype:this._datatype}},n.prototype.diagonal=function(u){if(u){if(Ce(u)&&(u=u.toNumber()),!le(u)||!ye(u))throw new TypeError("The parameter k must be an integer number")}else u=0;var m=u>0?u:0,g=u<0?-u:0,N=this._size[0],w=this._size[1],M=Math.min(N-g,w-m),_=[],y=[],x=[];x[0]=0;for(var b=m;b<w&&_.length<M;b++)for(var S=this._ptr[b],O=this._ptr[b+1],$=S;$<O;$++){var I=this._index[$];if(I===b-m+g){_.push(this._values[$]),y[_.length-1]=I-g;break}}return x.push(_.length),new n({values:_,index:y,ptr:x,size:[M,1]})},n.fromJSON=function(u){return new n(u)},n.diagonal=function(u,m,g,N,w){if(!se(u))throw new TypeError("Array expected, size parameter");if(u.length!==2)throw new Error("Only two dimensions matrix are supported");if(u=u.map(function(Y){if(Ce(Y)&&(Y=Y.toNumber()),!le(Y)||!ye(Y)||Y<1)throw new Error("Size values must be positive integers");return Y}),g){if(Ce(g)&&(g=g.toNumber()),!le(g)||!ye(g))throw new TypeError("The parameter k must be an integer number")}else g=0;var M=r,_=0;Ue(w)&&(M=t.find(r,[w,w])||r,_=t.convert(0,w));var y=g>0?g:0,x=g<0?-g:0,b=u[0],S=u[1],O=Math.min(b-x,S-y),$;if(se(m)){if(m.length!==O)throw new Error("Invalid value array length");$=function(G){return m[G]}}else if(_e(m)){var I=m.size();if(I.length!==1||I[0]!==O)throw new Error("Invalid matrix length");$=function(G){return m.get([G])}}else $=function(){return m};for(var R=[],P=[],T=[],F=0;F<S;F++){T.push(R.length);var V=F-y;if(V>=0&&V<O){var q=$(V);M(q,_)||(P.push(V+x),R.push(q))}}return T.push(R.length),new n({values:R,index:P,ptr:T,size:[b,S]})},n.prototype.swapRows=function(u,m){if(!le(u)||!ye(u)||!le(m)||!ye(m))throw new Error("Row index must be positive integers");if(this._size.length!==2)throw new Error("Only two dimensional matrix is supported");return ue(u,this._size[0]),ue(m,this._size[0]),n._swapRows(u,m,this._size[1],this._values,this._index,this._ptr),this},n._forEachRow=function(u,m,g,N,w){for(var M=N[u],_=N[u+1],y=M;y<_;y++)w(g[y],m[y])},n._swapRows=function(u,m,g,N,w,M){for(var _=0;_<g;_++){var y=M[_],x=M[_+1],b=d(u,y,x,w),S=d(m,y,x,w);if(b<x&&S<x&&w[b]===u&&w[S]===m){if(N){var O=N[b];N[b]=N[S],N[S]=O}continue}if(b<x&&w[b]===u&&(S>=x||w[S]!==m)){var $=N?N[b]:void 0;w.splice(S,0,m),N&&N.splice(S,0,$),w.splice(S<=b?b+1:b,1),N&&N.splice(S<=b?b+1:b,1);continue}if(S<x&&w[S]===m&&(b>=x||w[b]!==u)){var I=N?N[S]:void 0;w.splice(b,0,u),N&&N.splice(b,0,I),w.splice(b<=S?S+1:S,1),N&&N.splice(b<=S?S+1:S,1)}}},n},{isClass:!0}),$o="number",zo=["typed"];function Fo(e){var t=e.match(/(0[box])([0-9a-fA-F]*)\.([0-9a-fA-F]*)/);if(t){var r={"0b":2,"0o":8,"0x":16}[t[1]],i=t[2],n=t[3];return{input:e,radix:r,integerPart:i,fractionalPart:n}}else return null}function Io(e){for(var t=parseInt(e.integerPart,e.radix),r=0,i=0;i<e.fractionalPart.length;i++){var n=parseInt(e.fractionalPart[i],e.radix);r+=n/Math.pow(e.radix,i+1)}var a=t+r;if(isNaN(a))throw new SyntaxError('String "'+e.input+'" is no valid number');return a}var Po=j($o,zo,e=>{var{typed:t}=e,r=t("number",{"":function(){return 0},number:function(n){return n},string:function(n){if(n==="NaN")return NaN;var a=Fo(n);if(a)return Io(a);var c=0,p=n.match(/(0[box][0-9a-fA-F]*)i([0-9]*)/);p&&(c=Number(p[2]),n=p[1]);var v=Number(n);if(isNaN(v))throw new SyntaxError('String "'+n+'" is no valid number');if(p){if(v>2**c-1)throw new SyntaxError('String "'.concat(n,'" is out of range'));v>=2**(c-1)&&(v=v-2**c)}return v},BigNumber:function(n){return n.toNumber()},Fraction:function(n){return n.valueOf()},Unit:function(n){throw new Error("Second argument with valueless unit expected")},null:function(n){return 0},"Unit, string | Unit":function(n,a){return n.toNumber(a)},"Array | Matrix":function(n){return Je(n,this)}});return r.fromJSON=function(i){return parseFloat(i.value)},r}),To="bignumber",Bo=["typed","BigNumber"],Lo=j(To,Bo,e=>{var{typed:t,BigNumber:r}=e;return t("bignumber",{"":function(){return new r(0)},number:function(n){return new r(n+"")},string:function(n){var a=n.match(/(0[box][0-9a-fA-F]*)i([0-9]*)/);if(a){var c=a[2],p=r(a[1]),v=new r(2).pow(Number(c));if(p.gt(v.sub(1)))throw new SyntaxError('String "'.concat(n,'" is out of range'));var d=new r(2).pow(Number(c)-1);return p.gte(d)?p.sub(v):p}return new r(n)},BigNumber:function(n){return n},Fraction:function(n){return new r(n.n).div(n.d).times(n.s)},null:function(n){return new r(0)},"Array | Matrix":function(n){return Je(n,this)}})}),Ro="fraction",qo=["typed","Fraction"],Uo=j(Ro,qo,e=>{var{typed:t,Fraction:r}=e;return t("fraction",{number:function(n){if(!isFinite(n)||isNaN(n))throw new Error(n+" cannot be represented as a fraction");return new r(n)},string:function(n){return new r(n)},"number, number":function(n,a){return new r(n,a)},null:function(n){return new r(0)},BigNumber:function(n){return new r(n.toString())},Fraction:function(n){return n},Object:function(n){return new r(n)},"Array | Matrix":function(n){return Je(n,this)}})}),hr="matrix",Zo=["typed","Matrix","DenseMatrix","SparseMatrix"],Vo=j(hr,Zo,e=>{var{typed:t,Matrix:r,DenseMatrix:i,SparseMatrix:n}=e;return t(hr,{"":function(){return a([])},string:function(p){return a([],p)},"string, string":function(p,v){return a([],p,v)},Array:function(p){return a(p)},Matrix:function(p){return a(p,p.storage())},"Array | Matrix, string":a,"Array | Matrix, string, string":a});function a(c,p,v){if(p==="dense"||p==="default"||p===void 0)return new i(c,v);if(p==="sparse")return new n(c,v);throw new TypeError("Unknown matrix type "+JSON.stringify(p)+".")}}),pr="unaryMinus",Yo=["typed"],Xo=j(pr,Yo,e=>{var{typed:t}=e;return t(pr,{number:An,Complex:function(i){return i.neg()},BigNumber:function(i){return i.neg()},Fraction:function(i){return i.neg()},Unit:function(i){var n=i.clone();return n.value=this(i.value),n},"Array | Matrix":function(i){return Je(i,this)}})}),vr="abs",Ho=["typed"],ko=j(vr,Ho,e=>{var{typed:t}=e;return t(vr,{number:Sn,Complex:function(i){return i.abs()},BigNumber:function(i){return i.abs()},Fraction:function(i){return i.abs()},"Array | Matrix":function(i){return Je(i,this)},Unit:function(i){return i.abs()}})}),dr="addScalar",Wo=["typed"],Go=j(dr,Wo,e=>{var{typed:t}=e;return t(dr,{"number, number":xn,"Complex, Complex":function(i,n){return i.add(n)},"BigNumber, BigNumber":function(i,n){return i.plus(n)},"Fraction, Fraction":function(i,n){return i.add(n)},"Unit, Unit":function(i,n){if(i.value===null||i.value===void 0)throw new Error("Parameter x contains a unit with undefined value");if(n.value===null||n.value===void 0)throw new Error("Parameter y contains a unit with undefined value");if(!i.equalBase(n))throw new Error("Units do not match");var a=i.clone();return a.value=this(a.value,n.value),a.fixPrefix=!1,a}})}),Ko="algorithm11",Jo=["typed","equalScalar"],On=j(Ko,Jo,e=>{var{typed:t,equalScalar:r}=e;return function(n,a,c,p){var v=n._values,d=n._index,s=n._ptr,o=n._size,f=n._datatype;if(!v)throw new Error("Cannot perform operation on Pattern Sparse Matrix and Scalar value");var l=o[0],h=o[1],u,m=r,g=0,N=c;typeof f=="string"&&(u=f,m=t.find(r,[u,u]),g=t.convert(0,u),a=t.convert(a,u),N=t.find(c,[u,u]));for(var w=[],M=[],_=[],y=0;y<h;y++){_[y]=M.length;for(var x=s[y],b=s[y+1],S=x;S<b;S++){var O=d[S],$=p?N(a,v[S]):N(v[S],a);m($,g)||(M.push(O),w.push($))}}return _[h]=M.length,n.createSparseMatrix({values:w,index:M,ptr:_,size:[l,h],datatype:u})}}),jo="algorithm14",Qo=["typed"],er=j(jo,Qo,e=>{var{typed:t}=e;return function(n,a,c,p){var v=n._data,d=n._size,s=n._datatype,o,f=c;typeof s=="string"&&(o=s,a=t.convert(a,o),f=t.find(c,[o,o]));var l=d.length>0?r(f,0,d,d[0],v,a,p):[];return n.createDenseMatrix({data:l,size:ve(d),datatype:o})};function r(i,n,a,c,p,v,d){var s=[];if(n===a.length-1)for(var o=0;o<c;o++)s[o]=d?i(v,p[o]):i(p[o],v);else for(var f=0;f<c;f++)s[f]=r(i,n+1,a,a[n+1],p[f],v,d);return s}}),es="algorithm01",ts=["typed"],rs=j(es,ts,e=>{var{typed:t}=e;return function(i,n,a,c){var p=i._data,v=i._size,d=i._datatype,s=n._values,o=n._index,f=n._ptr,l=n._size,h=n._datatype;if(v.length!==l.length)throw new te(v.length,l.length);if(v[0]!==l[0]||v[1]!==l[1])throw new RangeError("Dimension mismatch. Matrix A ("+v+") must match Matrix B ("+l+")");if(!s)throw new Error("Cannot perform operation on Dense Matrix and Pattern Sparse Matrix");var u=v[0],m=v[1],g=typeof d=="string"&&d===h?d:void 0,N=g?t.find(a,[g,g]):a,w,M,_=[];for(w=0;w<u;w++)_[w]=[];var y=[],x=[];for(M=0;M<m;M++){for(var b=M+1,S=f[M],O=f[M+1],$=S;$<O;$++)w=o[$],y[w]=c?N(s[$],p[w][M]):N(p[w][M],s[$]),x[w]=b;for(w=0;w<u;w++)x[w]===b?_[w][M]=y[w]:_[w][M]=p[w][M]}return i.createDenseMatrix({data:_,size:[u,m],datatype:g})}}),ns="algorithm10",is=["typed","DenseMatrix"],as=j(ns,is,e=>{var{typed:t,DenseMatrix:r}=e;return function(n,a,c,p){var v=n._values,d=n._index,s=n._ptr,o=n._size,f=n._datatype;if(!v)throw new Error("Cannot perform operation on Pattern Sparse Matrix and Scalar value");var l=o[0],h=o[1],u,m=c;typeof f=="string"&&(u=f,a=t.convert(a,u),m=t.find(c,[u,u]));for(var g=[],N=[],w=[],M=0;M<h;M++){for(var _=M+1,y=s[M],x=s[M+1],b=y;b<x;b++){var S=d[b];N[S]=v[b],w[S]=_}for(var O=0;O<l;O++)M===0&&(g[O]=[]),w[O]===_?g[O][M]=p?m(a,N[O]):m(N[O],a):g[O][M]=a}return new r({data:g,size:[l,h],datatype:u})}}),os="algorithm13",ss=["typed"],us=j(os,ss,e=>{var{typed:t}=e;return function(n,a,c){var p=n._data,v=n._size,d=n._datatype,s=a._data,o=a._size,f=a._datatype,l=[];if(v.length!==o.length)throw new te(v.length,o.length);for(var h=0;h<v.length;h++){if(v[h]!==o[h])throw new RangeError("Dimension mismatch. Matrix A ("+v+") must match Matrix B ("+o+")");l[h]=v[h]}var u,m=c;typeof d=="string"&&d===f&&(u=d,m=t.find(c,[u,u]));var g=l.length>0?r(m,0,l,l[0],p,s):[];return n.createDenseMatrix({data:g,size:l,datatype:u})};function r(i,n,a,c,p,v){var d=[];if(n===a.length-1)for(var s=0;s<c;s++)d[s]=i(p[s],v[s]);else for(var o=0;o<c;o++)d[o]=r(i,n+1,a,a[n+1],p[o],v[o]);return d}}),fs="algorithm03",cs=["typed"],ls=j(fs,cs,e=>{var{typed:t}=e;return function(i,n,a,c){var p=i._data,v=i._size,d=i._datatype,s=n._values,o=n._index,f=n._ptr,l=n._size,h=n._datatype;if(v.length!==l.length)throw new te(v.length,l.length);if(v[0]!==l[0]||v[1]!==l[1])throw new RangeError("Dimension mismatch. Matrix A ("+v+") must match Matrix B ("+l+")");if(!s)throw new Error("Cannot perform operation on Dense Matrix and Pattern Sparse Matrix");var u=v[0],m=v[1],g,N=0,w=a;typeof d=="string"&&d===h&&(g=d,N=t.convert(0,g),w=t.find(a,[g,g]));for(var M=[],_=0;_<u;_++)M[_]=[];for(var y=[],x=[],b=0;b<m;b++){for(var S=b+1,O=f[b],$=f[b+1],I=O;I<$;I++){var R=o[I];y[R]=c?w(s[I],p[R][b]):w(p[R][b],s[I]),x[R]=S}for(var P=0;P<u;P++)x[P]===S?M[P][b]=y[P]:M[P][b]=c?w(N,p[P][b]):w(p[P][b],N)}return i.createDenseMatrix({data:M,size:[u,m],datatype:g})}}),hs="algorithm05",ps=["typed","equalScalar"],vs=j(hs,ps,e=>{var{typed:t,equalScalar:r}=e;return function(n,a,c){var p=n._values,v=n._index,d=n._ptr,s=n._size,o=n._datatype,f=a._values,l=a._index,h=a._ptr,u=a._size,m=a._datatype;if(s.length!==u.length)throw new te(s.length,u.length);if(s[0]!==u[0]||s[1]!==u[1])throw new RangeError("Dimension mismatch. Matrix A ("+s+") must match Matrix B ("+u+")");var g=s[0],N=s[1],w,M=r,_=0,y=c;typeof o=="string"&&o===m&&(w=o,M=t.find(r,[w,w]),_=t.convert(0,w),y=t.find(c,[w,w]));var x=p&&f?[]:void 0,b=[],S=[],O=x?[]:void 0,$=x?[]:void 0,I=[],R=[],P,T,F,V;for(T=0;T<N;T++){S[T]=b.length;var q=T+1;for(F=d[T],V=d[T+1];F<V;F++)P=v[F],b.push(P),I[P]=q,O&&(O[P]=p[F]);for(F=h[T],V=h[T+1];F<V;F++)P=l[F],I[P]!==q&&b.push(P),R[P]=q,$&&($[P]=f[F]);if(x)for(F=S[T];F<b.length;){P=b[F];var Y=I[P],G=R[P];if(Y===q||G===q){var Q=Y===q?O[P]:_,ee=G===q?$[P]:_,J=y(Q,ee);M(J,_)?b.splice(F,1):(x.push(J),F++)}}}return S[N]=b.length,n.createSparseMatrix({values:x,index:b,ptr:S,size:[g,N],datatype:w})}}),ds="multiplyScalar",ms=["typed"],gs=j(ds,ms,e=>{var{typed:t}=e;return t("multiplyScalar",{"number, number":Cn,"Complex, Complex":function(i,n){return i.mul(n)},"BigNumber, BigNumber":function(i,n){return i.times(n)},"Fraction, Fraction":function(i,n){return i.mul(n)},"number | Fraction | BigNumber | Complex, Unit":function(i,n){var a=n.clone();return a.value=a.value===null?a._normalize(i):this(a.value,i),a},"Unit, number | Fraction | BigNumber | Complex":function(i,n){var a=i.clone();return a.value=a.value===null?a._normalize(n):this(a.value,n),a},"Unit, Unit":function(i,n){return i.multiply(n)}})}),mr="multiply",ws=["typed","matrix","addScalar","multiplyScalar","equalScalar","dot"],ys=j(mr,ws,e=>{var{typed:t,matrix:r,addScalar:i,multiplyScalar:n,equalScalar:a,dot:c}=e,p=On({typed:t,equalScalar:a}),v=er({typed:t});function d(_,y){switch(_.length){case 1:switch(y.length){case 1:if(_[0]!==y[0])throw new RangeError("Dimension mismatch in multiplication. Vectors must have the same length");break;case 2:if(_[0]!==y[0])throw new RangeError("Dimension mismatch in multiplication. Vector length ("+_[0]+") must match Matrix rows ("+y[0]+")");break;default:throw new Error("Can only multiply a 1 or 2 dimensional matrix (Matrix B has "+y.length+" dimensions)")}break;case 2:switch(y.length){case 1:if(_[1]!==y[0])throw new RangeError("Dimension mismatch in multiplication. Matrix columns ("+_[1]+") must match Vector length ("+y[0]+")");break;case 2:if(_[1]!==y[0])throw new RangeError("Dimension mismatch in multiplication. Matrix A columns ("+_[1]+") must match Matrix B rows ("+y[0]+")");break;default:throw new Error("Can only multiply a 1 or 2 dimensional matrix (Matrix B has "+y.length+" dimensions)")}break;default:throw new Error("Can only multiply a 1 or 2 dimensional matrix (Matrix A has "+_.length+" dimensions)")}}function s(_,y,x){if(x===0)throw new Error("Cannot multiply two empty vectors");return c(_,y)}function o(_,y){if(y.storage()!=="dense")throw new Error("Support for SparseMatrix not implemented");return f(_,y)}function f(_,y){var x=_._data,b=_._size,S=_._datatype,O=y._data,$=y._size,I=y._datatype,R=b[0],P=$[1],T,F=i,V=n;S&&I&&S===I&&typeof S=="string"&&(T=S,F=t.find(i,[T,T]),V=t.find(n,[T,T]));for(var q=[],Y=0;Y<P;Y++){for(var G=V(x[0],O[0][Y]),Q=1;Q<R;Q++)G=F(G,V(x[Q],O[Q][Y]));q[Y]=G}return _.createDenseMatrix({data:q,size:[P],datatype:T})}var l=t("_multiplyMatrixVector",{"DenseMatrix, any":u,"SparseMatrix, any":N}),h=t("_multiplyMatrixMatrix",{"DenseMatrix, DenseMatrix":m,"DenseMatrix, SparseMatrix":g,"SparseMatrix, DenseMatrix":w,"SparseMatrix, SparseMatrix":M});function u(_,y){var x=_._data,b=_._size,S=_._datatype,O=y._data,$=y._datatype,I=b[0],R=b[1],P,T=i,F=n;S&&$&&S===$&&typeof S=="string"&&(P=S,T=t.find(i,[P,P]),F=t.find(n,[P,P]));for(var V=[],q=0;q<I;q++){for(var Y=x[q],G=F(Y[0],O[0]),Q=1;Q<R;Q++)G=T(G,F(Y[Q],O[Q]));V[q]=G}return _.createDenseMatrix({data:V,size:[I],datatype:P})}function m(_,y){var x=_._data,b=_._size,S=_._datatype,O=y._data,$=y._size,I=y._datatype,R=b[0],P=b[1],T=$[1],F,V=i,q=n;S&&I&&S===I&&typeof S=="string"&&(F=S,V=t.find(i,[F,F]),q=t.find(n,[F,F]));for(var Y=[],G=0;G<R;G++){var Q=x[G];Y[G]=[];for(var ee=0;ee<T;ee++){for(var J=q(Q[0],O[0][ee]),he=1;he<P;he++)J=V(J,q(Q[he],O[he][ee]));Y[G][ee]=J}}return _.createDenseMatrix({data:Y,size:[R,T],datatype:F})}function g(_,y){var x=_._data,b=_._size,S=_._datatype,O=y._values,$=y._index,I=y._ptr,R=y._size,P=y._datatype;if(!O)throw new Error("Cannot multiply Dense Matrix times Pattern only Matrix");var T=b[0],F=R[1],V,q=i,Y=n,G=a,Q=0;S&&P&&S===P&&typeof S=="string"&&(V=S,q=t.find(i,[V,V]),Y=t.find(n,[V,V]),G=t.find(a,[V,V]),Q=t.convert(0,V));for(var ee=[],J=[],he=[],pe=y.createSparseMatrix({values:ee,index:J,ptr:he,size:[T,F],datatype:V}),me=0;me<F;me++){he[me]=J.length;var oe=I[me],xe=I[me+1];if(xe>oe)for(var ce=0,ie=0;ie<T;ie++){for(var Ae=ie+1,be=void 0,re=oe;re<xe;re++){var Ne=$[re];ce!==Ae?(be=Y(x[ie][Ne],O[re]),ce=Ae):be=q(be,Y(x[ie][Ne],O[re]))}ce===Ae&&!G(be,Q)&&(J.push(ie),ee.push(be))}}return he[F]=J.length,pe}function N(_,y){var x=_._values,b=_._index,S=_._ptr,O=_._datatype;if(!x)throw new Error("Cannot multiply Pattern only Matrix times Dense Matrix");var $=y._data,I=y._datatype,R=_._size[0],P=y._size[0],T=[],F=[],V=[],q,Y=i,G=n,Q=a,ee=0;O&&I&&O===I&&typeof O=="string"&&(q=O,Y=t.find(i,[q,q]),G=t.find(n,[q,q]),Q=t.find(a,[q,q]),ee=t.convert(0,q));var J=[],he=[];V[0]=0;for(var pe=0;pe<P;pe++){var me=$[pe];if(!Q(me,ee))for(var oe=S[pe],xe=S[pe+1],ce=oe;ce<xe;ce++){var ie=b[ce];he[ie]?J[ie]=Y(J[ie],G(me,x[ce])):(he[ie]=!0,F.push(ie),J[ie]=G(me,x[ce]))}}for(var Ae=F.length,be=0;be<Ae;be++){var re=F[be];T[be]=J[re]}return V[1]=F.length,_.createSparseMatrix({values:T,index:F,ptr:V,size:[R,1],datatype:q})}function w(_,y){var x=_._values,b=_._index,S=_._ptr,O=_._datatype;if(!x)throw new Error("Cannot multiply Pattern only Matrix times Dense Matrix");var $=y._data,I=y._datatype,R=_._size[0],P=y._size[0],T=y._size[1],F,V=i,q=n,Y=a,G=0;O&&I&&O===I&&typeof O=="string"&&(F=O,V=t.find(i,[F,F]),q=t.find(n,[F,F]),Y=t.find(a,[F,F]),G=t.convert(0,F));for(var Q=[],ee=[],J=[],he=_.createSparseMatrix({values:Q,index:ee,ptr:J,size:[R,T],datatype:F}),pe=[],me=[],oe=0;oe<T;oe++){J[oe]=ee.length;for(var xe=oe+1,ce=0;ce<P;ce++){var ie=$[ce][oe];if(!Y(ie,G))for(var Ae=S[ce],be=S[ce+1],re=Ae;re<be;re++){var Ne=b[re];me[Ne]!==xe?(me[Ne]=xe,ee.push(Ne),pe[Ne]=q(ie,x[re])):pe[Ne]=V(pe[Ne],q(ie,x[re]))}}for(var De=J[oe],Ye=ee.length,Be=De;Be<Ye;Be++){var tt=ee[Be];Q[Be]=pe[tt]}}return J[T]=ee.length,he}function M(_,y){var x=_._values,b=_._index,S=_._ptr,O=_._datatype,$=y._values,I=y._index,R=y._ptr,P=y._datatype,T=_._size[0],F=y._size[1],V=x&&$,q,Y=i,G=n;O&&P&&O===P&&typeof O=="string"&&(q=O,Y=t.find(i,[q,q]),G=t.find(n,[q,q]));for(var Q=V?[]:void 0,ee=[],J=[],he=_.createSparseMatrix({values:Q,index:ee,ptr:J,size:[T,F],datatype:q}),pe=V?[]:void 0,me=[],oe,xe,ce,ie,Ae,be,re,Ne,De=0;De<F;De++){J[De]=ee.length;var Ye=De+1;for(Ae=R[De],be=R[De+1],ie=Ae;ie<be;ie++)if(Ne=I[ie],V)for(xe=S[Ne],ce=S[Ne+1],oe=xe;oe<ce;oe++)re=b[oe],me[re]!==Ye?(me[re]=Ye,ee.push(re),pe[re]=G($[ie],x[oe])):pe[re]=Y(pe[re],G($[ie],x[oe]));else for(xe=S[Ne],ce=S[Ne+1],oe=xe;oe<ce;oe++)re=b[oe],me[re]!==Ye&&(me[re]=Ye,ee.push(re));if(V)for(var Be=J[De],tt=ee.length,je=Be;je<tt;je++){var E=ee[je];Q[je]=pe[E]}}return J[F]=ee.length,he}return t(mr,jr({"Array, Array":function(y,x){d(We(y),We(x));var b=this(r(y),r(x));return _e(b)?b.valueOf():b},"Matrix, Matrix":function(y,x){var b=y.size(),S=x.size();return d(b,S),b.length===1?S.length===1?s(y,x,b[0]):o(y,x):S.length===1?l(y,x):h(y,x)},"Matrix, Array":function(y,x){return this(y,r(x))},"Array, Matrix":function(y,x){return this(r(y,x.storage()),x)},"SparseMatrix, any":function(y,x){return p(y,x,n,!1)},"DenseMatrix, any":function(y,x){return v(y,x,n,!1)},"any, SparseMatrix":function(y,x){return p(x,y,n,!0)},"any, DenseMatrix":function(y,x){return v(x,y,n,!0)},"Array, any":function(y,x){return v(r(y),x,n,!1).valueOf()},"any, Array":function(y,x){return v(r(x),y,n,!0).valueOf()},"any, any":n,"any, any, ...any":function(y,x,b){for(var S=this(y,x),O=0;O<b.length;O++)S=this(S,b[O]);return S}},n.signatures))}),gr="subtract",_s=["typed","matrix","equalScalar","addScalar","unaryMinus","DenseMatrix"],bs=j(gr,_s,e=>{var{typed:t,matrix:r,equalScalar:i,addScalar:n,unaryMinus:a,DenseMatrix:c}=e,p=rs({typed:t}),v=ls({typed:t}),d=vs({typed:t,equalScalar:i}),s=as({typed:t,DenseMatrix:c}),o=us({typed:t}),f=er({typed:t});return t(gr,{"number, number":function(h,u){return h-u},"Complex, Complex":function(h,u){return h.sub(u)},"BigNumber, BigNumber":function(h,u){return h.minus(u)},"Fraction, Fraction":function(h,u){return h.sub(u)},"Unit, Unit":function(h,u){if(h.value===null)throw new Error("Parameter x contains a unit with undefined value");if(u.value===null)throw new Error("Parameter y contains a unit with undefined value");if(!h.equalBase(u))throw new Error("Units do not match");var m=h.clone();return m.value=this(m.value,u.value),m.fixPrefix=!1,m},"SparseMatrix, SparseMatrix":function(h,u){return pt(h,u),d(h,u,this)},"SparseMatrix, DenseMatrix":function(h,u){return pt(h,u),v(u,h,this,!0)},"DenseMatrix, SparseMatrix":function(h,u){return pt(h,u),p(h,u,this,!1)},"DenseMatrix, DenseMatrix":function(h,u){return pt(h,u),o(h,u,this)},"Array, Array":function(h,u){return this(r(h),r(u)).valueOf()},"Array, Matrix":function(h,u){return this(r(h),u)},"Matrix, Array":function(h,u){return this(h,r(u))},"SparseMatrix, any":function(h,u){return s(h,a(u),n)},"DenseMatrix, any":function(h,u){return f(h,u,this)},"any, SparseMatrix":function(h,u){return s(u,h,this,!0)},"any, DenseMatrix":function(h,u){return f(u,h,this,!0)},"Array, any":function(h,u){return f(r(h),u,this,!1).valueOf()},"any, Array":function(h,u){return f(r(u),h,this,!0).valueOf()}})});function pt(e,t){var r=e.size(),i=t.size();if(r.length!==i.length)throw new te(r.length,i.length)}var wr="conj",Ns=["typed"],Ms=j(wr,Ns,e=>{var{typed:t}=e;return t(wr,{number:function(i){return i},BigNumber:function(i){return i},Complex:function(i){return i.conjugate()},"Array | Matrix":function(i){return Je(i,this)}})}),yr="identity",Es=["typed","config","matrix","BigNumber","DenseMatrix","SparseMatrix"],Ss=j(yr,Es,e=>{var{typed:t,config:r,matrix:i,BigNumber:n,DenseMatrix:a,SparseMatrix:c}=e;return t(yr,{"":function(){return r.matrix==="Matrix"?i([]):[]},string:function(s){return i(s)},"number | BigNumber":function(s){return v(s,s,r.matrix==="Matrix"?"dense":void 0)},"number | BigNumber, string":function(s,o){return v(s,s,o)},"number | BigNumber, number | BigNumber":function(s,o){return v(s,o,r.matrix==="Matrix"?"dense":void 0)},"number | BigNumber, number | BigNumber, string":function(s,o,f){return v(s,o,f)},Array:function(s){return p(s)},"Array, string":function(s,o){return p(s,o)},Matrix:function(s){return p(s.valueOf(),s.storage())},"Matrix, string":function(s,o){return p(s.valueOf(),o)}});function p(d,s){switch(d.length){case 0:return s?i(s):[];case 1:return v(d[0],d[0],s);case 2:return v(d[0],d[1],s);default:throw new Error("Vector containing two values expected")}}function v(d,s,o){var f=Ce(d)||Ce(s)?n:null;if(Ce(d)&&(d=d.toNumber()),Ce(s)&&(s=s.toNumber()),!ye(d)||d<1)throw new Error("Parameters in function identity must be positive integers");if(!ye(s)||s<1)throw new Error("Parameters in function identity must be positive integers");var l=f?new n(1):1,h=f?new f(0):0,u=[d,s];if(o){if(o==="sparse")return c.diagonal(u,l,0,h);if(o==="dense")return a.diagonal(u,l,0,h);throw new TypeError('Unknown matrix type "'.concat(o,'"'))}for(var m=Ut([],u,h),g=d<s?d:s,N=0;N<g;N++)m[N][N]=l;return m}});function xs(){throw new Error('No "bignumber" implementation available')}function Cs(){throw new Error('No "fraction" implementation available')}function As(){throw new Error('No "matrix" implementation available')}var _r="size",Ds=["typed","config","?matrix"],Os=j(_r,Ds,e=>{var{typed:t,config:r,matrix:i}=e;return t(_r,{Matrix:function(a){return a.create(a.size())},Array:We,string:function(a){return r.matrix==="Array"?[a.length]:i([a.length])},"number | Complex | BigNumber | Unit | boolean | null":function(a){return r.matrix==="Array"?[]:i?i([]):As()}})}),$s="numeric",zs=["number","?bignumber","?fraction"],Fs=j($s,zs,e=>{var{number:t,bignumber:r,fraction:i}=e,n={string:!0,number:!0,BigNumber:!0,Fraction:!0},a={number:c=>t(c),BigNumber:r?c=>r(c):xs,Fraction:i?c=>i(c):Cs};return function(p,v){var d=ke(p);if(!(d in n))throw new TypeError("Cannot convert "+p+' of type "'+d+'"; valid input types are '+Object.keys(n).join(", "));if(!(v in a))throw new TypeError("Cannot convert "+p+' to type "'+v+'"; valid output types are '+Object.keys(a).join(", "));return v===d?p:a[v](p)}}),br="divideScalar",Is=["typed","numeric"],Ps=j(br,Is,e=>{var{typed:t,numeric:r}=e;return t(br,{"number, number":function(n,a){return n/a},"Complex, Complex":function(n,a){return n.div(a)},"BigNumber, BigNumber":function(n,a){return n.div(a)},"Fraction, Fraction":function(n,a){return n.div(a)},"Unit, number | Fraction | BigNumber":function(n,a){var c=n.clone(),p=r(1,ke(a));return c.value=this(c.value===null?c._normalize(p):c.value,a),c},"number | Fraction | BigNumber, Unit":function(n,a){var c=a.clone();c=c.pow(-1);var p=r(1,ke(n));return c.value=this(n,a.value===null?a._normalize(p):a.value),c},"Unit, Unit":function(n,a){return n.divide(a)}})}),Nr="dot",Ts=["typed","addScalar","multiplyScalar","conj","size"],Bs=j(Nr,Ts,e=>{var{typed:t,addScalar:r,multiplyScalar:i,conj:n,size:a}=e;return t(Nr,{"Array | DenseMatrix, Array | DenseMatrix":p,"SparseMatrix, SparseMatrix":v});function c(s,o){var f=d(s),l=d(o),h,u;if(f.length===1)h=f[0];else if(f.length===2&&f[1]===1)h=f[0];else throw new RangeError("Expected a column vector, instead got a matrix of size ("+f.join(", ")+")");if(l.length===1)u=l[0];else if(l.length===2&&l[1]===1)u=l[0];else throw new RangeError("Expected a column vector, instead got a matrix of size ("+l.join(", ")+")");if(h!==u)throw new RangeError("Vectors must have equal length ("+h+" != "+u+")");if(h===0)throw new RangeError("Cannot calculate the dot product of empty vectors");return h}function p(s,o){var f=c(s,o),l=_e(s)?s._data:s,h=_e(s)?s._datatype:void 0,u=_e(o)?o._data:o,m=_e(o)?o._datatype:void 0,g=d(s).length===2,N=d(o).length===2,w=r,M=i;if(h&&m&&h===m&&typeof h=="string"){var _=h;w=t.find(r,[_,_]),M=t.find(i,[_,_])}if(!g&&!N){for(var y=M(n(l[0]),u[0]),x=1;x<f;x++)y=w(y,M(n(l[x]),u[x]));return y}if(!g&&N){for(var b=M(n(l[0]),u[0][0]),S=1;S<f;S++)b=w(b,M(n(l[S]),u[S][0]));return b}if(g&&!N){for(var O=M(n(l[0][0]),u[0]),$=1;$<f;$++)O=w(O,M(n(l[$][0]),u[$]));return O}if(g&&N){for(var I=M(n(l[0][0]),u[0][0]),R=1;R<f;R++)I=w(I,M(n(l[R][0]),u[R][0]));return I}}function v(s,o){c(s,o);for(var f=s._index,l=s._values,h=o._index,u=o._values,m=0,g=r,N=i,w=0,M=0;w<f.length&&M<h.length;){var _=f[w],y=h[M];if(_<y){w++;continue}if(_>y){M++;continue}_===y&&(m=g(m,N(l[w],u[M])),w++,M++)}return m}function d(s){return _e(s)?s.size():a(s)}}),Mr="det",Ls=["typed","matrix","subtract","multiply","divideScalar","isZero","unaryMinus"],Rs=j(Mr,Ls,e=>{var{typed:t,matrix:r,subtract:i,multiply:n,divideScalar:a,isZero:c,unaryMinus:p}=e;return t(Mr,{any:function(s){return ve(s)},"Array | Matrix":function(s){var o;switch(_e(s)?o=s.size():Array.isArray(s)?(s=r(s),o=s.size()):o=[],o.length){case 0:return ve(s);case 1:if(o[0]===1)return ve(s.valueOf()[0]);throw new RangeError("Matrix must be square (size: "+ge(o)+")");case 2:{var f=o[0],l=o[1];if(f===l)return v(s.clone().valueOf(),f);throw new RangeError("Matrix must be square (size: "+ge(o)+")")}default:throw new RangeError("Matrix must be two dimensional (size: "+ge(o)+")")}}});function v(d,s,o){if(s===1)return ve(d[0][0]);if(s===2)return i(n(d[0][0],d[1][1]),n(d[1][0],d[0][1]));for(var f=!1,l=new Array(s).fill(0).map((x,b)=>b),h=0;h<s;h++){var u=l[h];if(c(d[u][h])){var m=void 0;for(m=h+1;m<s;m++)if(!c(d[l[m]][h])){u=l[m],l[m]=l[h],l[h]=u,f=!f;break}if(m===s)return d[u][h]}for(var g=d[u][h],N=h===0?1:d[l[h-1]][h-1],w=h+1;w<s;w++)for(var M=l[w],_=h+1;_<s;_++)d[M][_]=a(i(n(d[M][_],g),n(d[M][h],d[u][_])),N)}var y=d[l[s-1]][s-1];return f?p(y):y}}),Er="inv",qs=["typed","matrix","divideScalar","addScalar","multiply","unaryMinus","det","identity","abs"],Us=j(Er,qs,e=>{var{typed:t,matrix:r,divideScalar:i,addScalar:n,multiply:a,unaryMinus:c,det:p,identity:v,abs:d}=e;return t(Er,{"Array | Matrix":function(f){var l=_e(f)?f.size():We(f);switch(l.length){case 1:if(l[0]===1)return _e(f)?r([i(1,f.valueOf()[0])]):[i(1,f[0])];throw new RangeError("Matrix must be square (size: "+ge(l)+")");case 2:{var h=l[0],u=l[1];if(h===u)return _e(f)?r(s(f.valueOf(),h,u),f.storage()):s(f,h,u);throw new RangeError("Matrix must be square (size: "+ge(l)+")")}default:throw new RangeError("Matrix must be two dimensional (size: "+ge(l)+")")}},any:function(f){return i(1,f)}});function s(o,f,l){var h,u,m,g,N;if(f===1){if(g=o[0][0],g===0)throw Error("Cannot calculate inverse, determinant is zero");return[[i(1,g)]]}else if(f===2){var w=p(o);if(w===0)throw Error("Cannot calculate inverse, determinant is zero");return[[i(o[1][1],w),i(c(o[0][1]),w)],[i(c(o[1][0]),w),i(o[0][0],w)]]}else{var M=o.concat();for(h=0;h<f;h++)M[h]=M[h].concat();for(var _=v(f).valueOf(),y=0;y<l;y++){var x=d(M[y][y]),b=y;for(h=y+1;h<f;)d(M[h][y])>x&&(x=d(M[h][y]),b=h),h++;if(x===0)throw Error("Cannot calculate inverse, determinant is zero");h=b,h!==y&&(N=M[y],M[y]=M[h],M[h]=N,N=_[y],_[y]=_[h],_[h]=N);var S=M[y],O=_[y];for(h=0;h<f;h++){var $=M[h],I=_[h];if(h!==y){if($[y]!==0){for(m=i(c($[y]),S[y]),u=y;u<l;u++)$[u]=n($[u],a(m,S[u]));for(u=0;u<l;u++)I[u]=n(I[u],a(m,O[u]))}}else{for(m=S[y],u=y;u<l;u++)$[u]=i($[u],m);for(u=0;u<l;u++)I[u]=i(I[u],m)}}}return _}}}),Zs="divide",Vs=["typed","matrix","multiply","equalScalar","divideScalar","inv"],Ys=j(Zs,Vs,e=>{var{typed:t,matrix:r,multiply:i,equalScalar:n,divideScalar:a,inv:c}=e,p=On({typed:t,equalScalar:n}),v=er({typed:t});return t("divide",jr({"Array | Matrix, Array | Matrix":function(s,o){return i(s,c(o))},"DenseMatrix, any":function(s,o){return v(s,o,a,!1)},"SparseMatrix, any":function(s,o){return p(s,o,a,!1)},"Array, any":function(s,o){return v(r(s),o,a,!1).valueOf()},"any, Array | Matrix":function(s,o){return i(s,c(o))}},a.signatures))}),tr=so({config:lt}),Xs=co({}),$n=po({}),rr=go({}),At=_o({Matrix:rr}),de=ca({BigNumber:tr,Complex:Xs,DenseMatrix:At,Fraction:$n}),Hs=ko({typed:de}),Dt=Go({typed:de}),ks=Lo({BigNumber:tr,typed:de}),Ws=Ms({typed:de}),Ot=Co({config:lt,typed:de}),Gs=Mo({typed:de}),zn=gs({typed:de}),Ks=Po({typed:de}),Fn=Oo({Matrix:rr,equalScalar:Ot,typed:de}),nr=Xo({typed:de}),Js=Uo({Fraction:$n,typed:de}),et=Vo({DenseMatrix:At,Matrix:rr,SparseMatrix:Fn,typed:de}),js=Fs({bignumber:ks,fraction:Js,number:Ks}),Qs=Os({matrix:et,config:lt,typed:de}),eu=bs({DenseMatrix:At,addScalar:Dt,equalScalar:Ot,matrix:et,typed:de,unaryMinus:nr}),ir=Ps({numeric:js,typed:de}),tu=Bs({addScalar:Dt,conj:Ws,multiplyScalar:zn,size:Qs,typed:de}),ru=Ss({BigNumber:tr,DenseMatrix:At,SparseMatrix:Fn,config:lt,matrix:et,typed:de}),$t=ys({addScalar:Dt,dot:tu,equalScalar:Ot,matrix:et,multiplyScalar:zn,typed:de}),nu=Rs({divideScalar:ir,isZero:Gs,matrix:et,multiply:$t,subtract:eu,typed:de,unaryMinus:nr}),iu=Us({abs:Hs,addScalar:Dt,det:nu,divideScalar:ir,identity:ru,matrix:et,multiply:$t,typed:de,unaryMinus:nr}),au=Ys({divideScalar:ir,equalScalar:Ot,inv:iu,matrix:et,multiply:$t,typed:de});function ou(e){return e*Math.PI/180}function su(e){return $t(e,au(parseInt(fe.state.canvasStyleData.scale),100))}function Sr(e){return Math.abs(Math.cos(ou(e)))}function xr(e){return(e+360)%360}function Cr(e){return e?"infinite":"no-infinite"}const uu=async(e,t=[])=>{const r=n=>new Promise(a=>{const{animationTime:c,value:p="",isLoop:v}=n;e.style.setProperty("--time",c+"s"),e.classList.add(p,"animated",Cr(v));const d=()=>{e.removeEventListener("animationend",d),e.removeEventListener("animationcancel",d),e.classList.remove(p,"animated",Cr(v)),e.style.removeProperty("--time"),a()};e.addEventListener("animationend",d),e.addEventListener("animationcancel",d)}),i=t.length;for(let n=0;n<i;n++)await r(t[n])};function fu(e,t=[]){const r=["fontSize","width","height","top","left","borderWidth","letterSpacing","borderRadius"],i={};return Object.keys(e).forEach(n=>{t.includes(n)||(n!="rotate"?(i[n]=e[n],r.includes(n)&&(i[n]+="px")):i.transform=n+"("+e[n]+"deg)")}),i}function Wt(e){if(e={...e},e.rotate){const t=e.width*Sr(e.rotate)+e.height*(e.rotate,void 0),r=(e.width-t)/2;e.left+=r,e.right=e.left+t,e.height*Sr(e.rotate)+e.width*(e.rotate,void 0)}else e.bottom=e.top+e.height,e.right=e.left+e.width;return e}const Ar=17,Dr=91,cu=86,lu=67,hu=88,pu=89,vu=90,du=71,mu=66,gu=76,wu=85,yu=83,_u=80,bu=68,In=46,Nu=69;let Lt=!1;const Mu=()=>{fe.commit("paste"),fe.commit("recordSnapshot")},Eu=()=>{fe.commit("redo")},Su=()=>{fe.commit("undo")},xu=()=>{ze.$emit("save")},Cu=()=>{ze.$emit("preview")},Au=()=>{ze.$emit("clearCanvas")},Du=()=>{fe.commit("unlock")},Ou=()=>{fe.commit("lock")},Or=()=>{fe.state.curComponent&&(fe.commit("deleteComponent"),fe.commit("recordSnapshot"))},$u=()=>{fe.commit("copy")},zu=()=>{fe.commit("cut")},Fu=()=>{fe.state.areaData.components.length&&(fe.commit("compose"),fe.commit("recordSnapshot"))},Iu=()=>{const e=fe.state.curComponent;e&&!e.isLock&&e.component=="Group"&&(fe.commit("decompose"),fe.commit("recordSnapshot"))},Pn={[cu]:Mu,[pu]:Eu,[vu]:Su,[yu]:xu,[_u]:Cu,[Nu]:Au},$r={...Pn,[wu]:Du},zr={...Pn,[lu]:$u,[hu]:zu,[du]:Fu,[mu]:Iu,[bu]:Or,[In]:Or,[gu]:Ou},Pu=()=>{window.onkeydown=e=>{if(!fe.state.isInEdiotr)return;const{curComponent:t}=fe.state,{keyCode:r}=e;r===Ar||r===Dr?Lt=!0:r==In&&t?(fe.commit("deleteComponent"),fe.commit("recordSnapshot")):Lt&&((!t||!t.isLock)&&zr[r]?(e.preventDefault(),zr[r]()):t&&t.isLock&&$r[r]&&(e.preventDefault(),$r[r]()))},window.onkeyup=e=>{(e.keyCode===Ar||e.keyCode===Dr)&&(Lt=!1)},window.onmousedown=()=>{fe.commit("setInEditorStatus",!1)}};var Tu=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("div",{staticClass:"toolbar"},[r("el-button",{on:{click:e.undo}},[e._v("\u64A4\u6D88 undo")]),r("el-button",{on:{click:e.redo}},[e._v("\u91CD\u505A redo")]),r("label",{staticClass:"insert",attrs:{for:"input"}},[e._v("\u63D2\u5165\u56FE\u7247")]),r("input",{attrs:{id:"input",type:"file",hidden:""},on:{change:e.handleFileChange}}),r("el-button",{staticStyle:{"margin-left":"10px"},on:{click:e.preview}},[e._v("\u9884\u89C8")]),r("el-button",{on:{click:e.save}},[e._v("\u4FDD\u5B58")]),r("el-button",{on:{click:e.clearCanvas}},[e._v("\u6E05\u7A7A\u753B\u5E03")]),r("el-button",{attrs:{disabled:!e.areaData.components.length},on:{click:e.compose}},[e._v("\u7EC4\u5408")]),r("el-button",{attrs:{disabled:!e.curComponent||e.curComponent.isLock||e.curComponent.component!="Group"},on:{click:e.decompose}},[e._v(" \u62C6\u5206 ")]),r("el-button",{attrs:{disabled:!e.curComponent||e.curComponent.isLock},on:{click:e.lock}},[e._v("\u9501\u5B9A")]),r("el-button",{attrs:{disabled:!e.curComponent||!e.curComponent.isLock},on:{click:e.unlock}},[e._v("\u89E3\u9501")]),r("div",{staticClass:"canvas-config"},[r("span",[e._v("\u753B\u5E03\u5927\u5C0F")]),r("input",{directives:[{name:"model",rawName:"v-model",value:e.canvasStyleData.width,expression:"canvasStyleData.width"}],domProps:{value:e.canvasStyleData.width},on:{input:function(i){i.target.composing||e.$set(e.canvasStyleData,"width",i.target.value)}}}),r("span",[e._v("*")]),r("input",{directives:[{name:"model",rawName:"v-model",value:e.canvasStyleData.height,expression:"canvasStyleData.height"}],domProps:{value:e.canvasStyleData.height},on:{input:function(i){i.target.composing||e.$set(e.canvasStyleData,"height",i.target.value)}}})]),r("div",{staticClass:"canvas-config"},[r("span",[e._v("\u753B\u5E03\u6BD4\u4F8B")]),r("input",{directives:[{name:"model",rawName:"v-model",value:e.scale,expression:"scale"}],domProps:{value:e.scale},on:{input:[function(i){i.target.composing||(e.scale=i.target.value)},e.handleScaleChange]}}),e._v(" % ")])],1)])},Bu=[];const Lu={components:{},data(){return{isShowPreview:!1,needToChange:["top","left","width","height","fontSize"],scale:"100%",timer:null}},computed:st(["componentData","canvasStyleData","areaData","curComponent","curComponentIndex"]),created(){ze.$on("preview",this.preview),ze.$on("save",this.save),ze.$on("clearCanvas",this.clearCanvas),this.scale=this.canvasStyleData.scale},methods:{format(e){},getOriginStyle(e){},handleScaleChange(){},lock(){},unlock(){},compose(){},decompose(){},undo(){},redo(){},handleFileChange(){},preview(){},save(){},clearCanvas(){},handlePreviewChange(){}}},Fr={};var Ru=Ve(Lu,Tu,Bu,!1,qu,"2b8f57ca",null,null);function qu(e){for(let t in Fr)this[t]=Fr[t]}var Uu=function(){return Ru.exports}(),Zu=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"component-list",on:{dragstart:e.handleDragStart}},e._l(e.componentList,function(i,n){return r("div",{key:n,staticClass:"list",attrs:{draggable:"","data-index":n}},[r("span",{staticClass:"iconfont",class:"icon-"+i.icon}),r("span",[e._v(e._s(i.label))])])}),0)},Vu=[];const Yu={data(){return{componentList:Vr}},methods:{handleDragStart(e){e.dataTransfer.setData("index",e.target.dataset.index)}}},Ir={};var Xu=Ve(Yu,Zu,Vu,!1,Hu,"4757d6e4",null,null);function Hu(e){for(let t in Ir)this[t]=Ir[t]}var Tn=function(){return Xu.exports}(),ku=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("svg",{staticClass:"grid",attrs:{width:"100%",height:"100%",xmlns:"http://www.w3.org/2000/svg"}},[r("defs",[r("pattern",{attrs:{id:"smallGrid",width:"7.236328125",height:"7.236328125",patternUnits:"userSpaceOnUse"}},[r("path",{attrs:{d:"M 7.236328125 0 L 0 0 0 7.236328125",fill:"none",stroke:"rgba(207, 207, 207, 0.3)","stroke-width":"1"}})]),r("pattern",{attrs:{id:"grid",width:"36.181640625",height:"36.181640625",patternUnits:"userSpaceOnUse"}},[r("rect",{attrs:{width:"36.181640625",height:"36.181640625",fill:"url(#smallGrid)"}}),r("path",{attrs:{d:"M 36.181640625 0 L 0 0 0 36.181640625",fill:"none",stroke:"rgba(186, 186, 186, 0.5)","stroke-width":"1"}})])]),r("rect",{attrs:{width:"100%",height:"100%",fill:"url(#grid)"}})])},Wu=[];const Gu={},Pr={};var Ku=Ve(Gu,ku,Wu,!1,Ju,"5a5f3a06",null,null);function Ju(e){for(let t in Pr)this[t]=Pr[t]}var ju=function(){return Ku.exports}(),Qu=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{directives:[{name:"show",rawName:"v-show",value:e.menuShow,expression:"menuShow"}],staticClass:"contextmenu",style:{top:e.menuTop+"px",left:e.menuLeft+"px"}},[r("ul",{on:{mouseup:e.handleMouseUp}},[e.curComponent?[e.curComponent.isLock?r("li",{on:{click:e.unlock}},[e._v("\u89E3\u9501")]):[r("li",{on:{click:e.copy}},[e._v("\u590D\u5236")]),r("li",{on:{click:e.paste}},[e._v("\u7C98\u8D34")]),r("li",{on:{click:e.cut}},[e._v("\u526A\u5207")]),r("li",{on:{click:e.deleteComponent}},[e._v("\u5220\u9664")]),r("li",{on:{click:e.lock}},[e._v("\u9501\u5B9A")]),r("li",{on:{click:e.topComponent}},[e._v("\u7F6E\u9876")]),r("li",{on:{click:e.bottomComponent}},[e._v("\u7F6E\u5E95")]),r("li",{on:{click:e.upComponent}},[e._v("\u4E0A\u79FB")]),r("li",{on:{click:e.downComponent}},[e._v("\u4E0B\u79FB")])]]:r("li",{on:{click:e.paste}},[e._v("\u7C98\u8D34")])],2)])},ef=[];const tf={data(){return{copyData:null}},computed:st(["menuTop","menuLeft","menuShow","curComponent"]),methods:{lock(){this.$store.commit("lock")},unlock(){this.$store.commit("unlock")},handleMouseUp(){this.$store.commit("setClickComponentStatus",!0)},cut(){this.$store.commit("cut")},copy(){this.$store.commit("copy")},paste(){this.$store.commit("paste",!0),this.$store.commit("recordSnapshot")},deleteComponent(){this.$store.commit("deleteComponent"),this.$store.commit("recordSnapshot")},upComponent(){this.$store.commit("upComponent"),this.$store.commit("recordSnapshot")},downComponent(){this.$store.commit("downComponent"),this.$store.commit("recordSnapshot")},topComponent(){this.$store.commit("topComponent"),this.$store.commit("recordSnapshot")},bottomComponent(){this.$store.commit("bottomComponent"),this.$store.commit("recordSnapshot")}}},Tr={};var rf=Ve(tf,Qu,ef,!1,nf,"6a2116bc",null,null);function nf(e){for(let t in Tr)this[t]=Tr[t]}var af=function(){return rf.exports}(),of=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"shape",class:{active:e.active},on:{click:e.selectCurComponent,mousedown:e.handleMouseDownOnShape}},[r("span",{directives:[{name:"show",rawName:"v-show",value:e.isActive(),expression:"isActive()"}],staticClass:"iconfont icon-xiangyouxuanzhuan",on:{mousedown:e.handleRotate}}),r("span",{directives:[{name:"show",rawName:"v-show",value:e.element.isLock,expression:"element.isLock"}],staticClass:"iconfont icon-suo"}),e._l(e.isActive()?e.pointList:[],function(i){return r("div",{key:i,staticClass:"shape-point",style:e.getPointStyle(i),on:{mousedown:function(n){return e.handleMouseDownOnPoint(i,n)}}})}),e._t("default")],2)},sf=[];const uf={props:{active:{type:Boolean,default:!1},element:{require:!0,type:Object,default:()=>{}},defaultStyle:{require:!0,type:Object,default:()=>{}},index:{require:!0,type:[Number,String],default:0}},data(){return{pointList:["lt","t","rt","r","rb","b","lb","l"],initialAngle:{lt:0,t:45,rt:90,r:135,rb:180,b:225,lb:270,l:315},angleToCursor:[{start:338,end:23,cursor:"nw"},{start:23,end:68,cursor:"n"},{start:68,end:113,cursor:"ne"},{start:113,end:158,cursor:"e"},{start:158,end:203,cursor:"se"},{start:203,end:248,cursor:"s"},{start:248,end:293,cursor:"sw"},{start:293,end:338,cursor:"w"}],cursors:{}}},computed:st(["curComponent","editor"]),mounted(){this.curComponent&&(this.cursors=this.getCursor()),ze.$on("runAnimation",()=>{this.element==this.curComponent&&(console.log("this.$el",this.$el),uu(this.$el,this.curComponent.animations))}),ze.$on("stopAnimation",()=>{this.$el.classList.remove("animated","infinite")})},methods:{isActive(){return this.active&&!this.element.isLock},getPointStyle(e){const{width:t,height:r}=this.defaultStyle,i=/t/.test(e),n=/b/.test(e),a=/l/.test(e),c=/r/.test(e);let p=0,v=0;return e.length===2?(p=a?0:t,v=i?0:r):((i||n)&&(p=t/2,v=i?0:r),(a||c)&&(p=a?0:t,v=Math.floor(r/2))),{marginLeft:"-4px",marginTop:"-4px",left:`${p}px`,top:`${v}px`,cursor:this.cursors[e]}},getCursor(){const{angleToCursor:e,initialAngle:t,pointList:r,curComponent:i}=this,n=xr(i.style.rotate),a={};let c=-1;return r.forEach(p=>{const v=xr(t[p]+n),d=e.length;for(;;){c=(c+1)%d;const s=e[c];if(v<23||v>=338){a[p]="nw-resize";return}if(s.start<=v&&v<s.end){a[p]=s.cursor+"-resize";return}}}),a},handleRotate(e){},handleMouseDownOnShape(e){if(this.$store.commit("setInEditorStatus",!0),this.$store.commit("setClickComponentStatus",!0),this.element.component!="v-text"&&this.element.component!="rect-shape"&&e.preventDefault(),e.stopPropagation(),this.$store.commit("setCurComponent",{component:this.element,index:this.index}),this.element.isLock)return;this.cursors=this.getCursor();const t={...this.defaultStyle},r=e.clientY,i=e.clientX,n=Number(t.top),a=Number(t.left);let c=!1;const p=d=>{c=!0;const s=d.clientX,o=d.clientY;t.top=o-r+n,t.left=s-i+a,this.$store.commit("setShapeStyle",t),this.$nextTick(()=>{ze.$emit("move",o-r>0,s-i>0)})},v=()=>{c&&this.$store.commit("recordSnapshot"),ze.$emit("unmove"),document.removeEventListener("mousemove",p),document.removeEventListener("mouseup",v)};document.addEventListener("mousemove",p),document.addEventListener("mouseup",v)},handleMouseDownOnPoint(e,t){t.stopPropagation(),t.preventDefault()},selectCurComponent(e){e.stopPropagation(),e.preventDefault(),this.$store.commit("hideContextMenu")}}},Br={};var ff=Ve(uf,of,sf,!1,cf,"52981523",null,null);function cf(e){for(let t in Br)this[t]=Br[t]}var lf=function(){return ff.exports}(),hf=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"mark-line"},e._l(e.lines,function(i){return r("div",{directives:[{name:"show",rawName:"v-show",value:e.lineStatus[i]||!1,expression:"lineStatus[line] || false"}],key:i,ref:i,refInFor:!0,staticClass:"line",class:i.includes("x")?"xline":"yline"})}),0)},pf=[];const vf={data(){return{lines:["xt","xc","xb","yl","yc","yr"],diff:3,lineStatus:{xt:!1,xc:!1,xb:!1,yl:!1,yc:!1,yr:!1}}},computed:st(["componentData","curComponent"]),mounted(){ze.$on("move",(e,t)=>{this.showLine(e,t)}),ze.$on("unmove",()=>{this.hideLine()})},methods:{hideLine(){Object.keys(this.lineStatus).forEach(e=>{this.lineStatus[e]=!1})},showLine(e,t){this.$refs,this.componentData,Wt(this.curComponent.style)}}},Lr={};var df=Ve(vf,hf,pf,!1,mf,null,null,null);function mf(e){for(let t in Lr)this[t]=Lr[t]}var gf=function(){return df.exports}(),wf=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"area",style:{left:e.start.x+"px",top:e.start.y+"px",width:e.width+"px",height:e.height+"px"}})},yf=[];const _f={props:{start:{type:Object,default:()=>{}},width:{type:Number,default:0},height:{type:Number,default:0}}},Rr={};var bf=Ve(_f,wf,yf,!1,Nf,"38da664e",null,null);function Nf(e){for(let t in Rr)this[t]=Rr[t]}var Mf=function(){return bf.exports}(),Ef=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"editor",class:{edit:e.isEdit},style:{width:e.changeStyleWithScale(e.canvasStyleData.width)+"px",height:e.changeStyleWithScale(e.canvasStyleData.height)+"px"},attrs:{id:"editor"},on:{contextmenu:e.handleContextMenu,mousedown:e.handleMouseDown}},[r("Grid"),e._l(e.componentData,function(i,n){return r("Shape",{key:i.id,class:{lock:i.isLock},style:e.getShapeStyle(i.style),attrs:{"default-style":i.style,active:i.id==(e.curComponent||{}).id,element:i,index:n}},[i.component!="v-text"?r(i.component,{tag:"component",staticClass:"component",style:e.getComponentStyle(i.style),attrs:{id:"component"+i.id,"prop-value":i.propValue,element:i}}):r(i.component,{tag:"component",staticClass:"component",style:e.getComponentStyle(i.style),attrs:{id:"component"+i.id,"prop-value":i.propValue,element:i},on:{input:e.handleInput}})],1)}),r("ContextMenu"),r("MarkLine"),r("Area",{directives:[{name:"show",rawName:"v-show",value:e.isShowArea,expression:"isShowArea"}],attrs:{start:e.start,width:e.width,height:e.height}})],2)},Sf=[];const xf=(e,t)=>{console.log("element, text",e,t);let{lineHeight:r,fontSize:i,height:n}=e.style;r===""&&(r=1.5);const a=(t.split("<br>").length-1)*r*i;return n>a?n:a},Cf={components:{Grid:ju,ContextMenu:af,MarkLine:gf,Shape:lf,ComponentList:Tn,Area:Mf},props:{isEdit:{type:Boolean,default:!0}},data(){return{editorX:0,editorY:0,start:{x:0,y:0},width:0,height:0,isShowArea:!1}},computed:st(["componentData","curComponent","canvasStyleData","editor"]),mounted(){this.$store.commit("getEditor"),ze.$on("hideArea",()=>{this.hideArea()})},methods:{changeStyleWithScale:su,handleInput(e,t){this.$store.commit("setShapeStyle",{height:xf(e,t)})},handleContextMenu(e){e.stopPropagation(),e.preventDefault();let t=e.target,r=e.offsetY,i=e.offsetX;for(;t instanceof SVGElement;)t=t.parentNode;for(;!t.className.includes("editor");)i+=t.offsetLeft,r+=t.offsetTop,t=t.parentNode;this.$store.commit("showContextMenu",{top:r,left:i})},handleMouseDown(e){(!this.curComponent||this.curComponent.component!="v-text"&&this.curComponent.component!="rect-shape")&&e.preventDefault(),this.hideArea();const t=this.editor.getBoundingClientRect();this.editorX=t.x,this.editorY=t.y;const r=e.clientX,i=e.clientY;this.start.x=r-this.editorX,this.start.y=i-this.editorY,this.isShowArea=!0;const n=c=>{this.width=Math.abs(c.clientX-r),this.height=Math.abs(c.clientY-i),c.clientX<r&&(this.start.x=c.clientX-this.editorX),c.clientY<i&&(this.start.y=c.clientY-this.editorY),console.log("move",this.start,this.width,this.height)},a=c=>{if(document.removeEventListener("mousemove",n),document.removeEventListener("mouseup",a),c.clientX==r&&c.clientY==i){this.hideArea();return}this.createGroup()};document.addEventListener("mousemove",n),document.addEventListener("mouseup",a)},createGroup(){const e=this.getSelectArea();if(e.length<=1){this.hideArea();return}let t=1/0,r=1/0,i=-1/0,n=-1/0;e.forEach(a=>{let c={};a.component==="Group"?a.propValue.forEach(p=>{const v=ci(`#component${p.id}`).getBoundingClientRect();c.left=v.left-this.editorX,c.top=v.top-this.editorY,c.right=v.right-this.editorX,c.bottom=v.bottom-this.editorY,c.left<r&&(r=c.left),c.top<t&&(t=c.top),c.right>i&&(i=c.right),c.bottom>n&&(n=c.bottom)}):c=Wt(a.style),c.left<r&&(r=c.left),c.top<t&&(t=c.top),c.right>i&&(i=c.right),c.bottom>n&&(n=c.bottom)}),this.start.x=r,this.start.y=t,this.width=i-r,this.height=n-t,this.$store.commit("setAreaData",{style:{left:r,top:t,width:this.width,height:this.height},components:e})},getSelectArea(){const e=[],{x:t,y:r}=this.start;return this.componentData.forEach(i=>{if(i.isLock)return;const{left:n,top:a,width:c,height:p}=Wt(i.style);t<=n&&r<=a&&n+c<=t+this.width&&a+p<=r+this.height&&e.push(i)}),e},hideArea(){this.isShowArea=!1,this.width=0,this.height=0,this.$store.commit("setAreaData",{style:{left:0,top:0,width:0,height:0},components:[]})},getShapeStyle(e){const t={};return["width","height","top","left","rotate"].forEach(r=>{r!="rotate"?t[r]=e[r]+"px":t.transform="rotate("+e[r]+"deg)"}),t},getComponentStyle(e){return fu(e,["top","left","width","height","rotate"])}}},qr={};var Af=Ve(Cf,Ef,Sf,!1,Df,"49cac0d5",null,null);function Df(e){for(let t in qr)this[t]=qr[t]}var Of=function(){return Af.exports}(),$f=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"home"},[r("Toolbar"),r("main",[r("section",{staticClass:"left"},[r("ComponentList")],1),r("section",{staticClass:"center"},[r("div",{staticClass:"content",on:{drop:e.handleDrop,dragover:e.handleDragOver,mousedown:e.handleMouseDown,mouseup:e.deselectCurComponent}},[r("Editor")],1)]),r("section",{staticClass:"right"},[e._v("right")])])],1)},zf=[];const Bn=e=>{e.forEach(t=>{t.id=Yr(),t.component==="Group"&&Bn(t.propValue)})},Ff={components:{Toolbar:Uu,ComponentList:Tn,Editor:Of},computed:st(["componentData","curComponent","isClickComponent","canvasStyleData","editor"]),created(){this.restore(),Pu()},methods:{restore(){const e=localStorage.getItem("canvasData"),t=localStorage.getItem("canvasStyle");e&&this.$store.commit("setComponentData",Bn(JSON.parse(e))),t&&this.$store.commit("setCanvasStyle",t)},handleDrop(e){console.log("handleDrop",e),e.preventDefault(),e.stopPropagation();const t=e.dataTransfer.getData("index"),r=this.editor.getBoundingClientRect();if(t){const i=li(Vr[t]);i.style.top=e.clientY-r.y,i.style.left=e.clientX-r.x,i.id=Yr(),this.$store.commit("addComponent",{component:i}),this.$store.commit("recordSnapshot")}},handleDragOver(e){console.log("handleDragOver",e),e.preventDefault(),e.dataTransfer.dropEffect="copy"},handleMouseDown(e){e.stopPropagation(),this.$store.commit("setClickComponentStatus",!1),this.$store.commit("setInEditorStatus",!0)},deselectCurComponent(e){}}},Ur={};var If=Ve(Ff,$f,zf,!1,Pf,null,null,null);function Pf(e){for(let t in Ur)this[t]=Ur[t]}var Bf=function(){return If.exports}();export{Bf as default};
