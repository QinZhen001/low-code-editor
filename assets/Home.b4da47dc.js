import{c as hi,g as Yr,s as ft,e as zt,m as ce,n as Ht,a as kr,$ as pi,d as vi,b as Wr}from"./index.58ab9b56.js";function Ve(){return Ve=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t},Ve.apply(this,arguments)}var Xr={epsilon:1e-12,matrix:"Matrix",number:"number",precision:64,predictable:!1,randomSeed:null};function ht(t){return typeof t=="number"}function At(t){return!t||typeof t!="object"||typeof t.constructor!="function"?!1:t.isBigNumber===!0&&typeof t.constructor.prototype=="object"&&t.constructor.prototype.isBigNumber===!0||typeof t.constructor.isDecimal=="function"&&t.constructor.isDecimal(t)===!0}function Qe(t){return t&&typeof t=="object"&&Object.getPrototypeOf(t).isComplex===!0||!1}function tr(t){return t&&typeof t=="object"&&Object.getPrototypeOf(t).isFraction===!0||!1}function er(t){return t&&t.constructor.prototype.isUnit===!0||!1}function Zt(t){return typeof t=="string"}var ut=Array.isArray;function bt(t){return t&&t.constructor.prototype.isMatrix===!0||!1}function Gr(t){return Array.isArray(t)||bt(t)}function di(t){return t&&t.isDenseMatrix&&t.constructor.prototype.isMatrix===!0||!1}function mi(t){return t&&t.isSparseMatrix&&t.constructor.prototype.isMatrix===!0||!1}function Kr(t){return t&&t.constructor.prototype.isRange===!0||!1}function Se(t){return t&&t.constructor.prototype.isIndex===!0||!1}function gi(t){return typeof t=="boolean"}function Jr(t){return t&&t.constructor.prototype.isResultSet===!0||!1}function jr(t){return t&&t.constructor.prototype.isHelp===!0||!1}function wi(t){return typeof t=="function"}function yi(t){return t instanceof Date}function _i(t){return t instanceof RegExp}function bi(t){return!!(t&&typeof t=="object"&&t.constructor===Object&&!Qe(t)&&!tr(t))}function Mi(t){return t===null}function Ni(t){return t===void 0}function xi(t){return t&&t.isAccessorNode===!0&&t.constructor.prototype.isNode===!0||!1}function Si(t){return t&&t.isArrayNode===!0&&t.constructor.prototype.isNode===!0||!1}function Ei(t){return t&&t.isAssignmentNode===!0&&t.constructor.prototype.isNode===!0||!1}function Ci(t){return t&&t.isBlockNode===!0&&t.constructor.prototype.isNode===!0||!1}function Ai(t){return t&&t.isConditionalNode===!0&&t.constructor.prototype.isNode===!0||!1}function Di(t){return t&&t.isConstantNode===!0&&t.constructor.prototype.isNode===!0||!1}function $i(t){return t&&t.isFunctionAssignmentNode===!0&&t.constructor.prototype.isNode===!0||!1}function Oi(t){return t&&t.isFunctionNode===!0&&t.constructor.prototype.isNode===!0||!1}function Pi(t){return t&&t.isIndexNode===!0&&t.constructor.prototype.isNode===!0||!1}function Qr(t){return t&&t.isNode===!0&&t.constructor.prototype.isNode===!0||!1}function zi(t){return t&&t.isObjectNode===!0&&t.constructor.prototype.isNode===!0||!1}function Ii(t){return t&&t.isOperatorNode===!0&&t.constructor.prototype.isNode===!0||!1}function Fi(t){return t&&t.isParenthesisNode===!0&&t.constructor.prototype.isNode===!0||!1}function Bi(t){return t&&t.isRangeNode===!0&&t.constructor.prototype.isNode===!0||!1}function Ti(t){return t&&t.isSymbolNode===!0&&t.constructor.prototype.isNode===!0||!1}function tn(t){return t&&t.constructor.prototype.isChain===!0||!1}function Xt(t){var e=typeof t;return e==="object"?t===null?"null":Array.isArray(t)?"Array":t instanceof Date?"Date":t instanceof RegExp?"RegExp":At(t)?"BigNumber":Qe(t)?"Complex":tr(t)?"Fraction":bt(t)?"Matrix":er(t)?"Unit":Se(t)?"Index":Kr(t)?"Range":Jr(t)?"ResultSet":Qr(t)?t.type:tn(t)?"Chain":jr(t)?"Help":"Object":e==="function"?"Function":e}function dt(t){var e=typeof t;if(e==="number"||e==="string"||e==="boolean"||t===null||t===void 0)return t;if(typeof t.clone=="function")return t.clone();if(Array.isArray(t))return t.map(function(r){return dt(r)});if(t instanceof Date)return new Date(t.valueOf());if(At(t))return t;if(t instanceof RegExp)throw new TypeError("Cannot clone "+t);return Li(t,dt)}function Li(t,e){var r={};for(var i in t)he(t,i)&&(r[i]=e(t[i]));return r}function en(t,e){for(var r in e)he(e,r)&&(t[r]=e[r]);return t}function we(t,e){var r,i,n;if(Array.isArray(t)){if(!Array.isArray(e)||t.length!==e.length)return!1;for(i=0,n=t.length;i<n;i++)if(!we(t[i],e[i]))return!1;return!0}else{if(typeof t=="function")return t===e;if(t instanceof Object){if(Array.isArray(e)||!(e instanceof Object))return!1;for(r in t)if(!(r in e)||!we(t[r],e[r]))return!1;for(r in e)if(!(r in t))return!1;return!0}else return t===e}}function he(t,e){return t&&Object.hasOwnProperty.call(t,e)}function Ri(t,e){for(var r={},i=0;i<e.length;i++){var n=e[i],o=t[n];o!==void 0&&(r[n]=o)}return r}var qi=["Matrix","Array"],Ui=["number","BigNumber","Fraction"],ve=function(e){if(e)throw new Error(`The global config is readonly. 
Please create a mathjs instance if you want to change the default configuration. 
Example:

  import { create, all } from 'mathjs';
  const mathjs = create(all);
  mathjs.config({ number: 'BigNumber' });
`);return Object.freeze(Xr)};Ve(ve,Xr,{MATRIX_OPTIONS:qi,NUMBER_OPTIONS:Ui});var rn={exports:{}};(function(t,e){(function(r,i){t.exports=i()})(hi,function(){function r(){return!0}function i(){return!1}function n(){}function o(){var c=[{name:"number",test:function(x){return typeof x=="number"}},{name:"string",test:function(x){return typeof x=="string"}},{name:"boolean",test:function(x){return typeof x=="boolean"}},{name:"Function",test:function(x){return typeof x=="function"}},{name:"Array",test:Array.isArray},{name:"Date",test:function(x){return x instanceof Date}},{name:"RegExp",test:function(x){return x instanceof RegExp}},{name:"Object",test:function(x){return typeof x=="object"&&x!==null&&x.constructor===Object}},{name:"null",test:function(x){return x===null}},{name:"undefined",test:function(x){return x===void 0}}],h={name:"any",test:r},l=[],v=[],s={types:c,conversions:v,ignore:l};function a(x){var A=$t(s.types,function(C){return C.name===x});if(A)return A;if(x==="any")return h;var D=$t(s.types,function(C){return C.name.toLowerCase()===x.toLowerCase()});throw new TypeError('Unknown type "'+x+'"'+(D?'. Did you mean "'+D.name+'"?':""))}function f(x){return x===h?999:s.types.indexOf(x)}function p(x){var A=$t(s.types,function(D){return D.test(x)});if(A)return A.name;throw new TypeError("Value has unknown type. Value: "+x)}function d(x,A){if(!x.signatures)throw new TypeError("Function is no typed-function");var D;if(typeof A=="string"){D=A.split(",");for(var C=0;C<D.length;C++)D[C]=D[C].trim()}else if(Array.isArray(A))D=A;else throw new TypeError("String array or a comma separated string expected");var T=D.join(","),Y=x.signatures[T];if(Y)return Y;throw new TypeError("Signature not found (signature: "+(x.name||"unnamed")+"("+D.join(", ")+"))")}function u(x,A){var D=p(x);if(A===D)return x;for(var C=0;C<s.conversions.length;C++){var T=s.conversions[C];if(T.from===D&&T.to===A)return T.convert(x)}throw new Error("Cannot convert from "+D+" to "+A)}function m(x){return x.map(function(A){var D=A.types.map(S);return(A.restParam?"...":"")+D.join("|")}).join(",")}function g(x,A){var D=x.indexOf("...")===0,C=D?x.length>3?x.slice(3):"any":x,T=C.split("|").map(gt).filter(st).filter(vt),Y=V(A,T),W=T.map(function(L){var K=a(L);return{name:L,typeIndex:f(K),test:K.test,conversion:null,conversionIndex:-1}}),U=Y.map(function(L){var K=a(L.from);return{name:L.from,typeIndex:f(K),test:K.test,conversion:L,conversionIndex:A.indexOf(L)}});return{types:W.concat(U),restParam:D}}function M(x,A,D){var C=[];return x.trim()!==""&&(C=x.split(",").map(gt).map(function(T,Y,W){var U=g(T,D);if(U.restParam&&Y!==W.length-1)throw new SyntaxError('Unexpected rest parameter "'+T+'": only allowed for the last parameter');return U})),C.some(lt)?null:{params:C,fn:A}}function w(x){var A=Dt(x);return A?A.restParam:!1}function N(x){return x.types.some(function(A){return A.conversion!=null})}function _(x){if(!x||x.types.length===0)return r;if(x.types.length===1)return a(x.types[0].name).test;if(x.types.length===2){var A=a(x.types[0].name).test,D=a(x.types[1].name).test;return function(Y){return A(Y)||D(Y)}}else{var C=x.types.map(function(T){return a(T.name).test});return function(Y){for(var W=0;W<C.length;W++)if(C[W](Y))return!0;return!1}}}function y(x){var A,D,C;if(w(x)){A=ot(x).map(_);var T=A.length,Y=_(Dt(x)),W=function(U){for(var L=T;L<U.length;L++)if(!Y(U[L]))return!1;return!0};return function(L){for(var K=0;K<A.length;K++)if(!A[K](L[K]))return!1;return W(L)&&L.length>=T+1}}else return x.length===0?function(L){return L.length===0}:x.length===1?(D=_(x[0]),function(L){return D(L[0])&&L.length===1}):x.length===2?(D=_(x[0]),C=_(x[1]),function(L){return D(L[0])&&C(L[1])&&L.length===2}):(A=x.map(_),function(L){for(var K=0;K<A.length;K++)if(!A[K](L[K]))return!1;return L.length===A.length})}function E(x,A){return A<x.params.length?x.params[A]:w(x.params)?Dt(x.params):null}function b(x,A,D){var C=E(x,A),T=C?D?C.types.filter($):C.types:[];return T.map(S)}function S(x){return x.name}function $(x){return x.conversion===null||x.conversion===void 0}function O(x,A){var D=Yt(Lt(x,function(C){return b(C,A,!1)}));return D.indexOf("any")!==-1?["any"]:D}function I(x,A,D){var C,T,Y=x||"unnamed",W=D,U;for(U=0;U<A.length;U++){var L=W.filter(function(Rt){var Fe=_(E(Rt,U));return(U<Rt.params.length||w(Rt.params))&&Fe(A[U])});if(L.length===0){if(T=O(W,U),T.length>0){var K=p(A[U]);return C=new TypeError("Unexpected type of argument in function "+Y+" (expected: "+T.join(" or ")+", actual: "+K+", index: "+U+")"),C.data={category:"wrongType",fn:Y,index:U,actual:K,expected:T},C}}else W=L}var It=W.map(function(Rt){return w(Rt.params)?1/0:Rt.params.length});if(A.length<Math.min.apply(null,It))return T=O(W,U),C=new TypeError("Too few arguments in function "+Y+" (expected: "+T.join(" or ")+", index: "+A.length+")"),C.data={category:"tooFewArgs",fn:Y,index:A.length,expected:T},C;var Ft=Math.max.apply(null,It);return A.length>Ft?(C=new TypeError("Too many arguments in function "+Y+" (expected: "+Ft+", actual: "+A.length+")"),C.data={category:"tooManyArgs",fn:Y,index:A.length,expectedLength:Ft},C):(C=new TypeError('Arguments of type "'+A.join(", ")+'" do not match any of the defined signatures of function '+Y+"."),C.data={category:"mismatch",actual:A.map(p)},C)}function R(x){for(var A=999,D=0;D<x.types.length;D++)$(x.types[D])&&(A=Math.min(A,x.types[D].typeIndex));return A}function F(x){for(var A=999,D=0;D<x.types.length;D++)$(x.types[D])||(A=Math.min(A,x.types[D].conversionIndex));return A}function B(x,A){var D;return D=x.restParam-A.restParam,D!==0||(D=N(x)-N(A),D!==0)||(D=R(x)-R(A),D!==0)?D:F(x)-F(A)}function z(x,A){var D=Math.min(x.params.length,A.params.length),C,T;if(T=x.params.some(N)-A.params.some(N),T!==0)return T;for(C=0;C<D;C++)if(T=N(x.params[C])-N(A.params[C]),T!==0)return T;for(C=0;C<D;C++)if(T=B(x.params[C],A.params[C]),T!==0)return T;return x.params.length-A.params.length}function V(x,A){var D={};return x.forEach(function(C){A.indexOf(C.from)===-1&&A.indexOf(C.to)!==-1&&!D[C.from]&&(D[C.from]=C)}),Object.keys(D).map(function(C){return D[C]})}function q(x,A){var D=A;if(x.some(N)){var C=w(x),T=x.map(H);D=function(){for(var L=[],K=C?arguments.length-1:arguments.length,It=0;It<K;It++)L[It]=T[It](arguments[It]);return C&&(L[K]=arguments[K].map(T[K])),A.apply(this,L)}}var Y=D;if(w(x)){var W=x.length-1;Y=function(){return D.apply(this,Mt(arguments,0,W).concat([Mt(arguments,W)]))}}return Y}function H(x){var A,D,C,T,Y=[],W=[];switch(x.types.forEach(function(U){U.conversion&&(Y.push(a(U.conversion.from).test),W.push(U.conversion.convert))}),W.length){case 0:return function(L){return L};case 1:return A=Y[0],C=W[0],function(L){return A(L)?C(L):L};case 2:return A=Y[0],D=Y[1],C=W[0],T=W[1],function(L){return A(L)?C(L):D(L)?T(L):L};default:return function(L){for(var K=0;K<W.length;K++)if(Y[K](L))return W[K](L);return L}}}function G(x){var A={};return x.forEach(function(D){D.params.some(N)||Q(D.params,!0).forEach(function(C){A[m(C)]=D.fn})}),A}function Q(x,A){function D(C,T,Y){if(T<C.length){var W=C[T],U=A?W.types.filter($):W.types,L;if(W.restParam){var K=U.filter($);L=K.length<U.length?[K,U]:[U]}else L=U.map(function(Ft){return[Ft]});return Lt(L,function(Ft){return D(C,T+1,Y.concat([Ft]))})}else{var It=Y.map(function(Ft,Rt){return{types:Ft,restParam:Rt===C.length-1&&w(C)}});return[It]}}return D(x,0,[])}function tt(x,A){for(var D=Math.max(x.params.length,A.params.length),C=0;C<D;C++){var T=b(x,C,!0),Y=b(A,C,!0);if(!Nt(T,Y))return!1}var W=x.params.length,U=A.params.length,L=w(x.params),K=w(A.params);return L?K?W===U:U>=W:K?W>=U:W===U}function J(x,A){if(Object.keys(A).length===0)throw new SyntaxError("No signatures provided");var D=[];Object.keys(A).map(function(at){return M(at,A[at],s.conversions)}).filter(Ct).forEach(function(at){var St=$t(D,function(qt){return tt(qt,at)});if(St)throw new TypeError('Conflicting signatures "'+m(St.params)+'" and "'+m(at.params)+'".');D.push(at)});var C=Lt(D,function(at){var St=at?Q(at.params,!1):[];return St.map(function(qt){return{params:qt,fn:at.fn}})}).filter(Ct);C.sort(z);var T=C[0]&&C[0].params.length<=2&&!w(C[0].params),Y=C[1]&&C[1].params.length<=2&&!w(C[1].params),W=C[2]&&C[2].params.length<=2&&!w(C[2].params),U=C[3]&&C[3].params.length<=2&&!w(C[3].params),L=C[4]&&C[4].params.length<=2&&!w(C[4].params),K=C[5]&&C[5].params.length<=2&&!w(C[5].params),It=T&&Y&&W&&U&&L&&K,Ft=C.map(function(at){return y(at.params)}),Rt=T?_(C[0].params[0]):i,Fe=Y?_(C[1].params[0]):i,Un=W?_(C[2].params[0]):i,Zn=U?_(C[3].params[0]):i,Vn=L?_(C[4].params[0]):i,Hn=K?_(C[5].params[0]):i,Yn=T?_(C[0].params[1]):i,kn=Y?_(C[1].params[1]):i,Wn=W?_(C[2].params[1]):i,Xn=U?_(C[3].params[1]):i,Gn=L?_(C[4].params[1]):i,Kn=K?_(C[5].params[1]):i,ee=C.map(function(at){return q(at.params,at.fn)}),Jn=T?ee[0]:n,jn=Y?ee[1]:n,Qn=W?ee[2]:n,ti=U?ee[3]:n,ei=L?ee[4]:n,ri=K?ee[5]:n,ni=T?C[0].params.length:-1,ii=Y?C[1].params.length:-1,oi=W?C[2].params.length:-1,ai=U?C[3].params.length:-1,si=L?C[4].params.length:-1,ui=K?C[5].params.length:-1,ci=It?6:0,fi=C.length,li=function(){for(var St=ci;St<fi;St++)if(Ft[St](arguments))return ee[St].apply(this,arguments);return s.onMismatch(x,arguments,C)},Be=function at(St,qt){return arguments.length===ni&&Rt(St)&&Yn(qt)?Jn.apply(at,arguments):arguments.length===ii&&Fe(St)&&kn(qt)?jn.apply(at,arguments):arguments.length===oi&&Un(St)&&Wn(qt)?Qn.apply(at,arguments):arguments.length===ai&&Zn(St)&&Xn(qt)?ti.apply(at,arguments):arguments.length===si&&Vn(St)&&Gn(qt)?ei.apply(at,arguments):arguments.length===ui&&Hn(St)&&Kn(qt)?ri.apply(at,arguments):li.apply(at,arguments)};try{Object.defineProperty(Be,"name",{value:x})}catch{}return Be.signatures=G(C),Be}function pt(x,A,D){throw I(x,A,D)}function vt(x){return s.ignore.indexOf(x)===-1}function gt(x){return x.trim()}function st(x){return!!x}function Ct(x){return x!==null}function lt(x){return x.types.length===0}function ot(x){return x.slice(0,x.length-1)}function Dt(x){return x[x.length-1]}function Mt(x,A,D){return Array.prototype.slice.call(x,A,D)}function nt(x,A){return x.indexOf(A)!==-1}function Nt(x,A){for(var D=0;D<x.length;D++)if(nt(A,x[D]))return!0;return!1}function $t(x,A){for(var D=0;D<x.length;D++)if(A(x[D]))return x[D]}function Yt(x){for(var A={},D=0;D<x.length;D++)A[x[D]]=!0;return Object.keys(A)}function Lt(x,A){return Array.prototype.concat.apply([],x.map(A))}function ne(x){for(var A="",D=0;D<x.length;D++){var C=x[D];if((typeof C.signatures=="object"||typeof C.signature=="string")&&C.name!==""){if(A==="")A=C.name;else if(A!==C.name){var T=new Error("Function names do not match (expected: "+A+", actual: "+C.name+")");throw T.data={actual:C.name,expected:A},T}}}return A}function te(x){var A,D={};function C(U,L){if(D.hasOwnProperty(U)&&L!==D[U])throw A=new Error('Signature "'+U+'" is defined twice'),A.data={signature:U},A}for(var T=0;T<x.length;T++){var Y=x[T];if(typeof Y.signatures=="object")for(var W in Y.signatures)Y.signatures.hasOwnProperty(W)&&(C(W,Y.signatures[W]),D[W]=Y.signatures[W]);else if(typeof Y.signature=="string")C(Y.signature,Y),D[Y.signature]=Y;else throw A=new TypeError("Function is no typed-function (index: "+T+")"),A.data={index:T},A}return D}return s=J("typed",{"string, Object":J,Object:function(x){var A=[];for(var D in x)x.hasOwnProperty(D)&&A.push(x[D]);var C=ne(A);return J(C,x)},"...Function":function(x){return J(ne(x),te(x))},"string, ...Function":function(x,A){return J(x,te(A))}}),s.create=o,s.types=c,s.conversions=v,s.ignore=l,s.onMismatch=pt,s.throwMismatchError=pt,s.createError=I,s.convert=u,s.find=d,s.addType=function(x,A){if(!x||typeof x.name!="string"||typeof x.test!="function")throw new TypeError("Object with properties {name: string, test: function} expected");if(A!==!1){for(var D=0;D<s.types.length;D++)if(s.types[D].name==="Object"){s.types.splice(D,0,x);return}}s.types.push(x)},s.addConversion=function(x){if(!x||typeof x.from!="string"||typeof x.to!="string"||typeof x.convert!="function")throw new TypeError("Object with properties {from: string, to: string, convert: function} expected");s.conversions.push(x)},s}return o()})})(rn);var cr=rn.exports;function _t(t){return typeof t=="boolean"?!0:isFinite(t)?t===Math.round(t):!1}function Te(t,e,r){var i={2:"0b",8:"0o",16:"0x"},n=i[e],o="";if(r){if(r<1)throw new Error("size must be in greater than 0");if(!_t(r))throw new Error("size must be an integer");if(t>2**(r-1)-1||t<-(2**(r-1)))throw new Error("Value must be in range [-2^".concat(r-1,", 2^").concat(r-1,"-1]"));if(!_t(t))throw new Error("Value must be an integer");t<0&&(t=t+2**r),o="i".concat(r)}var c="";return t<0&&(t=-t,c="-"),"".concat(c).concat(n).concat(t.toString(e)).concat(o)}function He(t,e){if(typeof e=="function")return e(t);if(t===1/0)return"Infinity";if(t===-1/0)return"-Infinity";if(isNaN(t))return"NaN";var r="auto",i,n;if(e&&(e.notation&&(r=e.notation),ht(e)?i=e:ht(e.precision)&&(i=e.precision),e.wordSize&&(n=e.wordSize,typeof n!="number")))throw new Error('Option "wordSize" must be a number');switch(r){case"fixed":return Vi(t,i);case"exponential":return nn(t,i);case"engineering":return Zi(t,i);case"bin":return Te(t,2,n);case"oct":return Te(t,8,n);case"hex":return Te(t,16,n);case"auto":return Hi(t,i,e&&e).replace(/((\.\d*?)(0+))($|e)/,function(){var o=arguments[2],c=arguments[4];return o!=="."?o+c:c});default:throw new Error('Unknown notation "'+r+'". Choose "auto", "exponential", "fixed", "bin", "oct", or "hex.')}}function Ee(t){var e=String(t).toLowerCase().match(/^(-?)(\d+\.?\d*)(e([+-]?\d+))?$/);if(!e)throw new SyntaxError("Invalid number "+t);var r=e[1],i=e[2],n=parseFloat(e[4]||"0"),o=i.indexOf(".");n+=o!==-1?o-1:i.length-1;var c=i.replace(".","").replace(/^0*/,function(h){return n-=h.length,""}).replace(/0*$/,"").split("").map(function(h){return parseInt(h)});return c.length===0&&(c.push(0),n++),{sign:r,coefficients:c,exponent:n}}function Zi(t,e){if(isNaN(t)||!isFinite(t))return String(t);var r=Ee(t),i=Ce(r,e),n=i.exponent,o=i.coefficients,c=n%3===0?n:n<0?n-3-n%3:n-n%3;if(ht(e))for(;e>o.length||n-c+1>o.length;)o.push(0);else for(var h=Math.abs(n-c)-(o.length-1),l=0;l<h;l++)o.push(0);for(var v=Math.abs(n-c),s=1;v>0;)s++,v--;var a=o.slice(s).join(""),f=ht(e)&&a.length||a.match(/[1-9]/)?"."+a:"",p=o.slice(0,s).join("")+f+"e"+(n>=0?"+":"")+c.toString();return i.sign+p}function Vi(t,e){if(isNaN(t)||!isFinite(t))return String(t);var r=Ee(t),i=typeof e=="number"?Ce(r,r.exponent+1+e):r,n=i.coefficients,o=i.exponent+1,c=o+(e||0);return n.length<c&&(n=n.concat(ae(c-n.length))),o<0&&(n=ae(-o+1).concat(n),o=1),o<n.length&&n.splice(o,0,o===0?"0.":"."),i.sign+n.join("")}function nn(t,e){if(isNaN(t)||!isFinite(t))return String(t);var r=Ee(t),i=e?Ce(r,e):r,n=i.coefficients,o=i.exponent;n.length<e&&(n=n.concat(ae(e-n.length)));var c=n.shift();return i.sign+c+(n.length>0?"."+n.join(""):"")+"e"+(o>=0?"+":"")+o}function Hi(t,e,r){if(isNaN(t)||!isFinite(t))return String(t);var i=r&&r.lowerExp!==void 0?r.lowerExp:-3,n=r&&r.upperExp!==void 0?r.upperExp:5,o=Ee(t),c=e?Ce(o,e):o;if(c.exponent<i||c.exponent>=n)return nn(t,e);var h=c.coefficients,l=c.exponent;h.length<e&&(h=h.concat(ae(e-h.length))),h=h.concat(ae(l-h.length+1+(h.length<e?e-h.length:0))),h=ae(-l).concat(h);var v=l>0?l:0;return v<h.length-1&&h.splice(v+1,0,"."),c.sign+h.join("")}function Ce(t,e){for(var r={sign:t.sign,coefficients:t.coefficients,exponent:t.exponent},i=r.coefficients;e<=0;)i.unshift(0),r.exponent++,e++;if(i.length>e){var n=i.splice(e,i.length-e);if(n[0]>=5){var o=e-1;for(i[o]++;i[o]===10;)i.pop(),o===0&&(i.unshift(0),r.exponent++,o++),o--,i[o]++}}return r}function ae(t){for(var e=[],r=0;r<t;r++)e.push(0);return e}function Yi(t){return t.toExponential().replace(/e.*$/,"").replace(/^0\.?0*|\./,"").length}var ki=Number.EPSILON||2220446049250313e-31;function ye(t,e,r){if(r==null)return t===e;if(t===e)return!0;if(isNaN(t)||isNaN(e))return!1;if(isFinite(t)&&isFinite(e)){var i=Math.abs(t-e);return i<ki?!0:i<=Math.max(Math.abs(t),Math.abs(e))*r}return!1}function Le(t,e,r){var i=t.constructor,n=new i(2),o="";if(r){if(r<1)throw new Error("size must be in greater than 0");if(!_t(r))throw new Error("size must be an integer");if(t.greaterThan(n.pow(r-1).sub(1))||t.lessThan(n.pow(r-1).mul(-1)))throw new Error("Value must be in range [-2^".concat(r-1,", 2^").concat(r-1,"-1]"));if(!t.isInteger())throw new Error("Value must be an integer");t.lessThan(0)&&(t=t.add(n.pow(r))),o="i".concat(r)}switch(e){case 2:return"".concat(t.toBinary()).concat(o);case 8:return"".concat(t.toOctal()).concat(o);case 16:return"".concat(t.toHexadecimal()).concat(o);default:throw new Error("Base ".concat(e," not supported "))}}function Wi(t,e){if(typeof e=="function")return e(t);if(!t.isFinite())return t.isNaN()?"NaN":t.gt(0)?"Infinity":"-Infinity";var r="auto",i,n;if(e!==void 0&&(e.notation&&(r=e.notation),typeof e=="number"?i=e:e.precision&&(i=e.precision),e.wordSize&&(n=e.wordSize,typeof n!="number")))throw new Error('Option "wordSize" must be a number');switch(r){case"fixed":return Gi(t,i);case"exponential":return fr(t,i);case"engineering":return Xi(t,i);case"bin":return Le(t,2,n);case"oct":return Le(t,8,n);case"hex":return Le(t,16,n);case"auto":{var o=e&&e.lowerExp!==void 0?e.lowerExp:-3,c=e&&e.upperExp!==void 0?e.upperExp:5;if(t.isZero())return"0";var h,l=t.toSignificantDigits(i),v=l.e;return v>=o&&v<c?h=l.toFixed():h=fr(t,i),h.replace(/((\.\d*?)(0+))($|e)/,function(){var s=arguments[2],a=arguments[4];return s!=="."?s+a:a})}default:throw new Error('Unknown notation "'+r+'". Choose "auto", "exponential", "fixed", "bin", "oct", or "hex.')}}function Xi(t,e){var r=t.e,i=r%3===0?r:r<0?r-3-r%3:r-r%3,n=t.mul(Math.pow(10,-i)),o=n.toPrecision(e);return o.indexOf("e")!==-1&&(o=n.toString()),o+"e"+(r>=0?"+":"")+i.toString()}function fr(t,e){return e!==void 0?t.toExponential(e-1):t.toExponential()}function Gi(t,e){return t.toFixed(e)}function wt(t,e){var r=Ki(t,e);return e&&typeof e=="object"&&"truncate"in e&&r.length>e.truncate?r.substring(0,e.truncate-3)+"...":r}function Ki(t,e){if(typeof t=="number")return He(t,e);if(At(t))return Wi(t,e);if(Ji(t))return!e||e.fraction!=="decimal"?t.s*t.n+"/"+t.d:t.toString();if(Array.isArray(t))return on(t,e);if(Zt(t))return'"'+t+'"';if(typeof t=="function")return t.syntax?String(t.syntax):"function";if(t&&typeof t=="object"){if(typeof t.format=="function")return t.format(e);if(t&&t.toString(e)!=={}.toString())return t.toString(e);var r=Object.keys(t).map(i=>'"'+i+'": '+wt(t[i],e));return"{"+r.join(", ")+"}"}return String(t)}function on(t,e){if(Array.isArray(t)){for(var r="[",i=t.length,n=0;n<i;n++)n!==0&&(r+=", "),r+=on(t[n],e);return r+="]",r}else return wt(t,e)}function Ji(t){return t&&typeof t=="object"&&typeof t.s=="number"&&typeof t.n=="number"&&typeof t.d=="number"||!1}function et(t,e,r){if(!(this instanceof et))throw new SyntaxError("Constructor must be called with the new operator");this.actual=t,this.expected=e,this.relation=r,this.message="Dimension mismatch ("+(Array.isArray(t)?"["+t.join(", ")+"]":t)+" "+(this.relation||"!=")+" "+(Array.isArray(e)?"["+e.join(", ")+"]":e)+")",this.stack=new Error().stack}et.prototype=new RangeError;et.prototype.constructor=RangeError;et.prototype.name="DimensionError";et.prototype.isDimensionError=!0;function fe(t,e,r){if(!(this instanceof fe))throw new SyntaxError("Constructor must be called with the new operator");this.index=t,arguments.length<3?(this.min=0,this.max=e):(this.min=e,this.max=r),this.min!==void 0&&this.index<this.min?this.message="Index out of range ("+this.index+" < "+this.min+")":this.max!==void 0&&this.index>=this.max?this.message="Index out of range ("+this.index+" > "+(this.max-1)+")":this.message="Index out of range ("+this.index+")",this.stack=new Error().stack}fe.prototype=new RangeError;fe.prototype.constructor=RangeError;fe.prototype.name="IndexError";fe.prototype.isIndexError=!0;function Gt(t){for(var e=[];Array.isArray(t);)e.push(t.length),t=t[0];return e}function an(t,e,r){var i,n=t.length;if(n!==e[r])throw new et(n,e[r]);if(r<e.length-1){var o=r+1;for(i=0;i<n;i++){var c=t[i];if(!Array.isArray(c))throw new et(e.length-1,e.length,"<");an(t[i],e,o)}}else for(i=0;i<n;i++)if(Array.isArray(t[i]))throw new et(e.length+1,e.length,">")}function lr(t,e){var r=e.length===0;if(r){if(Array.isArray(t))throw new et(t.length,0)}else an(t,e,0)}function ct(t,e){if(!ht(t)||!_t(t))throw new TypeError("Index must be an integer (value: "+t+")");if(t<0||typeof e=="number"&&t>=e)throw new fe(t,e)}function Ye(t,e,r){if(!Array.isArray(t)||!Array.isArray(e))throw new TypeError("Array expected");if(e.length===0)throw new Error("Resizing to scalar is not supported");e.forEach(function(n){if(!ht(n)||!_t(n)||n<0)throw new TypeError("Invalid size, must contain positive integers (size: "+wt(e)+")")});var i=r!==void 0?r:0;return ke(t,e,0,i),t}function ke(t,e,r,i){var n,o,c=t.length,h=e[r],l=Math.min(c,h);if(t.length=h,r<e.length-1){var v=r+1;for(n=0;n<l;n++)o=t[n],Array.isArray(o)||(o=[o],t[n]=o),ke(o,e,v,i);for(n=l;n<h;n++)o=[],t[n]=o,ke(o,e,v,i)}else{for(n=0;n<l;n++)for(;Array.isArray(t[n]);)t[n]=t[n][0];for(n=l;n<h;n++)t[n]=i}}function ji(t,e){var r=to(t),i=r.length;if(!Array.isArray(t)||!Array.isArray(e))throw new TypeError("Array expected");if(e.length===0)throw new et(0,i,"!=");e=rr(e,i);var n=sn(e);if(i!==n)throw new et(n,i,"!=");try{return Qi(r,e)}catch(o){throw o instanceof et?new et(n,i,"!="):o}}function rr(t,e){var r=sn(t),i=t.slice(),n=-1,o=t.indexOf(n),c=t.indexOf(n,o+1)>=0;if(c)throw new Error("More than one wildcard in sizes");var h=o>=0,l=e%r===0;if(h)if(l)i[o]=-e/r;else throw new Error("Could not replace wildcard, since "+e+" is no multiple of "+-r);return i}function sn(t){return t.reduce((e,r)=>e*r,1)}function Qi(t,e){for(var r=t,i,n=e.length-1;n>0;n--){var o=e[n];i=[];for(var c=r.length/o,h=0;h<c;h++)i.push(r.slice(h*o,(h+1)*o));r=i}return r}function un(t,e,r,i){var n=i||Gt(t);if(r)for(var o=0;o<r;o++)t=[t],n.unshift(1);for(t=cn(t,e,0);n.length<e;)n.push(1);return t}function cn(t,e,r){var i,n;if(Array.isArray(t)){var o=r+1;for(i=0,n=t.length;i<n;i++)t[i]=cn(t[i],e,o)}else for(var c=r;c<e;c++)t=[t];return t}function to(t){if(!Array.isArray(t))return t;var e=[];return t.forEach(function r(i){Array.isArray(i)?i.forEach(r):e.push(i)}),e}function _e(t,e){for(var r,i=0,n=0;n<t.length;n++){var o=t[n],c=Array.isArray(o);if(n===0&&c&&(i=o.length),c&&o.length!==i)return;var h=c?_e(o,e):e(o);if(r===void 0)r=h;else if(r!==h)return"mixed"}return r}function j(t,e,r,i){function n(o){var c=Ri(o,e.map(no));return eo(t,e,o),r(c)}return n.isFactory=!0,n.fn=t,n.dependencies=e.slice().sort(),i&&(n.meta=i),n}function eo(t,e,r){var i=e.filter(o=>!ro(o)).every(o=>r[o]!==void 0);if(!i){var n=e.filter(o=>r[o]===void 0);throw new Error('Cannot create function "'.concat(t,'", ')+"some dependencies are missing: ".concat(n.map(o=>'"'.concat(o,'"')).join(", "),"."))}}function ro(t){return t&&t[0]==="?"}function no(t){return t&&t[0]==="?"?t.slice(1):t}function io(t,e){if(ln(t)&&fn(t,e))return t[e];throw typeof t[e]=="function"&&so(t,e)?new Error('Cannot access method "'+e+'" as a property'):new Error('No access to property "'+e+'"')}function oo(t,e,r){if(ln(t)&&fn(t,e))return t[e]=r,r;throw new Error('No access to property "'+e+'"')}function ao(t,e){return e in t}function fn(t,e){return!t||typeof t!="object"?!1:he(uo,e)?!0:!(e in Object.prototype||e in Function.prototype)}function so(t,e){return t==null||typeof t[e]!="function"||he(t,e)&&Object.getPrototypeOf&&e in Object.getPrototypeOf(t)?!1:he(co,e)?!0:!(e in Object.prototype||e in Function.prototype)}function ln(t){return typeof t=="object"&&t&&t.constructor===Object}var uo={length:!0,name:!0},co={toString:!0,valueOf:!0,toLocaleString:!0};class fo{constructor(e){this.wrappedObject=e}keys(){return Object.keys(this.wrappedObject)}get(e){return io(this.wrappedObject,e)}set(e,r){return oo(this.wrappedObject,e,r),this}has(e){return ao(this.wrappedObject,e)}}function lo(t){return t?t instanceof Map||t instanceof fo||typeof t.set=="function"&&typeof t.get=="function"&&typeof t.keys=="function"&&typeof t.has=="function":!1}var hn=function(){return hn=cr.create,cr},ho=["?BigNumber","?Complex","?DenseMatrix","?Fraction"],po=j("typed",ho,function(e){var{BigNumber:r,Complex:i,DenseMatrix:n,Fraction:o}=e,c=hn();return c.types=[{name:"number",test:ht},{name:"Complex",test:Qe},{name:"BigNumber",test:At},{name:"Fraction",test:tr},{name:"Unit",test:er},{name:"string",test:Zt},{name:"Chain",test:tn},{name:"Array",test:ut},{name:"Matrix",test:bt},{name:"DenseMatrix",test:di},{name:"SparseMatrix",test:mi},{name:"Range",test:Kr},{name:"Index",test:Se},{name:"boolean",test:gi},{name:"ResultSet",test:Jr},{name:"Help",test:jr},{name:"function",test:wi},{name:"Date",test:yi},{name:"RegExp",test:_i},{name:"null",test:Mi},{name:"undefined",test:Ni},{name:"AccessorNode",test:xi},{name:"ArrayNode",test:Si},{name:"AssignmentNode",test:Ei},{name:"BlockNode",test:Ci},{name:"ConditionalNode",test:Ai},{name:"ConstantNode",test:Di},{name:"FunctionNode",test:Oi},{name:"FunctionAssignmentNode",test:$i},{name:"IndexNode",test:Pi},{name:"Node",test:Qr},{name:"ObjectNode",test:zi},{name:"OperatorNode",test:Ii},{name:"ParenthesisNode",test:Fi},{name:"RangeNode",test:Bi},{name:"SymbolNode",test:Ti},{name:"Map",test:lo},{name:"Object",test:bi}],c.conversions=[{from:"number",to:"BigNumber",convert:function(l){if(r||Re(l),Yi(l)>15)throw new TypeError("Cannot implicitly convert a number with >15 significant digits to BigNumber (value: "+l+"). Use function bignumber(x) to convert to BigNumber.");return new r(l)}},{from:"number",to:"Complex",convert:function(l){return i||de(l),new i(l,0)}},{from:"number",to:"string",convert:function(l){return l+""}},{from:"BigNumber",to:"Complex",convert:function(l){return i||de(l),new i(l.toNumber(),0)}},{from:"Fraction",to:"BigNumber",convert:function(l){throw new TypeError("Cannot implicitly convert a Fraction to BigNumber or vice versa. Use function bignumber(x) to convert to BigNumber or fraction(x) to convert to Fraction.")}},{from:"Fraction",to:"Complex",convert:function(l){return i||de(l),new i(l.valueOf(),0)}},{from:"number",to:"Fraction",convert:function(l){o||qe(l);var v=new o(l);if(v.valueOf()!==l)throw new TypeError("Cannot implicitly convert a number to a Fraction when there will be a loss of precision (value: "+l+"). Use function fraction(x) to convert to Fraction.");return v}},{from:"string",to:"number",convert:function(l){var v=Number(l);if(isNaN(v))throw new Error('Cannot convert "'+l+'" to a number');return v}},{from:"string",to:"BigNumber",convert:function(l){r||Re(l);try{return new r(l)}catch{throw new Error('Cannot convert "'+l+'" to BigNumber')}}},{from:"string",to:"Fraction",convert:function(l){o||qe(l);try{return new o(l)}catch{throw new Error('Cannot convert "'+l+'" to Fraction')}}},{from:"string",to:"Complex",convert:function(l){i||de(l);try{return new i(l)}catch{throw new Error('Cannot convert "'+l+'" to Complex')}}},{from:"boolean",to:"number",convert:function(l){return+l}},{from:"boolean",to:"BigNumber",convert:function(l){return r||Re(l),new r(+l)}},{from:"boolean",to:"Fraction",convert:function(l){return o||qe(l),new o(+l)}},{from:"boolean",to:"string",convert:function(l){return String(l)}},{from:"Array",to:"Matrix",convert:function(l){return n||vo(),new n(l)}},{from:"Matrix",to:"Array",convert:function(l){return l.valueOf()}}],c});function Re(t){throw new Error("Cannot convert value ".concat(t," into a BigNumber: no class 'BigNumber' provided"))}function de(t){throw new Error("Cannot convert value ".concat(t," into a Complex number: no class 'Complex' provided"))}function vo(){throw new Error("Cannot convert array into a Matrix: no class 'DenseMatrix' provided")}function qe(t){throw new Error("Cannot convert value ".concat(t," into a Fraction, no class 'Fraction' provided."))}var oe=9e15,jt=1e9,We="0123456789abcdef",be="2.3025850929940456840179914546843642076011014886287729760333279009675726096773524802359972050895982983419677840422862486334095254650828067566662873690987816894829072083255546808437998948262331985283935053089653777326288461633662222876982198867465436674744042432743651550489343149393914796194044002221051017141748003688084012647080685567743216228355220114804663715659121373450747856947683463616792101806445070648000277502684916746550586856935673420670581136429224554405758925724208241314695689016758940256776311356919292033376587141660230105703089634572075440370847469940168269282808481184289314848524948644871927809676271275775397027668605952496716674183485704422507197965004714951050492214776567636938662976979522110718264549734772662425709429322582798502585509785265383207606726317164309505995087807523710333101197857547331541421808427543863591778117054309827482385045648019095610299291824318237525357709750539565187697510374970888692180205189339507238539205144634197265287286965110862571492198849978748873771345686209167058",Me="3.1415926535897932384626433832795028841971693993751058209749445923078164062862089986280348253421170679821480865132823066470938446095505822317253594081284811174502841027019385211055596446229489549303819644288109756659334461284756482337867831652712019091456485669234603486104543266482133936072602491412737245870066063155881748815209209628292540917153643678925903600113305305488204665213841469519415116094330572703657595919530921861173819326117931051185480744623799627495673518857527248912279381830119491298336733624406566430860213949463952247371907021798609437027705392171762931767523846748184676694051320005681271452635608277857713427577896091736371787214684409012249534301465495853710507922796892589235420199561121290219608640344181598136297747713099605187072113499999983729780499510597317328160963185950244594553469083026425223082533446850352619311881710100031378387528865875332083814206171776691473035982534904287554687311595628638823537875937519577818577805321712268066130019278766111959092164201989380952572010654858632789",Xe={precision:20,rounding:4,modulo:1,toExpNeg:-7,toExpPos:21,minE:-oe,maxE:oe,crypto:!1},pn,Vt,X=!0,Ae="[DecimalError] ",Kt=Ae+"Invalid argument: ",vn=Ae+"Precision limit exceeded",dn=Ae+"crypto unavailable",mn="[object Decimal]",Et=Math.floor,yt=Math.pow,mo=/^0b([01]+(\.[01]*)?|\.[01]+)(p[+-]?\d+)?$/i,go=/^0x([0-9a-f]+(\.[0-9a-f]*)?|\.[0-9a-f]+)(p[+-]?\d+)?$/i,wo=/^0o([0-7]+(\.[0-7]*)?|\.[0-7]+)(p[+-]?\d+)?$/i,gn=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Tt=1e7,k=7,yo=9007199254740991,_o=be.length-1,Ge=Me.length-1,P={toStringTag:mn};P.absoluteValue=P.abs=function(){var t=new this.constructor(this);return t.s<0&&(t.s=1),Z(t)};P.ceil=function(){return Z(new this.constructor(this),this.e+1,2)};P.clampedTo=P.clamp=function(t,e){var r,i=this,n=i.constructor;if(t=new n(t),e=new n(e),!t.s||!e.s)return new n(NaN);if(t.gt(e))throw Error(Kt+e);return r=i.cmp(t),r<0?t:i.cmp(e)>0?e:new n(i)};P.comparedTo=P.cmp=function(t){var e,r,i,n,o=this,c=o.d,h=(t=new o.constructor(t)).d,l=o.s,v=t.s;if(!c||!h)return!l||!v?NaN:l!==v?l:c===h?0:!c^l<0?1:-1;if(!c[0]||!h[0])return c[0]?l:h[0]?-v:0;if(l!==v)return l;if(o.e!==t.e)return o.e>t.e^l<0?1:-1;for(i=c.length,n=h.length,e=0,r=i<n?i:n;e<r;++e)if(c[e]!==h[e])return c[e]>h[e]^l<0?1:-1;return i===n?0:i>n^l<0?1:-1};P.cosine=P.cos=function(){var t,e,r=this,i=r.constructor;return r.d?r.d[0]?(t=i.precision,e=i.rounding,i.precision=t+Math.max(r.e,r.sd())+k,i.rounding=1,r=bo(i,Mn(i,r)),i.precision=t,i.rounding=e,Z(Vt==2||Vt==3?r.neg():r,t,e,!0)):new i(1):new i(NaN)};P.cubeRoot=P.cbrt=function(){var t,e,r,i,n,o,c,h,l,v,s=this,a=s.constructor;if(!s.isFinite()||s.isZero())return new a(s);for(X=!1,o=s.s*yt(s.s*s,1/3),!o||Math.abs(o)==1/0?(r=xt(s.d),t=s.e,(o=(t-r.length+1)%3)&&(r+=o==1||o==-2?"0":"00"),o=yt(r,1/3),t=Et((t+1)/3)-(t%3==(t<0?-1:2)),o==1/0?r="5e"+t:(r=o.toExponential(),r=r.slice(0,r.indexOf("e")+1)+t),i=new a(r),i.s=s.s):i=new a(o.toString()),c=(t=a.precision)+3;;)if(h=i,l=h.times(h).times(h),v=l.plus(s),i=it(v.plus(s).times(h),v.plus(l),c+2,1),xt(h.d).slice(0,c)===(r=xt(i.d)).slice(0,c))if(r=r.slice(c-3,c+1),r=="9999"||!n&&r=="4999"){if(!n&&(Z(h,t+1,0),h.times(h).times(h).eq(s))){i=h;break}c+=4,n=1}else{(!+r||!+r.slice(1)&&r.charAt(0)=="5")&&(Z(i,t+1,1),e=!i.times(i).times(i).eq(s));break}return X=!0,Z(i,t,a.rounding,e)};P.decimalPlaces=P.dp=function(){var t,e=this.d,r=NaN;if(e){if(t=e.length-1,r=(t-Et(this.e/k))*k,t=e[t],t)for(;t%10==0;t/=10)r--;r<0&&(r=0)}return r};P.dividedBy=P.div=function(t){return it(this,new this.constructor(t))};P.dividedToIntegerBy=P.divToInt=function(t){var e=this,r=e.constructor;return Z(it(e,new r(t),0,1,1),r.precision,r.rounding)};P.equals=P.eq=function(t){return this.cmp(t)===0};P.floor=function(){return Z(new this.constructor(this),this.e+1,3)};P.greaterThan=P.gt=function(t){return this.cmp(t)>0};P.greaterThanOrEqualTo=P.gte=function(t){var e=this.cmp(t);return e==1||e===0};P.hyperbolicCosine=P.cosh=function(){var t,e,r,i,n,o=this,c=o.constructor,h=new c(1);if(!o.isFinite())return new c(o.s?1/0:NaN);if(o.isZero())return h;r=c.precision,i=c.rounding,c.precision=r+Math.max(o.e,o.sd())+4,c.rounding=1,n=o.d.length,n<32?(t=Math.ceil(n/3),e=(1/$e(4,t)).toString()):(t=16,e="2.3283064365386962890625e-10"),o=se(c,1,o.times(e),new c(1),!0);for(var l,v=t,s=new c(8);v--;)l=o.times(o),o=h.minus(l.times(s.minus(l.times(s))));return Z(o,c.precision=r,c.rounding=i,!0)};P.hyperbolicSine=P.sinh=function(){var t,e,r,i,n=this,o=n.constructor;if(!n.isFinite()||n.isZero())return new o(n);if(e=o.precision,r=o.rounding,o.precision=e+Math.max(n.e,n.sd())+4,o.rounding=1,i=n.d.length,i<3)n=se(o,2,n,n,!0);else{t=1.4*Math.sqrt(i),t=t>16?16:t|0,n=n.times(1/$e(5,t)),n=se(o,2,n,n,!0);for(var c,h=new o(5),l=new o(16),v=new o(20);t--;)c=n.times(n),n=n.times(h.plus(c.times(l.times(c).plus(v))))}return o.precision=e,o.rounding=r,Z(n,e,r,!0)};P.hyperbolicTangent=P.tanh=function(){var t,e,r=this,i=r.constructor;return r.isFinite()?r.isZero()?new i(r):(t=i.precision,e=i.rounding,i.precision=t+7,i.rounding=1,it(r.sinh(),r.cosh(),i.precision=t,i.rounding=e)):new i(r.s)};P.inverseCosine=P.acos=function(){var t,e=this,r=e.constructor,i=e.abs().cmp(1),n=r.precision,o=r.rounding;return i!==-1?i===0?e.isNeg()?Bt(r,n,o):new r(0):new r(NaN):e.isZero()?Bt(r,n+4,o).times(.5):(r.precision=n+6,r.rounding=1,e=e.asin(),t=Bt(r,n+4,o).times(.5),r.precision=n,r.rounding=o,t.minus(e))};P.inverseHyperbolicCosine=P.acosh=function(){var t,e,r=this,i=r.constructor;return r.lte(1)?new i(r.eq(1)?0:NaN):r.isFinite()?(t=i.precision,e=i.rounding,i.precision=t+Math.max(Math.abs(r.e),r.sd())+4,i.rounding=1,X=!1,r=r.times(r).minus(1).sqrt().plus(r),X=!0,i.precision=t,i.rounding=e,r.ln()):new i(r)};P.inverseHyperbolicSine=P.asinh=function(){var t,e,r=this,i=r.constructor;return!r.isFinite()||r.isZero()?new i(r):(t=i.precision,e=i.rounding,i.precision=t+2*Math.max(Math.abs(r.e),r.sd())+6,i.rounding=1,X=!1,r=r.times(r).plus(1).sqrt().plus(r),X=!0,i.precision=t,i.rounding=e,r.ln())};P.inverseHyperbolicTangent=P.atanh=function(){var t,e,r,i,n=this,o=n.constructor;return n.isFinite()?n.e>=0?new o(n.abs().eq(1)?n.s/0:n.isZero()?n:NaN):(t=o.precision,e=o.rounding,i=n.sd(),Math.max(i,t)<2*-n.e-1?Z(new o(n),t,e,!0):(o.precision=r=i-n.e,n=it(n.plus(1),new o(1).minus(n),r+t,1),o.precision=t+4,o.rounding=1,n=n.ln(),o.precision=t,o.rounding=e,n.times(.5))):new o(NaN)};P.inverseSine=P.asin=function(){var t,e,r,i,n=this,o=n.constructor;return n.isZero()?new o(n):(e=n.abs().cmp(1),r=o.precision,i=o.rounding,e!==-1?e===0?(t=Bt(o,r+4,i).times(.5),t.s=n.s,t):new o(NaN):(o.precision=r+6,o.rounding=1,n=n.div(new o(1).minus(n.times(n)).sqrt().plus(1)).atan(),o.precision=r,o.rounding=i,n.times(2)))};P.inverseTangent=P.atan=function(){var t,e,r,i,n,o,c,h,l,v=this,s=v.constructor,a=s.precision,f=s.rounding;if(v.isFinite()){if(v.isZero())return new s(v);if(v.abs().eq(1)&&a+4<=Ge)return c=Bt(s,a+4,f).times(.25),c.s=v.s,c}else{if(!v.s)return new s(NaN);if(a+4<=Ge)return c=Bt(s,a+4,f).times(.5),c.s=v.s,c}for(s.precision=h=a+10,s.rounding=1,r=Math.min(28,h/k+2|0),t=r;t;--t)v=v.div(v.times(v).plus(1).sqrt().plus(1));for(X=!1,e=Math.ceil(h/k),i=1,l=v.times(v),c=new s(v),n=v;t!==-1;)if(n=n.times(l),o=c.minus(n.div(i+=2)),n=n.times(l),c=o.plus(n.div(i+=2)),c.d[e]!==void 0)for(t=e;c.d[t]===o.d[t]&&t--;);return r&&(c=c.times(2<<r-1)),X=!0,Z(c,s.precision=a,s.rounding=f,!0)};P.isFinite=function(){return!!this.d};P.isInteger=P.isInt=function(){return!!this.d&&Et(this.e/k)>this.d.length-2};P.isNaN=function(){return!this.s};P.isNegative=P.isNeg=function(){return this.s<0};P.isPositive=P.isPos=function(){return this.s>0};P.isZero=function(){return!!this.d&&this.d[0]===0};P.lessThan=P.lt=function(t){return this.cmp(t)<0};P.lessThanOrEqualTo=P.lte=function(t){return this.cmp(t)<1};P.logarithm=P.log=function(t){var e,r,i,n,o,c,h,l,v=this,s=v.constructor,a=s.precision,f=s.rounding,p=5;if(t==null)t=new s(10),e=!0;else{if(t=new s(t),r=t.d,t.s<0||!r||!r[0]||t.eq(1))return new s(NaN);e=t.eq(10)}if(r=v.d,v.s<0||!r||!r[0]||v.eq(1))return new s(r&&!r[0]?-1/0:v.s!=1?NaN:r?0:1/0);if(e)if(r.length>1)o=!0;else{for(n=r[0];n%10===0;)n/=10;o=n!==1}if(X=!1,h=a+p,c=Wt(v,h),i=e?Ne(s,h+10):Wt(t,h),l=it(c,i,h,1),pe(l.d,n=a,f))do if(h+=10,c=Wt(v,h),i=e?Ne(s,h+10):Wt(t,h),l=it(c,i,h,1),!o){+xt(l.d).slice(n+1,n+15)+1==1e14&&(l=Z(l,a+1,0));break}while(pe(l.d,n+=10,f));return X=!0,Z(l,a,f)};P.minus=P.sub=function(t){var e,r,i,n,o,c,h,l,v,s,a,f,p=this,d=p.constructor;if(t=new d(t),!p.d||!t.d)return!p.s||!t.s?t=new d(NaN):p.d?t.s=-t.s:t=new d(t.d||p.s!==t.s?p:NaN),t;if(p.s!=t.s)return t.s=-t.s,p.plus(t);if(v=p.d,f=t.d,h=d.precision,l=d.rounding,!v[0]||!f[0]){if(f[0])t.s=-t.s;else if(v[0])t=new d(p);else return new d(l===3?-0:0);return X?Z(t,h,l):t}if(r=Et(t.e/k),s=Et(p.e/k),v=v.slice(),o=s-r,o){for(a=o<0,a?(e=v,o=-o,c=f.length):(e=f,r=s,c=v.length),i=Math.max(Math.ceil(h/k),c)+2,o>i&&(o=i,e.length=1),e.reverse(),i=o;i--;)e.push(0);e.reverse()}else{for(i=v.length,c=f.length,a=i<c,a&&(c=i),i=0;i<c;i++)if(v[i]!=f[i]){a=v[i]<f[i];break}o=0}for(a&&(e=v,v=f,f=e,t.s=-t.s),c=v.length,i=f.length-c;i>0;--i)v[c++]=0;for(i=f.length;i>o;){if(v[--i]<f[i]){for(n=i;n&&v[--n]===0;)v[n]=Tt-1;--v[n],v[i]+=Tt}v[i]-=f[i]}for(;v[--c]===0;)v.pop();for(;v[0]===0;v.shift())--r;return v[0]?(t.d=v,t.e=De(v,r),X?Z(t,h,l):t):new d(l===3?-0:0)};P.modulo=P.mod=function(t){var e,r=this,i=r.constructor;return t=new i(t),!r.d||!t.s||t.d&&!t.d[0]?new i(NaN):!t.d||r.d&&!r.d[0]?Z(new i(r),i.precision,i.rounding):(X=!1,i.modulo==9?(e=it(r,t.abs(),0,3,1),e.s*=t.s):e=it(r,t,0,i.modulo,1),e=e.times(t),X=!0,r.minus(e))};P.naturalExponential=P.exp=function(){return Ke(this)};P.naturalLogarithm=P.ln=function(){return Wt(this)};P.negated=P.neg=function(){var t=new this.constructor(this);return t.s=-t.s,Z(t)};P.plus=P.add=function(t){var e,r,i,n,o,c,h,l,v,s,a=this,f=a.constructor;if(t=new f(t),!a.d||!t.d)return!a.s||!t.s?t=new f(NaN):a.d||(t=new f(t.d||a.s===t.s?a:NaN)),t;if(a.s!=t.s)return t.s=-t.s,a.minus(t);if(v=a.d,s=t.d,h=f.precision,l=f.rounding,!v[0]||!s[0])return s[0]||(t=new f(a)),X?Z(t,h,l):t;if(o=Et(a.e/k),i=Et(t.e/k),v=v.slice(),n=o-i,n){for(n<0?(r=v,n=-n,c=s.length):(r=s,i=o,c=v.length),o=Math.ceil(h/k),c=o>c?o+1:c+1,n>c&&(n=c,r.length=1),r.reverse();n--;)r.push(0);r.reverse()}for(c=v.length,n=s.length,c-n<0&&(n=c,r=s,s=v,v=r),e=0;n;)e=(v[--n]=v[n]+s[n]+e)/Tt|0,v[n]%=Tt;for(e&&(v.unshift(e),++i),c=v.length;v[--c]==0;)v.pop();return t.d=v,t.e=De(v,i),X?Z(t,h,l):t};P.precision=P.sd=function(t){var e,r=this;if(t!==void 0&&t!==!!t&&t!==1&&t!==0)throw Error(Kt+t);return r.d?(e=wn(r.d),t&&r.e+1>e&&(e=r.e+1)):e=NaN,e};P.round=function(){var t=this,e=t.constructor;return Z(new e(t),t.e+1,e.rounding)};P.sine=P.sin=function(){var t,e,r=this,i=r.constructor;return r.isFinite()?r.isZero()?new i(r):(t=i.precision,e=i.rounding,i.precision=t+Math.max(r.e,r.sd())+k,i.rounding=1,r=No(i,Mn(i,r)),i.precision=t,i.rounding=e,Z(Vt>2?r.neg():r,t,e,!0)):new i(NaN)};P.squareRoot=P.sqrt=function(){var t,e,r,i,n,o,c=this,h=c.d,l=c.e,v=c.s,s=c.constructor;if(v!==1||!h||!h[0])return new s(!v||v<0&&(!h||h[0])?NaN:h?c:1/0);for(X=!1,v=Math.sqrt(+c),v==0||v==1/0?(e=xt(h),(e.length+l)%2==0&&(e+="0"),v=Math.sqrt(e),l=Et((l+1)/2)-(l<0||l%2),v==1/0?e="5e"+l:(e=v.toExponential(),e=e.slice(0,e.indexOf("e")+1)+l),i=new s(e)):i=new s(v.toString()),r=(l=s.precision)+3;;)if(o=i,i=o.plus(it(c,o,r+2,1)).times(.5),xt(o.d).slice(0,r)===(e=xt(i.d)).slice(0,r))if(e=e.slice(r-3,r+1),e=="9999"||!n&&e=="4999"){if(!n&&(Z(o,l+1,0),o.times(o).eq(c))){i=o;break}r+=4,n=1}else{(!+e||!+e.slice(1)&&e.charAt(0)=="5")&&(Z(i,l+1,1),t=!i.times(i).eq(c));break}return X=!0,Z(i,l,s.rounding,t)};P.tangent=P.tan=function(){var t,e,r=this,i=r.constructor;return r.isFinite()?r.isZero()?new i(r):(t=i.precision,e=i.rounding,i.precision=t+10,i.rounding=1,r=r.sin(),r.s=1,r=it(r,new i(1).minus(r.times(r)).sqrt(),t+10,0),i.precision=t,i.rounding=e,Z(Vt==2||Vt==4?r.neg():r,t,e,!0)):new i(NaN)};P.times=P.mul=function(t){var e,r,i,n,o,c,h,l,v,s=this,a=s.constructor,f=s.d,p=(t=new a(t)).d;if(t.s*=s.s,!f||!f[0]||!p||!p[0])return new a(!t.s||f&&!f[0]&&!p||p&&!p[0]&&!f?NaN:!f||!p?t.s/0:t.s*0);for(r=Et(s.e/k)+Et(t.e/k),l=f.length,v=p.length,l<v&&(o=f,f=p,p=o,c=l,l=v,v=c),o=[],c=l+v,i=c;i--;)o.push(0);for(i=v;--i>=0;){for(e=0,n=l+i;n>i;)h=o[n]+p[i]*f[n-i-1]+e,o[n--]=h%Tt|0,e=h/Tt|0;o[n]=(o[n]+e)%Tt|0}for(;!o[--c];)o.pop();return e?++r:o.shift(),t.d=o,t.e=De(o,r),X?Z(t,a.precision,a.rounding):t};P.toBinary=function(t,e){return nr(this,2,t,e)};P.toDecimalPlaces=P.toDP=function(t,e){var r=this,i=r.constructor;return r=new i(r),t===void 0?r:(Pt(t,0,jt),e===void 0?e=i.rounding:Pt(e,0,8),Z(r,t+r.e+1,e))};P.toExponential=function(t,e){var r,i=this,n=i.constructor;return t===void 0?r=Ut(i,!0):(Pt(t,0,jt),e===void 0?e=n.rounding:Pt(e,0,8),i=Z(new n(i),t+1,e),r=Ut(i,!0,t+1)),i.isNeg()&&!i.isZero()?"-"+r:r};P.toFixed=function(t,e){var r,i,n=this,o=n.constructor;return t===void 0?r=Ut(n):(Pt(t,0,jt),e===void 0?e=o.rounding:Pt(e,0,8),i=Z(new o(n),t+n.e+1,e),r=Ut(i,!1,t+i.e+1)),n.isNeg()&&!n.isZero()?"-"+r:r};P.toFraction=function(t){var e,r,i,n,o,c,h,l,v,s,a,f,p=this,d=p.d,u=p.constructor;if(!d)return new u(p);if(v=r=new u(1),i=l=new u(0),e=new u(i),o=e.e=wn(d)-p.e-1,c=o%k,e.d[0]=yt(10,c<0?k+c:c),t==null)t=o>0?e:v;else{if(h=new u(t),!h.isInt()||h.lt(v))throw Error(Kt+h);t=h.gt(e)?o>0?e:v:h}for(X=!1,h=new u(xt(d)),s=u.precision,u.precision=o=d.length*k*2;a=it(h,e,0,1,1),n=r.plus(a.times(i)),n.cmp(t)!=1;)r=i,i=n,n=v,v=l.plus(a.times(n)),l=n,n=e,e=h.minus(a.times(n)),h=n;return n=it(t.minus(r),i,0,1,1),l=l.plus(n.times(v)),r=r.plus(n.times(i)),l.s=v.s=p.s,f=it(v,i,o,1).minus(p).abs().cmp(it(l,r,o,1).minus(p).abs())<1?[v,i]:[l,r],u.precision=s,X=!0,f};P.toHexadecimal=P.toHex=function(t,e){return nr(this,16,t,e)};P.toNearest=function(t,e){var r=this,i=r.constructor;if(r=new i(r),t==null){if(!r.d)return r;t=new i(1),e=i.rounding}else{if(t=new i(t),e===void 0?e=i.rounding:Pt(e,0,8),!r.d)return t.s?r:t;if(!t.d)return t.s&&(t.s=r.s),t}return t.d[0]?(X=!1,r=it(r,t,0,e,1).times(t),X=!0,Z(r)):(t.s=r.s,r=t),r};P.toNumber=function(){return+this};P.toOctal=function(t,e){return nr(this,8,t,e)};P.toPower=P.pow=function(t){var e,r,i,n,o,c,h=this,l=h.constructor,v=+(t=new l(t));if(!h.d||!t.d||!h.d[0]||!t.d[0])return new l(yt(+h,v));if(h=new l(h),h.eq(1))return h;if(i=l.precision,o=l.rounding,t.eq(1))return Z(h,i,o);if(e=Et(t.e/k),e>=t.d.length-1&&(r=v<0?-v:v)<=yo)return n=yn(l,h,r,i),t.s<0?new l(1).div(n):Z(n,i,o);if(c=h.s,c<0){if(e<t.d.length-1)return new l(NaN);if((t.d[e]&1)==0&&(c=1),h.e==0&&h.d[0]==1&&h.d.length==1)return h.s=c,h}return r=yt(+h,v),e=r==0||!isFinite(r)?Et(v*(Math.log("0."+xt(h.d))/Math.LN10+h.e+1)):new l(r+"").e,e>l.maxE+1||e<l.minE-1?new l(e>0?c/0:0):(X=!1,l.rounding=h.s=1,r=Math.min(12,(e+"").length),n=Ke(t.times(Wt(h,i+r)),i),n.d&&(n=Z(n,i+5,1),pe(n.d,i,o)&&(e=i+10,n=Z(Ke(t.times(Wt(h,e+r)),e),e+5,1),+xt(n.d).slice(i+1,i+15)+1==1e14&&(n=Z(n,i+1,0)))),n.s=c,X=!0,l.rounding=o,Z(n,i,o))};P.toPrecision=function(t,e){var r,i=this,n=i.constructor;return t===void 0?r=Ut(i,i.e<=n.toExpNeg||i.e>=n.toExpPos):(Pt(t,1,jt),e===void 0?e=n.rounding:Pt(e,0,8),i=Z(new n(i),t,e),r=Ut(i,t<=i.e||i.e<=n.toExpNeg,t)),i.isNeg()&&!i.isZero()?"-"+r:r};P.toSignificantDigits=P.toSD=function(t,e){var r=this,i=r.constructor;return t===void 0?(t=i.precision,e=i.rounding):(Pt(t,1,jt),e===void 0?e=i.rounding:Pt(e,0,8)),Z(new i(r),t,e)};P.toString=function(){var t=this,e=t.constructor,r=Ut(t,t.e<=e.toExpNeg||t.e>=e.toExpPos);return t.isNeg()&&!t.isZero()?"-"+r:r};P.truncated=P.trunc=function(){return Z(new this.constructor(this),this.e+1,1)};P.valueOf=P.toJSON=function(){var t=this,e=t.constructor,r=Ut(t,t.e<=e.toExpNeg||t.e>=e.toExpPos);return t.isNeg()?"-"+r:r};function xt(t){var e,r,i,n=t.length-1,o="",c=t[0];if(n>0){for(o+=c,e=1;e<n;e++)i=t[e]+"",r=k-i.length,r&&(o+=kt(r)),o+=i;c=t[e],i=c+"",r=k-i.length,r&&(o+=kt(r))}else if(c===0)return"0";for(;c%10===0;)c/=10;return o+c}function Pt(t,e,r){if(t!==~~t||t<e||t>r)throw Error(Kt+t)}function pe(t,e,r,i){var n,o,c,h;for(o=t[0];o>=10;o/=10)--e;return--e<0?(e+=k,n=0):(n=Math.ceil((e+1)/k),e%=k),o=yt(10,k-e),h=t[n]%o|0,i==null?e<3?(e==0?h=h/100|0:e==1&&(h=h/10|0),c=r<4&&h==99999||r>3&&h==49999||h==5e4||h==0):c=(r<4&&h+1==o||r>3&&h+1==o/2)&&(t[n+1]/o/100|0)==yt(10,e-2)-1||(h==o/2||h==0)&&(t[n+1]/o/100|0)==0:e<4?(e==0?h=h/1e3|0:e==1?h=h/100|0:e==2&&(h=h/10|0),c=(i||r<4)&&h==9999||!i&&r>3&&h==4999):c=((i||r<4)&&h+1==o||!i&&r>3&&h+1==o/2)&&(t[n+1]/o/1e3|0)==yt(10,e-3)-1,c}function ge(t,e,r){for(var i,n=[0],o,c=0,h=t.length;c<h;){for(o=n.length;o--;)n[o]*=e;for(n[0]+=We.indexOf(t.charAt(c++)),i=0;i<n.length;i++)n[i]>r-1&&(n[i+1]===void 0&&(n[i+1]=0),n[i+1]+=n[i]/r|0,n[i]%=r)}return n.reverse()}function bo(t,e){var r,i,n;if(e.isZero())return e;i=e.d.length,i<32?(r=Math.ceil(i/3),n=(1/$e(4,r)).toString()):(r=16,n="2.3283064365386962890625e-10"),t.precision+=r,e=se(t,1,e.times(n),new t(1));for(var o=r;o--;){var c=e.times(e);e=c.times(c).minus(c).times(8).plus(1)}return t.precision-=r,e}var it=function(){function t(i,n,o){var c,h=0,l=i.length;for(i=i.slice();l--;)c=i[l]*n+h,i[l]=c%o|0,h=c/o|0;return h&&i.unshift(h),i}function e(i,n,o,c){var h,l;if(o!=c)l=o>c?1:-1;else for(h=l=0;h<o;h++)if(i[h]!=n[h]){l=i[h]>n[h]?1:-1;break}return l}function r(i,n,o,c){for(var h=0;o--;)i[o]-=h,h=i[o]<n[o]?1:0,i[o]=h*c+i[o]-n[o];for(;!i[0]&&i.length>1;)i.shift()}return function(i,n,o,c,h,l){var v,s,a,f,p,d,u,m,g,M,w,N,_,y,E,b,S,$,O,I,R=i.constructor,F=i.s==n.s?1:-1,B=i.d,z=n.d;if(!B||!B[0]||!z||!z[0])return new R(!i.s||!n.s||(B?z&&B[0]==z[0]:!z)?NaN:B&&B[0]==0||!z?F*0:F/0);for(l?(p=1,s=i.e-n.e):(l=Tt,p=k,s=Et(i.e/p)-Et(n.e/p)),O=z.length,S=B.length,g=new R(F),M=g.d=[],a=0;z[a]==(B[a]||0);a++);if(z[a]>(B[a]||0)&&s--,o==null?(y=o=R.precision,c=R.rounding):h?y=o+(i.e-n.e)+1:y=o,y<0)M.push(1),d=!0;else{if(y=y/p+2|0,a=0,O==1){for(f=0,z=z[0],y++;(a<S||f)&&y--;a++)E=f*l+(B[a]||0),M[a]=E/z|0,f=E%z|0;d=f||a<S}else{for(f=l/(z[0]+1)|0,f>1&&(z=t(z,f,l),B=t(B,f,l),O=z.length,S=B.length),b=O,w=B.slice(0,O),N=w.length;N<O;)w[N++]=0;I=z.slice(),I.unshift(0),$=z[0],z[1]>=l/2&&++$;do f=0,v=e(z,w,O,N),v<0?(_=w[0],O!=N&&(_=_*l+(w[1]||0)),f=_/$|0,f>1?(f>=l&&(f=l-1),u=t(z,f,l),m=u.length,N=w.length,v=e(u,w,m,N),v==1&&(f--,r(u,O<m?I:z,m,l))):(f==0&&(v=f=1),u=z.slice()),m=u.length,m<N&&u.unshift(0),r(w,u,N,l),v==-1&&(N=w.length,v=e(z,w,O,N),v<1&&(f++,r(w,O<N?I:z,N,l))),N=w.length):v===0&&(f++,w=[0]),M[a++]=f,v&&w[0]?w[N++]=B[b]||0:(w=[B[b]],N=1);while((b++<S||w[0]!==void 0)&&y--);d=w[0]!==void 0}M[0]||M.shift()}if(p==1)g.e=s,pn=d;else{for(a=1,f=M[0];f>=10;f/=10)a++;g.e=a+s*p-1,Z(g,h?o+g.e+1:o,c,d)}return g}}();function Z(t,e,r,i){var n,o,c,h,l,v,s,a,f,p=t.constructor;t:if(e!=null){if(a=t.d,!a)return t;for(n=1,h=a[0];h>=10;h/=10)n++;if(o=e-n,o<0)o+=k,c=e,s=a[f=0],l=s/yt(10,n-c-1)%10|0;else if(f=Math.ceil((o+1)/k),h=a.length,f>=h)if(i){for(;h++<=f;)a.push(0);s=l=0,n=1,o%=k,c=o-k+1}else break t;else{for(s=h=a[f],n=1;h>=10;h/=10)n++;o%=k,c=o-k+n,l=c<0?0:s/yt(10,n-c-1)%10|0}if(i=i||e<0||a[f+1]!==void 0||(c<0?s:s%yt(10,n-c-1)),v=r<4?(l||i)&&(r==0||r==(t.s<0?3:2)):l>5||l==5&&(r==4||i||r==6&&(o>0?c>0?s/yt(10,n-c):0:a[f-1])%10&1||r==(t.s<0?8:7)),e<1||!a[0])return a.length=0,v?(e-=t.e+1,a[0]=yt(10,(k-e%k)%k),t.e=-e||0):a[0]=t.e=0,t;if(o==0?(a.length=f,h=1,f--):(a.length=f+1,h=yt(10,k-o),a[f]=c>0?(s/yt(10,n-c)%yt(10,c)|0)*h:0),v)for(;;)if(f==0){for(o=1,c=a[0];c>=10;c/=10)o++;for(c=a[0]+=h,h=1;c>=10;c/=10)h++;o!=h&&(t.e++,a[0]==Tt&&(a[0]=1));break}else{if(a[f]+=h,a[f]!=Tt)break;a[f--]=0,h=1}for(o=a.length;a[--o]===0;)a.pop()}return X&&(t.e>p.maxE?(t.d=null,t.e=NaN):t.e<p.minE&&(t.e=0,t.d=[0])),t}function Ut(t,e,r){if(!t.isFinite())return bn(t);var i,n=t.e,o=xt(t.d),c=o.length;return e?(r&&(i=r-c)>0?o=o.charAt(0)+"."+o.slice(1)+kt(i):c>1&&(o=o.charAt(0)+"."+o.slice(1)),o=o+(t.e<0?"e":"e+")+t.e):n<0?(o="0."+kt(-n-1)+o,r&&(i=r-c)>0&&(o+=kt(i))):n>=c?(o+=kt(n+1-c),r&&(i=r-n-1)>0&&(o=o+"."+kt(i))):((i=n+1)<c&&(o=o.slice(0,i)+"."+o.slice(i)),r&&(i=r-c)>0&&(n+1===c&&(o+="."),o+=kt(i))),o}function De(t,e){var r=t[0];for(e*=k;r>=10;r/=10)e++;return e}function Ne(t,e,r){if(e>_o)throw X=!0,r&&(t.precision=r),Error(vn);return Z(new t(be),e,1,!0)}function Bt(t,e,r){if(e>Ge)throw Error(vn);return Z(new t(Me),e,r,!0)}function wn(t){var e=t.length-1,r=e*k+1;if(e=t[e],e){for(;e%10==0;e/=10)r--;for(e=t[0];e>=10;e/=10)r++}return r}function kt(t){for(var e="";t--;)e+="0";return e}function yn(t,e,r,i){var n,o=new t(1),c=Math.ceil(i/k+4);for(X=!1;;){if(r%2&&(o=o.times(e),pr(o.d,c)&&(n=!0)),r=Et(r/2),r===0){r=o.d.length-1,n&&o.d[r]===0&&++o.d[r];break}e=e.times(e),pr(e.d,c)}return X=!0,o}function hr(t){return t.d[t.d.length-1]&1}function _n(t,e,r){for(var i,n=new t(e[0]),o=0;++o<e.length;)if(i=new t(e[o]),i.s)n[r](i)&&(n=i);else{n=i;break}return n}function Ke(t,e){var r,i,n,o,c,h,l,v=0,s=0,a=0,f=t.constructor,p=f.rounding,d=f.precision;if(!t.d||!t.d[0]||t.e>17)return new f(t.d?t.d[0]?t.s<0?0:1/0:1:t.s?t.s<0?0:t:0/0);for(e==null?(X=!1,l=d):l=e,h=new f(.03125);t.e>-2;)t=t.times(h),a+=5;for(i=Math.log(yt(2,a))/Math.LN10*2+5|0,l+=i,r=o=c=new f(1),f.precision=l;;){if(o=Z(o.times(t),l,1),r=r.times(++s),h=c.plus(it(o,r,l,1)),xt(h.d).slice(0,l)===xt(c.d).slice(0,l)){for(n=a;n--;)c=Z(c.times(c),l,1);if(e==null)if(v<3&&pe(c.d,l-i,p,v))f.precision=l+=10,r=o=h=new f(1),s=0,v++;else return Z(c,f.precision=d,p,X=!0);else return f.precision=d,c}c=h}}function Wt(t,e){var r,i,n,o,c,h,l,v,s,a,f,p=1,d=10,u=t,m=u.d,g=u.constructor,M=g.rounding,w=g.precision;if(u.s<0||!m||!m[0]||!u.e&&m[0]==1&&m.length==1)return new g(m&&!m[0]?-1/0:u.s!=1?NaN:m?0:u);if(e==null?(X=!1,s=w):s=e,g.precision=s+=d,r=xt(m),i=r.charAt(0),Math.abs(o=u.e)<15e14){for(;i<7&&i!=1||i==1&&r.charAt(1)>3;)u=u.times(t),r=xt(u.d),i=r.charAt(0),p++;o=u.e,i>1?(u=new g("0."+r),o++):u=new g(i+"."+r.slice(1))}else return v=Ne(g,s+2,w).times(o+""),u=Wt(new g(i+"."+r.slice(1)),s-d).plus(v),g.precision=w,e==null?Z(u,w,M,X=!0):u;for(a=u,l=c=u=it(u.minus(1),u.plus(1),s,1),f=Z(u.times(u),s,1),n=3;;){if(c=Z(c.times(f),s,1),v=l.plus(it(c,new g(n),s,1)),xt(v.d).slice(0,s)===xt(l.d).slice(0,s))if(l=l.times(2),o!==0&&(l=l.plus(Ne(g,s+2,w).times(o+""))),l=it(l,new g(p),s,1),e==null)if(pe(l.d,s-d,M,h))g.precision=s+=d,v=c=u=it(a.minus(1),a.plus(1),s,1),f=Z(u.times(u),s,1),n=h=1;else return Z(l,g.precision=w,M,X=!0);else return g.precision=w,l;l=v,n+=2}}function bn(t){return String(t.s*t.s/0)}function Je(t,e){var r,i,n;for((r=e.indexOf("."))>-1&&(e=e.replace(".","")),(i=e.search(/e/i))>0?(r<0&&(r=i),r+=+e.slice(i+1),e=e.substring(0,i)):r<0&&(r=e.length),i=0;e.charCodeAt(i)===48;i++);for(n=e.length;e.charCodeAt(n-1)===48;--n);if(e=e.slice(i,n),e){if(n-=i,t.e=r=r-i-1,t.d=[],i=(r+1)%k,r<0&&(i+=k),i<n){for(i&&t.d.push(+e.slice(0,i)),n-=k;i<n;)t.d.push(+e.slice(i,i+=k));e=e.slice(i),i=k-e.length}else i-=n;for(;i--;)e+="0";t.d.push(+e),X&&(t.e>t.constructor.maxE?(t.d=null,t.e=NaN):t.e<t.constructor.minE&&(t.e=0,t.d=[0]))}else t.e=0,t.d=[0];return t}function Mo(t,e){var r,i,n,o,c,h,l,v,s;if(e.indexOf("_")>-1){if(e=e.replace(/(\d)_(?=\d)/g,"$1"),gn.test(e))return Je(t,e)}else if(e==="Infinity"||e==="NaN")return+e||(t.s=NaN),t.e=NaN,t.d=null,t;if(go.test(e))r=16,e=e.toLowerCase();else if(mo.test(e))r=2;else if(wo.test(e))r=8;else throw Error(Kt+e);for(o=e.search(/p/i),o>0?(l=+e.slice(o+1),e=e.substring(2,o)):e=e.slice(2),o=e.indexOf("."),c=o>=0,i=t.constructor,c&&(e=e.replace(".",""),h=e.length,o=h-o,n=yn(i,new i(r),o,o*2)),v=ge(e,r,Tt),s=v.length-1,o=s;v[o]===0;--o)v.pop();return o<0?new i(t.s*0):(t.e=De(v,s),t.d=v,X=!1,c&&(t=it(t,n,h*4)),l&&(t=t.times(Math.abs(l)<54?yt(2,l):ue.pow(2,l))),X=!0,t)}function No(t,e){var r,i=e.d.length;if(i<3)return e.isZero()?e:se(t,2,e,e);r=1.4*Math.sqrt(i),r=r>16?16:r|0,e=e.times(1/$e(5,r)),e=se(t,2,e,e);for(var n,o=new t(5),c=new t(16),h=new t(20);r--;)n=e.times(e),e=e.times(o.plus(n.times(c.times(n).minus(h))));return e}function se(t,e,r,i,n){var o,c,h,l,v=t.precision,s=Math.ceil(v/k);for(X=!1,l=r.times(r),h=new t(i);;){if(c=it(h.times(l),new t(e++*e++),v,1),h=n?i.plus(c):i.minus(c),i=it(c.times(l),new t(e++*e++),v,1),c=h.plus(i),c.d[s]!==void 0){for(o=s;c.d[o]===h.d[o]&&o--;);if(o==-1)break}o=h,h=i,i=c,c=o}return X=!0,c.d.length=s+1,c}function $e(t,e){for(var r=t;--e;)r*=t;return r}function Mn(t,e){var r,i=e.s<0,n=Bt(t,t.precision,1),o=n.times(.5);if(e=e.abs(),e.lte(o))return Vt=i?4:1,e;if(r=e.divToInt(n),r.isZero())Vt=i?3:2;else{if(e=e.minus(r.times(n)),e.lte(o))return Vt=hr(r)?i?2:3:i?4:1,e;Vt=hr(r)?i?1:4:i?3:2}return e.minus(n).abs()}function nr(t,e,r,i){var n,o,c,h,l,v,s,a,f,p=t.constructor,d=r!==void 0;if(d?(Pt(r,1,jt),i===void 0?i=p.rounding:Pt(i,0,8)):(r=p.precision,i=p.rounding),!t.isFinite())s=bn(t);else{for(s=Ut(t),c=s.indexOf("."),d?(n=2,e==16?r=r*4-3:e==8&&(r=r*3-2)):n=e,c>=0&&(s=s.replace(".",""),f=new p(1),f.e=s.length-c,f.d=ge(Ut(f),10,n),f.e=f.d.length),a=ge(s,10,n),o=l=a.length;a[--l]==0;)a.pop();if(!a[0])s=d?"0p+0":"0";else{if(c<0?o--:(t=new p(t),t.d=a,t.e=o,t=it(t,f,r,i,0,n),a=t.d,o=t.e,v=pn),c=a[r],h=n/2,v=v||a[r+1]!==void 0,v=i<4?(c!==void 0||v)&&(i===0||i===(t.s<0?3:2)):c>h||c===h&&(i===4||v||i===6&&a[r-1]&1||i===(t.s<0?8:7)),a.length=r,v)for(;++a[--r]>n-1;)a[r]=0,r||(++o,a.unshift(1));for(l=a.length;!a[l-1];--l);for(c=0,s="";c<l;c++)s+=We.charAt(a[c]);if(d){if(l>1)if(e==16||e==8){for(c=e==16?4:3,--l;l%c;l++)s+="0";for(a=ge(s,n,e),l=a.length;!a[l-1];--l);for(c=1,s="1.";c<l;c++)s+=We.charAt(a[c])}else s=s.charAt(0)+"."+s.slice(1);s=s+(o<0?"p":"p+")+o}else if(o<0){for(;++o;)s="0"+s;s="0."+s}else if(++o>l)for(o-=l;o--;)s+="0";else o<l&&(s=s.slice(0,o)+"."+s.slice(o))}s=(e==16?"0x":e==2?"0b":e==8?"0o":"")+s}return t.s<0?"-"+s:s}function pr(t,e){if(t.length>e)return t.length=e,!0}function xo(t){return new this(t).abs()}function So(t){return new this(t).acos()}function Eo(t){return new this(t).acosh()}function Co(t,e){return new this(t).plus(e)}function Ao(t){return new this(t).asin()}function Do(t){return new this(t).asinh()}function $o(t){return new this(t).atan()}function Oo(t){return new this(t).atanh()}function Po(t,e){t=new this(t),e=new this(e);var r,i=this.precision,n=this.rounding,o=i+4;return!t.s||!e.s?r=new this(NaN):!t.d&&!e.d?(r=Bt(this,o,1).times(e.s>0?.25:.75),r.s=t.s):!e.d||t.isZero()?(r=e.s<0?Bt(this,i,n):new this(0),r.s=t.s):!t.d||e.isZero()?(r=Bt(this,o,1).times(.5),r.s=t.s):e.s<0?(this.precision=o,this.rounding=1,r=this.atan(it(t,e,o,1)),e=Bt(this,o,1),this.precision=i,this.rounding=n,r=t.s<0?r.minus(e):r.plus(e)):r=this.atan(it(t,e,o,1)),r}function zo(t){return new this(t).cbrt()}function Io(t){return Z(t=new this(t),t.e+1,2)}function Fo(t,e,r){return new this(t).clamp(e,r)}function Bo(t){if(!t||typeof t!="object")throw Error(Ae+"Object expected");var e,r,i,n=t.defaults===!0,o=["precision",1,jt,"rounding",0,8,"toExpNeg",-oe,0,"toExpPos",0,oe,"maxE",0,oe,"minE",-oe,0,"modulo",0,9];for(e=0;e<o.length;e+=3)if(r=o[e],n&&(this[r]=Xe[r]),(i=t[r])!==void 0)if(Et(i)===i&&i>=o[e+1]&&i<=o[e+2])this[r]=i;else throw Error(Kt+r+": "+i);if(r="crypto",n&&(this[r]=Xe[r]),(i=t[r])!==void 0)if(i===!0||i===!1||i===0||i===1)if(i)if(typeof crypto!="undefined"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))this[r]=!0;else throw Error(dn);else this[r]=!1;else throw Error(Kt+r+": "+i);return this}function To(t){return new this(t).cos()}function Lo(t){return new this(t).cosh()}function Nn(t){var e,r,i;function n(o){var c,h,l,v=this;if(!(v instanceof n))return new n(o);if(v.constructor=n,vr(o)){v.s=o.s,X?!o.d||o.e>n.maxE?(v.e=NaN,v.d=null):o.e<n.minE?(v.e=0,v.d=[0]):(v.e=o.e,v.d=o.d.slice()):(v.e=o.e,v.d=o.d?o.d.slice():o.d);return}if(l=typeof o,l==="number"){if(o===0){v.s=1/o<0?-1:1,v.e=0,v.d=[0];return}if(o<0?(o=-o,v.s=-1):v.s=1,o===~~o&&o<1e7){for(c=0,h=o;h>=10;h/=10)c++;X?c>n.maxE?(v.e=NaN,v.d=null):c<n.minE?(v.e=0,v.d=[0]):(v.e=c,v.d=[o]):(v.e=c,v.d=[o]);return}else if(o*0!==0){o||(v.s=NaN),v.e=NaN,v.d=null;return}return Je(v,o.toString())}else if(l!=="string")throw Error(Kt+o);return(h=o.charCodeAt(0))===45?(o=o.slice(1),v.s=-1):(h===43&&(o=o.slice(1)),v.s=1),gn.test(o)?Je(v,o):Mo(v,o)}if(n.prototype=P,n.ROUND_UP=0,n.ROUND_DOWN=1,n.ROUND_CEIL=2,n.ROUND_FLOOR=3,n.ROUND_HALF_UP=4,n.ROUND_HALF_DOWN=5,n.ROUND_HALF_EVEN=6,n.ROUND_HALF_CEIL=7,n.ROUND_HALF_FLOOR=8,n.EUCLID=9,n.config=n.set=Bo,n.clone=Nn,n.isDecimal=vr,n.abs=xo,n.acos=So,n.acosh=Eo,n.add=Co,n.asin=Ao,n.asinh=Do,n.atan=$o,n.atanh=Oo,n.atan2=Po,n.cbrt=zo,n.ceil=Io,n.clamp=Fo,n.cos=To,n.cosh=Lo,n.div=Ro,n.exp=qo,n.floor=Uo,n.hypot=Zo,n.ln=Vo,n.log=Ho,n.log10=ko,n.log2=Yo,n.max=Wo,n.min=Xo,n.mod=Go,n.mul=Ko,n.pow=Jo,n.random=jo,n.round=Qo,n.sign=ta,n.sin=ea,n.sinh=ra,n.sqrt=na,n.sub=ia,n.sum=oa,n.tan=aa,n.tanh=sa,n.trunc=ua,t===void 0&&(t={}),t&&t.defaults!==!0)for(i=["precision","rounding","toExpNeg","toExpPos","maxE","minE","modulo","crypto"],e=0;e<i.length;)t.hasOwnProperty(r=i[e++])||(t[r]=this[r]);return n.config(t),n}function Ro(t,e){return new this(t).div(e)}function qo(t){return new this(t).exp()}function Uo(t){return Z(t=new this(t),t.e+1,3)}function Zo(){var t,e,r=new this(0);for(X=!1,t=0;t<arguments.length;)if(e=new this(arguments[t++]),e.d)r.d&&(r=r.plus(e.times(e)));else{if(e.s)return X=!0,new this(1/0);r=e}return X=!0,r.sqrt()}function vr(t){return t instanceof ue||t&&t.toStringTag===mn||!1}function Vo(t){return new this(t).ln()}function Ho(t,e){return new this(t).log(e)}function Yo(t){return new this(t).log(2)}function ko(t){return new this(t).log(10)}function Wo(){return _n(this,arguments,"lt")}function Xo(){return _n(this,arguments,"gt")}function Go(t,e){return new this(t).mod(e)}function Ko(t,e){return new this(t).mul(e)}function Jo(t,e){return new this(t).pow(e)}function jo(t){var e,r,i,n,o=0,c=new this(1),h=[];if(t===void 0?t=this.precision:Pt(t,1,jt),i=Math.ceil(t/k),this.crypto)if(crypto.getRandomValues)for(e=crypto.getRandomValues(new Uint32Array(i));o<i;)n=e[o],n>=429e7?e[o]=crypto.getRandomValues(new Uint32Array(1))[0]:h[o++]=n%1e7;else if(crypto.randomBytes){for(e=crypto.randomBytes(i*=4);o<i;)n=e[o]+(e[o+1]<<8)+(e[o+2]<<16)+((e[o+3]&127)<<24),n>=214e7?crypto.randomBytes(4).copy(e,o):(h.push(n%1e7),o+=4);o=i/4}else throw Error(dn);else for(;o<i;)h[o++]=Math.random()*1e7|0;for(i=h[--o],t%=k,i&&t&&(n=yt(10,k-t),h[o]=(i/n|0)*n);h[o]===0;o--)h.pop();if(o<0)r=0,h=[0];else{for(r=-1;h[0]===0;r-=k)h.shift();for(i=1,n=h[0];n>=10;n/=10)i++;i<k&&(r-=k-i)}return c.e=r,c.d=h,c}function Qo(t){return Z(t=new this(t),t.e+1,this.rounding)}function ta(t){return t=new this(t),t.d?t.d[0]?t.s:0*t.s:t.s||NaN}function ea(t){return new this(t).sin()}function ra(t){return new this(t).sinh()}function na(t){return new this(t).sqrt()}function ia(t,e){return new this(t).sub(e)}function oa(){var t=0,e=arguments,r=new this(e[t]);for(X=!1;r.s&&++t<e.length;)r=r.plus(e[t]);return X=!0,Z(r,this.precision,this.rounding)}function aa(t){return new this(t).tan()}function sa(t){return new this(t).tanh()}function ua(t){return Z(t=new this(t),t.e+1,1)}P[Symbol.for("nodejs.util.inspect.custom")]=P.toString;P[Symbol.toStringTag]="Decimal";var ue=P.constructor=Nn(Xe);be=new ue(be);Me=new ue(Me);var ca="BigNumber",fa=["?on","config"],la=j(ca,fa,t=>{var{on:e,config:r}=t,i=ue.clone({precision:r.precision,modulo:ue.EUCLID});return i.prototype=Object.create(i.prototype),i.prototype.type="BigNumber",i.prototype.isBigNumber=!0,i.prototype.toJSON=function(){return{mathjs:"BigNumber",value:this.toString()}},i.fromJSON=function(n){return new i(n.value)},e&&e("config",function(n,o){n.precision!==o.precision&&i.config({precision:n.precision})}),i},{isClass:!0}),xn={exports:{}};/**
 * @license Complex.js v2.1.1 12/05/2020
 *
 * Copyright (c) 2020, Robert Eisele (robert@xarg.org)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 **/(function(t,e){(function(r){var i=Math.cosh||function(a){return Math.abs(a)<1e-9?1-a:(Math.exp(a)+Math.exp(-a))*.5},n=Math.sinh||function(a){return Math.abs(a)<1e-9?a:(Math.exp(a)-Math.exp(-a))*.5},o=function(a){var f=Math.PI/4;if(-f>a||a>f)return Math.cos(a)-1;var p=a*a;return p*(p*(p*(p*(p*(p*(p*(p/20922789888e3-1/87178291200)+1/479001600)-1/3628800)+1/40320)-1/720)+1/24)-1/2)},c=function(a,f){var p=Math.abs(a),d=Math.abs(f);return p<3e3&&d<3e3?Math.sqrt(p*p+d*d):(p<d?(p=d,d=a/f):d=f/a,p*Math.sqrt(1+d*d))},h=function(){throw SyntaxError("Invalid Param")};function l(a,f){var p=Math.abs(a),d=Math.abs(f);return a===0?Math.log(d):f===0?Math.log(p):p<3e3&&d<3e3?Math.log(a*a+f*f)*.5:(a=a/2,f=f/2,.5*Math.log(a*a+f*f)+Math.LN2)}var v=function(a,f){var p={re:0,im:0};if(a==null)p.re=p.im=0;else if(f!==void 0)p.re=a,p.im=f;else switch(typeof a){case"object":if("im"in a&&"re"in a)p.re=a.re,p.im=a.im;else if("abs"in a&&"arg"in a){if(!Number.isFinite(a.abs)&&Number.isFinite(a.arg))return s.INFINITY;p.re=a.abs*Math.cos(a.arg),p.im=a.abs*Math.sin(a.arg)}else if("r"in a&&"phi"in a){if(!Number.isFinite(a.r)&&Number.isFinite(a.phi))return s.INFINITY;p.re=a.r*Math.cos(a.phi),p.im=a.r*Math.sin(a.phi)}else a.length===2?(p.re=a[0],p.im=a[1]):h();break;case"string":p.im=p.re=0;var d=a.match(/\d+\.?\d*e[+-]?\d+|\d+\.?\d*|\.\d+|./g),u=1,m=0;d===null&&h();for(var g=0;g<d.length;g++){var M=d[g];M===" "||M==="	"||M===`
`||(M==="+"?u++:M==="-"?m++:M==="i"||M==="I"?(u+m===0&&h(),d[g+1]!==" "&&!isNaN(d[g+1])?(p.im+=parseFloat((m%2?"-":"")+d[g+1]),g++):p.im+=parseFloat((m%2?"-":"")+"1"),u=m=0):((u+m===0||isNaN(M))&&h(),d[g+1]==="i"||d[g+1]==="I"?(p.im+=parseFloat((m%2?"-":"")+M),g++):p.re+=parseFloat((m%2?"-":"")+M),u=m=0))}u+m>0&&h();break;case"number":p.im=0,p.re=a;break;default:h()}return isNaN(p.re)||isNaN(p.im),p};function s(a,f){if(!(this instanceof s))return new s(a,f);var p=v(a,f);this.re=p.re,this.im=p.im}s.prototype={re:0,im:0,sign:function(){var a=this.abs();return new s(this.re/a,this.im/a)},add:function(a,f){var p=new s(a,f);return this.isInfinite()&&p.isInfinite()?s.NAN:this.isInfinite()||p.isInfinite()?s.INFINITY:new s(this.re+p.re,this.im+p.im)},sub:function(a,f){var p=new s(a,f);return this.isInfinite()&&p.isInfinite()?s.NAN:this.isInfinite()||p.isInfinite()?s.INFINITY:new s(this.re-p.re,this.im-p.im)},mul:function(a,f){var p=new s(a,f);return this.isInfinite()&&p.isZero()||this.isZero()&&p.isInfinite()?s.NAN:this.isInfinite()||p.isInfinite()?s.INFINITY:p.im===0&&this.im===0?new s(this.re*p.re,0):new s(this.re*p.re-this.im*p.im,this.re*p.im+this.im*p.re)},div:function(a,f){var p=new s(a,f);if(this.isZero()&&p.isZero()||this.isInfinite()&&p.isInfinite())return s.NAN;if(this.isInfinite()||p.isZero())return s.INFINITY;if(this.isZero()||p.isInfinite())return s.ZERO;a=this.re,f=this.im;var d=p.re,u=p.im,m,g;return u===0?new s(a/d,f/d):Math.abs(d)<Math.abs(u)?(g=d/u,m=d*g+u,new s((a*g+f)/m,(f*g-a)/m)):(g=u/d,m=u*g+d,new s((a+f*g)/m,(f-a*g)/m))},pow:function(a,f){var p=new s(a,f);if(a=this.re,f=this.im,p.isZero())return s.ONE;if(p.im===0){if(f===0&&a>0)return new s(Math.pow(a,p.re),0);if(a===0)switch((p.re%4+4)%4){case 0:return new s(Math.pow(f,p.re),0);case 1:return new s(0,Math.pow(f,p.re));case 2:return new s(-Math.pow(f,p.re),0);case 3:return new s(0,-Math.pow(f,p.re))}}if(a===0&&f===0&&p.re>0&&p.im>=0)return s.ZERO;var d=Math.atan2(f,a),u=l(a,f);return a=Math.exp(p.re*u-p.im*d),f=p.im*u+p.re*d,new s(a*Math.cos(f),a*Math.sin(f))},sqrt:function(){var a=this.re,f=this.im,p=this.abs(),d,u;if(a>=0){if(f===0)return new s(Math.sqrt(a),0);d=.5*Math.sqrt(2*(p+a))}else d=Math.abs(f)/Math.sqrt(2*(p-a));return a<=0?u=.5*Math.sqrt(2*(p-a)):u=Math.abs(f)/Math.sqrt(2*(p+a)),new s(d,f<0?-u:u)},exp:function(){var a=Math.exp(this.re);return this.im,new s(a*Math.cos(this.im),a*Math.sin(this.im))},expm1:function(){var a=this.re,f=this.im;return new s(Math.expm1(a)*Math.cos(f)+o(f),Math.exp(a)*Math.sin(f))},log:function(){var a=this.re,f=this.im;return new s(l(a,f),Math.atan2(f,a))},abs:function(){return c(this.re,this.im)},arg:function(){return Math.atan2(this.im,this.re)},sin:function(){var a=this.re,f=this.im;return new s(Math.sin(a)*i(f),Math.cos(a)*n(f))},cos:function(){var a=this.re,f=this.im;return new s(Math.cos(a)*i(f),-Math.sin(a)*n(f))},tan:function(){var a=2*this.re,f=2*this.im,p=Math.cos(a)+i(f);return new s(Math.sin(a)/p,n(f)/p)},cot:function(){var a=2*this.re,f=2*this.im,p=Math.cos(a)-i(f);return new s(-Math.sin(a)/p,n(f)/p)},sec:function(){var a=this.re,f=this.im,p=.5*i(2*f)+.5*Math.cos(2*a);return new s(Math.cos(a)*i(f)/p,Math.sin(a)*n(f)/p)},csc:function(){var a=this.re,f=this.im,p=.5*i(2*f)-.5*Math.cos(2*a);return new s(Math.sin(a)*i(f)/p,-Math.cos(a)*n(f)/p)},asin:function(){var a=this.re,f=this.im,p=new s(f*f-a*a+1,-2*a*f).sqrt(),d=new s(p.re-f,p.im+a).log();return new s(d.im,-d.re)},acos:function(){var a=this.re,f=this.im,p=new s(f*f-a*a+1,-2*a*f).sqrt(),d=new s(p.re-f,p.im+a).log();return new s(Math.PI/2-d.im,d.re)},atan:function(){var a=this.re,f=this.im;if(a===0){if(f===1)return new s(0,1/0);if(f===-1)return new s(0,-1/0)}var p=a*a+(1-f)*(1-f),d=new s((1-f*f-a*a)/p,-2*a/p).log();return new s(-.5*d.im,.5*d.re)},acot:function(){var a=this.re,f=this.im;if(f===0)return new s(Math.atan2(1,a),0);var p=a*a+f*f;return p!==0?new s(a/p,-f/p).atan():new s(a!==0?a/0:0,f!==0?-f/0:0).atan()},asec:function(){var a=this.re,f=this.im;if(a===0&&f===0)return new s(0,1/0);var p=a*a+f*f;return p!==0?new s(a/p,-f/p).acos():new s(a!==0?a/0:0,f!==0?-f/0:0).acos()},acsc:function(){var a=this.re,f=this.im;if(a===0&&f===0)return new s(Math.PI/2,1/0);var p=a*a+f*f;return p!==0?new s(a/p,-f/p).asin():new s(a!==0?a/0:0,f!==0?-f/0:0).asin()},sinh:function(){var a=this.re,f=this.im;return new s(n(a)*Math.cos(f),i(a)*Math.sin(f))},cosh:function(){var a=this.re,f=this.im;return new s(i(a)*Math.cos(f),n(a)*Math.sin(f))},tanh:function(){var a=2*this.re,f=2*this.im,p=i(a)+Math.cos(f);return new s(n(a)/p,Math.sin(f)/p)},coth:function(){var a=2*this.re,f=2*this.im,p=i(a)-Math.cos(f);return new s(n(a)/p,-Math.sin(f)/p)},csch:function(){var a=this.re,f=this.im,p=Math.cos(2*f)-i(2*a);return new s(-2*n(a)*Math.cos(f)/p,2*i(a)*Math.sin(f)/p)},sech:function(){var a=this.re,f=this.im,p=Math.cos(2*f)+i(2*a);return new s(2*i(a)*Math.cos(f)/p,-2*n(a)*Math.sin(f)/p)},asinh:function(){var a=this.im;this.im=-this.re,this.re=a;var f=this.asin();return this.re=-this.im,this.im=a,a=f.re,f.re=-f.im,f.im=a,f},acosh:function(){var a=this.acos();if(a.im<=0){var f=a.re;a.re=-a.im,a.im=f}else{var f=a.im;a.im=-a.re,a.re=f}return a},atanh:function(){var a=this.re,f=this.im,p=a>1&&f===0,d=1-a,u=1+a,m=d*d+f*f,g=m!==0?new s((u*d-f*f)/m,(f*d+u*f)/m):new s(a!==-1?a/0:0,f!==0?f/0:0),M=g.re;return g.re=l(g.re,g.im)/2,g.im=Math.atan2(g.im,M)/2,p&&(g.im=-g.im),g},acoth:function(){var a=this.re,f=this.im;if(a===0&&f===0)return new s(0,Math.PI/2);var p=a*a+f*f;return p!==0?new s(a/p,-f/p).atanh():new s(a!==0?a/0:0,f!==0?-f/0:0).atanh()},acsch:function(){var a=this.re,f=this.im;if(f===0)return new s(a!==0?Math.log(a+Math.sqrt(a*a+1)):1/0,0);var p=a*a+f*f;return p!==0?new s(a/p,-f/p).asinh():new s(a!==0?a/0:0,f!==0?-f/0:0).asinh()},asech:function(){var a=this.re,f=this.im;if(this.isZero())return s.INFINITY;var p=a*a+f*f;return p!==0?new s(a/p,-f/p).acosh():new s(a!==0?a/0:0,f!==0?-f/0:0).acosh()},inverse:function(){if(this.isZero())return s.INFINITY;if(this.isInfinite())return s.ZERO;var a=this.re,f=this.im,p=a*a+f*f;return new s(a/p,-f/p)},conjugate:function(){return new s(this.re,-this.im)},neg:function(){return new s(-this.re,-this.im)},ceil:function(a){return a=Math.pow(10,a||0),new s(Math.ceil(this.re*a)/a,Math.ceil(this.im*a)/a)},floor:function(a){return a=Math.pow(10,a||0),new s(Math.floor(this.re*a)/a,Math.floor(this.im*a)/a)},round:function(a){return a=Math.pow(10,a||0),new s(Math.round(this.re*a)/a,Math.round(this.im*a)/a)},equals:function(a,f){var p=new s(a,f);return Math.abs(p.re-this.re)<=s.EPSILON&&Math.abs(p.im-this.im)<=s.EPSILON},clone:function(){return new s(this.re,this.im)},toString:function(){var a=this.re,f=this.im,p="";return this.isNaN()?"NaN":this.isInfinite()?"Infinity":(Math.abs(a)<s.EPSILON&&(a=0),Math.abs(f)<s.EPSILON&&(f=0),f===0?p+a:(a!==0?(p+=a,p+=" ",f<0?(f=-f,p+="-"):p+="+",p+=" "):f<0&&(f=-f,p+="-"),f!==1&&(p+=f),p+"i"))},toVector:function(){return[this.re,this.im]},valueOf:function(){return this.im===0?this.re:null},isNaN:function(){return isNaN(this.re)||isNaN(this.im)},isZero:function(){return this.im===0&&this.re===0},isFinite:function(){return isFinite(this.re)&&isFinite(this.im)},isInfinite:function(){return!(this.isNaN()||this.isFinite())}},s.ZERO=new s(0,0),s.ONE=new s(1,0),s.I=new s(0,1),s.PI=new s(Math.PI,0),s.E=new s(Math.E,0),s.INFINITY=new s(1/0,1/0),s.NAN=new s(NaN,NaN),s.EPSILON=1e-15,Object.defineProperty(s,"__esModule",{value:!0}),s.default=s,s.Complex=s,t.exports=s})()})(xn);var Ot=Yr(xn.exports),ha="Complex",pa=[],va=j(ha,pa,()=>(Ot.prototype.type="Complex",Ot.prototype.isComplex=!0,Ot.prototype.toJSON=function(){return{mathjs:"Complex",re:this.re,im:this.im}},Ot.prototype.toPolar=function(){return{r:this.abs(),phi:this.arg()}},Ot.prototype.format=function(t){var e="",r=this.im,i=this.re,n=He(this.re,t),o=He(this.im,t),c=ht(t)?t:t?t.precision:null;if(c!==null){var h=Math.pow(10,-c);Math.abs(i/r)<h&&(i=0),Math.abs(r/i)<h&&(r=0)}return r===0?e=n:i===0?r===1?e="i":r===-1?e="-i":e=o+"i":r<0?r===-1?e=n+" - i":e=n+" - "+o.substring(1)+"i":r===1?e=n+" + i":e=n+" + "+o+"i",e},Ot.fromPolar=function(t){switch(arguments.length){case 1:{var e=arguments[0];if(typeof e=="object")return Ot(e);throw new TypeError("Input has to be an object with r and phi keys.")}case 2:{var r=arguments[0],i=arguments[1];if(ht(r)){if(er(i)&&i.hasBase("ANGLE")&&(i=i.toNumber("rad")),ht(i))return new Ot({r,phi:i});throw new TypeError("Phi is not a number nor an angle unit.")}else throw new TypeError("Radius r is not a number.")}default:throw new SyntaxError("Wrong number of arguments in function fromPolar")}},Ot.prototype.valueOf=Ot.prototype.toString,Ot.fromJSON=function(t){return new Ot(t)},Ot.compare=function(t,e){return t.re>e.re?1:t.re<e.re?-1:t.im>e.im?1:t.im<e.im?-1:0},Ot),{isClass:!0}),Sn={exports:{}};/**
 * @license Fraction.js v4.2.0 05/03/2022
 * https://www.xarg.org/2014/03/rational-numbers-in-javascript/
 *
 * Copyright (c) 2021, Robert Eisele (robert@xarg.org)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 **/(function(t,e){(function(r){var i=2e3,n={s:1,n:0,d:1};function o(d,u){if(isNaN(d=parseInt(d,10)))throw p.InvalidParameter;return d*u}function c(d,u){if(u===0)throw p.DivisionByZero;var m=Object.create(p.prototype);m.s=d<0?-1:1,d=d<0?-d:d;var g=f(d,u);return m.n=d/g,m.d=u/g,m}function h(d){for(var u={},m=d,g=2,M=4;M<=m;){for(;m%g===0;)m/=g,u[g]=(u[g]||0)+1;M+=1+2*g++}return m!==d?m>1&&(u[m]=(u[m]||0)+1):u[d]=(u[d]||0)+1,u}var l=function(d,u){var m=0,g=1,M=1,w=0,N=0,_=0,y=1,E=1,b=0,S=1,$=1,O=1,I=1e7,R;if(d!=null)if(u!==void 0){if(m=d,g=u,M=m*g,m%1!==0||g%1!==0)throw p.NonIntegerParameter}else switch(typeof d){case"object":{if("d"in d&&"n"in d)m=d.n,g=d.d,"s"in d&&(m*=d.s);else if(0 in d)m=d[0],1 in d&&(g=d[1]);else throw p.InvalidParameter;M=m*g;break}case"number":{if(d<0&&(M=d,d=-d),d%1===0)m=d;else if(d>0){for(d>=1&&(E=Math.pow(10,Math.floor(1+Math.log(d)/Math.LN10)),d/=E);S<=I&&O<=I;)if(R=(b+$)/(S+O),d===R){S+O<=I?(m=b+$,g=S+O):O>S?(m=$,g=O):(m=b,g=S);break}else d>R?(b+=$,S+=O):($+=b,O+=S),S>I?(m=$,g=O):(m=b,g=S);m*=E}else(isNaN(d)||isNaN(u))&&(g=m=NaN);break}case"string":{if(S=d.match(/\d+|./g),S===null)throw p.InvalidParameter;if(S[b]==="-"?(M=-1,b++):S[b]==="+"&&b++,S.length===b+1?N=o(S[b++],M):S[b+1]==="."||S[b]==="."?(S[b]!=="."&&(w=o(S[b++],M)),b++,(b+1===S.length||S[b+1]==="("&&S[b+3]===")"||S[b+1]==="'"&&S[b+3]==="'")&&(N=o(S[b],M),y=Math.pow(10,S[b].length),b++),(S[b]==="("&&S[b+2]===")"||S[b]==="'"&&S[b+2]==="'")&&(_=o(S[b+1],M),E=Math.pow(10,S[b+1].length)-1,b+=3)):S[b+1]==="/"||S[b+1]===":"?(N=o(S[b],M),y=o(S[b+2],1),b+=3):S[b+3]==="/"&&S[b+1]===" "&&(w=o(S[b],M),N=o(S[b+2],M),y=o(S[b+4],1),b+=5),S.length<=b){g=y*E,M=m=_+g*w+E*N;break}}default:throw p.InvalidParameter}if(g===0)throw p.DivisionByZero;n.s=M<0?-1:1,n.n=Math.abs(m),n.d=Math.abs(g)};function v(d,u,m){for(var g=1;u>0;d=d*d%m,u>>=1)u&1&&(g=g*d%m);return g}function s(d,u){for(;u%2===0;u/=2);for(;u%5===0;u/=5);if(u===1)return 0;for(var m=10%u,g=1;m!==1;g++)if(m=m*10%u,g>i)return 0;return g}function a(d,u,m){for(var g=1,M=v(10,m,u),w=0;w<300;w++){if(g===M)return w;g=g*10%u,M=M*10%u}return 0}function f(d,u){if(!d)return u;if(!u)return d;for(;;){if(d%=u,!d)return u;if(u%=d,!u)return d}}function p(d,u){if(l(d,u),this instanceof p)d=f(n.d,n.n),this.s=n.s,this.n=n.n/d,this.d=n.d/d;else return c(n.s*n.n,n.d)}p.DivisionByZero=new Error("Division by Zero"),p.InvalidParameter=new Error("Invalid argument"),p.NonIntegerParameter=new Error("Parameters must be integer"),p.prototype={s:1,n:0,d:1,abs:function(){return c(this.n,this.d)},neg:function(){return c(-this.s*this.n,this.d)},add:function(d,u){return l(d,u),c(this.s*this.n*n.d+n.s*this.d*n.n,this.d*n.d)},sub:function(d,u){return l(d,u),c(this.s*this.n*n.d-n.s*this.d*n.n,this.d*n.d)},mul:function(d,u){return l(d,u),c(this.s*n.s*this.n*n.n,this.d*n.d)},div:function(d,u){return l(d,u),c(this.s*n.s*this.n*n.d,this.d*n.n)},clone:function(){return c(this.s*this.n,this.d)},mod:function(d,u){if(isNaN(this.n)||isNaN(this.d))return new p(NaN);if(d===void 0)return c(this.s*this.n%this.d,1);if(l(d,u),n.n===0&&this.d===0)throw p.DivisionByZero;return c(this.s*(n.d*this.n)%(n.n*this.d),n.d*this.d)},gcd:function(d,u){return l(d,u),c(f(n.n,this.n)*f(n.d,this.d),n.d*this.d)},lcm:function(d,u){return l(d,u),n.n===0&&this.n===0?c(0,1):c(n.n*this.n,f(n.n,this.n)*f(n.d,this.d))},ceil:function(d){return d=Math.pow(10,d||0),isNaN(this.n)||isNaN(this.d)?new p(NaN):c(Math.ceil(d*this.s*this.n/this.d),d)},floor:function(d){return d=Math.pow(10,d||0),isNaN(this.n)||isNaN(this.d)?new p(NaN):c(Math.floor(d*this.s*this.n/this.d),d)},round:function(d){return d=Math.pow(10,d||0),isNaN(this.n)||isNaN(this.d)?new p(NaN):c(Math.round(d*this.s*this.n/this.d),d)},inverse:function(){return c(this.s*this.d,this.n)},pow:function(d,u){if(l(d,u),n.d===1)return n.s<0?c(Math.pow(this.s*this.d,n.n),Math.pow(this.n,n.n)):c(Math.pow(this.s*this.n,n.n),Math.pow(this.d,n.n));if(this.s<0)return null;var m=h(this.n),g=h(this.d),M=1,w=1;for(var N in m)if(N!=="1"){if(N==="0"){M=0;break}if(m[N]*=n.n,m[N]%n.d===0)m[N]/=n.d;else return null;M*=Math.pow(N,m[N])}for(var N in g)if(N!=="1"){if(g[N]*=n.n,g[N]%n.d===0)g[N]/=n.d;else return null;w*=Math.pow(N,g[N])}return n.s<0?c(w,M):c(M,w)},equals:function(d,u){return l(d,u),this.s*this.n*n.d===n.s*n.n*this.d},compare:function(d,u){l(d,u);var m=this.s*this.n*n.d-n.s*n.n*this.d;return(0<m)-(m<0)},simplify:function(d){if(isNaN(this.n)||isNaN(this.d))return this;d=d||.001;for(var u=this.abs(),m=u.toContinued(),g=1;g<m.length;g++){for(var M=c(m[g-1],1),w=g-2;w>=0;w--)M=M.inverse().add(m[w]);if(M.sub(u).abs().valueOf()<d)return M.mul(this.s)}return this},divisible:function(d,u){return l(d,u),!(!(n.n*this.d)||this.n*n.d%(n.n*this.d))},valueOf:function(){return this.s*this.n/this.d},toFraction:function(d){var u,m="",g=this.n,M=this.d;return this.s<0&&(m+="-"),M===1?m+=g:(d&&(u=Math.floor(g/M))>0&&(m+=u,m+=" ",g%=M),m+=g,m+="/",m+=M),m},toLatex:function(d){var u,m="",g=this.n,M=this.d;return this.s<0&&(m+="-"),M===1?m+=g:(d&&(u=Math.floor(g/M))>0&&(m+=u,g%=M),m+="\\frac{",m+=g,m+="}{",m+=M,m+="}"),m},toContinued:function(){var d,u=this.n,m=this.d,g=[];if(isNaN(u)||isNaN(m))return g;do g.push(Math.floor(u/m)),d=u%m,u=m,m=d;while(u!==1);return g},toString:function(d){var u=this.n,m=this.d;if(isNaN(u)||isNaN(m))return"NaN";d=d||15;var g=s(u,m),M=a(u,m,g),w=this.s<0?"-":"";if(w+=u/m|0,u%=m,u*=10,u&&(w+="."),g){for(var N=M;N--;)w+=u/m|0,u%=m,u*=10;w+="(";for(var N=g;N--;)w+=u/m|0,u%=m,u*=10;w+=")"}else for(var N=d;u&&N--;)w+=u/m|0,u%=m,u*=10;return w}},Object.defineProperty(p,"__esModule",{value:!0}),p.default=p,p.Fraction=p,t.exports=p})()})(Sn);var ie=Yr(Sn.exports),da="Fraction",ma=[],ga=j(da,ma,()=>(ie.prototype.type="Fraction",ie.prototype.isFraction=!0,ie.prototype.toJSON=function(){return{mathjs:"Fraction",n:this.s*this.n,d:this.d}},ie.fromJSON=function(t){return new ie(t)},ie),{isClass:!0}),wa="Matrix",ya=[],_a=j(wa,ya,()=>{function t(){if(!(this instanceof t))throw new SyntaxError("Constructor must be called with the new operator")}return t.prototype.type="Matrix",t.prototype.isMatrix=!0,t.prototype.storage=function(){throw new Error("Cannot invoke storage on a Matrix interface")},t.prototype.datatype=function(){throw new Error("Cannot invoke datatype on a Matrix interface")},t.prototype.create=function(e,r){throw new Error("Cannot invoke create on a Matrix interface")},t.prototype.subset=function(e,r,i){throw new Error("Cannot invoke subset on a Matrix interface")},t.prototype.get=function(e){throw new Error("Cannot invoke get on a Matrix interface")},t.prototype.set=function(e,r,i){throw new Error("Cannot invoke set on a Matrix interface")},t.prototype.resize=function(e,r){throw new Error("Cannot invoke resize on a Matrix interface")},t.prototype.reshape=function(e,r){throw new Error("Cannot invoke reshape on a Matrix interface")},t.prototype.clone=function(){throw new Error("Cannot invoke clone on a Matrix interface")},t.prototype.size=function(){throw new Error("Cannot invoke size on a Matrix interface")},t.prototype.map=function(e,r){throw new Error("Cannot invoke map on a Matrix interface")},t.prototype.forEach=function(e){throw new Error("Cannot invoke forEach on a Matrix interface")},t.prototype[Symbol.iterator]=function(){throw new Error("Cannot iterate a Matrix interface")},t.prototype.toArray=function(){throw new Error("Cannot invoke toArray on a Matrix interface")},t.prototype.valueOf=function(){throw new Error("Cannot invoke valueOf on a Matrix interface")},t.prototype.format=function(e){throw new Error("Cannot invoke format on a Matrix interface")},t.prototype.toString=function(){throw new Error("Cannot invoke toString on a Matrix interface")},t},{isClass:!0}),ba="DenseMatrix",Ma=["Matrix"],Na=j(ba,Ma,t=>{var{Matrix:e}=t;function r(s,a){if(!(this instanceof r))throw new SyntaxError("Constructor must be called with the new operator");if(a&&!Zt(a))throw new Error("Invalid datatype: "+a);if(bt(s))s.type==="DenseMatrix"?(this._data=dt(s._data),this._size=dt(s._size),this._datatype=a||s._datatype):(this._data=s.toArray(),this._size=s.size(),this._datatype=a||s._datatype);else if(s&&ut(s.data)&&ut(s.size))this._data=s.data,this._size=s.size,lr(this._data,this._size),this._datatype=a||s.datatype;else if(ut(s))this._data=v(s),this._size=Gt(this._data),lr(this._data,this._size),this._datatype=a;else{if(s)throw new TypeError("Unsupported type of data ("+Xt(s)+")");this._data=[],this._size=[0],this._datatype=a}}r.prototype=new e,r.prototype.createDenseMatrix=function(s,a){return new r(s,a)},r.prototype.type="DenseMatrix",r.prototype.isDenseMatrix=!0,r.prototype.getDataType=function(){return _e(this._data,Xt)},r.prototype.storage=function(){return"dense"},r.prototype.datatype=function(){return this._datatype},r.prototype.create=function(s,a){return new r(s,a)},r.prototype.subset=function(s,a,f){switch(arguments.length){case 1:return i(this,s);case 2:case 3:return o(this,s,a,f);default:throw new SyntaxError("Wrong number of arguments")}},r.prototype.get=function(s){if(!ut(s))throw new TypeError("Array expected");if(s.length!==this._size.length)throw new et(s.length,this._size.length);for(var a=0;a<s.length;a++)ct(s[a],this._size[a]);for(var f=this._data,p=0,d=s.length;p<d;p++){var u=s[p];ct(u,f.length),f=f[u]}return f},r.prototype.set=function(s,a,f){if(!ut(s))throw new TypeError("Array expected");if(s.length<this._size.length)throw new et(s.length,this._size.length,"<");var p,d,u,m=s.map(function(M){return M+1});l(this,m,f);var g=this._data;for(p=0,d=s.length-1;p<d;p++)u=s[p],ct(u,g.length),g=g[u];return u=s[s.length-1],ct(u,g.length),g[u]=a,this};function i(s,a){if(!Se(a))throw new TypeError("Invalid index");var f=a.isScalar();if(f)return s.get(a.min());var p=a.size();if(p.length!==s._size.length)throw new et(p.length,s._size.length);for(var d=a.min(),u=a.max(),m=0,g=s._size.length;m<g;m++)ct(d[m],s._size[m]),ct(u[m],s._size[m]);return new r(n(s._data,a,p.length,0),s._datatype)}function n(s,a,f,p){var d=p===f-1,u=a.dimension(p);return d?u.map(function(m){return ct(m,s.length),s[m]}).valueOf():u.map(function(m){ct(m,s.length);var g=s[m];return n(g,a,f,p+1)}).valueOf()}function o(s,a,f,p){if(!a||a.isIndex!==!0)throw new TypeError("Invalid index");var d=a.size(),u=a.isScalar(),m;if(bt(f)?(m=f.size(),f=f.valueOf()):m=Gt(f),u){if(m.length!==0)throw new TypeError("Scalar expected");s.set(a.min(),f,p)}else{if(d.length<s._size.length)throw new et(d.length,s._size.length,"<");if(m.length<d.length){for(var g=0,M=0;d[g]===1&&m[g]===1;)g++;for(;d[g]===1;)M++,g++;f=un(f,d.length,M,m)}if(!we(d,m))throw new et(d,m,">");var w=a.max().map(function(y){return y+1});l(s,w,p);var N=d.length,_=0;c(s._data,a,f,N,_)}return s}function c(s,a,f,p,d){var u=d===p-1,m=a.dimension(d);u?m.forEach(function(g,M){ct(g),s[g]=f[M[0]]}):m.forEach(function(g,M){ct(g),c(s[g],a,f[M[0]],p,d+1)})}r.prototype.resize=function(s,a,f){if(!Gr(s))throw new TypeError("Array or Matrix expected");var p=s.valueOf().map(u=>Array.isArray(u)&&u.length===1?u[0]:u),d=f?this.clone():this;return h(d,p,a)};function h(s,a,f){if(a.length===0){for(var p=s._data;ut(p);)p=p[0];return p}return s._size=a.slice(0),s._data=Ye(s._data,s._size,f),s}r.prototype.reshape=function(s,a){var f=a?this.clone():this;f._data=ji(f._data,s);var p=f._size.reduce((d,u)=>d*u);return f._size=rr(s,p),f};function l(s,a,f){for(var p=s._size.slice(0),d=!1;p.length<a.length;)p.push(0),d=!0;for(var u=0,m=a.length;u<m;u++)a[u]>p[u]&&(p[u]=a[u],d=!0);d&&h(s,p,f)}r.prototype.clone=function(){var s=new r({data:dt(this._data),size:dt(this._size),datatype:this._datatype});return s},r.prototype.size=function(){return this._size.slice(0)},r.prototype.map=function(s){var a=this,f=function u(m,g){return ut(m)?m.map(function(M,w){return u(M,g.concat(w))}):s(m,g,a)},p=f(this._data,[]),d=this._datatype!==void 0?_e(p,Xt):void 0;return new r(p,d)},r.prototype.forEach=function(s){var a=this,f=function p(d,u){ut(d)?d.forEach(function(m,g){p(m,u.concat(g))}):s(d,u,a)};f(this._data,[])},r.prototype[Symbol.iterator]=function*(){var s=function*a(f,p){if(ut(f))for(var d=0;d<f.length;d++)yield*a(f[d],p.concat(d));else yield{value:f,index:p}};yield*s(this._data,[])},r.prototype.rows=function(){var s=[],a=this.size();if(a.length!==2)throw new TypeError("Rows can only be returned for a 2D matrix.");var f=this._data;for(var p of f)s.push(new r([p],this._datatype));return s},r.prototype.columns=function(){var s=this,a=[],f=this.size();if(f.length!==2)throw new TypeError("Rows can only be returned for a 2D matrix.");for(var p=this._data,d=function(g){var M=p.map(w=>[w[g]]);a.push(new r(M,s._datatype))},u=0;u<f[1];u++)d(u);return a},r.prototype.toArray=function(){return dt(this._data)},r.prototype.valueOf=function(){return this._data},r.prototype.format=function(s){return wt(this._data,s)},r.prototype.toString=function(){return wt(this._data)},r.prototype.toJSON=function(){return{mathjs:"DenseMatrix",data:this._data,size:this._size,datatype:this._datatype}},r.prototype.diagonal=function(s){if(s){if(At(s)&&(s=s.toNumber()),!ht(s)||!_t(s))throw new TypeError("The parameter k must be an integer number")}else s=0;for(var a=s>0?s:0,f=s<0?-s:0,p=this._size[0],d=this._size[1],u=Math.min(p-f,d-a),m=[],g=0;g<u;g++)m[g]=this._data[g+f][g+a];return new r({data:m,size:[u],datatype:this._datatype})},r.diagonal=function(s,a,f,p){if(!ut(s))throw new TypeError("Array expected, size parameter");if(s.length!==2)throw new Error("Only two dimensions matrix are supported");if(s=s.map(function(E){if(At(E)&&(E=E.toNumber()),!ht(E)||!_t(E)||E<1)throw new Error("Size values must be positive integers");return E}),f){if(At(f)&&(f=f.toNumber()),!ht(f)||!_t(f))throw new TypeError("The parameter k must be an integer number")}else f=0;var d=f>0?f:0,u=f<0?-f:0,m=s[0],g=s[1],M=Math.min(m-u,g-d),w;if(ut(a)){if(a.length!==M)throw new Error("Invalid value array length");w=function(b){return a[b]}}else if(bt(a)){var N=a.size();if(N.length!==1||N[0]!==M)throw new Error("Invalid matrix length");w=function(b){return a.get([b])}}else w=function(){return a};p||(p=At(w(0))?w(0).mul(0):0);var _=[];if(s.length>0){_=Ye(_,s,p);for(var y=0;y<M;y++)_[y+u][y+d]=w(y)}return new r({data:_,size:[m,g]})},r.fromJSON=function(s){return new r(s)},r.prototype.swapRows=function(s,a){if(!ht(s)||!_t(s)||!ht(a)||!_t(a))throw new Error("Row index must be positive integers");if(this._size.length!==2)throw new Error("Only two dimensional matrix is supported");return ct(s,this._size[0]),ct(a,this._size[0]),r._swapRows(s,a,this._data),this},r._swapRows=function(s,a,f){var p=f[s];f[s]=f[a],f[a]=p};function v(s){for(var a=0,f=s.length;a<f;a++){var p=s[a];ut(p)?s[a]=v(p):p&&p.isMatrix===!0&&(s[a]=v(p.valueOf()))}return s}return r},{isClass:!0});function Qt(t,e,r){return t&&typeof t.map=="function"?t.map(function(i){return Qt(i,e)}):e(t)}var En="number",Cn="number, number";function An(t){return Math.abs(t)}An.signature=En;function Dn(t,e){return t+e}Dn.signature=Cn;function $n(t,e){return t*e}$n.signature=Cn;function On(t){return-t}On.signature=En;var xa="number";function Pn(t){return t===0}Pn.signature=xa;var dr="isZero",Sa=["typed"],Ea=j(dr,Sa,t=>{var{typed:e}=t;return e(dr,{number:Pn,BigNumber:function(i){return i.isZero()},Complex:function(i){return i.re===0&&i.im===0},Fraction:function(i){return i.d===1&&i.n===0},Unit:function(i){return this(i.value)},"Array | Matrix":function(i){return Qt(i,this)}})});function Ca(t,e,r){if(r==null)return t.eq(e);if(t.eq(e))return!0;if(t.isNaN()||e.isNaN())return!1;if(t.isFinite()&&e.isFinite()){var i=t.minus(e).abs();if(i.isZero())return!0;var n=t.constructor.max(t.abs(),e.abs());return i.lte(n.times(r))}return!1}function Aa(t,e,r){return ye(t.re,e.re,r)&&ye(t.im,e.im,r)}var xe="equalScalar",Da=["typed","config"],$a=j(xe,Da,t=>{var{typed:e,config:r}=t;return e(xe,{"boolean, boolean":function(n,o){return n===o},"number, number":function(n,o){return ye(n,o,r.epsilon)},"BigNumber, BigNumber":function(n,o){return n.eq(o)||Ca(n,o,r.epsilon)},"Fraction, Fraction":function(n,o){return n.equals(o)},"Complex, Complex":function(n,o){return Aa(n,o,r.epsilon)},"Unit, Unit":function(n,o){if(!n.equalBase(o))throw new Error("Cannot compare units with different base");return this(n.value,o.value)}})});j(xe,["typed","config"],t=>{var{typed:e,config:r}=t;return e(xe,{"number, number":function(n,o){return ye(n,o,r.epsilon)}})});var Oa="SparseMatrix",Pa=["typed","equalScalar","Matrix"],za=j(Oa,Pa,t=>{var{typed:e,equalScalar:r,Matrix:i}=t;function n(u,m){if(!(this instanceof n))throw new SyntaxError("Constructor must be called with the new operator");if(m&&!Zt(m))throw new Error("Invalid datatype: "+m);if(bt(u))o(this,u,m);else if(u&&ut(u.index)&&ut(u.ptr)&&ut(u.size))this._values=u.values,this._index=u.index,this._ptr=u.ptr,this._size=u.size,this._datatype=m||u.datatype;else if(ut(u))c(this,u,m);else{if(u)throw new TypeError("Unsupported type of data ("+Xt(u)+")");this._values=[],this._index=[],this._ptr=[0],this._size=[0,0],this._datatype=m}}function o(u,m,g){m.type==="SparseMatrix"?(u._values=m._values?dt(m._values):void 0,u._index=dt(m._index),u._ptr=dt(m._ptr),u._size=dt(m._size),u._datatype=g||m._datatype):c(u,m.valueOf(),g||m._datatype)}function c(u,m,g){u._values=[],u._index=[],u._ptr=[],u._datatype=g;var M=m.length,w=0,N=r,_=0;if(Zt(g)&&(N=e.find(r,[g,g])||r,_=e.convert(0,g)),M>0){var y=0;do{u._ptr.push(u._index.length);for(var E=0;E<M;E++){var b=m[E];if(ut(b)){if(y===0&&w<b.length&&(w=b.length),y<b.length){var S=b[y];N(S,_)||(u._values.push(S),u._index.push(E))}}else y===0&&w<1&&(w=1),N(b,_)||(u._values.push(b),u._index.push(E))}y++}while(y<w)}u._ptr.push(u._index.length),u._size=[M,w]}n.prototype=new i,n.prototype.createSparseMatrix=function(u,m){return new n(u,m)},n.prototype.type="SparseMatrix",n.prototype.isSparseMatrix=!0,n.prototype.getDataType=function(){return _e(this._values,Xt)},n.prototype.storage=function(){return"sparse"},n.prototype.datatype=function(){return this._datatype},n.prototype.create=function(u,m){return new n(u,m)},n.prototype.density=function(){var u=this._size[0],m=this._size[1];return u!==0&&m!==0?this._index.length/(u*m):0},n.prototype.subset=function(u,m,g){if(!this._values)throw new Error("Cannot invoke subset on a Pattern only matrix");switch(arguments.length){case 1:return h(this,u);case 2:case 3:return l(this,u,m,g);default:throw new SyntaxError("Wrong number of arguments")}};function h(u,m){if(!Se(m))throw new TypeError("Invalid index");var g=m.isScalar();if(g)return u.get(m.min());var M=m.size();if(M.length!==u._size.length)throw new et(M.length,u._size.length);var w,N,_,y,E=m.min(),b=m.max();for(w=0,N=u._size.length;w<N;w++)ct(E[w],u._size[w]),ct(b[w],u._size[w]);var S=u._values,$=u._index,O=u._ptr,I=m.dimension(0),R=m.dimension(1),F=[],B=[];I.forEach(function(H,G){B[H]=G[0],F[H]=!0});var z=S?[]:void 0,V=[],q=[];return R.forEach(function(H){for(q.push(V.length),_=O[H],y=O[H+1];_<y;_++)w=$[_],F[w]===!0&&(V.push(B[w]),z&&z.push(S[_]))}),q.push(V.length),new n({values:z,index:V,ptr:q,size:M,datatype:u._datatype})}function l(u,m,g,M){if(!m||m.isIndex!==!0)throw new TypeError("Invalid index");var w=m.size(),N=m.isScalar(),_;if(bt(g)?(_=g.size(),g=g.toArray()):_=Gt(g),N){if(_.length!==0)throw new TypeError("Scalar expected");u.set(m.min(),g,M)}else{if(w.length!==1&&w.length!==2)throw new et(w.length,u._size.length,"<");if(_.length<w.length){for(var y=0,E=0;w[y]===1&&_[y]===1;)y++;for(;w[y]===1;)E++,y++;g=un(g,w.length,E,_)}if(!we(w,_))throw new et(w,_,">");if(w.length===1){var b=m.dimension(0);b.forEach(function(O,I){ct(O),u.set([O,0],g[I[0]],M)})}else{var S=m.dimension(0),$=m.dimension(1);S.forEach(function(O,I){ct(O),$.forEach(function(R,F){ct(R),u.set([O,R],g[I[0]][F[0]],M)})})}}return u}n.prototype.get=function(u){if(!ut(u))throw new TypeError("Array expected");if(u.length!==this._size.length)throw new et(u.length,this._size.length);if(!this._values)throw new Error("Cannot invoke get on a Pattern only matrix");var m=u[0],g=u[1];ct(m,this._size[0]),ct(g,this._size[1]);var M=v(m,this._ptr[g],this._ptr[g+1],this._index);return M<this._ptr[g+1]&&this._index[M]===m?this._values[M]:0},n.prototype.set=function(u,m,g){if(!ut(u))throw new TypeError("Array expected");if(u.length!==this._size.length)throw new et(u.length,this._size.length);if(!this._values)throw new Error("Cannot invoke set on a Pattern only matrix");var M=u[0],w=u[1],N=this._size[0],_=this._size[1],y=r,E=0;Zt(this._datatype)&&(y=e.find(r,[this._datatype,this._datatype])||r,E=e.convert(0,this._datatype)),(M>N-1||w>_-1)&&(f(this,Math.max(M+1,N),Math.max(w+1,_),g),N=this._size[0],_=this._size[1]),ct(M,N),ct(w,_);var b=v(M,this._ptr[w],this._ptr[w+1],this._index);return b<this._ptr[w+1]&&this._index[b]===M?y(m,E)?s(b,w,this._values,this._index,this._ptr):this._values[b]=m:a(b,M,w,m,this._values,this._index,this._ptr),this};function v(u,m,g,M){if(g-m===0)return g;for(var w=m;w<g;w++)if(M[w]===u)return w;return m}function s(u,m,g,M,w){g.splice(u,1),M.splice(u,1);for(var N=m+1;N<w.length;N++)w[N]--}function a(u,m,g,M,w,N,_){w.splice(u,0,M),N.splice(u,0,m);for(var y=g+1;y<_.length;y++)_[y]++}n.prototype.resize=function(u,m,g){if(!Gr(u))throw new TypeError("Array or Matrix expected");var M=u.valueOf().map(N=>Array.isArray(N)&&N.length===1?N[0]:N);if(M.length!==2)throw new Error("Only two dimensions matrix are supported");M.forEach(function(N){if(!ht(N)||!_t(N)||N<0)throw new TypeError("Invalid size, must contain positive integers (size: "+wt(M)+")")});var w=g?this.clone():this;return f(w,M[0],M[1],m)};function f(u,m,g,M){var w=M||0,N=r,_=0;Zt(u._datatype)&&(N=e.find(r,[u._datatype,u._datatype])||r,_=e.convert(0,u._datatype),w=e.convert(w,u._datatype));var y=!N(w,_),E=u._size[0],b=u._size[1],S,$,O;if(g>b){for($=b;$<g;$++)if(u._ptr[$]=u._values.length,y)for(S=0;S<E;S++)u._values.push(w),u._index.push(S);u._ptr[g]=u._values.length}else g<b&&(u._ptr.splice(g+1,b-g),u._values.splice(u._ptr[g],u._values.length),u._index.splice(u._ptr[g],u._index.length));if(b=g,m>E){if(y){var I=0;for($=0;$<b;$++){u._ptr[$]=u._ptr[$]+I,O=u._ptr[$+1]+I;var R=0;for(S=E;S<m;S++,R++)u._values.splice(O+R,0,w),u._index.splice(O+R,0,S),I++}u._ptr[b]=u._values.length}}else if(m<E){var F=0;for($=0;$<b;$++){u._ptr[$]=u._ptr[$]-F;var B=u._ptr[$],z=u._ptr[$+1]-F;for(O=B;O<z;O++)S=u._index[O],S>m-1&&(u._values.splice(O,1),u._index.splice(O,1),F++)}u._ptr[$]=u._values.length}return u._size[0]=m,u._size[1]=g,u}n.prototype.reshape=function(u,m){if(!ut(u))throw new TypeError("Array expected");if(u.length!==2)throw new Error("Sparse matrices can only be reshaped in two dimensions");u.forEach(function(H){if(!ht(H)||!_t(H)||H<=-2||H===0)throw new TypeError("Invalid size, must contain positive integers or -1 (size: "+wt(u)+")")});var g=this._size[0]*this._size[1];u=rr(u,g);var M=u[0]*u[1];if(g!==M)throw new Error("Reshaping sparse matrix will result in the wrong number of elements");var w=m?this.clone():this;if(this._size[0]===u[0]&&this._size[1]===u[1])return w;for(var N=[],_=0;_<w._ptr.length;_++)for(var y=0;y<w._ptr[_+1]-w._ptr[_];y++)N.push(_);for(var E=w._values.slice(),b=w._index.slice(),S=0;S<w._index.length;S++){var $=b[S],O=N[S],I=$*w._size[1]+O;N[S]=I%u[1],b[S]=Math.floor(I/u[1])}w._values.length=0,w._index.length=0,w._ptr.length=u[1]+1,w._size=u.slice();for(var R=0;R<w._ptr.length;R++)w._ptr[R]=0;for(var F=0;F<E.length;F++){var B=b[F],z=N[F],V=E[F],q=v(B,w._ptr[z],w._ptr[z+1],w._index);a(q,B,z,V,w._values,w._index,w._ptr)}return w},n.prototype.clone=function(){var u=new n({values:this._values?dt(this._values):void 0,index:dt(this._index),ptr:dt(this._ptr),size:dt(this._size),datatype:this._datatype});return u},n.prototype.size=function(){return this._size.slice(0)},n.prototype.map=function(u,m){if(!this._values)throw new Error("Cannot invoke map on a Pattern only matrix");var g=this,M=this._size[0],w=this._size[1],N=function(y,E,b){return u(y,[E,b],g)};return p(this,0,M-1,0,w-1,N,m)};function p(u,m,g,M,w,N,_){var y=[],E=[],b=[],S=r,$=0;Zt(u._datatype)&&(S=e.find(r,[u._datatype,u._datatype])||r,$=e.convert(0,u._datatype));for(var O=function(J,pt,vt){J=N(J,pt,vt),S(J,$)||(y.push(J),E.push(pt))},I=M;I<=w;I++){b.push(y.length);var R=u._ptr[I],F=u._ptr[I+1];if(_)for(var B=R;B<F;B++){var z=u._index[B];z>=m&&z<=g&&O(u._values[B],z-m,I-M)}else{for(var V={},q=R;q<F;q++){var H=u._index[q];V[H]=u._values[q]}for(var G=m;G<=g;G++){var Q=G in V?V[G]:0;O(Q,G-m,I-M)}}}return b.push(y.length),new n({values:y,index:E,ptr:b,size:[g-m+1,w-M+1]})}n.prototype.forEach=function(u,m){if(!this._values)throw new Error("Cannot invoke forEach on a Pattern only matrix");for(var g=this,M=this._size[0],w=this._size[1],N=0;N<w;N++){var _=this._ptr[N],y=this._ptr[N+1];if(m)for(var E=_;E<y;E++){var b=this._index[E];u(this._values[E],[b,N],g)}else{for(var S={},$=_;$<y;$++){var O=this._index[$];S[O]=this._values[$]}for(var I=0;I<M;I++){var R=I in S?S[I]:0;u(R,[I,N],g)}}}},n.prototype[Symbol.iterator]=function*(){if(!this._values)throw new Error("Cannot iterate a Pattern only matrix");for(var u=this._size[1],m=0;m<u;m++)for(var g=this._ptr[m],M=this._ptr[m+1],w=g;w<M;w++){var N=this._index[w];yield{value:this._values[w],index:[N,m]}}},n.prototype.toArray=function(){return d(this._values,this._index,this._ptr,this._size,!0)},n.prototype.valueOf=function(){return d(this._values,this._index,this._ptr,this._size,!1)};function d(u,m,g,M,w){var N=M[0],_=M[1],y=[],E,b;for(E=0;E<N;E++)for(y[E]=[],b=0;b<_;b++)y[E][b]=0;for(b=0;b<_;b++)for(var S=g[b],$=g[b+1],O=S;O<$;O++)E=m[O],y[E][b]=u?w?dt(u[O]):u[O]:1;return y}return n.prototype.format=function(u){for(var m=this._size[0],g=this._size[1],M=this.density(),w="Sparse Matrix ["+wt(m,u)+" x "+wt(g,u)+"] density: "+wt(M,u)+`
`,N=0;N<g;N++)for(var _=this._ptr[N],y=this._ptr[N+1],E=_;E<y;E++){var b=this._index[E];w+=`
    (`+wt(b,u)+", "+wt(N,u)+") ==> "+(this._values?wt(this._values[E],u):"X")}return w},n.prototype.toString=function(){return wt(this.toArray())},n.prototype.toJSON=function(){return{mathjs:"SparseMatrix",values:this._values,index:this._index,ptr:this._ptr,size:this._size,datatype:this._datatype}},n.prototype.diagonal=function(u){if(u){if(At(u)&&(u=u.toNumber()),!ht(u)||!_t(u))throw new TypeError("The parameter k must be an integer number")}else u=0;var m=u>0?u:0,g=u<0?-u:0,M=this._size[0],w=this._size[1],N=Math.min(M-g,w-m),_=[],y=[],E=[];E[0]=0;for(var b=m;b<w&&_.length<N;b++)for(var S=this._ptr[b],$=this._ptr[b+1],O=S;O<$;O++){var I=this._index[O];if(I===b-m+g){_.push(this._values[O]),y[_.length-1]=I-g;break}}return E.push(_.length),new n({values:_,index:y,ptr:E,size:[N,1]})},n.fromJSON=function(u){return new n(u)},n.diagonal=function(u,m,g,M,w){if(!ut(u))throw new TypeError("Array expected, size parameter");if(u.length!==2)throw new Error("Only two dimensions matrix are supported");if(u=u.map(function(H){if(At(H)&&(H=H.toNumber()),!ht(H)||!_t(H)||H<1)throw new Error("Size values must be positive integers");return H}),g){if(At(g)&&(g=g.toNumber()),!ht(g)||!_t(g))throw new TypeError("The parameter k must be an integer number")}else g=0;var N=r,_=0;Zt(w)&&(N=e.find(r,[w,w])||r,_=e.convert(0,w));var y=g>0?g:0,E=g<0?-g:0,b=u[0],S=u[1],$=Math.min(b-E,S-y),O;if(ut(m)){if(m.length!==$)throw new Error("Invalid value array length");O=function(G){return m[G]}}else if(bt(m)){var I=m.size();if(I.length!==1||I[0]!==$)throw new Error("Invalid matrix length");O=function(G){return m.get([G])}}else O=function(){return m};for(var R=[],F=[],B=[],z=0;z<S;z++){B.push(R.length);var V=z-y;if(V>=0&&V<$){var q=O(V);N(q,_)||(F.push(V+E),R.push(q))}}return B.push(R.length),new n({values:R,index:F,ptr:B,size:[b,S]})},n.prototype.swapRows=function(u,m){if(!ht(u)||!_t(u)||!ht(m)||!_t(m))throw new Error("Row index must be positive integers");if(this._size.length!==2)throw new Error("Only two dimensional matrix is supported");return ct(u,this._size[0]),ct(m,this._size[0]),n._swapRows(u,m,this._size[1],this._values,this._index,this._ptr),this},n._forEachRow=function(u,m,g,M,w){for(var N=M[u],_=M[u+1],y=N;y<_;y++)w(g[y],m[y])},n._swapRows=function(u,m,g,M,w,N){for(var _=0;_<g;_++){var y=N[_],E=N[_+1],b=v(u,y,E,w),S=v(m,y,E,w);if(b<E&&S<E&&w[b]===u&&w[S]===m){if(M){var $=M[b];M[b]=M[S],M[S]=$}continue}if(b<E&&w[b]===u&&(S>=E||w[S]!==m)){var O=M?M[b]:void 0;w.splice(S,0,m),M&&M.splice(S,0,O),w.splice(S<=b?b+1:b,1),M&&M.splice(S<=b?b+1:b,1);continue}if(S<E&&w[S]===m&&(b>=E||w[b]!==u)){var I=M?M[S]:void 0;w.splice(b,0,u),M&&M.splice(b,0,I),w.splice(b<=S?S+1:S,1),M&&M.splice(b<=S?S+1:S,1)}}},n},{isClass:!0}),Ia="number",Fa=["typed"];function Ba(t){var e=t.match(/(0[box])([0-9a-fA-F]*)\.([0-9a-fA-F]*)/);if(e){var r={"0b":2,"0o":8,"0x":16}[e[1]],i=e[2],n=e[3];return{input:t,radix:r,integerPart:i,fractionalPart:n}}else return null}function Ta(t){for(var e=parseInt(t.integerPart,t.radix),r=0,i=0;i<t.fractionalPart.length;i++){var n=parseInt(t.fractionalPart[i],t.radix);r+=n/Math.pow(t.radix,i+1)}var o=e+r;if(isNaN(o))throw new SyntaxError('String "'+t.input+'" is no valid number');return o}var La=j(Ia,Fa,t=>{var{typed:e}=t,r=e("number",{"":function(){return 0},number:function(n){return n},string:function(n){if(n==="NaN")return NaN;var o=Ba(n);if(o)return Ta(o);var c=0,h=n.match(/(0[box][0-9a-fA-F]*)i([0-9]*)/);h&&(c=Number(h[2]),n=h[1]);var l=Number(n);if(isNaN(l))throw new SyntaxError('String "'+n+'" is no valid number');if(h){if(l>2**c-1)throw new SyntaxError('String "'.concat(n,'" is out of range'));l>=2**(c-1)&&(l=l-2**c)}return l},BigNumber:function(n){return n.toNumber()},Fraction:function(n){return n.valueOf()},Unit:function(n){throw new Error("Second argument with valueless unit expected")},null:function(n){return 0},"Unit, string | Unit":function(n,o){return n.toNumber(o)},"Array | Matrix":function(n){return Qt(n,this)}});return r.fromJSON=function(i){return parseFloat(i.value)},r}),Ra="bignumber",qa=["typed","BigNumber"],Ua=j(Ra,qa,t=>{var{typed:e,BigNumber:r}=t;return e("bignumber",{"":function(){return new r(0)},number:function(n){return new r(n+"")},string:function(n){var o=n.match(/(0[box][0-9a-fA-F]*)i([0-9]*)/);if(o){var c=o[2],h=r(o[1]),l=new r(2).pow(Number(c));if(h.gt(l.sub(1)))throw new SyntaxError('String "'.concat(n,'" is out of range'));var v=new r(2).pow(Number(c)-1);return h.gte(v)?h.sub(l):h}return new r(n)},BigNumber:function(n){return n},Fraction:function(n){return new r(n.n).div(n.d).times(n.s)},null:function(n){return new r(0)},"Array | Matrix":function(n){return Qt(n,this)}})}),Za="fraction",Va=["typed","Fraction"],Ha=j(Za,Va,t=>{var{typed:e,Fraction:r}=t;return e("fraction",{number:function(n){if(!isFinite(n)||isNaN(n))throw new Error(n+" cannot be represented as a fraction");return new r(n)},string:function(n){return new r(n)},"number, number":function(n,o){return new r(n,o)},null:function(n){return new r(0)},BigNumber:function(n){return new r(n.toString())},Fraction:function(n){return n},Object:function(n){return new r(n)},"Array | Matrix":function(n){return Qt(n,this)}})}),mr="matrix",Ya=["typed","Matrix","DenseMatrix","SparseMatrix"],ka=j(mr,Ya,t=>{var{typed:e,Matrix:r,DenseMatrix:i,SparseMatrix:n}=t;return e(mr,{"":function(){return o([])},string:function(h){return o([],h)},"string, string":function(h,l){return o([],h,l)},Array:function(h){return o(h)},Matrix:function(h){return o(h,h.storage())},"Array | Matrix, string":o,"Array | Matrix, string, string":o});function o(c,h,l){if(h==="dense"||h==="default"||h===void 0)return new i(c,l);if(h==="sparse")return new n(c,l);throw new TypeError("Unknown matrix type "+JSON.stringify(h)+".")}}),gr="unaryMinus",Wa=["typed"],Xa=j(gr,Wa,t=>{var{typed:e}=t;return e(gr,{number:On,Complex:function(i){return i.neg()},BigNumber:function(i){return i.neg()},Fraction:function(i){return i.neg()},Unit:function(i){var n=i.clone();return n.value=this(i.value),n},"Array | Matrix":function(i){return Qt(i,this)}})}),wr="abs",Ga=["typed"],Ka=j(wr,Ga,t=>{var{typed:e}=t;return e(wr,{number:An,Complex:function(i){return i.abs()},BigNumber:function(i){return i.abs()},Fraction:function(i){return i.abs()},"Array | Matrix":function(i){return Qt(i,this)},Unit:function(i){return i.abs()}})}),yr="addScalar",Ja=["typed"],ja=j(yr,Ja,t=>{var{typed:e}=t;return e(yr,{"number, number":Dn,"Complex, Complex":function(i,n){return i.add(n)},"BigNumber, BigNumber":function(i,n){return i.plus(n)},"Fraction, Fraction":function(i,n){return i.add(n)},"Unit, Unit":function(i,n){if(i.value===null||i.value===void 0)throw new Error("Parameter x contains a unit with undefined value");if(n.value===null||n.value===void 0)throw new Error("Parameter y contains a unit with undefined value");if(!i.equalBase(n))throw new Error("Units do not match");var o=i.clone();return o.value=this(o.value,n.value),o.fixPrefix=!1,o}})}),Qa="algorithm11",ts=["typed","equalScalar"],zn=j(Qa,ts,t=>{var{typed:e,equalScalar:r}=t;return function(n,o,c,h){var l=n._values,v=n._index,s=n._ptr,a=n._size,f=n._datatype;if(!l)throw new Error("Cannot perform operation on Pattern Sparse Matrix and Scalar value");var p=a[0],d=a[1],u,m=r,g=0,M=c;typeof f=="string"&&(u=f,m=e.find(r,[u,u]),g=e.convert(0,u),o=e.convert(o,u),M=e.find(c,[u,u]));for(var w=[],N=[],_=[],y=0;y<d;y++){_[y]=N.length;for(var E=s[y],b=s[y+1],S=E;S<b;S++){var $=v[S],O=h?M(o,l[S]):M(l[S],o);m(O,g)||(N.push($),w.push(O))}}return _[d]=N.length,n.createSparseMatrix({values:w,index:N,ptr:_,size:[p,d],datatype:u})}}),es="algorithm14",rs=["typed"],ir=j(es,rs,t=>{var{typed:e}=t;return function(n,o,c,h){var l=n._data,v=n._size,s=n._datatype,a,f=c;typeof s=="string"&&(a=s,o=e.convert(o,a),f=e.find(c,[a,a]));var p=v.length>0?r(f,0,v,v[0],l,o,h):[];return n.createDenseMatrix({data:p,size:dt(v),datatype:a})};function r(i,n,o,c,h,l,v){var s=[];if(n===o.length-1)for(var a=0;a<c;a++)s[a]=v?i(l,h[a]):i(h[a],l);else for(var f=0;f<c;f++)s[f]=r(i,n+1,o,o[n+1],h[f],l,v);return s}}),ns="algorithm01",is=["typed"],os=j(ns,is,t=>{var{typed:e}=t;return function(i,n,o,c){var h=i._data,l=i._size,v=i._datatype,s=n._values,a=n._index,f=n._ptr,p=n._size,d=n._datatype;if(l.length!==p.length)throw new et(l.length,p.length);if(l[0]!==p[0]||l[1]!==p[1])throw new RangeError("Dimension mismatch. Matrix A ("+l+") must match Matrix B ("+p+")");if(!s)throw new Error("Cannot perform operation on Dense Matrix and Pattern Sparse Matrix");var u=l[0],m=l[1],g=typeof v=="string"&&v===d?v:void 0,M=g?e.find(o,[g,g]):o,w,N,_=[];for(w=0;w<u;w++)_[w]=[];var y=[],E=[];for(N=0;N<m;N++){for(var b=N+1,S=f[N],$=f[N+1],O=S;O<$;O++)w=a[O],y[w]=c?M(s[O],h[w][N]):M(h[w][N],s[O]),E[w]=b;for(w=0;w<u;w++)E[w]===b?_[w][N]=y[w]:_[w][N]=h[w][N]}return i.createDenseMatrix({data:_,size:[u,m],datatype:g})}}),as="algorithm10",ss=["typed","DenseMatrix"],us=j(as,ss,t=>{var{typed:e,DenseMatrix:r}=t;return function(n,o,c,h){var l=n._values,v=n._index,s=n._ptr,a=n._size,f=n._datatype;if(!l)throw new Error("Cannot perform operation on Pattern Sparse Matrix and Scalar value");var p=a[0],d=a[1],u,m=c;typeof f=="string"&&(u=f,o=e.convert(o,u),m=e.find(c,[u,u]));for(var g=[],M=[],w=[],N=0;N<d;N++){for(var _=N+1,y=s[N],E=s[N+1],b=y;b<E;b++){var S=v[b];M[S]=l[b],w[S]=_}for(var $=0;$<p;$++)N===0&&(g[$]=[]),w[$]===_?g[$][N]=h?m(o,M[$]):m(M[$],o):g[$][N]=o}return new r({data:g,size:[p,d],datatype:u})}}),cs="algorithm13",fs=["typed"],ls=j(cs,fs,t=>{var{typed:e}=t;return function(n,o,c){var h=n._data,l=n._size,v=n._datatype,s=o._data,a=o._size,f=o._datatype,p=[];if(l.length!==a.length)throw new et(l.length,a.length);for(var d=0;d<l.length;d++){if(l[d]!==a[d])throw new RangeError("Dimension mismatch. Matrix A ("+l+") must match Matrix B ("+a+")");p[d]=l[d]}var u,m=c;typeof v=="string"&&v===f&&(u=v,m=e.find(c,[u,u]));var g=p.length>0?r(m,0,p,p[0],h,s):[];return n.createDenseMatrix({data:g,size:p,datatype:u})};function r(i,n,o,c,h,l){var v=[];if(n===o.length-1)for(var s=0;s<c;s++)v[s]=i(h[s],l[s]);else for(var a=0;a<c;a++)v[a]=r(i,n+1,o,o[n+1],h[a],l[a]);return v}}),hs="algorithm03",ps=["typed"],vs=j(hs,ps,t=>{var{typed:e}=t;return function(i,n,o,c){var h=i._data,l=i._size,v=i._datatype,s=n._values,a=n._index,f=n._ptr,p=n._size,d=n._datatype;if(l.length!==p.length)throw new et(l.length,p.length);if(l[0]!==p[0]||l[1]!==p[1])throw new RangeError("Dimension mismatch. Matrix A ("+l+") must match Matrix B ("+p+")");if(!s)throw new Error("Cannot perform operation on Dense Matrix and Pattern Sparse Matrix");var u=l[0],m=l[1],g,M=0,w=o;typeof v=="string"&&v===d&&(g=v,M=e.convert(0,g),w=e.find(o,[g,g]));for(var N=[],_=0;_<u;_++)N[_]=[];for(var y=[],E=[],b=0;b<m;b++){for(var S=b+1,$=f[b],O=f[b+1],I=$;I<O;I++){var R=a[I];y[R]=c?w(s[I],h[R][b]):w(h[R][b],s[I]),E[R]=S}for(var F=0;F<u;F++)E[F]===S?N[F][b]=y[F]:N[F][b]=c?w(M,h[F][b]):w(h[F][b],M)}return i.createDenseMatrix({data:N,size:[u,m],datatype:g})}}),ds="algorithm05",ms=["typed","equalScalar"],gs=j(ds,ms,t=>{var{typed:e,equalScalar:r}=t;return function(n,o,c){var h=n._values,l=n._index,v=n._ptr,s=n._size,a=n._datatype,f=o._values,p=o._index,d=o._ptr,u=o._size,m=o._datatype;if(s.length!==u.length)throw new et(s.length,u.length);if(s[0]!==u[0]||s[1]!==u[1])throw new RangeError("Dimension mismatch. Matrix A ("+s+") must match Matrix B ("+u+")");var g=s[0],M=s[1],w,N=r,_=0,y=c;typeof a=="string"&&a===m&&(w=a,N=e.find(r,[w,w]),_=e.convert(0,w),y=e.find(c,[w,w]));var E=h&&f?[]:void 0,b=[],S=[],$=E?[]:void 0,O=E?[]:void 0,I=[],R=[],F,B,z,V;for(B=0;B<M;B++){S[B]=b.length;var q=B+1;for(z=v[B],V=v[B+1];z<V;z++)F=l[z],b.push(F),I[F]=q,$&&($[F]=h[z]);for(z=d[B],V=d[B+1];z<V;z++)F=p[z],I[F]!==q&&b.push(F),R[F]=q,O&&(O[F]=f[z]);if(E)for(z=S[B];z<b.length;){F=b[z];var H=I[F],G=R[F];if(H===q||G===q){var Q=H===q?$[F]:_,tt=G===q?O[F]:_,J=y(Q,tt);N(J,_)?b.splice(z,1):(E.push(J),z++)}}}return S[M]=b.length,n.createSparseMatrix({values:E,index:b,ptr:S,size:[g,M],datatype:w})}}),ws="multiplyScalar",ys=["typed"],_s=j(ws,ys,t=>{var{typed:e}=t;return e("multiplyScalar",{"number, number":$n,"Complex, Complex":function(i,n){return i.mul(n)},"BigNumber, BigNumber":function(i,n){return i.times(n)},"Fraction, Fraction":function(i,n){return i.mul(n)},"number | Fraction | BigNumber | Complex, Unit":function(i,n){var o=n.clone();return o.value=o.value===null?o._normalize(i):this(o.value,i),o},"Unit, number | Fraction | BigNumber | Complex":function(i,n){var o=i.clone();return o.value=o.value===null?o._normalize(n):this(o.value,n),o},"Unit, Unit":function(i,n){return i.multiply(n)}})}),_r="multiply",bs=["typed","matrix","addScalar","multiplyScalar","equalScalar","dot"],Ms=j(_r,bs,t=>{var{typed:e,matrix:r,addScalar:i,multiplyScalar:n,equalScalar:o,dot:c}=t,h=zn({typed:e,equalScalar:o}),l=ir({typed:e});function v(_,y){switch(_.length){case 1:switch(y.length){case 1:if(_[0]!==y[0])throw new RangeError("Dimension mismatch in multiplication. Vectors must have the same length");break;case 2:if(_[0]!==y[0])throw new RangeError("Dimension mismatch in multiplication. Vector length ("+_[0]+") must match Matrix rows ("+y[0]+")");break;default:throw new Error("Can only multiply a 1 or 2 dimensional matrix (Matrix B has "+y.length+" dimensions)")}break;case 2:switch(y.length){case 1:if(_[1]!==y[0])throw new RangeError("Dimension mismatch in multiplication. Matrix columns ("+_[1]+") must match Vector length ("+y[0]+")");break;case 2:if(_[1]!==y[0])throw new RangeError("Dimension mismatch in multiplication. Matrix A columns ("+_[1]+") must match Matrix B rows ("+y[0]+")");break;default:throw new Error("Can only multiply a 1 or 2 dimensional matrix (Matrix B has "+y.length+" dimensions)")}break;default:throw new Error("Can only multiply a 1 or 2 dimensional matrix (Matrix A has "+_.length+" dimensions)")}}function s(_,y,E){if(E===0)throw new Error("Cannot multiply two empty vectors");return c(_,y)}function a(_,y){if(y.storage()!=="dense")throw new Error("Support for SparseMatrix not implemented");return f(_,y)}function f(_,y){var E=_._data,b=_._size,S=_._datatype,$=y._data,O=y._size,I=y._datatype,R=b[0],F=O[1],B,z=i,V=n;S&&I&&S===I&&typeof S=="string"&&(B=S,z=e.find(i,[B,B]),V=e.find(n,[B,B]));for(var q=[],H=0;H<F;H++){for(var G=V(E[0],$[0][H]),Q=1;Q<R;Q++)G=z(G,V(E[Q],$[Q][H]));q[H]=G}return _.createDenseMatrix({data:q,size:[F],datatype:B})}var p=e("_multiplyMatrixVector",{"DenseMatrix, any":u,"SparseMatrix, any":M}),d=e("_multiplyMatrixMatrix",{"DenseMatrix, DenseMatrix":m,"DenseMatrix, SparseMatrix":g,"SparseMatrix, DenseMatrix":w,"SparseMatrix, SparseMatrix":N});function u(_,y){var E=_._data,b=_._size,S=_._datatype,$=y._data,O=y._datatype,I=b[0],R=b[1],F,B=i,z=n;S&&O&&S===O&&typeof S=="string"&&(F=S,B=e.find(i,[F,F]),z=e.find(n,[F,F]));for(var V=[],q=0;q<I;q++){for(var H=E[q],G=z(H[0],$[0]),Q=1;Q<R;Q++)G=B(G,z(H[Q],$[Q]));V[q]=G}return _.createDenseMatrix({data:V,size:[I],datatype:F})}function m(_,y){var E=_._data,b=_._size,S=_._datatype,$=y._data,O=y._size,I=y._datatype,R=b[0],F=b[1],B=O[1],z,V=i,q=n;S&&I&&S===I&&typeof S=="string"&&(z=S,V=e.find(i,[z,z]),q=e.find(n,[z,z]));for(var H=[],G=0;G<R;G++){var Q=E[G];H[G]=[];for(var tt=0;tt<B;tt++){for(var J=q(Q[0],$[0][tt]),pt=1;pt<F;pt++)J=V(J,q(Q[pt],$[pt][tt]));H[G][tt]=J}}return _.createDenseMatrix({data:H,size:[R,B],datatype:z})}function g(_,y){var E=_._data,b=_._size,S=_._datatype,$=y._values,O=y._index,I=y._ptr,R=y._size,F=y._datatype;if(!$)throw new Error("Cannot multiply Dense Matrix times Pattern only Matrix");var B=b[0],z=R[1],V,q=i,H=n,G=o,Q=0;S&&F&&S===F&&typeof S=="string"&&(V=S,q=e.find(i,[V,V]),H=e.find(n,[V,V]),G=e.find(o,[V,V]),Q=e.convert(0,V));for(var tt=[],J=[],pt=[],vt=y.createSparseMatrix({values:tt,index:J,ptr:pt,size:[B,z],datatype:V}),gt=0;gt<z;gt++){pt[gt]=J.length;var st=I[gt],Ct=I[gt+1];if(Ct>st)for(var lt=0,ot=0;ot<B;ot++){for(var Dt=ot+1,Mt=void 0,nt=st;nt<Ct;nt++){var Nt=O[nt];lt!==Dt?(Mt=H(E[ot][Nt],$[nt]),lt=Dt):Mt=q(Mt,H(E[ot][Nt],$[nt]))}lt===Dt&&!G(Mt,Q)&&(J.push(ot),tt.push(Mt))}}return pt[z]=J.length,vt}function M(_,y){var E=_._values,b=_._index,S=_._ptr,$=_._datatype;if(!E)throw new Error("Cannot multiply Pattern only Matrix times Dense Matrix");var O=y._data,I=y._datatype,R=_._size[0],F=y._size[0],B=[],z=[],V=[],q,H=i,G=n,Q=o,tt=0;$&&I&&$===I&&typeof $=="string"&&(q=$,H=e.find(i,[q,q]),G=e.find(n,[q,q]),Q=e.find(o,[q,q]),tt=e.convert(0,q));var J=[],pt=[];V[0]=0;for(var vt=0;vt<F;vt++){var gt=O[vt];if(!Q(gt,tt))for(var st=S[vt],Ct=S[vt+1],lt=st;lt<Ct;lt++){var ot=b[lt];pt[ot]?J[ot]=H(J[ot],G(gt,E[lt])):(pt[ot]=!0,z.push(ot),J[ot]=G(gt,E[lt]))}}for(var Dt=z.length,Mt=0;Mt<Dt;Mt++){var nt=z[Mt];B[Mt]=J[nt]}return V[1]=z.length,_.createSparseMatrix({values:B,index:z,ptr:V,size:[R,1],datatype:q})}function w(_,y){var E=_._values,b=_._index,S=_._ptr,$=_._datatype;if(!E)throw new Error("Cannot multiply Pattern only Matrix times Dense Matrix");var O=y._data,I=y._datatype,R=_._size[0],F=y._size[0],B=y._size[1],z,V=i,q=n,H=o,G=0;$&&I&&$===I&&typeof $=="string"&&(z=$,V=e.find(i,[z,z]),q=e.find(n,[z,z]),H=e.find(o,[z,z]),G=e.convert(0,z));for(var Q=[],tt=[],J=[],pt=_.createSparseMatrix({values:Q,index:tt,ptr:J,size:[R,B],datatype:z}),vt=[],gt=[],st=0;st<B;st++){J[st]=tt.length;for(var Ct=st+1,lt=0;lt<F;lt++){var ot=O[lt][st];if(!H(ot,G))for(var Dt=S[lt],Mt=S[lt+1],nt=Dt;nt<Mt;nt++){var Nt=b[nt];gt[Nt]!==Ct?(gt[Nt]=Ct,tt.push(Nt),vt[Nt]=q(ot,E[nt])):vt[Nt]=V(vt[Nt],q(ot,E[nt]))}}for(var $t=J[st],Yt=tt.length,Lt=$t;Lt<Yt;Lt++){var ne=tt[Lt];Q[Lt]=vt[ne]}}return J[B]=tt.length,pt}function N(_,y){var E=_._values,b=_._index,S=_._ptr,$=_._datatype,O=y._values,I=y._index,R=y._ptr,F=y._datatype,B=_._size[0],z=y._size[1],V=E&&O,q,H=i,G=n;$&&F&&$===F&&typeof $=="string"&&(q=$,H=e.find(i,[q,q]),G=e.find(n,[q,q]));for(var Q=V?[]:void 0,tt=[],J=[],pt=_.createSparseMatrix({values:Q,index:tt,ptr:J,size:[B,z],datatype:q}),vt=V?[]:void 0,gt=[],st,Ct,lt,ot,Dt,Mt,nt,Nt,$t=0;$t<z;$t++){J[$t]=tt.length;var Yt=$t+1;for(Dt=R[$t],Mt=R[$t+1],ot=Dt;ot<Mt;ot++)if(Nt=I[ot],V)for(Ct=S[Nt],lt=S[Nt+1],st=Ct;st<lt;st++)nt=b[st],gt[nt]!==Yt?(gt[nt]=Yt,tt.push(nt),vt[nt]=G(O[ot],E[st])):vt[nt]=H(vt[nt],G(O[ot],E[st]));else for(Ct=S[Nt],lt=S[Nt+1],st=Ct;st<lt;st++)nt=b[st],gt[nt]!==Yt&&(gt[nt]=Yt,tt.push(nt));if(V)for(var Lt=J[$t],ne=tt.length,te=Lt;te<ne;te++){var x=tt[te];Q[te]=vt[x]}}return J[z]=tt.length,pt}return e(_r,en({"Array, Array":function(y,E){v(Gt(y),Gt(E));var b=this(r(y),r(E));return bt(b)?b.valueOf():b},"Matrix, Matrix":function(y,E){var b=y.size(),S=E.size();return v(b,S),b.length===1?S.length===1?s(y,E,b[0]):a(y,E):S.length===1?p(y,E):d(y,E)},"Matrix, Array":function(y,E){return this(y,r(E))},"Array, Matrix":function(y,E){return this(r(y,E.storage()),E)},"SparseMatrix, any":function(y,E){return h(y,E,n,!1)},"DenseMatrix, any":function(y,E){return l(y,E,n,!1)},"any, SparseMatrix":function(y,E){return h(E,y,n,!0)},"any, DenseMatrix":function(y,E){return l(E,y,n,!0)},"Array, any":function(y,E){return l(r(y),E,n,!1).valueOf()},"any, Array":function(y,E){return l(r(E),y,n,!0).valueOf()},"any, any":n,"any, any, ...any":function(y,E,b){for(var S=this(y,E),$=0;$<b.length;$++)S=this(S,b[$]);return S}},n.signatures))}),br="subtract",Ns=["typed","matrix","equalScalar","addScalar","unaryMinus","DenseMatrix"],xs=j(br,Ns,t=>{var{typed:e,matrix:r,equalScalar:i,addScalar:n,unaryMinus:o,DenseMatrix:c}=t,h=os({typed:e}),l=vs({typed:e}),v=gs({typed:e,equalScalar:i}),s=us({typed:e,DenseMatrix:c}),a=ls({typed:e}),f=ir({typed:e});return e(br,{"number, number":function(d,u){return d-u},"Complex, Complex":function(d,u){return d.sub(u)},"BigNumber, BigNumber":function(d,u){return d.minus(u)},"Fraction, Fraction":function(d,u){return d.sub(u)},"Unit, Unit":function(d,u){if(d.value===null)throw new Error("Parameter x contains a unit with undefined value");if(u.value===null)throw new Error("Parameter y contains a unit with undefined value");if(!d.equalBase(u))throw new Error("Units do not match");var m=d.clone();return m.value=this(m.value,u.value),m.fixPrefix=!1,m},"SparseMatrix, SparseMatrix":function(d,u){return me(d,u),v(d,u,this)},"SparseMatrix, DenseMatrix":function(d,u){return me(d,u),l(u,d,this,!0)},"DenseMatrix, SparseMatrix":function(d,u){return me(d,u),h(d,u,this,!1)},"DenseMatrix, DenseMatrix":function(d,u){return me(d,u),a(d,u,this)},"Array, Array":function(d,u){return this(r(d),r(u)).valueOf()},"Array, Matrix":function(d,u){return this(r(d),u)},"Matrix, Array":function(d,u){return this(d,r(u))},"SparseMatrix, any":function(d,u){return s(d,o(u),n)},"DenseMatrix, any":function(d,u){return f(d,u,this)},"any, SparseMatrix":function(d,u){return s(u,d,this,!0)},"any, DenseMatrix":function(d,u){return f(u,d,this,!0)},"Array, any":function(d,u){return f(r(d),u,this,!1).valueOf()},"any, Array":function(d,u){return f(r(u),d,this,!0).valueOf()}})});function me(t,e){var r=t.size(),i=e.size();if(r.length!==i.length)throw new et(r.length,i.length)}var Mr="conj",Ss=["typed"],Es=j(Mr,Ss,t=>{var{typed:e}=t;return e(Mr,{number:function(i){return i},BigNumber:function(i){return i},Complex:function(i){return i.conjugate()},"Array | Matrix":function(i){return Qt(i,this)}})}),Nr="identity",Cs=["typed","config","matrix","BigNumber","DenseMatrix","SparseMatrix"],As=j(Nr,Cs,t=>{var{typed:e,config:r,matrix:i,BigNumber:n,DenseMatrix:o,SparseMatrix:c}=t;return e(Nr,{"":function(){return r.matrix==="Matrix"?i([]):[]},string:function(s){return i(s)},"number | BigNumber":function(s){return l(s,s,r.matrix==="Matrix"?"dense":void 0)},"number | BigNumber, string":function(s,a){return l(s,s,a)},"number | BigNumber, number | BigNumber":function(s,a){return l(s,a,r.matrix==="Matrix"?"dense":void 0)},"number | BigNumber, number | BigNumber, string":function(s,a,f){return l(s,a,f)},Array:function(s){return h(s)},"Array, string":function(s,a){return h(s,a)},Matrix:function(s){return h(s.valueOf(),s.storage())},"Matrix, string":function(s,a){return h(s.valueOf(),a)}});function h(v,s){switch(v.length){case 0:return s?i(s):[];case 1:return l(v[0],v[0],s);case 2:return l(v[0],v[1],s);default:throw new Error("Vector containing two values expected")}}function l(v,s,a){var f=At(v)||At(s)?n:null;if(At(v)&&(v=v.toNumber()),At(s)&&(s=s.toNumber()),!_t(v)||v<1)throw new Error("Parameters in function identity must be positive integers");if(!_t(s)||s<1)throw new Error("Parameters in function identity must be positive integers");var p=f?new n(1):1,d=f?new f(0):0,u=[v,s];if(a){if(a==="sparse")return c.diagonal(u,p,0,d);if(a==="dense")return o.diagonal(u,p,0,d);throw new TypeError('Unknown matrix type "'.concat(a,'"'))}for(var m=Ye([],u,d),g=v<s?v:s,M=0;M<g;M++)m[M][M]=p;return m}});function Ds(){throw new Error('No "bignumber" implementation available')}function $s(){throw new Error('No "fraction" implementation available')}function Os(){throw new Error('No "matrix" implementation available')}var xr="size",Ps=["typed","config","?matrix"],zs=j(xr,Ps,t=>{var{typed:e,config:r,matrix:i}=t;return e(xr,{Matrix:function(o){return o.create(o.size())},Array:Gt,string:function(o){return r.matrix==="Array"?[o.length]:i([o.length])},"number | Complex | BigNumber | Unit | boolean | null":function(o){return r.matrix==="Array"?[]:i?i([]):Os()}})}),Is="numeric",Fs=["number","?bignumber","?fraction"],Bs=j(Is,Fs,t=>{var{number:e,bignumber:r,fraction:i}=t,n={string:!0,number:!0,BigNumber:!0,Fraction:!0},o={number:c=>e(c),BigNumber:r?c=>r(c):Ds,Fraction:i?c=>i(c):$s};return function(h,l){var v=Xt(h);if(!(v in n))throw new TypeError("Cannot convert "+h+' of type "'+v+'"; valid input types are '+Object.keys(n).join(", "));if(!(l in o))throw new TypeError("Cannot convert "+h+' to type "'+l+'"; valid output types are '+Object.keys(o).join(", "));return l===v?h:o[l](h)}}),Sr="divideScalar",Ts=["typed","numeric"],Ls=j(Sr,Ts,t=>{var{typed:e,numeric:r}=t;return e(Sr,{"number, number":function(n,o){return n/o},"Complex, Complex":function(n,o){return n.div(o)},"BigNumber, BigNumber":function(n,o){return n.div(o)},"Fraction, Fraction":function(n,o){return n.div(o)},"Unit, number | Fraction | BigNumber":function(n,o){var c=n.clone(),h=r(1,Xt(o));return c.value=this(c.value===null?c._normalize(h):c.value,o),c},"number | Fraction | BigNumber, Unit":function(n,o){var c=o.clone();c=c.pow(-1);var h=r(1,Xt(n));return c.value=this(n,o.value===null?o._normalize(h):o.value),c},"Unit, Unit":function(n,o){return n.divide(o)}})}),Er="dot",Rs=["typed","addScalar","multiplyScalar","conj","size"],qs=j(Er,Rs,t=>{var{typed:e,addScalar:r,multiplyScalar:i,conj:n,size:o}=t;return e(Er,{"Array | DenseMatrix, Array | DenseMatrix":h,"SparseMatrix, SparseMatrix":l});function c(s,a){var f=v(s),p=v(a),d,u;if(f.length===1)d=f[0];else if(f.length===2&&f[1]===1)d=f[0];else throw new RangeError("Expected a column vector, instead got a matrix of size ("+f.join(", ")+")");if(p.length===1)u=p[0];else if(p.length===2&&p[1]===1)u=p[0];else throw new RangeError("Expected a column vector, instead got a matrix of size ("+p.join(", ")+")");if(d!==u)throw new RangeError("Vectors must have equal length ("+d+" != "+u+")");if(d===0)throw new RangeError("Cannot calculate the dot product of empty vectors");return d}function h(s,a){var f=c(s,a),p=bt(s)?s._data:s,d=bt(s)?s._datatype:void 0,u=bt(a)?a._data:a,m=bt(a)?a._datatype:void 0,g=v(s).length===2,M=v(a).length===2,w=r,N=i;if(d&&m&&d===m&&typeof d=="string"){var _=d;w=e.find(r,[_,_]),N=e.find(i,[_,_])}if(!g&&!M){for(var y=N(n(p[0]),u[0]),E=1;E<f;E++)y=w(y,N(n(p[E]),u[E]));return y}if(!g&&M){for(var b=N(n(p[0]),u[0][0]),S=1;S<f;S++)b=w(b,N(n(p[S]),u[S][0]));return b}if(g&&!M){for(var $=N(n(p[0][0]),u[0]),O=1;O<f;O++)$=w($,N(n(p[O][0]),u[O]));return $}if(g&&M){for(var I=N(n(p[0][0]),u[0][0]),R=1;R<f;R++)I=w(I,N(n(p[R][0]),u[R][0]));return I}}function l(s,a){c(s,a);for(var f=s._index,p=s._values,d=a._index,u=a._values,m=0,g=r,M=i,w=0,N=0;w<f.length&&N<d.length;){var _=f[w],y=d[N];if(_<y){w++;continue}if(_>y){N++;continue}_===y&&(m=g(m,M(p[w],u[N])),w++,N++)}return m}function v(s){return bt(s)?s.size():o(s)}}),Cr="det",Us=["typed","matrix","subtract","multiply","divideScalar","isZero","unaryMinus"],Zs=j(Cr,Us,t=>{var{typed:e,matrix:r,subtract:i,multiply:n,divideScalar:o,isZero:c,unaryMinus:h}=t;return e(Cr,{any:function(s){return dt(s)},"Array | Matrix":function(s){var a;switch(bt(s)?a=s.size():Array.isArray(s)?(s=r(s),a=s.size()):a=[],a.length){case 0:return dt(s);case 1:if(a[0]===1)return dt(s.valueOf()[0]);throw new RangeError("Matrix must be square (size: "+wt(a)+")");case 2:{var f=a[0],p=a[1];if(f===p)return l(s.clone().valueOf(),f);throw new RangeError("Matrix must be square (size: "+wt(a)+")")}default:throw new RangeError("Matrix must be two dimensional (size: "+wt(a)+")")}}});function l(v,s,a){if(s===1)return dt(v[0][0]);if(s===2)return i(n(v[0][0],v[1][1]),n(v[1][0],v[0][1]));for(var f=!1,p=new Array(s).fill(0).map((E,b)=>b),d=0;d<s;d++){var u=p[d];if(c(v[u][d])){var m=void 0;for(m=d+1;m<s;m++)if(!c(v[p[m]][d])){u=p[m],p[m]=p[d],p[d]=u,f=!f;break}if(m===s)return v[u][d]}for(var g=v[u][d],M=d===0?1:v[p[d-1]][d-1],w=d+1;w<s;w++)for(var N=p[w],_=d+1;_<s;_++)v[N][_]=o(i(n(v[N][_],g),n(v[N][d],v[u][_])),M)}var y=v[p[s-1]][s-1];return f?h(y):y}}),Ar="inv",Vs=["typed","matrix","divideScalar","addScalar","multiply","unaryMinus","det","identity","abs"],Hs=j(Ar,Vs,t=>{var{typed:e,matrix:r,divideScalar:i,addScalar:n,multiply:o,unaryMinus:c,det:h,identity:l,abs:v}=t;return e(Ar,{"Array | Matrix":function(f){var p=bt(f)?f.size():Gt(f);switch(p.length){case 1:if(p[0]===1)return bt(f)?r([i(1,f.valueOf()[0])]):[i(1,f[0])];throw new RangeError("Matrix must be square (size: "+wt(p)+")");case 2:{var d=p[0],u=p[1];if(d===u)return bt(f)?r(s(f.valueOf(),d,u),f.storage()):s(f,d,u);throw new RangeError("Matrix must be square (size: "+wt(p)+")")}default:throw new RangeError("Matrix must be two dimensional (size: "+wt(p)+")")}},any:function(f){return i(1,f)}});function s(a,f,p){var d,u,m,g,M;if(f===1){if(g=a[0][0],g===0)throw Error("Cannot calculate inverse, determinant is zero");return[[i(1,g)]]}else if(f===2){var w=h(a);if(w===0)throw Error("Cannot calculate inverse, determinant is zero");return[[i(a[1][1],w),i(c(a[0][1]),w)],[i(c(a[1][0]),w),i(a[0][0],w)]]}else{var N=a.concat();for(d=0;d<f;d++)N[d]=N[d].concat();for(var _=l(f).valueOf(),y=0;y<p;y++){var E=v(N[y][y]),b=y;for(d=y+1;d<f;)v(N[d][y])>E&&(E=v(N[d][y]),b=d),d++;if(E===0)throw Error("Cannot calculate inverse, determinant is zero");d=b,d!==y&&(M=N[y],N[y]=N[d],N[d]=M,M=_[y],_[y]=_[d],_[d]=M);var S=N[y],$=_[y];for(d=0;d<f;d++){var O=N[d],I=_[d];if(d!==y){if(O[y]!==0){for(m=i(c(O[y]),S[y]),u=y;u<p;u++)O[u]=n(O[u],o(m,S[u]));for(u=0;u<p;u++)I[u]=n(I[u],o(m,$[u]))}}else{for(m=S[y],u=y;u<p;u++)O[u]=i(O[u],m);for(u=0;u<p;u++)I[u]=i(I[u],m)}}}return _}}}),Ys="divide",ks=["typed","matrix","multiply","equalScalar","divideScalar","inv"],Ws=j(Ys,ks,t=>{var{typed:e,matrix:r,multiply:i,equalScalar:n,divideScalar:o,inv:c}=t,h=zn({typed:e,equalScalar:n}),l=ir({typed:e});return e("divide",en({"Array | Matrix, Array | Matrix":function(s,a){return i(s,c(a))},"DenseMatrix, any":function(s,a){return l(s,a,o,!1)},"SparseMatrix, any":function(s,a){return h(s,a,o,!1)},"Array, any":function(s,a){return l(r(s),a,o,!1).valueOf()},"any, Array | Matrix":function(s,a){return i(s,c(a))}},o.signatures))}),or=la({config:ve}),Xs=va({}),In=ga({}),ar=_a({}),Oe=Na({Matrix:ar}),mt=po({BigNumber:or,Complex:Xs,DenseMatrix:Oe,Fraction:In}),Gs=Ka({typed:mt}),Pe=ja({typed:mt}),Ks=Ua({BigNumber:or,typed:mt}),Js=Es({typed:mt}),ze=$a({config:ve,typed:mt}),js=Ea({typed:mt}),Fn=_s({typed:mt}),Qs=La({typed:mt}),Bn=za({Matrix:ar,equalScalar:ze,typed:mt}),sr=Xa({typed:mt}),tu=Ha({Fraction:In,typed:mt}),re=ka({DenseMatrix:Oe,Matrix:ar,SparseMatrix:Bn,typed:mt}),eu=Bs({bignumber:Ks,fraction:tu,number:Qs}),ru=zs({matrix:re,config:ve,typed:mt}),nu=xs({DenseMatrix:Oe,addScalar:Pe,equalScalar:ze,matrix:re,typed:mt,unaryMinus:sr}),ur=Ls({numeric:eu,typed:mt}),iu=qs({addScalar:Pe,conj:Js,multiplyScalar:Fn,size:ru,typed:mt}),ou=As({BigNumber:or,DenseMatrix:Oe,SparseMatrix:Bn,config:ve,matrix:re,typed:mt}),Ie=Ms({addScalar:Pe,dot:iu,equalScalar:ze,matrix:re,multiplyScalar:Fn,typed:mt}),au=Zs({divideScalar:ur,isZero:js,matrix:re,multiply:Ie,subtract:nu,typed:mt,unaryMinus:sr}),su=Hs({abs:Gs,addScalar:Pe,det:au,divideScalar:ur,identity:ou,matrix:re,multiply:Ie,typed:mt,unaryMinus:sr}),uu=Ws({divideScalar:ur,equalScalar:ze,inv:su,matrix:re,multiply:Ie,typed:mt});function le(t){return t*Math.PI/180}function cu(t){return Ie(t,uu(parseInt(ft.state.canvasStyleData.scale),100))}function rt(t,e,r){return{x:(t.x-e.x)*Math.cos(le(r))-(t.y-e.y)*Math.sin(le(r))+e.x,y:(t.x-e.x)*Math.sin(le(r))+(t.y-e.y)*Math.cos(le(r))+e.y}}function Jt(t,e){return{x:t.x+(e.x-t.x)/2,y:t.y+(e.y-t.y)/2}}function Dr(t){return Math.abs(Math.cos(le(t)))}function Ue(t){return(t+360)%360}function $r(t){return t?"infinite":"no-infinite"}const fu=async(t,e=[])=>{const r=n=>new Promise(o=>{const{animationTime:c,value:h="",isLoop:l}=n;t.style.setProperty("--time",c+"s"),t.classList.add(h,"animated",$r(l));const v=()=>{t.removeEventListener("animationend",v),t.removeEventListener("animationcancel",v),t.classList.remove(h,"animated",$r(l)),t.style.removeProperty("--time"),o()};t.addEventListener("animationend",v),t.addEventListener("animationcancel",v)}),i=e.length;for(let n=0;n<i;n++)await r(e[n])};function lu(t,e=[]){const r=["fontSize","width","height","top","left","borderWidth","letterSpacing","borderRadius"],i={};return Object.keys(t).forEach(n=>{e.includes(n)||(n!="rotate"?(i[n]=t[n],r.includes(n)&&(i[n]+="px")):i.transform=n+"("+t[n]+"deg)")}),i}function je(t){if(t={...t},t.rotate){const e=t.width*Dr(t.rotate)+t.height*(t.rotate,void 0),r=(t.width-e)/2;t.left+=r,t.right=t.left+e,t.height*Dr(t.rotate)+t.width*(t.rotate,void 0)}else t.bottom=t.top+t.height,t.right=t.left+t.width;return t}const Or=17,Pr=91,hu=86,pu=67,vu=88,du=89,mu=90,gu=71,wu=66,yu=76,_u=85,bu=83,Mu=80,Nu=68,Tn=46,xu=69;let Ze=!1;const Su=()=>{ft.commit("paste"),ft.commit("recordSnapshot")},Eu=()=>{ft.commit("redo")},Cu=()=>{ft.commit("undo")},Au=()=>{zt.$emit("save")},Du=()=>{zt.$emit("preview")},$u=()=>{zt.$emit("clearCanvas")},Ou=()=>{ft.commit("unlock")},Pu=()=>{ft.commit("lock")},zr=()=>{ft.state.curComponent&&(ft.commit("deleteComponent"),ft.commit("recordSnapshot"))},zu=()=>{ft.commit("copy")},Iu=()=>{ft.commit("cut")},Fu=()=>{ft.state.areaData.components.length&&(ft.commit("compose"),ft.commit("recordSnapshot"))},Bu=()=>{const t=ft.state.curComponent;t&&!t.isLock&&t.component=="Group"&&(ft.commit("decompose"),ft.commit("recordSnapshot"))},Ln={[hu]:Su,[du]:Eu,[mu]:Cu,[bu]:Au,[Mu]:Du,[xu]:$u},Ir={...Ln,[_u]:Ou},Fr={...Ln,[pu]:zu,[vu]:Iu,[gu]:Fu,[wu]:Bu,[Nu]:zr,[Tn]:zr,[yu]:Pu},Tu=()=>{window.onkeydown=t=>{if(!ft.state.isInEdiotr)return;const{curComponent:e}=ft.state,{keyCode:r}=t;r===Or||r===Pr?Ze=!0:r==Tn&&e?(ft.commit("deleteComponent"),ft.commit("recordSnapshot")):Ze&&((!e||!e.isLock)&&Fr[r]?(t.preventDefault(),Fr[r]()):e&&e.isLock&&Ir[r]&&(t.preventDefault(),Ir[r]()))},window.onkeyup=t=>{(t.keyCode===Or||t.keyCode===Pr)&&(Ze=!1)},window.onmousedown=()=>{ft.commit("setInEditorStatus",!1)}};function Lu(t,e,r,i,n){const{symmetricPoint:o}=n;let c=Jt(e,o),h=rt(e,c,-t.rotate),l=rt(o,c,-t.rotate),v=l.x-h.x,s=l.y-h.y;if(i){v/s>r?(h.x+=Math.abs(v-s*r),v=s*r):(h.y+=Math.abs(s-v/r),s=v/r);const a=rt(h,c,t.rotate);c=Jt(a,o),h=rt(a,c,-t.rotate),l=rt(o,c,-t.rotate),v=l.x-h.x,s=l.y-h.y}v>0&&s>0&&(t.width=Math.round(v),t.height=Math.round(s),t.left=Math.round(h.x),t.top=Math.round(h.y))}function Ru(t,e,r,i,n){const{symmetricPoint:o}=n;let c=Jt(e,o),h=rt(e,c,-t.rotate),l=rt(o,c,-t.rotate),v=h.x-l.x,s=l.y-h.y;if(i){v/s>r?(h.x-=Math.abs(v-s*r),v=s*r):(h.y+=Math.abs(s-v/r),s=v/r);const a=rt(h,c,t.rotate);c=Jt(a,o),h=rt(a,c,-t.rotate),l=rt(o,c,-t.rotate),v=h.x-l.x,s=l.y-h.y}v>0&&s>0&&(t.width=Math.round(v),t.height=Math.round(s),t.left=Math.round(l.x),t.top=Math.round(h.y))}function qu(t,e,r,i,n){const{symmetricPoint:o}=n;let c=Jt(e,o),h=rt(o,c,-t.rotate),l=rt(e,c,-t.rotate),v=l.x-h.x,s=l.y-h.y;if(i){v/s>r?(l.x-=Math.abs(v-s*r),v=s*r):(l.y-=Math.abs(s-v/r),s=v/r);const a=rt(l,c,t.rotate);c=Jt(a,o),h=rt(o,c,-t.rotate),l=rt(a,c,-t.rotate),v=l.x-h.x,s=l.y-h.y}v>0&&s>0&&(t.width=Math.round(v),t.height=Math.round(s),t.left=Math.round(h.x),t.top=Math.round(h.y))}function Uu(t,e,r,i,n){const{symmetricPoint:o}=n;let c=Jt(e,o),h=rt(o,c,-t.rotate),l=rt(e,c,-t.rotate),v=h.x-l.x,s=l.y-h.y;if(i){v/s>r?(l.x+=Math.abs(v-s*r),v=s*r):(l.y-=Math.abs(s-v/r),s=v/r);const a=rt(l,c,t.rotate);c=Jt(a,o),h=rt(o,c,-t.rotate),l=rt(a,c,-t.rotate),v=h.x-l.x,s=l.y-h.y}v>0&&s>0&&(t.width=Math.round(v),t.height=Math.round(s),t.left=Math.round(l.x),t.top=Math.round(h.y))}function Zu(t,e,r,i,n){const{symmetricPoint:o,curPoint:c}=n,h=rt(e,c,-t.rotate),l=rt({x:c.x,y:h.y},c,t.rotate),v=Math.sqrt((l.x-o.x)**2+(l.y-o.y)**2),s={x:l.x-(l.x-o.x)/2,y:l.y+(o.y-l.y)/2};let a=t.width;i&&(a=v*r),t.width=a,t.height=Math.round(v),t.top=Math.round(s.y-v/2),t.left=Math.round(s.x-t.width/2)}function Vu(t,e,r,i,n){const{symmetricPoint:o,curPoint:c}=n,h=rt(e,c,-t.rotate),l=rt({x:h.x,y:c.y},c,t.rotate),v=Math.sqrt((l.x-o.x)**2+(l.y-o.y)**2),s={x:l.x-(l.x-o.x)/2,y:l.y+(o.y-l.y)/2};let a=t.height;i&&(a=v/r),t.height=a,t.width=Math.round(v),t.top=Math.round(s.y-t.height/2),t.left=Math.round(s.x-v/2)}function Hu(t,e,r,i,n){const{symmetricPoint:o,curPoint:c}=n,h=rt(e,c,-t.rotate),l=rt({x:c.x,y:h.y},c,t.rotate),v=Math.sqrt((l.x-o.x)**2+(l.y-o.y)**2),s={x:l.x-(l.x-o.x)/2,y:l.y+(o.y-l.y)/2};let a=t.width;i&&(a=v*r),t.width=a,t.height=Math.round(v),t.top=Math.round(s.y-v/2),t.left=Math.round(s.x-t.width/2)}function Yu(t,e,r,i,n){const{symmetricPoint:o,curPoint:c}=n,h=rt(e,c,-t.rotate),l=rt({x:h.x,y:c.y},c,t.rotate),v=Math.sqrt((l.x-o.x)**2+(l.y-o.y)**2),s={x:l.x-(l.x-o.x)/2,y:l.y+(o.y-l.y)/2};let a=t.height;i&&(a=v/r),t.height=a,t.width=Math.round(v),t.top=Math.round(s.y-t.height/2),t.left=Math.round(s.x-v/2)}const ku={lt:Lu,t:Zu,rt:Ru,r:Vu,rb:qu,b:Hu,lb:Uu,l:Yu},Wu=(t,e,r,i,n,o)=>{ku[t](e,r,i,n,o)};var Xu=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("div",{staticClass:"toolbar"},[r("el-button",{on:{click:t.undo}},[t._v("\u64A4\u6D88 undo")]),r("el-button",{on:{click:t.redo}},[t._v("\u91CD\u505A redo")]),r("label",{staticClass:"insert",attrs:{for:"input"}},[t._v("\u63D2\u5165\u56FE\u7247")]),r("input",{attrs:{id:"input",type:"file",hidden:""},on:{change:t.handleFileChange}}),r("el-button",{staticStyle:{"margin-left":"10px"},on:{click:t.preview}},[t._v("\u9884\u89C8")]),r("el-button",{on:{click:t.save}},[t._v("\u4FDD\u5B58")]),r("el-button",{on:{click:t.clearCanvas}},[t._v("\u6E05\u7A7A\u753B\u5E03")]),r("el-button",{attrs:{disabled:!t.areaData.components.length},on:{click:t.compose}},[t._v("\u7EC4\u5408")]),r("el-button",{attrs:{disabled:!t.curComponent||t.curComponent.isLock||t.curComponent.component!="Group"},on:{click:t.decompose}},[t._v(" \u62C6\u5206 ")]),r("el-button",{attrs:{disabled:!t.curComponent||t.curComponent.isLock},on:{click:t.lock}},[t._v("\u9501\u5B9A")]),r("el-button",{attrs:{disabled:!t.curComponent||!t.curComponent.isLock},on:{click:t.unlock}},[t._v("\u89E3\u9501")]),r("div",{staticClass:"canvas-config"},[r("span",[t._v("\u753B\u5E03\u5927\u5C0F")]),r("input",{directives:[{name:"model",rawName:"v-model",value:t.canvasStyleData.width,expression:"canvasStyleData.width"}],domProps:{value:t.canvasStyleData.width},on:{input:function(i){i.target.composing||t.$set(t.canvasStyleData,"width",i.target.value)}}}),r("span",[t._v("*")]),r("input",{directives:[{name:"model",rawName:"v-model",value:t.canvasStyleData.height,expression:"canvasStyleData.height"}],domProps:{value:t.canvasStyleData.height},on:{input:function(i){i.target.composing||t.$set(t.canvasStyleData,"height",i.target.value)}}})]),r("div",{staticClass:"canvas-config"},[r("span",[t._v("\u753B\u5E03\u6BD4\u4F8B")]),r("input",{directives:[{name:"model",rawName:"v-model",value:t.scale,expression:"scale"}],domProps:{value:t.scale},on:{input:[function(i){i.target.composing||(t.scale=i.target.value)},t.handleScaleChange]}}),t._v(" % ")])],1)])},Gu=[];const Ku={components:{},data(){return{isShowPreview:!1,needToChange:["top","left","width","height","fontSize"],scale:"100%",timer:null}},computed:ce(["componentData","canvasStyleData","areaData","curComponent","curComponentIndex"]),created(){zt.$on("preview",this.preview),zt.$on("save",this.save),zt.$on("clearCanvas",this.clearCanvas),this.scale=this.canvasStyleData.scale},methods:{format(t){},getOriginStyle(t){},handleScaleChange(){},lock(){},unlock(){},compose(){},decompose(){},undo(){},redo(){},handleFileChange(){},preview(){},save(){},clearCanvas(){},handlePreviewChange(){}}},Br={};var Ju=Ht(Ku,Xu,Gu,!1,ju,"2b8f57ca",null,null);function ju(t){for(let e in Br)this[e]=Br[e]}var Qu=function(){return Ju.exports}(),tc=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"component-list",on:{dragstart:t.handleDragStart}},t._l(t.componentList,function(i,n){return r("div",{key:n,staticClass:"list",attrs:{draggable:"","data-index":n}},[r("span",{staticClass:"iconfont",class:"icon-"+i.icon}),r("span",[t._v(t._s(i.label))])])}),0)},ec=[];const rc={data(){return{componentList:kr}},methods:{handleDragStart(t){t.dataTransfer.setData("index",t.target.dataset.index)}}},Tr={};var nc=Ht(rc,tc,ec,!1,ic,"4757d6e4",null,null);function ic(t){for(let e in Tr)this[e]=Tr[e]}var Rn=function(){return nc.exports}(),oc=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("svg",{staticClass:"grid",attrs:{width:"100%",height:"100%",xmlns:"http://www.w3.org/2000/svg"}},[r("defs",[r("pattern",{attrs:{id:"smallGrid",width:"7.236328125",height:"7.236328125",patternUnits:"userSpaceOnUse"}},[r("path",{attrs:{d:"M 7.236328125 0 L 0 0 0 7.236328125",fill:"none",stroke:"rgba(207, 207, 207, 0.3)","stroke-width":"1"}})]),r("pattern",{attrs:{id:"grid",width:"36.181640625",height:"36.181640625",patternUnits:"userSpaceOnUse"}},[r("rect",{attrs:{width:"36.181640625",height:"36.181640625",fill:"url(#smallGrid)"}}),r("path",{attrs:{d:"M 36.181640625 0 L 0 0 0 36.181640625",fill:"none",stroke:"rgba(186, 186, 186, 0.5)","stroke-width":"1"}})])]),r("rect",{attrs:{width:"100%",height:"100%",fill:"url(#grid)"}})])},ac=[];const sc={},Lr={};var uc=Ht(sc,oc,ac,!1,cc,"5a5f3a06",null,null);function cc(t){for(let e in Lr)this[e]=Lr[e]}var fc=function(){return uc.exports}(),lc=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{directives:[{name:"show",rawName:"v-show",value:t.menuShow,expression:"menuShow"}],staticClass:"contextmenu",style:{top:t.menuTop+"px",left:t.menuLeft+"px"}},[r("ul",{on:{mouseup:t.handleMouseUp}},[t.curComponent?[t.curComponent.isLock?r("li",{on:{click:t.unlock}},[t._v("\u89E3\u9501")]):[r("li",{on:{click:t.copy}},[t._v("\u590D\u5236")]),r("li",{on:{click:t.paste}},[t._v("\u7C98\u8D34")]),r("li",{on:{click:t.cut}},[t._v("\u526A\u5207")]),r("li",{on:{click:t.deleteComponent}},[t._v("\u5220\u9664")]),r("li",{on:{click:t.lock}},[t._v("\u9501\u5B9A")]),r("li",{on:{click:t.topComponent}},[t._v("\u7F6E\u9876")]),r("li",{on:{click:t.bottomComponent}},[t._v("\u7F6E\u5E95")]),r("li",{on:{click:t.upComponent}},[t._v("\u4E0A\u79FB")]),r("li",{on:{click:t.downComponent}},[t._v("\u4E0B\u79FB")])]]:r("li",{on:{click:t.paste}},[t._v("\u7C98\u8D34")])],2)])},hc=[];const pc={data(){return{copyData:null}},computed:ce(["menuTop","menuLeft","menuShow","curComponent"]),methods:{lock(){this.$store.commit("lock")},unlock(){this.$store.commit("unlock")},handleMouseUp(){this.$store.commit("setClickComponentStatus",!0)},cut(){this.$store.commit("cut")},copy(){this.$store.commit("copy")},paste(){this.$store.commit("paste",!0),this.$store.commit("recordSnapshot")},deleteComponent(){this.$store.commit("deleteComponent"),this.$store.commit("recordSnapshot")},upComponent(){this.$store.commit("upComponent"),this.$store.commit("recordSnapshot")},downComponent(){this.$store.commit("downComponent"),this.$store.commit("recordSnapshot")},topComponent(){this.$store.commit("topComponent"),this.$store.commit("recordSnapshot")},bottomComponent(){this.$store.commit("bottomComponent"),this.$store.commit("recordSnapshot")}}},Rr={};var vc=Ht(pc,lc,hc,!1,dc,"6a2116bc",null,null);function dc(t){for(let e in Rr)this[e]=Rr[e]}var mc=function(){return vc.exports}(),gc=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"shape",class:{active:t.active},on:{click:t.selectCurComponent,mousedown:t.handleMouseDownOnShape}},[r("span",{directives:[{name:"show",rawName:"v-show",value:t.isActive(),expression:"isActive()"}],staticClass:"iconfont icon-xiangyouxuanzhuan",on:{mousedown:t.handleRotate}}),r("span",{directives:[{name:"show",rawName:"v-show",value:t.element.isLock,expression:"element.isLock"}],staticClass:"iconfont icon-suo"}),t._l(t.isActive()?t.pointList:[],function(i){return r("div",{key:i,staticClass:"shape-point",style:t.getPointStyle(i),on:{mousedown:function(n){return t.handleMouseDownOnPoint(i,n)}}})}),t._t("default")],2)},wc=[];const yc={props:{active:{type:Boolean,default:!1},element:{require:!0,type:Object,default:()=>{}},defaultStyle:{require:!0,type:Object,default:()=>{}},index:{require:!0,type:[Number,String],default:0}},data(){return{pointList:["lt","t","rt","r","rb","b","lb","l"],initialAngle:{lt:0,t:45,rt:90,r:135,rb:180,b:225,lb:270,l:315},angleToCursor:[{start:338,end:23,cursor:"nw"},{start:23,end:68,cursor:"n"},{start:68,end:113,cursor:"ne"},{start:113,end:158,cursor:"e"},{start:158,end:203,cursor:"se"},{start:203,end:248,cursor:"s"},{start:248,end:293,cursor:"sw"},{start:293,end:338,cursor:"w"}],cursors:{}}},computed:ce(["curComponent","editor"]),mounted(){this.curComponent&&(this.cursors=this.getCursor()),zt.$on("runAnimation",()=>{this.element==this.curComponent&&(console.log("this.$el",this.$el),fu(this.$el,this.curComponent.animations))}),zt.$on("stopAnimation",()=>{this.$el.classList.remove("animated","infinite")})},methods:{isActive(){return this.active&&!this.element.isLock},getPointStyle(t){const{width:e,height:r}=this.defaultStyle,i=/t/.test(t),n=/b/.test(t),o=/l/.test(t),c=/r/.test(t);let h=0,l=0;return t.length===2?(h=o?0:e,l=i?0:r):((i||n)&&(h=e/2,l=i?0:r),(o||c)&&(h=o?0:e,l=Math.floor(r/2))),{marginLeft:"-4px",marginTop:"-4px",left:`${h}px`,top:`${l}px`,cursor:this.cursors[t]}},getCursor(){const{angleToCursor:t,initialAngle:e,pointList:r,curComponent:i}=this,n=Ue(i.style.rotate),o={};let c=-1;return r.forEach(h=>{const l=Ue(e[h]+n),v=t.length;for(;;){c=(c+1)%v;const s=t[c];if(l<23||l>=338){o[h]="nw-resize";return}if(s.start<=l&&l<s.end){o[h]=s.cursor+"-resize";return}}}),o},handleRotate(t){},handleMouseDownOnShape(t){if(this.$store.commit("setInEditorStatus",!0),this.$store.commit("setClickComponentStatus",!0),this.element.component!="v-text"&&this.element.component!="rect-shape"&&t.preventDefault(),t.stopPropagation(),this.$store.commit("setCurComponent",{component:this.element,index:this.index}),this.element.isLock)return;this.cursors=this.getCursor();const e={...this.defaultStyle},r=t.clientY,i=t.clientX,n=Number(e.top),o=Number(e.left);let c=!1;const h=v=>{c=!0;const s=v.clientX,a=v.clientY;e.top=a-r+n,e.left=s-i+o,this.$store.commit("setShapeStyle",e),this.$nextTick(()=>{zt.$emit("move",a-r>0,s-i>0)})},l=()=>{c&&this.$store.commit("recordSnapshot"),zt.$emit("unmove"),document.removeEventListener("mousemove",h),document.removeEventListener("mouseup",l)};document.addEventListener("mousemove",h),document.addEventListener("mouseup",l)},handleMouseDownOnPoint(t,e){e.stopPropagation(),e.preventDefault(),this.$store.commit("setInEditorStatus",!0),this.$store.commit("setClickComponentStatus",!0);const r={...this.defaultStyle},i=r.width/r.height,n={x:r.left+r.width/2,y:r.top+r.height/2},o=this.editor.getBoundingClientRect(),c=e.target.getBoundingClientRect(),h={x:Math.round(c.left-o.left+e.target.offsetWidth/2),y:Math.round(c.top-o.top+e.target.offsetHeight/2)},l={x:n.x-(h.x-n.x),y:n.y-(h.y-n.y)};let v=!1;const s=this.isNeedLockProportion(),a=p=>{v=!0;const d={x:p.clientX-o.left,y:p.clientY-o.top};Wu(t,r,d,i,s,{center:n,curPoint:h,symmetricPoint:l}),this.$store.commit("setShapeStyle",r)},f=()=>{document.removeEventListener("mousemove",a),document.removeEventListener("mouseup",f),v&&this.$store.commit("recordSnapshot")};document.addEventListener("mousemove",a),document.addEventListener("mouseup",f)},selectCurComponent(t){t.stopPropagation(),t.preventDefault(),this.$store.commit("hideContextMenu")},isNeedLockProportion(){if(this.element.componnet!="Group")return!1;const t=[0,90,180,360];for(const e of this.element.propValue)if(!t.includes(Ue(parseInt(e.style.rotate))))return!0;return!1}}},qr={};var _c=Ht(yc,gc,wc,!1,bc,"13f892a4",null,null);function bc(t){for(let e in qr)this[e]=qr[e]}var Mc=function(){return _c.exports}(),Nc=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"mark-line"},t._l(t.lines,function(i){return r("div",{directives:[{name:"show",rawName:"v-show",value:t.lineStatus[i]||!1,expression:"lineStatus[line] || false"}],key:i,ref:i,refInFor:!0,staticClass:"line",class:i.includes("x")?"xline":"yline"})}),0)},xc=[];const Sc={data(){return{lines:["xt","xc","xb","yl","yc","yr"],diff:3,lineStatus:{xt:!1,xc:!1,xb:!1,yl:!1,yc:!1,yr:!1}}},computed:ce(["componentData","curComponent"]),mounted(){zt.$on("move",(t,e)=>{this.showLine(t,e)}),zt.$on("unmove",()=>{this.hideLine()})},methods:{hideLine(){Object.keys(this.lineStatus).forEach(t=>{this.lineStatus[t]=!1})},showLine(t,e){this.$refs,this.componentData,je(this.curComponent.style)}}},Ur={};var Ec=Ht(Sc,Nc,xc,!1,Cc,null,null,null);function Cc(t){for(let e in Ur)this[e]=Ur[e]}var Ac=function(){return Ec.exports}(),Dc=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"area",style:{left:t.start.x+"px",top:t.start.y+"px",width:t.width+"px",height:t.height+"px"}})},$c=[];const Oc={props:{start:{type:Object,default:()=>{}},width:{type:Number,default:0},height:{type:Number,default:0}}},Zr={};var Pc=Ht(Oc,Dc,$c,!1,zc,"38da664e",null,null);function zc(t){for(let e in Zr)this[e]=Zr[e]}var Ic=function(){return Pc.exports}(),Fc=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"editor",class:{edit:t.isEdit},style:{width:t.changeStyleWithScale(t.canvasStyleData.width)+"px",height:t.changeStyleWithScale(t.canvasStyleData.height)+"px"},attrs:{id:"editor"},on:{contextmenu:t.handleContextMenu,mousedown:t.handleMouseDown}},[r("Grid"),t._l(t.componentData,function(i,n){return r("Shape",{key:i.id,class:{lock:i.isLock},style:t.getShapeStyle(i.style),attrs:{"default-style":i.style,active:i.id==(t.curComponent||{}).id,element:i,index:n}},[i.component!="v-text"?r(i.component,{tag:"component",staticClass:"component",style:t.getComponentStyle(i.style),attrs:{id:"component"+i.id,"prop-value":i.propValue,element:i}}):r(i.component,{tag:"component",staticClass:"component",style:t.getComponentStyle(i.style),attrs:{id:"component"+i.id,"prop-value":i.propValue,element:i},on:{input:t.handleInput}})],1)}),r("ContextMenu"),r("MarkLine"),r("Area",{directives:[{name:"show",rawName:"v-show",value:t.isShowArea,expression:"isShowArea"}],attrs:{start:t.start,width:t.width,height:t.height}})],2)},Bc=[];const Tc=(t,e)=>{console.log("element, text",t,e);let{lineHeight:r,fontSize:i,height:n}=t.style;r===""&&(r=1.5);const o=(e.split("<br>").length-1)*r*i;return n>o?n:o},Lc={components:{Grid:fc,ContextMenu:mc,MarkLine:Ac,Shape:Mc,ComponentList:Rn,Area:Ic},props:{isEdit:{type:Boolean,default:!0}},data(){return{editorX:0,editorY:0,start:{x:0,y:0},width:0,height:0,isShowArea:!1}},computed:ce(["componentData","curComponent","canvasStyleData","editor"]),mounted(){this.$store.commit("getEditor"),zt.$on("hideArea",()=>{this.hideArea()})},methods:{changeStyleWithScale:cu,handleInput(t,e){this.$store.commit("setShapeStyle",{height:Tc(t,e)})},handleContextMenu(t){t.stopPropagation(),t.preventDefault();let e=t.target,r=t.offsetY,i=t.offsetX;for(;e instanceof SVGElement;)e=e.parentNode;for(;!e.className.includes("editor");)i+=e.offsetLeft,r+=e.offsetTop,e=e.parentNode;this.$store.commit("showContextMenu",{top:r,left:i})},handleMouseDown(t){(!this.curComponent||this.curComponent.component!="v-text"&&this.curComponent.component!="rect-shape")&&t.preventDefault(),this.hideArea();const e=this.editor.getBoundingClientRect();this.editorX=e.x,this.editorY=e.y;const r=t.clientX,i=t.clientY;this.start.x=r-this.editorX,this.start.y=i-this.editorY,this.isShowArea=!0;const n=c=>{this.width=Math.abs(c.clientX-r),this.height=Math.abs(c.clientY-i),c.clientX<r&&(this.start.x=c.clientX-this.editorX),c.clientY<i&&(this.start.y=c.clientY-this.editorY),console.log("move",this.start,this.width,this.height)},o=c=>{if(document.removeEventListener("mousemove",n),document.removeEventListener("mouseup",o),c.clientX==r&&c.clientY==i){this.hideArea();return}this.createGroup()};document.addEventListener("mousemove",n),document.addEventListener("mouseup",o)},createGroup(){const t=this.getSelectArea();if(t.length<=1){this.hideArea();return}let e=1/0,r=1/0,i=-1/0,n=-1/0;t.forEach(o=>{let c={};o.component==="Group"?o.propValue.forEach(h=>{const l=pi(`#component${h.id}`).getBoundingClientRect();c.left=l.left-this.editorX,c.top=l.top-this.editorY,c.right=l.right-this.editorX,c.bottom=l.bottom-this.editorY,c.left<r&&(r=c.left),c.top<e&&(e=c.top),c.right>i&&(i=c.right),c.bottom>n&&(n=c.bottom)}):c=je(o.style),c.left<r&&(r=c.left),c.top<e&&(e=c.top),c.right>i&&(i=c.right),c.bottom>n&&(n=c.bottom)}),this.start.x=r,this.start.y=e,this.width=i-r,this.height=n-e,this.$store.commit("setAreaData",{style:{left:r,top:e,width:this.width,height:this.height},components:t})},getSelectArea(){const t=[],{x:e,y:r}=this.start;return this.componentData.forEach(i=>{if(i.isLock)return;const{left:n,top:o,width:c,height:h}=je(i.style);e<=n&&r<=o&&n+c<=e+this.width&&o+h<=r+this.height&&t.push(i)}),t},hideArea(){this.isShowArea=!1,this.width=0,this.height=0,this.$store.commit("setAreaData",{style:{left:0,top:0,width:0,height:0},components:[]})},getShapeStyle(t){const e={};return["width","height","top","left","rotate"].forEach(r=>{r!="rotate"?e[r]=t[r]+"px":e.transform="rotate("+t[r]+"deg)"}),e},getComponentStyle(t){return lu(t,["top","left","width","height","rotate"])}}},Vr={};var Rc=Ht(Lc,Fc,Bc,!1,qc,"49cac0d5",null,null);function qc(t){for(let e in Vr)this[e]=Vr[e]}var Uc=function(){return Rc.exports}(),Zc=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"home"},[r("Toolbar"),r("main",[r("section",{staticClass:"left"},[r("ComponentList")],1),r("section",{staticClass:"center"},[r("div",{staticClass:"content",on:{drop:t.handleDrop,dragover:t.handleDragOver,mousedown:t.handleMouseDown,mouseup:t.deselectCurComponent}},[r("Editor")],1)]),r("section",{staticClass:"right"},[t._v("right")])])],1)},Vc=[];const qn=t=>{t.forEach(e=>{e.id=Wr(),e.component==="Group"&&qn(e.propValue)})},Hc={components:{Toolbar:Qu,ComponentList:Rn,Editor:Uc},computed:ce(["componentData","curComponent","isClickComponent","canvasStyleData","editor"]),created(){this.restore(),Tu()},methods:{restore(){const t=localStorage.getItem("canvasData"),e=localStorage.getItem("canvasStyle");t&&this.$store.commit("setComponentData",qn(JSON.parse(t))),e&&this.$store.commit("setCanvasStyle",e)},handleDrop(t){console.log("handleDrop",t),t.preventDefault(),t.stopPropagation();const e=t.dataTransfer.getData("index"),r=this.editor.getBoundingClientRect();if(e){const i=vi(kr[e]);i.style.top=t.clientY-r.y,i.style.left=t.clientX-r.x,i.id=Wr(),this.$store.commit("addComponent",{component:i}),this.$store.commit("recordSnapshot")}},handleDragOver(t){console.log("handleDragOver",t),t.preventDefault(),t.dataTransfer.dropEffect="copy"},handleMouseDown(t){t.stopPropagation(),this.$store.commit("setClickComponentStatus",!1),this.$store.commit("setInEditorStatus",!0)},deselectCurComponent(t){}}},Hr={};var Yc=Ht(Hc,Zc,Vc,!1,kc,null,null,null);function kc(t){for(let e in Hr)this[e]=Hr[e]}var Xc=function(){return Yc.exports}();export{Xc as default};
