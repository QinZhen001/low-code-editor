import{c as si,g as Rt,s as fe,e as Pe,m as sr,n as Je,a as Ut,d as ui,b as Zt}from"./index.70d99022.js";function qr(){return qr=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},qr.apply(this,arguments)}var Vt={epsilon:1e-12,matrix:"Matrix",number:"number",precision:64,predictable:!1,randomSeed:null};function le(e){return typeof e=="number"}function Ce(e){return!e||typeof e!="object"||typeof e.constructor!="function"?!1:e.isBigNumber===!0&&typeof e.constructor.prototype=="object"&&e.constructor.prototype.isBigNumber===!0||typeof e.constructor.isDecimal=="function"&&e.constructor.isDecimal(e)===!0}function Gr(e){return e&&typeof e=="object"&&Object.getPrototypeOf(e).isComplex===!0||!1}function Jr(e){return e&&typeof e=="object"&&Object.getPrototypeOf(e).isFraction===!0||!1}function Yr(e){return e&&e.constructor.prototype.isUnit===!0||!1}function Ue(e){return typeof e=="string"}var se=Array.isArray;function _e(e){return e&&e.constructor.prototype.isMatrix===!0||!1}function Ht(e){return Array.isArray(e)||_e(e)}function fi(e){return e&&e.isDenseMatrix&&e.constructor.prototype.isMatrix===!0||!1}function ci(e){return e&&e.isSparseMatrix&&e.constructor.prototype.isMatrix===!0||!1}function kt(e){return e&&e.constructor.prototype.isRange===!0||!1}function Nr(e){return e&&e.constructor.prototype.isIndex===!0||!1}function li(e){return typeof e=="boolean"}function Wt(e){return e&&e.constructor.prototype.isResultSet===!0||!1}function Kt(e){return e&&e.constructor.prototype.isHelp===!0||!1}function hi(e){return typeof e=="function"}function vi(e){return e instanceof Date}function pi(e){return e instanceof RegExp}function di(e){return!!(e&&typeof e=="object"&&e.constructor===Object&&!Gr(e)&&!Jr(e))}function mi(e){return e===null}function gi(e){return e===void 0}function wi(e){return e&&e.isAccessorNode===!0&&e.constructor.prototype.isNode===!0||!1}function yi(e){return e&&e.isArrayNode===!0&&e.constructor.prototype.isNode===!0||!1}function _i(e){return e&&e.isAssignmentNode===!0&&e.constructor.prototype.isNode===!0||!1}function bi(e){return e&&e.isBlockNode===!0&&e.constructor.prototype.isNode===!0||!1}function Ni(e){return e&&e.isConditionalNode===!0&&e.constructor.prototype.isNode===!0||!1}function Mi(e){return e&&e.isConstantNode===!0&&e.constructor.prototype.isNode===!0||!1}function Ei(e){return e&&e.isFunctionAssignmentNode===!0&&e.constructor.prototype.isNode===!0||!1}function Si(e){return e&&e.isFunctionNode===!0&&e.constructor.prototype.isNode===!0||!1}function xi(e){return e&&e.isIndexNode===!0&&e.constructor.prototype.isNode===!0||!1}function Gt(e){return e&&e.isNode===!0&&e.constructor.prototype.isNode===!0||!1}function Ci(e){return e&&e.isObjectNode===!0&&e.constructor.prototype.isNode===!0||!1}function Ai(e){return e&&e.isOperatorNode===!0&&e.constructor.prototype.isNode===!0||!1}function Di(e){return e&&e.isParenthesisNode===!0&&e.constructor.prototype.isNode===!0||!1}function Oi(e){return e&&e.isRangeNode===!0&&e.constructor.prototype.isNode===!0||!1}function zi(e){return e&&e.isSymbolNode===!0&&e.constructor.prototype.isNode===!0||!1}function Jt(e){return e&&e.constructor.prototype.isChain===!0||!1}function We(e){var r=typeof e;return r==="object"?e===null?"null":Array.isArray(e)?"Array":e instanceof Date?"Date":e instanceof RegExp?"RegExp":Ce(e)?"BigNumber":Gr(e)?"Complex":Jr(e)?"Fraction":_e(e)?"Matrix":Yr(e)?"Unit":Nr(e)?"Index":kt(e)?"Range":Wt(e)?"ResultSet":Gt(e)?e.type:Jt(e)?"Chain":Kt(e)?"Help":"Object":r==="function"?"Function":r}function pe(e){var r=typeof e;if(r==="number"||r==="string"||r==="boolean"||e===null||e===void 0)return e;if(typeof e.clone=="function")return e.clone();if(Array.isArray(e))return e.map(function(t){return pe(t)});if(e instanceof Date)return new Date(e.valueOf());if(Ce(e))return e;if(e instanceof RegExp)throw new TypeError("Cannot clone "+e);return Fi(e,pe)}function Fi(e,r){var t={};for(var i in e)fr(e,i)&&(t[i]=r(e[i]));return t}function Yt(e,r){for(var t in r)fr(r,t)&&(e[t]=r[t]);return e}function dr(e,r){var t,i,n;if(Array.isArray(e)){if(!Array.isArray(r)||e.length!==r.length)return!1;for(i=0,n=e.length;i<n;i++)if(!dr(e[i],r[i]))return!1;return!0}else{if(typeof e=="function")return e===r;if(e instanceof Object){if(Array.isArray(r)||!(r instanceof Object))return!1;for(t in e)if(!(t in r)||!dr(e[t],r[t]))return!1;for(t in r)if(!(t in e))return!1;return!0}else return e===r}}function fr(e,r){return e&&Object.hasOwnProperty.call(e,r)}function $i(e,r){for(var t={},i=0;i<r.length;i++){var n=r[i],a=e[n];a!==void 0&&(t[n]=a)}return t}var Ii=["Matrix","Array"],Pi=["number","BigNumber","Fraction"],lr=function(r){if(r)throw new Error(`The global config is readonly. 
Please create a mathjs instance if you want to change the default configuration. 
Example:

  import { create, all } from 'mathjs';
  const mathjs = create(all);
  mathjs.config({ number: 'BigNumber' });
`);return Object.freeze(Vt)};qr(lr,Vt,{MATRIX_OPTIONS:Ii,NUMBER_OPTIONS:Pi});var Xt={exports:{}};(function(e,r){(function(t,i){e.exports=i()})(si,function(){function t(){return!0}function i(){return!1}function n(){}function a(){var l=[{name:"number",test:function(E){return typeof E=="number"}},{name:"string",test:function(E){return typeof E=="string"}},{name:"boolean",test:function(E){return typeof E=="boolean"}},{name:"Function",test:function(E){return typeof E=="function"}},{name:"Array",test:Array.isArray},{name:"Date",test:function(E){return E instanceof Date}},{name:"RegExp",test:function(E){return E instanceof RegExp}},{name:"Object",test:function(E){return typeof E=="object"&&E!==null&&E.constructor===Object}},{name:"null",test:function(E){return E===null}},{name:"undefined",test:function(E){return E===void 0}}],v={name:"any",test:t},p=[],d=[],s={types:l,conversions:d,ignore:p};function o(E){var A=De(s.types,function(C){return C.name===E});if(A)return A;if(E==="any")return v;var D=De(s.types,function(C){return C.name.toLowerCase()===E.toLowerCase()});throw new TypeError('Unknown type "'+E+'"'+(D?'. Did you mean "'+D.name+'"?':""))}function f(E){return E===v?999:s.types.indexOf(E)}function c(E){var A=De(s.types,function(D){return D.test(E)});if(A)return A.name;throw new TypeError("Value has unknown type. Value: "+E)}function h(E,A){if(!E.signatures)throw new TypeError("Function is no typed-function");var D;if(typeof A=="string"){D=A.split(",");for(var C=0;C<D.length;C++)D[C]=D[C].trim()}else if(Array.isArray(A))D=A;else throw new TypeError("String array or a comma separated string expected");var T=D.join(","),k=E.signatures[T];if(k)return k;throw new TypeError("Signature not found (signature: "+(E.name||"unnamed")+"("+D.join(", ")+"))")}function u(E,A){var D=c(E);if(A===D)return E;for(var C=0;C<s.conversions.length;C++){var T=s.conversions[C];if(T.from===D&&T.to===A)return T.convert(E)}throw new Error("Cannot convert from "+D+" to "+A)}function m(E){return E.map(function(A){var D=A.types.map(S);return(A.restParam?"...":"")+D.join("|")}).join(",")}function g(E,A){var D=E.indexOf("...")===0,C=D?E.length>3?E.slice(3):"any":E,T=C.split("|").map(me).filter(oe).filter(ve),k=V(A,T),K=T.map(function(L){var Y=o(L);return{name:L,typeIndex:f(Y),test:Y.test,conversion:null,conversionIndex:-1}}),U=k.map(function(L){var Y=o(L.from);return{name:L.from,typeIndex:f(Y),test:Y.test,conversion:L,conversionIndex:A.indexOf(L)}});return{types:K.concat(U),restParam:D}}function N(E,A,D){var C=[];return E.trim()!==""&&(C=E.split(",").map(me).map(function(T,k,K){var U=g(T,D);if(U.restParam&&k!==K.length-1)throw new SyntaxError('Unexpected rest parameter "'+T+'": only allowed for the last parameter');return U})),C.some(ce)?null:{params:C,fn:A}}function w(E){var A=Ae(E);return A?A.restParam:!1}function M(E){return E.types.some(function(A){return A.conversion!=null})}function _(E){if(!E||E.types.length===0)return t;if(E.types.length===1)return o(E.types[0].name).test;if(E.types.length===2){var A=o(E.types[0].name).test,D=o(E.types[1].name).test;return function(k){return A(k)||D(k)}}else{var C=E.types.map(function(T){return o(T.name).test});return function(k){for(var K=0;K<C.length;K++)if(C[K](k))return!0;return!1}}}function y(E){var A,D,C;if(w(E)){A=ie(E).map(_);var T=A.length,k=_(Ae(E)),K=function(U){for(var L=T;L<U.length;L++)if(!k(U[L]))return!1;return!0};return function(L){for(var Y=0;Y<A.length;Y++)if(!A[Y](L[Y]))return!1;return K(L)&&L.length>=T+1}}else return E.length===0?function(L){return L.length===0}:E.length===1?(D=_(E[0]),function(L){return D(L[0])&&L.length===1}):E.length===2?(D=_(E[0]),C=_(E[1]),function(L){return D(L[0])&&C(L[1])&&L.length===2}):(A=E.map(_),function(L){for(var Y=0;Y<A.length;Y++)if(!A[Y](L[Y]))return!1;return L.length===A.length})}function x(E,A){return A<E.params.length?E.params[A]:w(E.params)?Ae(E.params):null}function b(E,A,D){var C=x(E,A),T=C?D?C.types.filter(O):C.types:[];return T.map(S)}function S(E){return E.name}function O(E){return E.conversion===null||E.conversion===void 0}function z(E,A){var D=Ve(Te(E,function(C){return b(C,A,!1)}));return D.indexOf("any")!==-1?["any"]:D}function I(E,A,D){var C,T,k=E||"unnamed",K=D,U;for(U=0;U<A.length;U++){var L=K.filter(function(Le){var Fr=_(x(Le,U));return(U<Le.params.length||w(Le.params))&&Fr(A[U])});if(L.length===0){if(T=z(K,U),T.length>0){var Y=c(A[U]);return C=new TypeError("Unexpected type of argument in function "+k+" (expected: "+T.join(" or ")+", actual: "+Y+", index: "+U+")"),C.data={category:"wrongType",fn:k,index:U,actual:Y,expected:T},C}}else K=L}var Fe=K.map(function(Le){return w(Le.params)?1/0:Le.params.length});if(A.length<Math.min.apply(null,Fe))return T=z(K,U),C=new TypeError("Too few arguments in function "+k+" (expected: "+T.join(" or ")+", index: "+A.length+")"),C.data={category:"tooFewArgs",fn:k,index:A.length,expected:T},C;var $e=Math.max.apply(null,Fe);return A.length>$e?(C=new TypeError("Too many arguments in function "+k+" (expected: "+$e+", actual: "+A.length+")"),C.data={category:"tooManyArgs",fn:k,index:A.length,expectedLength:$e},C):(C=new TypeError('Arguments of type "'+A.join(", ")+'" do not match any of the defined signatures of function '+k+"."),C.data={category:"mismatch",actual:A.map(c)},C)}function q(E){for(var A=999,D=0;D<E.types.length;D++)O(E.types[D])&&(A=Math.min(A,E.types[D].typeIndex));return A}function P(E){for(var A=999,D=0;D<E.types.length;D++)O(E.types[D])||(A=Math.min(A,E.types[D].conversionIndex));return A}function B(E,A){var D;return D=E.restParam-A.restParam,D!==0||(D=M(E)-M(A),D!==0)||(D=q(E)-q(A),D!==0)?D:P(E)-P(A)}function $(E,A){var D=Math.min(E.params.length,A.params.length),C,T;if(T=E.params.some(M)-A.params.some(M),T!==0)return T;for(C=0;C<D;C++)if(T=M(E.params[C])-M(A.params[C]),T!==0)return T;for(C=0;C<D;C++)if(T=B(E.params[C],A.params[C]),T!==0)return T;return E.params.length-A.params.length}function V(E,A){var D={};return E.forEach(function(C){A.indexOf(C.from)===-1&&A.indexOf(C.to)!==-1&&!D[C.from]&&(D[C.from]=C)}),Object.keys(D).map(function(C){return D[C]})}function R(E,A){var D=A;if(E.some(M)){var C=w(E),T=E.map(H);D=function(){for(var L=[],Y=C?arguments.length-1:arguments.length,Fe=0;Fe<Y;Fe++)L[Fe]=T[Fe](arguments[Fe]);return C&&(L[Y]=arguments[Y].map(T[Y])),A.apply(this,L)}}var k=D;if(w(E)){var K=E.length-1;k=function(){return D.apply(this,be(arguments,0,K).concat([be(arguments,K)]))}}return k}function H(E){var A,D,C,T,k=[],K=[];switch(E.types.forEach(function(U){U.conversion&&(k.push(o(U.conversion.from).test),K.push(U.conversion.convert))}),K.length){case 0:return function(L){return L};case 1:return A=k[0],C=K[0],function(L){return A(L)?C(L):L};case 2:return A=k[0],D=k[1],C=K[0],T=K[1],function(L){return A(L)?C(L):D(L)?T(L):L};default:return function(L){for(var Y=0;Y<K.length;Y++)if(k[Y](L))return K[Y](L);return L}}}function J(E){var A={};return E.forEach(function(D){D.params.some(M)||j(D.params,!0).forEach(function(C){A[m(C)]=D.fn})}),A}function j(E,A){function D(C,T,k){if(T<C.length){var K=C[T],U=A?K.types.filter(O):K.types,L;if(K.restParam){var Y=U.filter(O);L=Y.length<U.length?[Y,U]:[U]}else L=U.map(function($e){return[$e]});return Te(L,function($e){return D(C,T+1,k.concat([$e]))})}else{var Fe=k.map(function($e,Le){return{types:$e,restParam:Le===C.length-1&&w(C)}});return[Fe]}}return D(E,0,[])}function ee(E,A){for(var D=Math.max(E.params.length,A.params.length),C=0;C<D;C++){var T=b(E,C,!0),k=b(A,C,!0);if(!Ne(T,k))return!1}var K=E.params.length,U=A.params.length,L=w(E.params),Y=w(A.params);return L?Y?K===U:U>=K:Y?K>=U:K===U}function X(E,A){if(Object.keys(A).length===0)throw new SyntaxError("No signatures provided");var D=[];Object.keys(A).map(function(ae){return N(ae,A[ae],s.conversions)}).filter(xe).forEach(function(ae){var Ee=De(D,function(qe){return ee(qe,ae)});if(Ee)throw new TypeError('Conflicting signatures "'+m(Ee.params)+'" and "'+m(ae.params)+'".');D.push(ae)});var C=Te(D,function(ae){var Ee=ae?j(ae.params,!1):[];return Ee.map(function(qe){return{params:qe,fn:ae.fn}})}).filter(xe);C.sort($);var T=C[0]&&C[0].params.length<=2&&!w(C[0].params),k=C[1]&&C[1].params.length<=2&&!w(C[1].params),K=C[2]&&C[2].params.length<=2&&!w(C[2].params),U=C[3]&&C[3].params.length<=2&&!w(C[3].params),L=C[4]&&C[4].params.length<=2&&!w(C[4].params),Y=C[5]&&C[5].params.length<=2&&!w(C[5].params),Fe=T&&k&&K&&U&&L&&Y,$e=C.map(function(ae){return y(ae.params)}),Le=T?_(C[0].params[0]):i,Fr=k?_(C[1].params[0]):i,Bn=K?_(C[2].params[0]):i,Tn=U?_(C[3].params[0]):i,Ln=L?_(C[4].params[0]):i,qn=Y?_(C[5].params[0]):i,Rn=T?_(C[0].params[1]):i,Un=k?_(C[1].params[1]):i,Zn=K?_(C[2].params[1]):i,Vn=U?_(C[3].params[1]):i,Hn=L?_(C[4].params[1]):i,kn=Y?_(C[5].params[1]):i,je=C.map(function(ae){return R(ae.params,ae.fn)}),Wn=T?je[0]:n,Kn=k?je[1]:n,Gn=K?je[2]:n,Jn=U?je[3]:n,Yn=L?je[4]:n,Xn=Y?je[5]:n,Qn=T?C[0].params.length:-1,jn=k?C[1].params.length:-1,ei=K?C[2].params.length:-1,ri=U?C[3].params.length:-1,ti=L?C[4].params.length:-1,ni=Y?C[5].params.length:-1,ii=Fe?6:0,ai=C.length,oi=function(){for(var Ee=ii;Ee<ai;Ee++)if($e[Ee](arguments))return je[Ee].apply(this,arguments);return s.onMismatch(E,arguments,C)},$r=function ae(Ee,qe){return arguments.length===Qn&&Le(Ee)&&Rn(qe)?Wn.apply(ae,arguments):arguments.length===jn&&Fr(Ee)&&Un(qe)?Kn.apply(ae,arguments):arguments.length===ei&&Bn(Ee)&&Zn(qe)?Gn.apply(ae,arguments):arguments.length===ri&&Tn(Ee)&&Vn(qe)?Jn.apply(ae,arguments):arguments.length===ti&&Ln(Ee)&&Hn(qe)?Yn.apply(ae,arguments):arguments.length===ni&&qn(Ee)&&kn(qe)?Xn.apply(ae,arguments):oi.apply(ae,arguments)};try{Object.defineProperty($r,"name",{value:E})}catch{}return $r.signatures=J(C),$r}function he(E,A,D){throw I(E,A,D)}function ve(E){return s.ignore.indexOf(E)===-1}function me(E){return E.trim()}function oe(E){return!!E}function xe(E){return E!==null}function ce(E){return E.types.length===0}function ie(E){return E.slice(0,E.length-1)}function Ae(E){return E[E.length-1]}function be(E,A,D){return Array.prototype.slice.call(E,A,D)}function te(E,A){return E.indexOf(A)!==-1}function Ne(E,A){for(var D=0;D<E.length;D++)if(te(A,E[D]))return!0;return!1}function De(E,A){for(var D=0;D<E.length;D++)if(A(E[D]))return E[D]}function Ve(E){for(var A={},D=0;D<E.length;D++)A[E[D]]=!0;return Object.keys(A)}function Te(E,A){return Array.prototype.concat.apply([],E.map(A))}function rr(E){for(var A="",D=0;D<E.length;D++){var C=E[D];if((typeof C.signatures=="object"||typeof C.signature=="string")&&C.name!==""){if(A==="")A=C.name;else if(A!==C.name){var T=new Error("Function names do not match (expected: "+A+", actual: "+C.name+")");throw T.data={actual:C.name,expected:A},T}}}return A}function Qe(E){var A,D={};function C(U,L){if(D.hasOwnProperty(U)&&L!==D[U])throw A=new Error('Signature "'+U+'" is defined twice'),A.data={signature:U},A}for(var T=0;T<E.length;T++){var k=E[T];if(typeof k.signatures=="object")for(var K in k.signatures)k.signatures.hasOwnProperty(K)&&(C(K,k.signatures[K]),D[K]=k.signatures[K]);else if(typeof k.signature=="string")C(k.signature,k),D[k.signature]=k;else throw A=new TypeError("Function is no typed-function (index: "+T+")"),A.data={index:T},A}return D}return s=X("typed",{"string, Object":X,Object:function(E){var A=[];for(var D in E)E.hasOwnProperty(D)&&A.push(E[D]);var C=rr(A);return X(C,E)},"...Function":function(E){return X(rr(E),Qe(E))},"string, ...Function":function(E,A){return X(E,Qe(A))}}),s.create=a,s.types=l,s.conversions=d,s.ignore=p,s.onMismatch=he,s.throwMismatchError=he,s.createError=I,s.convert=u,s.find=h,s.addType=function(E,A){if(!E||typeof E.name!="string"||typeof E.test!="function")throw new TypeError("Object with properties {name: string, test: function} expected");if(A!==!1){for(var D=0;D<s.types.length;D++)if(s.types[D].name==="Object"){s.types.splice(D,0,E);return}}s.types.push(E)},s.addConversion=function(E){if(!E||typeof E.from!="string"||typeof E.to!="string"||typeof E.convert!="function")throw new TypeError("Object with properties {from: string, to: string, convert: function} expected");s.conversions.push(E)},s}return a()})})(Xt);var it=Xt.exports;function ye(e){return typeof e=="boolean"?!0:isFinite(e)?e===Math.round(e):!1}function Ir(e,r,t){var i={2:"0b",8:"0o",16:"0x"},n=i[r],a="";if(t){if(t<1)throw new Error("size must be in greater than 0");if(!ye(t))throw new Error("size must be an integer");if(e>2**(t-1)-1||e<-(2**(t-1)))throw new Error("Value must be in range [-2^".concat(t-1,", 2^").concat(t-1,"-1]"));if(!ye(e))throw new Error("Value must be an integer");e<0&&(e=e+2**t),a="i".concat(t)}var l="";return e<0&&(e=-e,l="-"),"".concat(l).concat(n).concat(e.toString(r)).concat(a)}function Rr(e,r){if(typeof r=="function")return r(e);if(e===1/0)return"Infinity";if(e===-1/0)return"-Infinity";if(isNaN(e))return"NaN";var t="auto",i,n;if(r&&(r.notation&&(t=r.notation),le(r)?i=r:le(r.precision)&&(i=r.precision),r.wordSize&&(n=r.wordSize,typeof n!="number")))throw new Error('Option "wordSize" must be a number');switch(t){case"fixed":return Ti(e,i);case"exponential":return Qt(e,i);case"engineering":return Bi(e,i);case"bin":return Ir(e,2,n);case"oct":return Ir(e,8,n);case"hex":return Ir(e,16,n);case"auto":return Li(e,i,r&&r).replace(/((\.\d*?)(0+))($|e)/,function(){var a=arguments[2],l=arguments[4];return a!=="."?a+l:l});default:throw new Error('Unknown notation "'+t+'". Choose "auto", "exponential", "fixed", "bin", "oct", or "hex.')}}function Mr(e){var r=String(e).toLowerCase().match(/^(-?)(\d+\.?\d*)(e([+-]?\d+))?$/);if(!r)throw new SyntaxError("Invalid number "+e);var t=r[1],i=r[2],n=parseFloat(r[4]||"0"),a=i.indexOf(".");n+=a!==-1?a-1:i.length-1;var l=i.replace(".","").replace(/^0*/,function(v){return n-=v.length,""}).replace(/0*$/,"").split("").map(function(v){return parseInt(v)});return l.length===0&&(l.push(0),n++),{sign:t,coefficients:l,exponent:n}}function Bi(e,r){if(isNaN(e)||!isFinite(e))return String(e);var t=Mr(e),i=Er(t,r),n=i.exponent,a=i.coefficients,l=n%3===0?n:n<0?n-3-n%3:n-n%3;if(le(r))for(;r>a.length||n-l+1>a.length;)a.push(0);else for(var v=Math.abs(n-l)-(a.length-1),p=0;p<v;p++)a.push(0);for(var d=Math.abs(n-l),s=1;d>0;)s++,d--;var o=a.slice(s).join(""),f=le(r)&&o.length||o.match(/[1-9]/)?"."+o:"",c=a.slice(0,s).join("")+f+"e"+(n>=0?"+":"")+l.toString();return i.sign+c}function Ti(e,r){if(isNaN(e)||!isFinite(e))return String(e);var t=Mr(e),i=typeof r=="number"?Er(t,t.exponent+1+r):t,n=i.coefficients,a=i.exponent+1,l=a+(r||0);return n.length<l&&(n=n.concat(ir(l-n.length))),a<0&&(n=ir(-a+1).concat(n),a=1),a<n.length&&n.splice(a,0,a===0?"0.":"."),i.sign+n.join("")}function Qt(e,r){if(isNaN(e)||!isFinite(e))return String(e);var t=Mr(e),i=r?Er(t,r):t,n=i.coefficients,a=i.exponent;n.length<r&&(n=n.concat(ir(r-n.length)));var l=n.shift();return i.sign+l+(n.length>0?"."+n.join(""):"")+"e"+(a>=0?"+":"")+a}function Li(e,r,t){if(isNaN(e)||!isFinite(e))return String(e);var i=t&&t.lowerExp!==void 0?t.lowerExp:-3,n=t&&t.upperExp!==void 0?t.upperExp:5,a=Mr(e),l=r?Er(a,r):a;if(l.exponent<i||l.exponent>=n)return Qt(e,r);var v=l.coefficients,p=l.exponent;v.length<r&&(v=v.concat(ir(r-v.length))),v=v.concat(ir(p-v.length+1+(v.length<r?r-v.length:0))),v=ir(-p).concat(v);var d=p>0?p:0;return d<v.length-1&&v.splice(d+1,0,"."),l.sign+v.join("")}function Er(e,r){for(var t={sign:e.sign,coefficients:e.coefficients,exponent:e.exponent},i=t.coefficients;r<=0;)i.unshift(0),t.exponent++,r++;if(i.length>r){var n=i.splice(r,i.length-r);if(n[0]>=5){var a=r-1;for(i[a]++;i[a]===10;)i.pop(),a===0&&(i.unshift(0),t.exponent++,a++),a--,i[a]++}}return t}function ir(e){for(var r=[],t=0;t<e;t++)r.push(0);return r}function qi(e){return e.toExponential().replace(/e.*$/,"").replace(/^0\.?0*|\./,"").length}var Ri=Number.EPSILON||2220446049250313e-31;function mr(e,r,t){if(t==null)return e===r;if(e===r)return!0;if(isNaN(e)||isNaN(r))return!1;if(isFinite(e)&&isFinite(r)){var i=Math.abs(e-r);return i<Ri?!0:i<=Math.max(Math.abs(e),Math.abs(r))*t}return!1}function Pr(e,r,t){var i=e.constructor,n=new i(2),a="";if(t){if(t<1)throw new Error("size must be in greater than 0");if(!ye(t))throw new Error("size must be an integer");if(e.greaterThan(n.pow(t-1).sub(1))||e.lessThan(n.pow(t-1).mul(-1)))throw new Error("Value must be in range [-2^".concat(t-1,", 2^").concat(t-1,"-1]"));if(!e.isInteger())throw new Error("Value must be an integer");e.lessThan(0)&&(e=e.add(n.pow(t))),a="i".concat(t)}switch(r){case 2:return"".concat(e.toBinary()).concat(a);case 8:return"".concat(e.toOctal()).concat(a);case 16:return"".concat(e.toHexadecimal()).concat(a);default:throw new Error("Base ".concat(r," not supported "))}}function Ui(e,r){if(typeof r=="function")return r(e);if(!e.isFinite())return e.isNaN()?"NaN":e.gt(0)?"Infinity":"-Infinity";var t="auto",i,n;if(r!==void 0&&(r.notation&&(t=r.notation),typeof r=="number"?i=r:r.precision&&(i=r.precision),r.wordSize&&(n=r.wordSize,typeof n!="number")))throw new Error('Option "wordSize" must be a number');switch(t){case"fixed":return Vi(e,i);case"exponential":return at(e,i);case"engineering":return Zi(e,i);case"bin":return Pr(e,2,n);case"oct":return Pr(e,8,n);case"hex":return Pr(e,16,n);case"auto":{var a=r&&r.lowerExp!==void 0?r.lowerExp:-3,l=r&&r.upperExp!==void 0?r.upperExp:5;if(e.isZero())return"0";var v,p=e.toSignificantDigits(i),d=p.e;return d>=a&&d<l?v=p.toFixed():v=at(e,i),v.replace(/((\.\d*?)(0+))($|e)/,function(){var s=arguments[2],o=arguments[4];return s!=="."?s+o:o})}default:throw new Error('Unknown notation "'+t+'". Choose "auto", "exponential", "fixed", "bin", "oct", or "hex.')}}function Zi(e,r){var t=e.e,i=t%3===0?t:t<0?t-3-t%3:t-t%3,n=e.mul(Math.pow(10,-i)),a=n.toPrecision(r);return a.indexOf("e")!==-1&&(a=n.toString()),a+"e"+(t>=0?"+":"")+i.toString()}function at(e,r){return r!==void 0?e.toExponential(r-1):e.toExponential()}function Vi(e,r){return e.toFixed(r)}function ge(e,r){var t=Hi(e,r);return r&&typeof r=="object"&&"truncate"in r&&t.length>r.truncate?t.substring(0,r.truncate-3)+"...":t}function Hi(e,r){if(typeof e=="number")return Rr(e,r);if(Ce(e))return Ui(e,r);if(ki(e))return!r||r.fraction!=="decimal"?e.s*e.n+"/"+e.d:e.toString();if(Array.isArray(e))return jt(e,r);if(Ue(e))return'"'+e+'"';if(typeof e=="function")return e.syntax?String(e.syntax):"function";if(e&&typeof e=="object"){if(typeof e.format=="function")return e.format(r);if(e&&e.toString(r)!=={}.toString())return e.toString(r);var t=Object.keys(e).map(i=>'"'+i+'": '+ge(e[i],r));return"{"+t.join(", ")+"}"}return String(e)}function jt(e,r){if(Array.isArray(e)){for(var t="[",i=e.length,n=0;n<i;n++)n!==0&&(t+=", "),t+=jt(e[n],r);return t+="]",t}else return ge(e,r)}function ki(e){return e&&typeof e=="object"&&typeof e.s=="number"&&typeof e.n=="number"&&typeof e.d=="number"||!1}function re(e,r,t){if(!(this instanceof re))throw new SyntaxError("Constructor must be called with the new operator");this.actual=e,this.expected=r,this.relation=t,this.message="Dimension mismatch ("+(Array.isArray(e)?"["+e.join(", ")+"]":e)+" "+(this.relation||"!=")+" "+(Array.isArray(r)?"["+r.join(", ")+"]":r)+")",this.stack=new Error().stack}re.prototype=new RangeError;re.prototype.constructor=RangeError;re.prototype.name="DimensionError";re.prototype.isDimensionError=!0;function ur(e,r,t){if(!(this instanceof ur))throw new SyntaxError("Constructor must be called with the new operator");this.index=e,arguments.length<3?(this.min=0,this.max=r):(this.min=r,this.max=t),this.min!==void 0&&this.index<this.min?this.message="Index out of range ("+this.index+" < "+this.min+")":this.max!==void 0&&this.index>=this.max?this.message="Index out of range ("+this.index+" > "+(this.max-1)+")":this.message="Index out of range ("+this.index+")",this.stack=new Error().stack}ur.prototype=new RangeError;ur.prototype.constructor=RangeError;ur.prototype.name="IndexError";ur.prototype.isIndexError=!0;function Ke(e){for(var r=[];Array.isArray(e);)r.push(e.length),e=e[0];return r}function en(e,r,t){var i,n=e.length;if(n!==r[t])throw new re(n,r[t]);if(t<r.length-1){var a=t+1;for(i=0;i<n;i++){var l=e[i];if(!Array.isArray(l))throw new re(r.length-1,r.length,"<");en(e[i],r,a)}}else for(i=0;i<n;i++)if(Array.isArray(e[i]))throw new re(r.length+1,r.length,">")}function ot(e,r){var t=r.length===0;if(t){if(Array.isArray(e))throw new re(e.length,0)}else en(e,r,0)}function ue(e,r){if(!le(e)||!ye(e))throw new TypeError("Index must be an integer (value: "+e+")");if(e<0||typeof r=="number"&&e>=r)throw new ur(e,r)}function Ur(e,r,t){if(!Array.isArray(e)||!Array.isArray(r))throw new TypeError("Array expected");if(r.length===0)throw new Error("Resizing to scalar is not supported");r.forEach(function(n){if(!le(n)||!ye(n)||n<0)throw new TypeError("Invalid size, must contain positive integers (size: "+ge(r)+")")});var i=t!==void 0?t:0;return Zr(e,r,0,i),e}function Zr(e,r,t,i){var n,a,l=e.length,v=r[t],p=Math.min(l,v);if(e.length=v,t<r.length-1){var d=t+1;for(n=0;n<p;n++)a=e[n],Array.isArray(a)||(a=[a],e[n]=a),Zr(a,r,d,i);for(n=p;n<v;n++)a=[],e[n]=a,Zr(a,r,d,i)}else{for(n=0;n<p;n++)for(;Array.isArray(e[n]);)e[n]=e[n][0];for(n=p;n<v;n++)e[n]=i}}function Wi(e,r){var t=Gi(e),i=t.length;if(!Array.isArray(e)||!Array.isArray(r))throw new TypeError("Array expected");if(r.length===0)throw new re(0,i,"!=");r=Xr(r,i);var n=rn(r);if(i!==n)throw new re(n,i,"!=");try{return Ki(t,r)}catch(a){throw a instanceof re?new re(n,i,"!="):a}}function Xr(e,r){var t=rn(e),i=e.slice(),n=-1,a=e.indexOf(n),l=e.indexOf(n,a+1)>=0;if(l)throw new Error("More than one wildcard in sizes");var v=a>=0,p=r%t===0;if(v)if(p)i[a]=-r/t;else throw new Error("Could not replace wildcard, since "+r+" is no multiple of "+-t);return i}function rn(e){return e.reduce((r,t)=>r*t,1)}function Ki(e,r){for(var t=e,i,n=r.length-1;n>0;n--){var a=r[n];i=[];for(var l=t.length/a,v=0;v<l;v++)i.push(t.slice(v*a,(v+1)*a));t=i}return t}function tn(e,r,t,i){var n=i||Ke(e);if(t)for(var a=0;a<t;a++)e=[e],n.unshift(1);for(e=nn(e,r,0);n.length<r;)n.push(1);return e}function nn(e,r,t){var i,n;if(Array.isArray(e)){var a=t+1;for(i=0,n=e.length;i<n;i++)e[i]=nn(e[i],r,a)}else for(var l=t;l<r;l++)e=[e];return e}function Gi(e){if(!Array.isArray(e))return e;var r=[];return e.forEach(function t(i){Array.isArray(i)?i.forEach(t):r.push(i)}),r}function gr(e,r){for(var t,i=0,n=0;n<e.length;n++){var a=e[n],l=Array.isArray(a);if(n===0&&l&&(i=a.length),l&&a.length!==i)return;var v=l?gr(a,r):r(a);if(t===void 0)t=v;else if(t!==v)return"mixed"}return t}function Q(e,r,t,i){function n(a){var l=$i(a,r.map(Xi));return Ji(e,r,a),t(l)}return n.isFactory=!0,n.fn=e,n.dependencies=r.slice().sort(),i&&(n.meta=i),n}function Ji(e,r,t){var i=r.filter(a=>!Yi(a)).every(a=>t[a]!==void 0);if(!i){var n=r.filter(a=>t[a]===void 0);throw new Error('Cannot create function "'.concat(e,'", ')+"some dependencies are missing: ".concat(n.map(a=>'"'.concat(a,'"')).join(", "),"."))}}function Yi(e){return e&&e[0]==="?"}function Xi(e){return e&&e[0]==="?"?e.slice(1):e}function Qi(e,r){if(on(e)&&an(e,r))return e[r];throw typeof e[r]=="function"&&ra(e,r)?new Error('Cannot access method "'+r+'" as a property'):new Error('No access to property "'+r+'"')}function ji(e,r,t){if(on(e)&&an(e,r))return e[r]=t,t;throw new Error('No access to property "'+r+'"')}function ea(e,r){return r in e}function an(e,r){return!e||typeof e!="object"?!1:fr(ta,r)?!0:!(r in Object.prototype||r in Function.prototype)}function ra(e,r){return e==null||typeof e[r]!="function"||fr(e,r)&&Object.getPrototypeOf&&r in Object.getPrototypeOf(e)?!1:fr(na,r)?!0:!(r in Object.prototype||r in Function.prototype)}function on(e){return typeof e=="object"&&e&&e.constructor===Object}var ta={length:!0,name:!0},na={toString:!0,valueOf:!0,toLocaleString:!0};class ia{constructor(r){this.wrappedObject=r}keys(){return Object.keys(this.wrappedObject)}get(r){return Qi(this.wrappedObject,r)}set(r,t){return ji(this.wrappedObject,r,t),this}has(r){return ea(this.wrappedObject,r)}}function aa(e){return e?e instanceof Map||e instanceof ia||typeof e.set=="function"&&typeof e.get=="function"&&typeof e.keys=="function"&&typeof e.has=="function":!1}var sn=function(){return sn=it.create,it},oa=["?BigNumber","?Complex","?DenseMatrix","?Fraction"],sa=Q("typed",oa,function(r){var{BigNumber:t,Complex:i,DenseMatrix:n,Fraction:a}=r,l=sn();return l.types=[{name:"number",test:le},{name:"Complex",test:Gr},{name:"BigNumber",test:Ce},{name:"Fraction",test:Jr},{name:"Unit",test:Yr},{name:"string",test:Ue},{name:"Chain",test:Jt},{name:"Array",test:se},{name:"Matrix",test:_e},{name:"DenseMatrix",test:fi},{name:"SparseMatrix",test:ci},{name:"Range",test:kt},{name:"Index",test:Nr},{name:"boolean",test:li},{name:"ResultSet",test:Wt},{name:"Help",test:Kt},{name:"function",test:hi},{name:"Date",test:vi},{name:"RegExp",test:pi},{name:"null",test:mi},{name:"undefined",test:gi},{name:"AccessorNode",test:wi},{name:"ArrayNode",test:yi},{name:"AssignmentNode",test:_i},{name:"BlockNode",test:bi},{name:"ConditionalNode",test:Ni},{name:"ConstantNode",test:Mi},{name:"FunctionNode",test:Si},{name:"FunctionAssignmentNode",test:Ei},{name:"IndexNode",test:xi},{name:"Node",test:Gt},{name:"ObjectNode",test:Ci},{name:"OperatorNode",test:Ai},{name:"ParenthesisNode",test:Di},{name:"RangeNode",test:Oi},{name:"SymbolNode",test:zi},{name:"Map",test:aa},{name:"Object",test:di}],l.conversions=[{from:"number",to:"BigNumber",convert:function(p){if(t||Br(p),qi(p)>15)throw new TypeError("Cannot implicitly convert a number with >15 significant digits to BigNumber (value: "+p+"). Use function bignumber(x) to convert to BigNumber.");return new t(p)}},{from:"number",to:"Complex",convert:function(p){return i||hr(p),new i(p,0)}},{from:"number",to:"string",convert:function(p){return p+""}},{from:"BigNumber",to:"Complex",convert:function(p){return i||hr(p),new i(p.toNumber(),0)}},{from:"Fraction",to:"BigNumber",convert:function(p){throw new TypeError("Cannot implicitly convert a Fraction to BigNumber or vice versa. Use function bignumber(x) to convert to BigNumber or fraction(x) to convert to Fraction.")}},{from:"Fraction",to:"Complex",convert:function(p){return i||hr(p),new i(p.valueOf(),0)}},{from:"number",to:"Fraction",convert:function(p){a||Tr(p);var d=new a(p);if(d.valueOf()!==p)throw new TypeError("Cannot implicitly convert a number to a Fraction when there will be a loss of precision (value: "+p+"). Use function fraction(x) to convert to Fraction.");return d}},{from:"string",to:"number",convert:function(p){var d=Number(p);if(isNaN(d))throw new Error('Cannot convert "'+p+'" to a number');return d}},{from:"string",to:"BigNumber",convert:function(p){t||Br(p);try{return new t(p)}catch{throw new Error('Cannot convert "'+p+'" to BigNumber')}}},{from:"string",to:"Fraction",convert:function(p){a||Tr(p);try{return new a(p)}catch{throw new Error('Cannot convert "'+p+'" to Fraction')}}},{from:"string",to:"Complex",convert:function(p){i||hr(p);try{return new i(p)}catch{throw new Error('Cannot convert "'+p+'" to Complex')}}},{from:"boolean",to:"number",convert:function(p){return+p}},{from:"boolean",to:"BigNumber",convert:function(p){return t||Br(p),new t(+p)}},{from:"boolean",to:"Fraction",convert:function(p){return a||Tr(p),new a(+p)}},{from:"boolean",to:"string",convert:function(p){return String(p)}},{from:"Array",to:"Matrix",convert:function(p){return n||ua(),new n(p)}},{from:"Matrix",to:"Array",convert:function(p){return p.valueOf()}}],l});function Br(e){throw new Error("Cannot convert value ".concat(e," into a BigNumber: no class 'BigNumber' provided"))}function hr(e){throw new Error("Cannot convert value ".concat(e," into a Complex number: no class 'Complex' provided"))}function ua(){throw new Error("Cannot convert array into a Matrix: no class 'DenseMatrix' provided")}function Tr(e){throw new Error("Cannot convert value ".concat(e," into a Fraction, no class 'Fraction' provided."))}var nr=9e15,Ye=1e9,Vr="0123456789abcdef",wr="2.3025850929940456840179914546843642076011014886287729760333279009675726096773524802359972050895982983419677840422862486334095254650828067566662873690987816894829072083255546808437998948262331985283935053089653777326288461633662222876982198867465436674744042432743651550489343149393914796194044002221051017141748003688084012647080685567743216228355220114804663715659121373450747856947683463616792101806445070648000277502684916746550586856935673420670581136429224554405758925724208241314695689016758940256776311356919292033376587141660230105703089634572075440370847469940168269282808481184289314848524948644871927809676271275775397027668605952496716674183485704422507197965004714951050492214776567636938662976979522110718264549734772662425709429322582798502585509785265383207606726317164309505995087807523710333101197857547331541421808427543863591778117054309827482385045648019095610299291824318237525357709750539565187697510374970888692180205189339507238539205144634197265287286965110862571492198849978748873771345686209167058",yr="3.1415926535897932384626433832795028841971693993751058209749445923078164062862089986280348253421170679821480865132823066470938446095505822317253594081284811174502841027019385211055596446229489549303819644288109756659334461284756482337867831652712019091456485669234603486104543266482133936072602491412737245870066063155881748815209209628292540917153643678925903600113305305488204665213841469519415116094330572703657595919530921861173819326117931051185480744623799627495673518857527248912279381830119491298336733624406566430860213949463952247371907021798609437027705392171762931767523846748184676694051320005681271452635608277857713427577896091736371787214684409012249534301465495853710507922796892589235420199561121290219608640344181598136297747713099605187072113499999983729780499510597317328160963185950244594553469083026425223082533446850352619311881710100031378387528865875332083814206171776691473035982534904287554687311595628638823537875937519577818577805321712268066130019278766111959092164201989380952572010654858632789",Hr={precision:20,rounding:4,modulo:1,toExpNeg:-7,toExpPos:21,minE:-nr,maxE:nr,crypto:!1},un,Ze,G=!0,Sr="[DecimalError] ",Ge=Sr+"Invalid argument: ",fn=Sr+"Precision limit exceeded",cn=Sr+"crypto unavailable",ln="[object Decimal]",Se=Math.floor,we=Math.pow,fa=/^0b([01]+(\.[01]*)?|\.[01]+)(p[+-]?\d+)?$/i,ca=/^0x([0-9a-f]+(\.[0-9a-f]*)?|\.[0-9a-f]+)(p[+-]?\d+)?$/i,la=/^0o([0-7]+(\.[0-7]*)?|\.[0-7]+)(p[+-]?\d+)?$/i,hn=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Be=1e7,W=7,ha=9007199254740991,va=wr.length-1,kr=yr.length-1,F={toStringTag:ln};F.absoluteValue=F.abs=function(){var e=new this.constructor(this);return e.s<0&&(e.s=1),Z(e)};F.ceil=function(){return Z(new this.constructor(this),this.e+1,2)};F.clampedTo=F.clamp=function(e,r){var t,i=this,n=i.constructor;if(e=new n(e),r=new n(r),!e.s||!r.s)return new n(NaN);if(e.gt(r))throw Error(Ge+r);return t=i.cmp(e),t<0?e:i.cmp(r)>0?r:new n(i)};F.comparedTo=F.cmp=function(e){var r,t,i,n,a=this,l=a.d,v=(e=new a.constructor(e)).d,p=a.s,d=e.s;if(!l||!v)return!p||!d?NaN:p!==d?p:l===v?0:!l^p<0?1:-1;if(!l[0]||!v[0])return l[0]?p:v[0]?-d:0;if(p!==d)return p;if(a.e!==e.e)return a.e>e.e^p<0?1:-1;for(i=l.length,n=v.length,r=0,t=i<n?i:n;r<t;++r)if(l[r]!==v[r])return l[r]>v[r]^p<0?1:-1;return i===n?0:i>n^p<0?1:-1};F.cosine=F.cos=function(){var e,r,t=this,i=t.constructor;return t.d?t.d[0]?(e=i.precision,r=i.rounding,i.precision=e+Math.max(t.e,t.sd())+W,i.rounding=1,t=pa(i,gn(i,t)),i.precision=e,i.rounding=r,Z(Ze==2||Ze==3?t.neg():t,e,r,!0)):new i(1):new i(NaN)};F.cubeRoot=F.cbrt=function(){var e,r,t,i,n,a,l,v,p,d,s=this,o=s.constructor;if(!s.isFinite()||s.isZero())return new o(s);for(G=!1,a=s.s*we(s.s*s,1/3),!a||Math.abs(a)==1/0?(t=Me(s.d),e=s.e,(a=(e-t.length+1)%3)&&(t+=a==1||a==-2?"0":"00"),a=we(t,1/3),e=Se((e+1)/3)-(e%3==(e<0?-1:2)),a==1/0?t="5e"+e:(t=a.toExponential(),t=t.slice(0,t.indexOf("e")+1)+e),i=new o(t),i.s=s.s):i=new o(a.toString()),l=(e=o.precision)+3;;)if(v=i,p=v.times(v).times(v),d=p.plus(s),i=ne(d.plus(s).times(v),d.plus(p),l+2,1),Me(v.d).slice(0,l)===(t=Me(i.d)).slice(0,l))if(t=t.slice(l-3,l+1),t=="9999"||!n&&t=="4999"){if(!n&&(Z(v,e+1,0),v.times(v).times(v).eq(s))){i=v;break}l+=4,n=1}else{(!+t||!+t.slice(1)&&t.charAt(0)=="5")&&(Z(i,e+1,1),r=!i.times(i).times(i).eq(s));break}return G=!0,Z(i,e,o.rounding,r)};F.decimalPlaces=F.dp=function(){var e,r=this.d,t=NaN;if(r){if(e=r.length-1,t=(e-Se(this.e/W))*W,e=r[e],e)for(;e%10==0;e/=10)t--;t<0&&(t=0)}return t};F.dividedBy=F.div=function(e){return ne(this,new this.constructor(e))};F.dividedToIntegerBy=F.divToInt=function(e){var r=this,t=r.constructor;return Z(ne(r,new t(e),0,1,1),t.precision,t.rounding)};F.equals=F.eq=function(e){return this.cmp(e)===0};F.floor=function(){return Z(new this.constructor(this),this.e+1,3)};F.greaterThan=F.gt=function(e){return this.cmp(e)>0};F.greaterThanOrEqualTo=F.gte=function(e){var r=this.cmp(e);return r==1||r===0};F.hyperbolicCosine=F.cosh=function(){var e,r,t,i,n,a=this,l=a.constructor,v=new l(1);if(!a.isFinite())return new l(a.s?1/0:NaN);if(a.isZero())return v;t=l.precision,i=l.rounding,l.precision=t+Math.max(a.e,a.sd())+4,l.rounding=1,n=a.d.length,n<32?(e=Math.ceil(n/3),r=(1/Cr(4,e)).toString()):(e=16,r="2.3283064365386962890625e-10"),a=ar(l,1,a.times(r),new l(1),!0);for(var p,d=e,s=new l(8);d--;)p=a.times(a),a=v.minus(p.times(s.minus(p.times(s))));return Z(a,l.precision=t,l.rounding=i,!0)};F.hyperbolicSine=F.sinh=function(){var e,r,t,i,n=this,a=n.constructor;if(!n.isFinite()||n.isZero())return new a(n);if(r=a.precision,t=a.rounding,a.precision=r+Math.max(n.e,n.sd())+4,a.rounding=1,i=n.d.length,i<3)n=ar(a,2,n,n,!0);else{e=1.4*Math.sqrt(i),e=e>16?16:e|0,n=n.times(1/Cr(5,e)),n=ar(a,2,n,n,!0);for(var l,v=new a(5),p=new a(16),d=new a(20);e--;)l=n.times(n),n=n.times(v.plus(l.times(p.times(l).plus(d))))}return a.precision=r,a.rounding=t,Z(n,r,t,!0)};F.hyperbolicTangent=F.tanh=function(){var e,r,t=this,i=t.constructor;return t.isFinite()?t.isZero()?new i(t):(e=i.precision,r=i.rounding,i.precision=e+7,i.rounding=1,ne(t.sinh(),t.cosh(),i.precision=e,i.rounding=r)):new i(t.s)};F.inverseCosine=F.acos=function(){var e,r=this,t=r.constructor,i=r.abs().cmp(1),n=t.precision,a=t.rounding;return i!==-1?i===0?r.isNeg()?Ie(t,n,a):new t(0):new t(NaN):r.isZero()?Ie(t,n+4,a).times(.5):(t.precision=n+6,t.rounding=1,r=r.asin(),e=Ie(t,n+4,a).times(.5),t.precision=n,t.rounding=a,e.minus(r))};F.inverseHyperbolicCosine=F.acosh=function(){var e,r,t=this,i=t.constructor;return t.lte(1)?new i(t.eq(1)?0:NaN):t.isFinite()?(e=i.precision,r=i.rounding,i.precision=e+Math.max(Math.abs(t.e),t.sd())+4,i.rounding=1,G=!1,t=t.times(t).minus(1).sqrt().plus(t),G=!0,i.precision=e,i.rounding=r,t.ln()):new i(t)};F.inverseHyperbolicSine=F.asinh=function(){var e,r,t=this,i=t.constructor;return!t.isFinite()||t.isZero()?new i(t):(e=i.precision,r=i.rounding,i.precision=e+2*Math.max(Math.abs(t.e),t.sd())+6,i.rounding=1,G=!1,t=t.times(t).plus(1).sqrt().plus(t),G=!0,i.precision=e,i.rounding=r,t.ln())};F.inverseHyperbolicTangent=F.atanh=function(){var e,r,t,i,n=this,a=n.constructor;return n.isFinite()?n.e>=0?new a(n.abs().eq(1)?n.s/0:n.isZero()?n:NaN):(e=a.precision,r=a.rounding,i=n.sd(),Math.max(i,e)<2*-n.e-1?Z(new a(n),e,r,!0):(a.precision=t=i-n.e,n=ne(n.plus(1),new a(1).minus(n),t+e,1),a.precision=e+4,a.rounding=1,n=n.ln(),a.precision=e,a.rounding=r,n.times(.5))):new a(NaN)};F.inverseSine=F.asin=function(){var e,r,t,i,n=this,a=n.constructor;return n.isZero()?new a(n):(r=n.abs().cmp(1),t=a.precision,i=a.rounding,r!==-1?r===0?(e=Ie(a,t+4,i).times(.5),e.s=n.s,e):new a(NaN):(a.precision=t+6,a.rounding=1,n=n.div(new a(1).minus(n.times(n)).sqrt().plus(1)).atan(),a.precision=t,a.rounding=i,n.times(2)))};F.inverseTangent=F.atan=function(){var e,r,t,i,n,a,l,v,p,d=this,s=d.constructor,o=s.precision,f=s.rounding;if(d.isFinite()){if(d.isZero())return new s(d);if(d.abs().eq(1)&&o+4<=kr)return l=Ie(s,o+4,f).times(.25),l.s=d.s,l}else{if(!d.s)return new s(NaN);if(o+4<=kr)return l=Ie(s,o+4,f).times(.5),l.s=d.s,l}for(s.precision=v=o+10,s.rounding=1,t=Math.min(28,v/W+2|0),e=t;e;--e)d=d.div(d.times(d).plus(1).sqrt().plus(1));for(G=!1,r=Math.ceil(v/W),i=1,p=d.times(d),l=new s(d),n=d;e!==-1;)if(n=n.times(p),a=l.minus(n.div(i+=2)),n=n.times(p),l=a.plus(n.div(i+=2)),l.d[r]!==void 0)for(e=r;l.d[e]===a.d[e]&&e--;);return t&&(l=l.times(2<<t-1)),G=!0,Z(l,s.precision=o,s.rounding=f,!0)};F.isFinite=function(){return!!this.d};F.isInteger=F.isInt=function(){return!!this.d&&Se(this.e/W)>this.d.length-2};F.isNaN=function(){return!this.s};F.isNegative=F.isNeg=function(){return this.s<0};F.isPositive=F.isPos=function(){return this.s>0};F.isZero=function(){return!!this.d&&this.d[0]===0};F.lessThan=F.lt=function(e){return this.cmp(e)<0};F.lessThanOrEqualTo=F.lte=function(e){return this.cmp(e)<1};F.logarithm=F.log=function(e){var r,t,i,n,a,l,v,p,d=this,s=d.constructor,o=s.precision,f=s.rounding,c=5;if(e==null)e=new s(10),r=!0;else{if(e=new s(e),t=e.d,e.s<0||!t||!t[0]||e.eq(1))return new s(NaN);r=e.eq(10)}if(t=d.d,d.s<0||!t||!t[0]||d.eq(1))return new s(t&&!t[0]?-1/0:d.s!=1?NaN:t?0:1/0);if(r)if(t.length>1)a=!0;else{for(n=t[0];n%10===0;)n/=10;a=n!==1}if(G=!1,v=o+c,l=ke(d,v),i=r?_r(s,v+10):ke(e,v),p=ne(l,i,v,1),cr(p.d,n=o,f))do if(v+=10,l=ke(d,v),i=r?_r(s,v+10):ke(e,v),p=ne(l,i,v,1),!a){+Me(p.d).slice(n+1,n+15)+1==1e14&&(p=Z(p,o+1,0));break}while(cr(p.d,n+=10,f));return G=!0,Z(p,o,f)};F.minus=F.sub=function(e){var r,t,i,n,a,l,v,p,d,s,o,f,c=this,h=c.constructor;if(e=new h(e),!c.d||!e.d)return!c.s||!e.s?e=new h(NaN):c.d?e.s=-e.s:e=new h(e.d||c.s!==e.s?c:NaN),e;if(c.s!=e.s)return e.s=-e.s,c.plus(e);if(d=c.d,f=e.d,v=h.precision,p=h.rounding,!d[0]||!f[0]){if(f[0])e.s=-e.s;else if(d[0])e=new h(c);else return new h(p===3?-0:0);return G?Z(e,v,p):e}if(t=Se(e.e/W),s=Se(c.e/W),d=d.slice(),a=s-t,a){for(o=a<0,o?(r=d,a=-a,l=f.length):(r=f,t=s,l=d.length),i=Math.max(Math.ceil(v/W),l)+2,a>i&&(a=i,r.length=1),r.reverse(),i=a;i--;)r.push(0);r.reverse()}else{for(i=d.length,l=f.length,o=i<l,o&&(l=i),i=0;i<l;i++)if(d[i]!=f[i]){o=d[i]<f[i];break}a=0}for(o&&(r=d,d=f,f=r,e.s=-e.s),l=d.length,i=f.length-l;i>0;--i)d[l++]=0;for(i=f.length;i>a;){if(d[--i]<f[i]){for(n=i;n&&d[--n]===0;)d[n]=Be-1;--d[n],d[i]+=Be}d[i]-=f[i]}for(;d[--l]===0;)d.pop();for(;d[0]===0;d.shift())--t;return d[0]?(e.d=d,e.e=xr(d,t),G?Z(e,v,p):e):new h(p===3?-0:0)};F.modulo=F.mod=function(e){var r,t=this,i=t.constructor;return e=new i(e),!t.d||!e.s||e.d&&!e.d[0]?new i(NaN):!e.d||t.d&&!t.d[0]?Z(new i(t),i.precision,i.rounding):(G=!1,i.modulo==9?(r=ne(t,e.abs(),0,3,1),r.s*=e.s):r=ne(t,e,0,i.modulo,1),r=r.times(e),G=!0,t.minus(r))};F.naturalExponential=F.exp=function(){return Wr(this)};F.naturalLogarithm=F.ln=function(){return ke(this)};F.negated=F.neg=function(){var e=new this.constructor(this);return e.s=-e.s,Z(e)};F.plus=F.add=function(e){var r,t,i,n,a,l,v,p,d,s,o=this,f=o.constructor;if(e=new f(e),!o.d||!e.d)return!o.s||!e.s?e=new f(NaN):o.d||(e=new f(e.d||o.s===e.s?o:NaN)),e;if(o.s!=e.s)return e.s=-e.s,o.minus(e);if(d=o.d,s=e.d,v=f.precision,p=f.rounding,!d[0]||!s[0])return s[0]||(e=new f(o)),G?Z(e,v,p):e;if(a=Se(o.e/W),i=Se(e.e/W),d=d.slice(),n=a-i,n){for(n<0?(t=d,n=-n,l=s.length):(t=s,i=a,l=d.length),a=Math.ceil(v/W),l=a>l?a+1:l+1,n>l&&(n=l,t.length=1),t.reverse();n--;)t.push(0);t.reverse()}for(l=d.length,n=s.length,l-n<0&&(n=l,t=s,s=d,d=t),r=0;n;)r=(d[--n]=d[n]+s[n]+r)/Be|0,d[n]%=Be;for(r&&(d.unshift(r),++i),l=d.length;d[--l]==0;)d.pop();return e.d=d,e.e=xr(d,i),G?Z(e,v,p):e};F.precision=F.sd=function(e){var r,t=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(Ge+e);return t.d?(r=vn(t.d),e&&t.e+1>r&&(r=t.e+1)):r=NaN,r};F.round=function(){var e=this,r=e.constructor;return Z(new r(e),e.e+1,r.rounding)};F.sine=F.sin=function(){var e,r,t=this,i=t.constructor;return t.isFinite()?t.isZero()?new i(t):(e=i.precision,r=i.rounding,i.precision=e+Math.max(t.e,t.sd())+W,i.rounding=1,t=ma(i,gn(i,t)),i.precision=e,i.rounding=r,Z(Ze>2?t.neg():t,e,r,!0)):new i(NaN)};F.squareRoot=F.sqrt=function(){var e,r,t,i,n,a,l=this,v=l.d,p=l.e,d=l.s,s=l.constructor;if(d!==1||!v||!v[0])return new s(!d||d<0&&(!v||v[0])?NaN:v?l:1/0);for(G=!1,d=Math.sqrt(+l),d==0||d==1/0?(r=Me(v),(r.length+p)%2==0&&(r+="0"),d=Math.sqrt(r),p=Se((p+1)/2)-(p<0||p%2),d==1/0?r="5e"+p:(r=d.toExponential(),r=r.slice(0,r.indexOf("e")+1)+p),i=new s(r)):i=new s(d.toString()),t=(p=s.precision)+3;;)if(a=i,i=a.plus(ne(l,a,t+2,1)).times(.5),Me(a.d).slice(0,t)===(r=Me(i.d)).slice(0,t))if(r=r.slice(t-3,t+1),r=="9999"||!n&&r=="4999"){if(!n&&(Z(a,p+1,0),a.times(a).eq(l))){i=a;break}t+=4,n=1}else{(!+r||!+r.slice(1)&&r.charAt(0)=="5")&&(Z(i,p+1,1),e=!i.times(i).eq(l));break}return G=!0,Z(i,p,s.rounding,e)};F.tangent=F.tan=function(){var e,r,t=this,i=t.constructor;return t.isFinite()?t.isZero()?new i(t):(e=i.precision,r=i.rounding,i.precision=e+10,i.rounding=1,t=t.sin(),t.s=1,t=ne(t,new i(1).minus(t.times(t)).sqrt(),e+10,0),i.precision=e,i.rounding=r,Z(Ze==2||Ze==4?t.neg():t,e,r,!0)):new i(NaN)};F.times=F.mul=function(e){var r,t,i,n,a,l,v,p,d,s=this,o=s.constructor,f=s.d,c=(e=new o(e)).d;if(e.s*=s.s,!f||!f[0]||!c||!c[0])return new o(!e.s||f&&!f[0]&&!c||c&&!c[0]&&!f?NaN:!f||!c?e.s/0:e.s*0);for(t=Se(s.e/W)+Se(e.e/W),p=f.length,d=c.length,p<d&&(a=f,f=c,c=a,l=p,p=d,d=l),a=[],l=p+d,i=l;i--;)a.push(0);for(i=d;--i>=0;){for(r=0,n=p+i;n>i;)v=a[n]+c[i]*f[n-i-1]+r,a[n--]=v%Be|0,r=v/Be|0;a[n]=(a[n]+r)%Be|0}for(;!a[--l];)a.pop();return r?++t:a.shift(),e.d=a,e.e=xr(a,t),G?Z(e,o.precision,o.rounding):e};F.toBinary=function(e,r){return Qr(this,2,e,r)};F.toDecimalPlaces=F.toDP=function(e,r){var t=this,i=t.constructor;return t=new i(t),e===void 0?t:(ze(e,0,Ye),r===void 0?r=i.rounding:ze(r,0,8),Z(t,e+t.e+1,r))};F.toExponential=function(e,r){var t,i=this,n=i.constructor;return e===void 0?t=Re(i,!0):(ze(e,0,Ye),r===void 0?r=n.rounding:ze(r,0,8),i=Z(new n(i),e+1,r),t=Re(i,!0,e+1)),i.isNeg()&&!i.isZero()?"-"+t:t};F.toFixed=function(e,r){var t,i,n=this,a=n.constructor;return e===void 0?t=Re(n):(ze(e,0,Ye),r===void 0?r=a.rounding:ze(r,0,8),i=Z(new a(n),e+n.e+1,r),t=Re(i,!1,e+i.e+1)),n.isNeg()&&!n.isZero()?"-"+t:t};F.toFraction=function(e){var r,t,i,n,a,l,v,p,d,s,o,f,c=this,h=c.d,u=c.constructor;if(!h)return new u(c);if(d=t=new u(1),i=p=new u(0),r=new u(i),a=r.e=vn(h)-c.e-1,l=a%W,r.d[0]=we(10,l<0?W+l:l),e==null)e=a>0?r:d;else{if(v=new u(e),!v.isInt()||v.lt(d))throw Error(Ge+v);e=v.gt(r)?a>0?r:d:v}for(G=!1,v=new u(Me(h)),s=u.precision,u.precision=a=h.length*W*2;o=ne(v,r,0,1,1),n=t.plus(o.times(i)),n.cmp(e)!=1;)t=i,i=n,n=d,d=p.plus(o.times(n)),p=n,n=r,r=v.minus(o.times(n)),v=n;return n=ne(e.minus(t),i,0,1,1),p=p.plus(n.times(d)),t=t.plus(n.times(i)),p.s=d.s=c.s,f=ne(d,i,a,1).minus(c).abs().cmp(ne(p,t,a,1).minus(c).abs())<1?[d,i]:[p,t],u.precision=s,G=!0,f};F.toHexadecimal=F.toHex=function(e,r){return Qr(this,16,e,r)};F.toNearest=function(e,r){var t=this,i=t.constructor;if(t=new i(t),e==null){if(!t.d)return t;e=new i(1),r=i.rounding}else{if(e=new i(e),r===void 0?r=i.rounding:ze(r,0,8),!t.d)return e.s?t:e;if(!e.d)return e.s&&(e.s=t.s),e}return e.d[0]?(G=!1,t=ne(t,e,0,r,1).times(e),G=!0,Z(t)):(e.s=t.s,t=e),t};F.toNumber=function(){return+this};F.toOctal=function(e,r){return Qr(this,8,e,r)};F.toPower=F.pow=function(e){var r,t,i,n,a,l,v=this,p=v.constructor,d=+(e=new p(e));if(!v.d||!e.d||!v.d[0]||!e.d[0])return new p(we(+v,d));if(v=new p(v),v.eq(1))return v;if(i=p.precision,a=p.rounding,e.eq(1))return Z(v,i,a);if(r=Se(e.e/W),r>=e.d.length-1&&(t=d<0?-d:d)<=ha)return n=pn(p,v,t,i),e.s<0?new p(1).div(n):Z(n,i,a);if(l=v.s,l<0){if(r<e.d.length-1)return new p(NaN);if((e.d[r]&1)==0&&(l=1),v.e==0&&v.d[0]==1&&v.d.length==1)return v.s=l,v}return t=we(+v,d),r=t==0||!isFinite(t)?Se(d*(Math.log("0."+Me(v.d))/Math.LN10+v.e+1)):new p(t+"").e,r>p.maxE+1||r<p.minE-1?new p(r>0?l/0:0):(G=!1,p.rounding=v.s=1,t=Math.min(12,(r+"").length),n=Wr(e.times(ke(v,i+t)),i),n.d&&(n=Z(n,i+5,1),cr(n.d,i,a)&&(r=i+10,n=Z(Wr(e.times(ke(v,r+t)),r),r+5,1),+Me(n.d).slice(i+1,i+15)+1==1e14&&(n=Z(n,i+1,0)))),n.s=l,G=!0,p.rounding=a,Z(n,i,a))};F.toPrecision=function(e,r){var t,i=this,n=i.constructor;return e===void 0?t=Re(i,i.e<=n.toExpNeg||i.e>=n.toExpPos):(ze(e,1,Ye),r===void 0?r=n.rounding:ze(r,0,8),i=Z(new n(i),e,r),t=Re(i,e<=i.e||i.e<=n.toExpNeg,e)),i.isNeg()&&!i.isZero()?"-"+t:t};F.toSignificantDigits=F.toSD=function(e,r){var t=this,i=t.constructor;return e===void 0?(e=i.precision,r=i.rounding):(ze(e,1,Ye),r===void 0?r=i.rounding:ze(r,0,8)),Z(new i(t),e,r)};F.toString=function(){var e=this,r=e.constructor,t=Re(e,e.e<=r.toExpNeg||e.e>=r.toExpPos);return e.isNeg()&&!e.isZero()?"-"+t:t};F.truncated=F.trunc=function(){return Z(new this.constructor(this),this.e+1,1)};F.valueOf=F.toJSON=function(){var e=this,r=e.constructor,t=Re(e,e.e<=r.toExpNeg||e.e>=r.toExpPos);return e.isNeg()?"-"+t:t};function Me(e){var r,t,i,n=e.length-1,a="",l=e[0];if(n>0){for(a+=l,r=1;r<n;r++)i=e[r]+"",t=W-i.length,t&&(a+=He(t)),a+=i;l=e[r],i=l+"",t=W-i.length,t&&(a+=He(t))}else if(l===0)return"0";for(;l%10===0;)l/=10;return a+l}function ze(e,r,t){if(e!==~~e||e<r||e>t)throw Error(Ge+e)}function cr(e,r,t,i){var n,a,l,v;for(a=e[0];a>=10;a/=10)--r;return--r<0?(r+=W,n=0):(n=Math.ceil((r+1)/W),r%=W),a=we(10,W-r),v=e[n]%a|0,i==null?r<3?(r==0?v=v/100|0:r==1&&(v=v/10|0),l=t<4&&v==99999||t>3&&v==49999||v==5e4||v==0):l=(t<4&&v+1==a||t>3&&v+1==a/2)&&(e[n+1]/a/100|0)==we(10,r-2)-1||(v==a/2||v==0)&&(e[n+1]/a/100|0)==0:r<4?(r==0?v=v/1e3|0:r==1?v=v/100|0:r==2&&(v=v/10|0),l=(i||t<4)&&v==9999||!i&&t>3&&v==4999):l=((i||t<4)&&v+1==a||!i&&t>3&&v+1==a/2)&&(e[n+1]/a/1e3|0)==we(10,r-3)-1,l}function pr(e,r,t){for(var i,n=[0],a,l=0,v=e.length;l<v;){for(a=n.length;a--;)n[a]*=r;for(n[0]+=Vr.indexOf(e.charAt(l++)),i=0;i<n.length;i++)n[i]>t-1&&(n[i+1]===void 0&&(n[i+1]=0),n[i+1]+=n[i]/t|0,n[i]%=t)}return n.reverse()}function pa(e,r){var t,i,n;if(r.isZero())return r;i=r.d.length,i<32?(t=Math.ceil(i/3),n=(1/Cr(4,t)).toString()):(t=16,n="2.3283064365386962890625e-10"),e.precision+=t,r=ar(e,1,r.times(n),new e(1));for(var a=t;a--;){var l=r.times(r);r=l.times(l).minus(l).times(8).plus(1)}return e.precision-=t,r}var ne=function(){function e(i,n,a){var l,v=0,p=i.length;for(i=i.slice();p--;)l=i[p]*n+v,i[p]=l%a|0,v=l/a|0;return v&&i.unshift(v),i}function r(i,n,a,l){var v,p;if(a!=l)p=a>l?1:-1;else for(v=p=0;v<a;v++)if(i[v]!=n[v]){p=i[v]>n[v]?1:-1;break}return p}function t(i,n,a,l){for(var v=0;a--;)i[a]-=v,v=i[a]<n[a]?1:0,i[a]=v*l+i[a]-n[a];for(;!i[0]&&i.length>1;)i.shift()}return function(i,n,a,l,v,p){var d,s,o,f,c,h,u,m,g,N,w,M,_,y,x,b,S,O,z,I,q=i.constructor,P=i.s==n.s?1:-1,B=i.d,$=n.d;if(!B||!B[0]||!$||!$[0])return new q(!i.s||!n.s||(B?$&&B[0]==$[0]:!$)?NaN:B&&B[0]==0||!$?P*0:P/0);for(p?(c=1,s=i.e-n.e):(p=Be,c=W,s=Se(i.e/c)-Se(n.e/c)),z=$.length,S=B.length,g=new q(P),N=g.d=[],o=0;$[o]==(B[o]||0);o++);if($[o]>(B[o]||0)&&s--,a==null?(y=a=q.precision,l=q.rounding):v?y=a+(i.e-n.e)+1:y=a,y<0)N.push(1),h=!0;else{if(y=y/c+2|0,o=0,z==1){for(f=0,$=$[0],y++;(o<S||f)&&y--;o++)x=f*p+(B[o]||0),N[o]=x/$|0,f=x%$|0;h=f||o<S}else{for(f=p/($[0]+1)|0,f>1&&($=e($,f,p),B=e(B,f,p),z=$.length,S=B.length),b=z,w=B.slice(0,z),M=w.length;M<z;)w[M++]=0;I=$.slice(),I.unshift(0),O=$[0],$[1]>=p/2&&++O;do f=0,d=r($,w,z,M),d<0?(_=w[0],z!=M&&(_=_*p+(w[1]||0)),f=_/O|0,f>1?(f>=p&&(f=p-1),u=e($,f,p),m=u.length,M=w.length,d=r(u,w,m,M),d==1&&(f--,t(u,z<m?I:$,m,p))):(f==0&&(d=f=1),u=$.slice()),m=u.length,m<M&&u.unshift(0),t(w,u,M,p),d==-1&&(M=w.length,d=r($,w,z,M),d<1&&(f++,t(w,z<M?I:$,M,p))),M=w.length):d===0&&(f++,w=[0]),N[o++]=f,d&&w[0]?w[M++]=B[b]||0:(w=[B[b]],M=1);while((b++<S||w[0]!==void 0)&&y--);h=w[0]!==void 0}N[0]||N.shift()}if(c==1)g.e=s,un=h;else{for(o=1,f=N[0];f>=10;f/=10)o++;g.e=o+s*c-1,Z(g,v?a+g.e+1:a,l,h)}return g}}();function Z(e,r,t,i){var n,a,l,v,p,d,s,o,f,c=e.constructor;e:if(r!=null){if(o=e.d,!o)return e;for(n=1,v=o[0];v>=10;v/=10)n++;if(a=r-n,a<0)a+=W,l=r,s=o[f=0],p=s/we(10,n-l-1)%10|0;else if(f=Math.ceil((a+1)/W),v=o.length,f>=v)if(i){for(;v++<=f;)o.push(0);s=p=0,n=1,a%=W,l=a-W+1}else break e;else{for(s=v=o[f],n=1;v>=10;v/=10)n++;a%=W,l=a-W+n,p=l<0?0:s/we(10,n-l-1)%10|0}if(i=i||r<0||o[f+1]!==void 0||(l<0?s:s%we(10,n-l-1)),d=t<4?(p||i)&&(t==0||t==(e.s<0?3:2)):p>5||p==5&&(t==4||i||t==6&&(a>0?l>0?s/we(10,n-l):0:o[f-1])%10&1||t==(e.s<0?8:7)),r<1||!o[0])return o.length=0,d?(r-=e.e+1,o[0]=we(10,(W-r%W)%W),e.e=-r||0):o[0]=e.e=0,e;if(a==0?(o.length=f,v=1,f--):(o.length=f+1,v=we(10,W-a),o[f]=l>0?(s/we(10,n-l)%we(10,l)|0)*v:0),d)for(;;)if(f==0){for(a=1,l=o[0];l>=10;l/=10)a++;for(l=o[0]+=v,v=1;l>=10;l/=10)v++;a!=v&&(e.e++,o[0]==Be&&(o[0]=1));break}else{if(o[f]+=v,o[f]!=Be)break;o[f--]=0,v=1}for(a=o.length;o[--a]===0;)o.pop()}return G&&(e.e>c.maxE?(e.d=null,e.e=NaN):e.e<c.minE&&(e.e=0,e.d=[0])),e}function Re(e,r,t){if(!e.isFinite())return mn(e);var i,n=e.e,a=Me(e.d),l=a.length;return r?(t&&(i=t-l)>0?a=a.charAt(0)+"."+a.slice(1)+He(i):l>1&&(a=a.charAt(0)+"."+a.slice(1)),a=a+(e.e<0?"e":"e+")+e.e):n<0?(a="0."+He(-n-1)+a,t&&(i=t-l)>0&&(a+=He(i))):n>=l?(a+=He(n+1-l),t&&(i=t-n-1)>0&&(a=a+"."+He(i))):((i=n+1)<l&&(a=a.slice(0,i)+"."+a.slice(i)),t&&(i=t-l)>0&&(n+1===l&&(a+="."),a+=He(i))),a}function xr(e,r){var t=e[0];for(r*=W;t>=10;t/=10)r++;return r}function _r(e,r,t){if(r>va)throw G=!0,t&&(e.precision=t),Error(fn);return Z(new e(wr),r,1,!0)}function Ie(e,r,t){if(r>kr)throw Error(fn);return Z(new e(yr),r,t,!0)}function vn(e){var r=e.length-1,t=r*W+1;if(r=e[r],r){for(;r%10==0;r/=10)t--;for(r=e[0];r>=10;r/=10)t++}return t}function He(e){for(var r="";e--;)r+="0";return r}function pn(e,r,t,i){var n,a=new e(1),l=Math.ceil(i/W+4);for(G=!1;;){if(t%2&&(a=a.times(r),ut(a.d,l)&&(n=!0)),t=Se(t/2),t===0){t=a.d.length-1,n&&a.d[t]===0&&++a.d[t];break}r=r.times(r),ut(r.d,l)}return G=!0,a}function st(e){return e.d[e.d.length-1]&1}function dn(e,r,t){for(var i,n=new e(r[0]),a=0;++a<r.length;)if(i=new e(r[a]),i.s)n[t](i)&&(n=i);else{n=i;break}return n}function Wr(e,r){var t,i,n,a,l,v,p,d=0,s=0,o=0,f=e.constructor,c=f.rounding,h=f.precision;if(!e.d||!e.d[0]||e.e>17)return new f(e.d?e.d[0]?e.s<0?0:1/0:1:e.s?e.s<0?0:e:0/0);for(r==null?(G=!1,p=h):p=r,v=new f(.03125);e.e>-2;)e=e.times(v),o+=5;for(i=Math.log(we(2,o))/Math.LN10*2+5|0,p+=i,t=a=l=new f(1),f.precision=p;;){if(a=Z(a.times(e),p,1),t=t.times(++s),v=l.plus(ne(a,t,p,1)),Me(v.d).slice(0,p)===Me(l.d).slice(0,p)){for(n=o;n--;)l=Z(l.times(l),p,1);if(r==null)if(d<3&&cr(l.d,p-i,c,d))f.precision=p+=10,t=a=v=new f(1),s=0,d++;else return Z(l,f.precision=h,c,G=!0);else return f.precision=h,l}l=v}}function ke(e,r){var t,i,n,a,l,v,p,d,s,o,f,c=1,h=10,u=e,m=u.d,g=u.constructor,N=g.rounding,w=g.precision;if(u.s<0||!m||!m[0]||!u.e&&m[0]==1&&m.length==1)return new g(m&&!m[0]?-1/0:u.s!=1?NaN:m?0:u);if(r==null?(G=!1,s=w):s=r,g.precision=s+=h,t=Me(m),i=t.charAt(0),Math.abs(a=u.e)<15e14){for(;i<7&&i!=1||i==1&&t.charAt(1)>3;)u=u.times(e),t=Me(u.d),i=t.charAt(0),c++;a=u.e,i>1?(u=new g("0."+t),a++):u=new g(i+"."+t.slice(1))}else return d=_r(g,s+2,w).times(a+""),u=ke(new g(i+"."+t.slice(1)),s-h).plus(d),g.precision=w,r==null?Z(u,w,N,G=!0):u;for(o=u,p=l=u=ne(u.minus(1),u.plus(1),s,1),f=Z(u.times(u),s,1),n=3;;){if(l=Z(l.times(f),s,1),d=p.plus(ne(l,new g(n),s,1)),Me(d.d).slice(0,s)===Me(p.d).slice(0,s))if(p=p.times(2),a!==0&&(p=p.plus(_r(g,s+2,w).times(a+""))),p=ne(p,new g(c),s,1),r==null)if(cr(p.d,s-h,N,v))g.precision=s+=h,d=l=u=ne(o.minus(1),o.plus(1),s,1),f=Z(u.times(u),s,1),n=v=1;else return Z(p,g.precision=w,N,G=!0);else return g.precision=w,p;p=d,n+=2}}function mn(e){return String(e.s*e.s/0)}function Kr(e,r){var t,i,n;for((t=r.indexOf("."))>-1&&(r=r.replace(".","")),(i=r.search(/e/i))>0?(t<0&&(t=i),t+=+r.slice(i+1),r=r.substring(0,i)):t<0&&(t=r.length),i=0;r.charCodeAt(i)===48;i++);for(n=r.length;r.charCodeAt(n-1)===48;--n);if(r=r.slice(i,n),r){if(n-=i,e.e=t=t-i-1,e.d=[],i=(t+1)%W,t<0&&(i+=W),i<n){for(i&&e.d.push(+r.slice(0,i)),n-=W;i<n;)e.d.push(+r.slice(i,i+=W));r=r.slice(i),i=W-r.length}else i-=n;for(;i--;)r+="0";e.d.push(+r),G&&(e.e>e.constructor.maxE?(e.d=null,e.e=NaN):e.e<e.constructor.minE&&(e.e=0,e.d=[0]))}else e.e=0,e.d=[0];return e}function da(e,r){var t,i,n,a,l,v,p,d,s;if(r.indexOf("_")>-1){if(r=r.replace(/(\d)_(?=\d)/g,"$1"),hn.test(r))return Kr(e,r)}else if(r==="Infinity"||r==="NaN")return+r||(e.s=NaN),e.e=NaN,e.d=null,e;if(ca.test(r))t=16,r=r.toLowerCase();else if(fa.test(r))t=2;else if(la.test(r))t=8;else throw Error(Ge+r);for(a=r.search(/p/i),a>0?(p=+r.slice(a+1),r=r.substring(2,a)):r=r.slice(2),a=r.indexOf("."),l=a>=0,i=e.constructor,l&&(r=r.replace(".",""),v=r.length,a=v-a,n=pn(i,new i(t),a,a*2)),d=pr(r,t,Be),s=d.length-1,a=s;d[a]===0;--a)d.pop();return a<0?new i(e.s*0):(e.e=xr(d,s),e.d=d,G=!1,l&&(e=ne(e,n,v*4)),p&&(e=e.times(Math.abs(p)<54?we(2,p):or.pow(2,p))),G=!0,e)}function ma(e,r){var t,i=r.d.length;if(i<3)return r.isZero()?r:ar(e,2,r,r);t=1.4*Math.sqrt(i),t=t>16?16:t|0,r=r.times(1/Cr(5,t)),r=ar(e,2,r,r);for(var n,a=new e(5),l=new e(16),v=new e(20);t--;)n=r.times(r),r=r.times(a.plus(n.times(l.times(n).minus(v))));return r}function ar(e,r,t,i,n){var a,l,v,p,d=e.precision,s=Math.ceil(d/W);for(G=!1,p=t.times(t),v=new e(i);;){if(l=ne(v.times(p),new e(r++*r++),d,1),v=n?i.plus(l):i.minus(l),i=ne(l.times(p),new e(r++*r++),d,1),l=v.plus(i),l.d[s]!==void 0){for(a=s;l.d[a]===v.d[a]&&a--;);if(a==-1)break}a=v,v=i,i=l,l=a}return G=!0,l.d.length=s+1,l}function Cr(e,r){for(var t=e;--r;)t*=e;return t}function gn(e,r){var t,i=r.s<0,n=Ie(e,e.precision,1),a=n.times(.5);if(r=r.abs(),r.lte(a))return Ze=i?4:1,r;if(t=r.divToInt(n),t.isZero())Ze=i?3:2;else{if(r=r.minus(t.times(n)),r.lte(a))return Ze=st(t)?i?2:3:i?4:1,r;Ze=st(t)?i?1:4:i?3:2}return r.minus(n).abs()}function Qr(e,r,t,i){var n,a,l,v,p,d,s,o,f,c=e.constructor,h=t!==void 0;if(h?(ze(t,1,Ye),i===void 0?i=c.rounding:ze(i,0,8)):(t=c.precision,i=c.rounding),!e.isFinite())s=mn(e);else{for(s=Re(e),l=s.indexOf("."),h?(n=2,r==16?t=t*4-3:r==8&&(t=t*3-2)):n=r,l>=0&&(s=s.replace(".",""),f=new c(1),f.e=s.length-l,f.d=pr(Re(f),10,n),f.e=f.d.length),o=pr(s,10,n),a=p=o.length;o[--p]==0;)o.pop();if(!o[0])s=h?"0p+0":"0";else{if(l<0?a--:(e=new c(e),e.d=o,e.e=a,e=ne(e,f,t,i,0,n),o=e.d,a=e.e,d=un),l=o[t],v=n/2,d=d||o[t+1]!==void 0,d=i<4?(l!==void 0||d)&&(i===0||i===(e.s<0?3:2)):l>v||l===v&&(i===4||d||i===6&&o[t-1]&1||i===(e.s<0?8:7)),o.length=t,d)for(;++o[--t]>n-1;)o[t]=0,t||(++a,o.unshift(1));for(p=o.length;!o[p-1];--p);for(l=0,s="";l<p;l++)s+=Vr.charAt(o[l]);if(h){if(p>1)if(r==16||r==8){for(l=r==16?4:3,--p;p%l;p++)s+="0";for(o=pr(s,n,r),p=o.length;!o[p-1];--p);for(l=1,s="1.";l<p;l++)s+=Vr.charAt(o[l])}else s=s.charAt(0)+"."+s.slice(1);s=s+(a<0?"p":"p+")+a}else if(a<0){for(;++a;)s="0"+s;s="0."+s}else if(++a>p)for(a-=p;a--;)s+="0";else a<p&&(s=s.slice(0,a)+"."+s.slice(a))}s=(r==16?"0x":r==2?"0b":r==8?"0o":"")+s}return e.s<0?"-"+s:s}function ut(e,r){if(e.length>r)return e.length=r,!0}function ga(e){return new this(e).abs()}function wa(e){return new this(e).acos()}function ya(e){return new this(e).acosh()}function _a(e,r){return new this(e).plus(r)}function ba(e){return new this(e).asin()}function Na(e){return new this(e).asinh()}function Ma(e){return new this(e).atan()}function Ea(e){return new this(e).atanh()}function Sa(e,r){e=new this(e),r=new this(r);var t,i=this.precision,n=this.rounding,a=i+4;return!e.s||!r.s?t=new this(NaN):!e.d&&!r.d?(t=Ie(this,a,1).times(r.s>0?.25:.75),t.s=e.s):!r.d||e.isZero()?(t=r.s<0?Ie(this,i,n):new this(0),t.s=e.s):!e.d||r.isZero()?(t=Ie(this,a,1).times(.5),t.s=e.s):r.s<0?(this.precision=a,this.rounding=1,t=this.atan(ne(e,r,a,1)),r=Ie(this,a,1),this.precision=i,this.rounding=n,t=e.s<0?t.minus(r):t.plus(r)):t=this.atan(ne(e,r,a,1)),t}function xa(e){return new this(e).cbrt()}function Ca(e){return Z(e=new this(e),e.e+1,2)}function Aa(e,r,t){return new this(e).clamp(r,t)}function Da(e){if(!e||typeof e!="object")throw Error(Sr+"Object expected");var r,t,i,n=e.defaults===!0,a=["precision",1,Ye,"rounding",0,8,"toExpNeg",-nr,0,"toExpPos",0,nr,"maxE",0,nr,"minE",-nr,0,"modulo",0,9];for(r=0;r<a.length;r+=3)if(t=a[r],n&&(this[t]=Hr[t]),(i=e[t])!==void 0)if(Se(i)===i&&i>=a[r+1]&&i<=a[r+2])this[t]=i;else throw Error(Ge+t+": "+i);if(t="crypto",n&&(this[t]=Hr[t]),(i=e[t])!==void 0)if(i===!0||i===!1||i===0||i===1)if(i)if(typeof crypto!="undefined"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))this[t]=!0;else throw Error(cn);else this[t]=!1;else throw Error(Ge+t+": "+i);return this}function Oa(e){return new this(e).cos()}function za(e){return new this(e).cosh()}function wn(e){var r,t,i;function n(a){var l,v,p,d=this;if(!(d instanceof n))return new n(a);if(d.constructor=n,ft(a)){d.s=a.s,G?!a.d||a.e>n.maxE?(d.e=NaN,d.d=null):a.e<n.minE?(d.e=0,d.d=[0]):(d.e=a.e,d.d=a.d.slice()):(d.e=a.e,d.d=a.d?a.d.slice():a.d);return}if(p=typeof a,p==="number"){if(a===0){d.s=1/a<0?-1:1,d.e=0,d.d=[0];return}if(a<0?(a=-a,d.s=-1):d.s=1,a===~~a&&a<1e7){for(l=0,v=a;v>=10;v/=10)l++;G?l>n.maxE?(d.e=NaN,d.d=null):l<n.minE?(d.e=0,d.d=[0]):(d.e=l,d.d=[a]):(d.e=l,d.d=[a]);return}else if(a*0!==0){a||(d.s=NaN),d.e=NaN,d.d=null;return}return Kr(d,a.toString())}else if(p!=="string")throw Error(Ge+a);return(v=a.charCodeAt(0))===45?(a=a.slice(1),d.s=-1):(v===43&&(a=a.slice(1)),d.s=1),hn.test(a)?Kr(d,a):da(d,a)}if(n.prototype=F,n.ROUND_UP=0,n.ROUND_DOWN=1,n.ROUND_CEIL=2,n.ROUND_FLOOR=3,n.ROUND_HALF_UP=4,n.ROUND_HALF_DOWN=5,n.ROUND_HALF_EVEN=6,n.ROUND_HALF_CEIL=7,n.ROUND_HALF_FLOOR=8,n.EUCLID=9,n.config=n.set=Da,n.clone=wn,n.isDecimal=ft,n.abs=ga,n.acos=wa,n.acosh=ya,n.add=_a,n.asin=ba,n.asinh=Na,n.atan=Ma,n.atanh=Ea,n.atan2=Sa,n.cbrt=xa,n.ceil=Ca,n.clamp=Aa,n.cos=Oa,n.cosh=za,n.div=Fa,n.exp=$a,n.floor=Ia,n.hypot=Pa,n.ln=Ba,n.log=Ta,n.log10=qa,n.log2=La,n.max=Ra,n.min=Ua,n.mod=Za,n.mul=Va,n.pow=Ha,n.random=ka,n.round=Wa,n.sign=Ka,n.sin=Ga,n.sinh=Ja,n.sqrt=Ya,n.sub=Xa,n.sum=Qa,n.tan=ja,n.tanh=eo,n.trunc=ro,e===void 0&&(e={}),e&&e.defaults!==!0)for(i=["precision","rounding","toExpNeg","toExpPos","maxE","minE","modulo","crypto"],r=0;r<i.length;)e.hasOwnProperty(t=i[r++])||(e[t]=this[t]);return n.config(e),n}function Fa(e,r){return new this(e).div(r)}function $a(e){return new this(e).exp()}function Ia(e){return Z(e=new this(e),e.e+1,3)}function Pa(){var e,r,t=new this(0);for(G=!1,e=0;e<arguments.length;)if(r=new this(arguments[e++]),r.d)t.d&&(t=t.plus(r.times(r)));else{if(r.s)return G=!0,new this(1/0);t=r}return G=!0,t.sqrt()}function ft(e){return e instanceof or||e&&e.toStringTag===ln||!1}function Ba(e){return new this(e).ln()}function Ta(e,r){return new this(e).log(r)}function La(e){return new this(e).log(2)}function qa(e){return new this(e).log(10)}function Ra(){return dn(this,arguments,"lt")}function Ua(){return dn(this,arguments,"gt")}function Za(e,r){return new this(e).mod(r)}function Va(e,r){return new this(e).mul(r)}function Ha(e,r){return new this(e).pow(r)}function ka(e){var r,t,i,n,a=0,l=new this(1),v=[];if(e===void 0?e=this.precision:ze(e,1,Ye),i=Math.ceil(e/W),this.crypto)if(crypto.getRandomValues)for(r=crypto.getRandomValues(new Uint32Array(i));a<i;)n=r[a],n>=429e7?r[a]=crypto.getRandomValues(new Uint32Array(1))[0]:v[a++]=n%1e7;else if(crypto.randomBytes){for(r=crypto.randomBytes(i*=4);a<i;)n=r[a]+(r[a+1]<<8)+(r[a+2]<<16)+((r[a+3]&127)<<24),n>=214e7?crypto.randomBytes(4).copy(r,a):(v.push(n%1e7),a+=4);a=i/4}else throw Error(cn);else for(;a<i;)v[a++]=Math.random()*1e7|0;for(i=v[--a],e%=W,i&&e&&(n=we(10,W-e),v[a]=(i/n|0)*n);v[a]===0;a--)v.pop();if(a<0)t=0,v=[0];else{for(t=-1;v[0]===0;t-=W)v.shift();for(i=1,n=v[0];n>=10;n/=10)i++;i<W&&(t-=W-i)}return l.e=t,l.d=v,l}function Wa(e){return Z(e=new this(e),e.e+1,this.rounding)}function Ka(e){return e=new this(e),e.d?e.d[0]?e.s:0*e.s:e.s||NaN}function Ga(e){return new this(e).sin()}function Ja(e){return new this(e).sinh()}function Ya(e){return new this(e).sqrt()}function Xa(e,r){return new this(e).sub(r)}function Qa(){var e=0,r=arguments,t=new this(r[e]);for(G=!1;t.s&&++e<r.length;)t=t.plus(r[e]);return G=!0,Z(t,this.precision,this.rounding)}function ja(e){return new this(e).tan()}function eo(e){return new this(e).tanh()}function ro(e){return Z(e=new this(e),e.e+1,1)}F[Symbol.for("nodejs.util.inspect.custom")]=F.toString;F[Symbol.toStringTag]="Decimal";var or=F.constructor=wn(Hr);wr=new or(wr);yr=new or(yr);var to="BigNumber",no=["?on","config"],io=Q(to,no,e=>{var{on:r,config:t}=e,i=or.clone({precision:t.precision,modulo:or.EUCLID});return i.prototype=Object.create(i.prototype),i.prototype.type="BigNumber",i.prototype.isBigNumber=!0,i.prototype.toJSON=function(){return{mathjs:"BigNumber",value:this.toString()}},i.fromJSON=function(n){return new i(n.value)},r&&r("config",function(n,a){n.precision!==a.precision&&i.config({precision:n.precision})}),i},{isClass:!0}),yn={exports:{}};/**
 * @license Complex.js v2.1.1 12/05/2020
 *
 * Copyright (c) 2020, Robert Eisele (robert@xarg.org)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 **/(function(e,r){(function(t){var i=Math.cosh||function(o){return Math.abs(o)<1e-9?1-o:(Math.exp(o)+Math.exp(-o))*.5},n=Math.sinh||function(o){return Math.abs(o)<1e-9?o:(Math.exp(o)-Math.exp(-o))*.5},a=function(o){var f=Math.PI/4;if(-f>o||o>f)return Math.cos(o)-1;var c=o*o;return c*(c*(c*(c*(c*(c*(c*(c/20922789888e3-1/87178291200)+1/479001600)-1/3628800)+1/40320)-1/720)+1/24)-1/2)},l=function(o,f){var c=Math.abs(o),h=Math.abs(f);return c<3e3&&h<3e3?Math.sqrt(c*c+h*h):(c<h?(c=h,h=o/f):h=f/o,c*Math.sqrt(1+h*h))},v=function(){throw SyntaxError("Invalid Param")};function p(o,f){var c=Math.abs(o),h=Math.abs(f);return o===0?Math.log(h):f===0?Math.log(c):c<3e3&&h<3e3?Math.log(o*o+f*f)*.5:(o=o/2,f=f/2,.5*Math.log(o*o+f*f)+Math.LN2)}var d=function(o,f){var c={re:0,im:0};if(o==null)c.re=c.im=0;else if(f!==void 0)c.re=o,c.im=f;else switch(typeof o){case"object":if("im"in o&&"re"in o)c.re=o.re,c.im=o.im;else if("abs"in o&&"arg"in o){if(!Number.isFinite(o.abs)&&Number.isFinite(o.arg))return s.INFINITY;c.re=o.abs*Math.cos(o.arg),c.im=o.abs*Math.sin(o.arg)}else if("r"in o&&"phi"in o){if(!Number.isFinite(o.r)&&Number.isFinite(o.phi))return s.INFINITY;c.re=o.r*Math.cos(o.phi),c.im=o.r*Math.sin(o.phi)}else o.length===2?(c.re=o[0],c.im=o[1]):v();break;case"string":c.im=c.re=0;var h=o.match(/\d+\.?\d*e[+-]?\d+|\d+\.?\d*|\.\d+|./g),u=1,m=0;h===null&&v();for(var g=0;g<h.length;g++){var N=h[g];N===" "||N==="	"||N===`
`||(N==="+"?u++:N==="-"?m++:N==="i"||N==="I"?(u+m===0&&v(),h[g+1]!==" "&&!isNaN(h[g+1])?(c.im+=parseFloat((m%2?"-":"")+h[g+1]),g++):c.im+=parseFloat((m%2?"-":"")+"1"),u=m=0):((u+m===0||isNaN(N))&&v(),h[g+1]==="i"||h[g+1]==="I"?(c.im+=parseFloat((m%2?"-":"")+N),g++):c.re+=parseFloat((m%2?"-":"")+N),u=m=0))}u+m>0&&v();break;case"number":c.im=0,c.re=o;break;default:v()}return isNaN(c.re)||isNaN(c.im),c};function s(o,f){if(!(this instanceof s))return new s(o,f);var c=d(o,f);this.re=c.re,this.im=c.im}s.prototype={re:0,im:0,sign:function(){var o=this.abs();return new s(this.re/o,this.im/o)},add:function(o,f){var c=new s(o,f);return this.isInfinite()&&c.isInfinite()?s.NAN:this.isInfinite()||c.isInfinite()?s.INFINITY:new s(this.re+c.re,this.im+c.im)},sub:function(o,f){var c=new s(o,f);return this.isInfinite()&&c.isInfinite()?s.NAN:this.isInfinite()||c.isInfinite()?s.INFINITY:new s(this.re-c.re,this.im-c.im)},mul:function(o,f){var c=new s(o,f);return this.isInfinite()&&c.isZero()||this.isZero()&&c.isInfinite()?s.NAN:this.isInfinite()||c.isInfinite()?s.INFINITY:c.im===0&&this.im===0?new s(this.re*c.re,0):new s(this.re*c.re-this.im*c.im,this.re*c.im+this.im*c.re)},div:function(o,f){var c=new s(o,f);if(this.isZero()&&c.isZero()||this.isInfinite()&&c.isInfinite())return s.NAN;if(this.isInfinite()||c.isZero())return s.INFINITY;if(this.isZero()||c.isInfinite())return s.ZERO;o=this.re,f=this.im;var h=c.re,u=c.im,m,g;return u===0?new s(o/h,f/h):Math.abs(h)<Math.abs(u)?(g=h/u,m=h*g+u,new s((o*g+f)/m,(f*g-o)/m)):(g=u/h,m=u*g+h,new s((o+f*g)/m,(f-o*g)/m))},pow:function(o,f){var c=new s(o,f);if(o=this.re,f=this.im,c.isZero())return s.ONE;if(c.im===0){if(f===0&&o>0)return new s(Math.pow(o,c.re),0);if(o===0)switch((c.re%4+4)%4){case 0:return new s(Math.pow(f,c.re),0);case 1:return new s(0,Math.pow(f,c.re));case 2:return new s(-Math.pow(f,c.re),0);case 3:return new s(0,-Math.pow(f,c.re))}}if(o===0&&f===0&&c.re>0&&c.im>=0)return s.ZERO;var h=Math.atan2(f,o),u=p(o,f);return o=Math.exp(c.re*u-c.im*h),f=c.im*u+c.re*h,new s(o*Math.cos(f),o*Math.sin(f))},sqrt:function(){var o=this.re,f=this.im,c=this.abs(),h,u;if(o>=0){if(f===0)return new s(Math.sqrt(o),0);h=.5*Math.sqrt(2*(c+o))}else h=Math.abs(f)/Math.sqrt(2*(c-o));return o<=0?u=.5*Math.sqrt(2*(c-o)):u=Math.abs(f)/Math.sqrt(2*(c+o)),new s(h,f<0?-u:u)},exp:function(){var o=Math.exp(this.re);return this.im,new s(o*Math.cos(this.im),o*Math.sin(this.im))},expm1:function(){var o=this.re,f=this.im;return new s(Math.expm1(o)*Math.cos(f)+a(f),Math.exp(o)*Math.sin(f))},log:function(){var o=this.re,f=this.im;return new s(p(o,f),Math.atan2(f,o))},abs:function(){return l(this.re,this.im)},arg:function(){return Math.atan2(this.im,this.re)},sin:function(){var o=this.re,f=this.im;return new s(Math.sin(o)*i(f),Math.cos(o)*n(f))},cos:function(){var o=this.re,f=this.im;return new s(Math.cos(o)*i(f),-Math.sin(o)*n(f))},tan:function(){var o=2*this.re,f=2*this.im,c=Math.cos(o)+i(f);return new s(Math.sin(o)/c,n(f)/c)},cot:function(){var o=2*this.re,f=2*this.im,c=Math.cos(o)-i(f);return new s(-Math.sin(o)/c,n(f)/c)},sec:function(){var o=this.re,f=this.im,c=.5*i(2*f)+.5*Math.cos(2*o);return new s(Math.cos(o)*i(f)/c,Math.sin(o)*n(f)/c)},csc:function(){var o=this.re,f=this.im,c=.5*i(2*f)-.5*Math.cos(2*o);return new s(Math.sin(o)*i(f)/c,-Math.cos(o)*n(f)/c)},asin:function(){var o=this.re,f=this.im,c=new s(f*f-o*o+1,-2*o*f).sqrt(),h=new s(c.re-f,c.im+o).log();return new s(h.im,-h.re)},acos:function(){var o=this.re,f=this.im,c=new s(f*f-o*o+1,-2*o*f).sqrt(),h=new s(c.re-f,c.im+o).log();return new s(Math.PI/2-h.im,h.re)},atan:function(){var o=this.re,f=this.im;if(o===0){if(f===1)return new s(0,1/0);if(f===-1)return new s(0,-1/0)}var c=o*o+(1-f)*(1-f),h=new s((1-f*f-o*o)/c,-2*o/c).log();return new s(-.5*h.im,.5*h.re)},acot:function(){var o=this.re,f=this.im;if(f===0)return new s(Math.atan2(1,o),0);var c=o*o+f*f;return c!==0?new s(o/c,-f/c).atan():new s(o!==0?o/0:0,f!==0?-f/0:0).atan()},asec:function(){var o=this.re,f=this.im;if(o===0&&f===0)return new s(0,1/0);var c=o*o+f*f;return c!==0?new s(o/c,-f/c).acos():new s(o!==0?o/0:0,f!==0?-f/0:0).acos()},acsc:function(){var o=this.re,f=this.im;if(o===0&&f===0)return new s(Math.PI/2,1/0);var c=o*o+f*f;return c!==0?new s(o/c,-f/c).asin():new s(o!==0?o/0:0,f!==0?-f/0:0).asin()},sinh:function(){var o=this.re,f=this.im;return new s(n(o)*Math.cos(f),i(o)*Math.sin(f))},cosh:function(){var o=this.re,f=this.im;return new s(i(o)*Math.cos(f),n(o)*Math.sin(f))},tanh:function(){var o=2*this.re,f=2*this.im,c=i(o)+Math.cos(f);return new s(n(o)/c,Math.sin(f)/c)},coth:function(){var o=2*this.re,f=2*this.im,c=i(o)-Math.cos(f);return new s(n(o)/c,-Math.sin(f)/c)},csch:function(){var o=this.re,f=this.im,c=Math.cos(2*f)-i(2*o);return new s(-2*n(o)*Math.cos(f)/c,2*i(o)*Math.sin(f)/c)},sech:function(){var o=this.re,f=this.im,c=Math.cos(2*f)+i(2*o);return new s(2*i(o)*Math.cos(f)/c,-2*n(o)*Math.sin(f)/c)},asinh:function(){var o=this.im;this.im=-this.re,this.re=o;var f=this.asin();return this.re=-this.im,this.im=o,o=f.re,f.re=-f.im,f.im=o,f},acosh:function(){var o=this.acos();if(o.im<=0){var f=o.re;o.re=-o.im,o.im=f}else{var f=o.im;o.im=-o.re,o.re=f}return o},atanh:function(){var o=this.re,f=this.im,c=o>1&&f===0,h=1-o,u=1+o,m=h*h+f*f,g=m!==0?new s((u*h-f*f)/m,(f*h+u*f)/m):new s(o!==-1?o/0:0,f!==0?f/0:0),N=g.re;return g.re=p(g.re,g.im)/2,g.im=Math.atan2(g.im,N)/2,c&&(g.im=-g.im),g},acoth:function(){var o=this.re,f=this.im;if(o===0&&f===0)return new s(0,Math.PI/2);var c=o*o+f*f;return c!==0?new s(o/c,-f/c).atanh():new s(o!==0?o/0:0,f!==0?-f/0:0).atanh()},acsch:function(){var o=this.re,f=this.im;if(f===0)return new s(o!==0?Math.log(o+Math.sqrt(o*o+1)):1/0,0);var c=o*o+f*f;return c!==0?new s(o/c,-f/c).asinh():new s(o!==0?o/0:0,f!==0?-f/0:0).asinh()},asech:function(){var o=this.re,f=this.im;if(this.isZero())return s.INFINITY;var c=o*o+f*f;return c!==0?new s(o/c,-f/c).acosh():new s(o!==0?o/0:0,f!==0?-f/0:0).acosh()},inverse:function(){if(this.isZero())return s.INFINITY;if(this.isInfinite())return s.ZERO;var o=this.re,f=this.im,c=o*o+f*f;return new s(o/c,-f/c)},conjugate:function(){return new s(this.re,-this.im)},neg:function(){return new s(-this.re,-this.im)},ceil:function(o){return o=Math.pow(10,o||0),new s(Math.ceil(this.re*o)/o,Math.ceil(this.im*o)/o)},floor:function(o){return o=Math.pow(10,o||0),new s(Math.floor(this.re*o)/o,Math.floor(this.im*o)/o)},round:function(o){return o=Math.pow(10,o||0),new s(Math.round(this.re*o)/o,Math.round(this.im*o)/o)},equals:function(o,f){var c=new s(o,f);return Math.abs(c.re-this.re)<=s.EPSILON&&Math.abs(c.im-this.im)<=s.EPSILON},clone:function(){return new s(this.re,this.im)},toString:function(){var o=this.re,f=this.im,c="";return this.isNaN()?"NaN":this.isInfinite()?"Infinity":(Math.abs(o)<s.EPSILON&&(o=0),Math.abs(f)<s.EPSILON&&(f=0),f===0?c+o:(o!==0?(c+=o,c+=" ",f<0?(f=-f,c+="-"):c+="+",c+=" "):f<0&&(f=-f,c+="-"),f!==1&&(c+=f),c+"i"))},toVector:function(){return[this.re,this.im]},valueOf:function(){return this.im===0?this.re:null},isNaN:function(){return isNaN(this.re)||isNaN(this.im)},isZero:function(){return this.im===0&&this.re===0},isFinite:function(){return isFinite(this.re)&&isFinite(this.im)},isInfinite:function(){return!(this.isNaN()||this.isFinite())}},s.ZERO=new s(0,0),s.ONE=new s(1,0),s.I=new s(0,1),s.PI=new s(Math.PI,0),s.E=new s(Math.E,0),s.INFINITY=new s(1/0,1/0),s.NAN=new s(NaN,NaN),s.EPSILON=1e-15,Object.defineProperty(s,"__esModule",{value:!0}),s.default=s,s.Complex=s,e.exports=s})()})(yn);var Oe=Rt(yn.exports),ao="Complex",oo=[],so=Q(ao,oo,()=>(Oe.prototype.type="Complex",Oe.prototype.isComplex=!0,Oe.prototype.toJSON=function(){return{mathjs:"Complex",re:this.re,im:this.im}},Oe.prototype.toPolar=function(){return{r:this.abs(),phi:this.arg()}},Oe.prototype.format=function(e){var r="",t=this.im,i=this.re,n=Rr(this.re,e),a=Rr(this.im,e),l=le(e)?e:e?e.precision:null;if(l!==null){var v=Math.pow(10,-l);Math.abs(i/t)<v&&(i=0),Math.abs(t/i)<v&&(t=0)}return t===0?r=n:i===0?t===1?r="i":t===-1?r="-i":r=a+"i":t<0?t===-1?r=n+" - i":r=n+" - "+a.substring(1)+"i":t===1?r=n+" + i":r=n+" + "+a+"i",r},Oe.fromPolar=function(e){switch(arguments.length){case 1:{var r=arguments[0];if(typeof r=="object")return Oe(r);throw new TypeError("Input has to be an object with r and phi keys.")}case 2:{var t=arguments[0],i=arguments[1];if(le(t)){if(Yr(i)&&i.hasBase("ANGLE")&&(i=i.toNumber("rad")),le(i))return new Oe({r:t,phi:i});throw new TypeError("Phi is not a number nor an angle unit.")}else throw new TypeError("Radius r is not a number.")}default:throw new SyntaxError("Wrong number of arguments in function fromPolar")}},Oe.prototype.valueOf=Oe.prototype.toString,Oe.fromJSON=function(e){return new Oe(e)},Oe.compare=function(e,r){return e.re>r.re?1:e.re<r.re?-1:e.im>r.im?1:e.im<r.im?-1:0},Oe),{isClass:!0}),_n={exports:{}};/**
 * @license Fraction.js v4.2.0 05/03/2022
 * https://www.xarg.org/2014/03/rational-numbers-in-javascript/
 *
 * Copyright (c) 2021, Robert Eisele (robert@xarg.org)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 **/(function(e,r){(function(t){var i=2e3,n={s:1,n:0,d:1};function a(h,u){if(isNaN(h=parseInt(h,10)))throw c.InvalidParameter;return h*u}function l(h,u){if(u===0)throw c.DivisionByZero;var m=Object.create(c.prototype);m.s=h<0?-1:1,h=h<0?-h:h;var g=f(h,u);return m.n=h/g,m.d=u/g,m}function v(h){for(var u={},m=h,g=2,N=4;N<=m;){for(;m%g===0;)m/=g,u[g]=(u[g]||0)+1;N+=1+2*g++}return m!==h?m>1&&(u[m]=(u[m]||0)+1):u[h]=(u[h]||0)+1,u}var p=function(h,u){var m=0,g=1,N=1,w=0,M=0,_=0,y=1,x=1,b=0,S=1,O=1,z=1,I=1e7,q;if(h!=null)if(u!==void 0){if(m=h,g=u,N=m*g,m%1!==0||g%1!==0)throw c.NonIntegerParameter}else switch(typeof h){case"object":{if("d"in h&&"n"in h)m=h.n,g=h.d,"s"in h&&(m*=h.s);else if(0 in h)m=h[0],1 in h&&(g=h[1]);else throw c.InvalidParameter;N=m*g;break}case"number":{if(h<0&&(N=h,h=-h),h%1===0)m=h;else if(h>0){for(h>=1&&(x=Math.pow(10,Math.floor(1+Math.log(h)/Math.LN10)),h/=x);S<=I&&z<=I;)if(q=(b+O)/(S+z),h===q){S+z<=I?(m=b+O,g=S+z):z>S?(m=O,g=z):(m=b,g=S);break}else h>q?(b+=O,S+=z):(O+=b,z+=S),S>I?(m=O,g=z):(m=b,g=S);m*=x}else(isNaN(h)||isNaN(u))&&(g=m=NaN);break}case"string":{if(S=h.match(/\d+|./g),S===null)throw c.InvalidParameter;if(S[b]==="-"?(N=-1,b++):S[b]==="+"&&b++,S.length===b+1?M=a(S[b++],N):S[b+1]==="."||S[b]==="."?(S[b]!=="."&&(w=a(S[b++],N)),b++,(b+1===S.length||S[b+1]==="("&&S[b+3]===")"||S[b+1]==="'"&&S[b+3]==="'")&&(M=a(S[b],N),y=Math.pow(10,S[b].length),b++),(S[b]==="("&&S[b+2]===")"||S[b]==="'"&&S[b+2]==="'")&&(_=a(S[b+1],N),x=Math.pow(10,S[b+1].length)-1,b+=3)):S[b+1]==="/"||S[b+1]===":"?(M=a(S[b],N),y=a(S[b+2],1),b+=3):S[b+3]==="/"&&S[b+1]===" "&&(w=a(S[b],N),M=a(S[b+2],N),y=a(S[b+4],1),b+=5),S.length<=b){g=y*x,N=m=_+g*w+x*M;break}}default:throw c.InvalidParameter}if(g===0)throw c.DivisionByZero;n.s=N<0?-1:1,n.n=Math.abs(m),n.d=Math.abs(g)};function d(h,u,m){for(var g=1;u>0;h=h*h%m,u>>=1)u&1&&(g=g*h%m);return g}function s(h,u){for(;u%2===0;u/=2);for(;u%5===0;u/=5);if(u===1)return 0;for(var m=10%u,g=1;m!==1;g++)if(m=m*10%u,g>i)return 0;return g}function o(h,u,m){for(var g=1,N=d(10,m,u),w=0;w<300;w++){if(g===N)return w;g=g*10%u,N=N*10%u}return 0}function f(h,u){if(!h)return u;if(!u)return h;for(;;){if(h%=u,!h)return u;if(u%=h,!u)return h}}function c(h,u){if(p(h,u),this instanceof c)h=f(n.d,n.n),this.s=n.s,this.n=n.n/h,this.d=n.d/h;else return l(n.s*n.n,n.d)}c.DivisionByZero=new Error("Division by Zero"),c.InvalidParameter=new Error("Invalid argument"),c.NonIntegerParameter=new Error("Parameters must be integer"),c.prototype={s:1,n:0,d:1,abs:function(){return l(this.n,this.d)},neg:function(){return l(-this.s*this.n,this.d)},add:function(h,u){return p(h,u),l(this.s*this.n*n.d+n.s*this.d*n.n,this.d*n.d)},sub:function(h,u){return p(h,u),l(this.s*this.n*n.d-n.s*this.d*n.n,this.d*n.d)},mul:function(h,u){return p(h,u),l(this.s*n.s*this.n*n.n,this.d*n.d)},div:function(h,u){return p(h,u),l(this.s*n.s*this.n*n.d,this.d*n.n)},clone:function(){return l(this.s*this.n,this.d)},mod:function(h,u){if(isNaN(this.n)||isNaN(this.d))return new c(NaN);if(h===void 0)return l(this.s*this.n%this.d,1);if(p(h,u),n.n===0&&this.d===0)throw c.DivisionByZero;return l(this.s*(n.d*this.n)%(n.n*this.d),n.d*this.d)},gcd:function(h,u){return p(h,u),l(f(n.n,this.n)*f(n.d,this.d),n.d*this.d)},lcm:function(h,u){return p(h,u),n.n===0&&this.n===0?l(0,1):l(n.n*this.n,f(n.n,this.n)*f(n.d,this.d))},ceil:function(h){return h=Math.pow(10,h||0),isNaN(this.n)||isNaN(this.d)?new c(NaN):l(Math.ceil(h*this.s*this.n/this.d),h)},floor:function(h){return h=Math.pow(10,h||0),isNaN(this.n)||isNaN(this.d)?new c(NaN):l(Math.floor(h*this.s*this.n/this.d),h)},round:function(h){return h=Math.pow(10,h||0),isNaN(this.n)||isNaN(this.d)?new c(NaN):l(Math.round(h*this.s*this.n/this.d),h)},inverse:function(){return l(this.s*this.d,this.n)},pow:function(h,u){if(p(h,u),n.d===1)return n.s<0?l(Math.pow(this.s*this.d,n.n),Math.pow(this.n,n.n)):l(Math.pow(this.s*this.n,n.n),Math.pow(this.d,n.n));if(this.s<0)return null;var m=v(this.n),g=v(this.d),N=1,w=1;for(var M in m)if(M!=="1"){if(M==="0"){N=0;break}if(m[M]*=n.n,m[M]%n.d===0)m[M]/=n.d;else return null;N*=Math.pow(M,m[M])}for(var M in g)if(M!=="1"){if(g[M]*=n.n,g[M]%n.d===0)g[M]/=n.d;else return null;w*=Math.pow(M,g[M])}return n.s<0?l(w,N):l(N,w)},equals:function(h,u){return p(h,u),this.s*this.n*n.d===n.s*n.n*this.d},compare:function(h,u){p(h,u);var m=this.s*this.n*n.d-n.s*n.n*this.d;return(0<m)-(m<0)},simplify:function(h){if(isNaN(this.n)||isNaN(this.d))return this;h=h||.001;for(var u=this.abs(),m=u.toContinued(),g=1;g<m.length;g++){for(var N=l(m[g-1],1),w=g-2;w>=0;w--)N=N.inverse().add(m[w]);if(N.sub(u).abs().valueOf()<h)return N.mul(this.s)}return this},divisible:function(h,u){return p(h,u),!(!(n.n*this.d)||this.n*n.d%(n.n*this.d))},valueOf:function(){return this.s*this.n/this.d},toFraction:function(h){var u,m="",g=this.n,N=this.d;return this.s<0&&(m+="-"),N===1?m+=g:(h&&(u=Math.floor(g/N))>0&&(m+=u,m+=" ",g%=N),m+=g,m+="/",m+=N),m},toLatex:function(h){var u,m="",g=this.n,N=this.d;return this.s<0&&(m+="-"),N===1?m+=g:(h&&(u=Math.floor(g/N))>0&&(m+=u,g%=N),m+="\\frac{",m+=g,m+="}{",m+=N,m+="}"),m},toContinued:function(){var h,u=this.n,m=this.d,g=[];if(isNaN(u)||isNaN(m))return g;do g.push(Math.floor(u/m)),h=u%m,u=m,m=h;while(u!==1);return g},toString:function(h){var u=this.n,m=this.d;if(isNaN(u)||isNaN(m))return"NaN";h=h||15;var g=s(u,m),N=o(u,m,g),w=this.s<0?"-":"";if(w+=u/m|0,u%=m,u*=10,u&&(w+="."),g){for(var M=N;M--;)w+=u/m|0,u%=m,u*=10;w+="(";for(var M=g;M--;)w+=u/m|0,u%=m,u*=10;w+=")"}else for(var M=h;u&&M--;)w+=u/m|0,u%=m,u*=10;return w}},Object.defineProperty(c,"__esModule",{value:!0}),c.default=c,c.Fraction=c,e.exports=c})()})(_n);var tr=Rt(_n.exports),uo="Fraction",fo=[],co=Q(uo,fo,()=>(tr.prototype.type="Fraction",tr.prototype.isFraction=!0,tr.prototype.toJSON=function(){return{mathjs:"Fraction",n:this.s*this.n,d:this.d}},tr.fromJSON=function(e){return new tr(e)},tr),{isClass:!0}),lo="Matrix",ho=[],vo=Q(lo,ho,()=>{function e(){if(!(this instanceof e))throw new SyntaxError("Constructor must be called with the new operator")}return e.prototype.type="Matrix",e.prototype.isMatrix=!0,e.prototype.storage=function(){throw new Error("Cannot invoke storage on a Matrix interface")},e.prototype.datatype=function(){throw new Error("Cannot invoke datatype on a Matrix interface")},e.prototype.create=function(r,t){throw new Error("Cannot invoke create on a Matrix interface")},e.prototype.subset=function(r,t,i){throw new Error("Cannot invoke subset on a Matrix interface")},e.prototype.get=function(r){throw new Error("Cannot invoke get on a Matrix interface")},e.prototype.set=function(r,t,i){throw new Error("Cannot invoke set on a Matrix interface")},e.prototype.resize=function(r,t){throw new Error("Cannot invoke resize on a Matrix interface")},e.prototype.reshape=function(r,t){throw new Error("Cannot invoke reshape on a Matrix interface")},e.prototype.clone=function(){throw new Error("Cannot invoke clone on a Matrix interface")},e.prototype.size=function(){throw new Error("Cannot invoke size on a Matrix interface")},e.prototype.map=function(r,t){throw new Error("Cannot invoke map on a Matrix interface")},e.prototype.forEach=function(r){throw new Error("Cannot invoke forEach on a Matrix interface")},e.prototype[Symbol.iterator]=function(){throw new Error("Cannot iterate a Matrix interface")},e.prototype.toArray=function(){throw new Error("Cannot invoke toArray on a Matrix interface")},e.prototype.valueOf=function(){throw new Error("Cannot invoke valueOf on a Matrix interface")},e.prototype.format=function(r){throw new Error("Cannot invoke format on a Matrix interface")},e.prototype.toString=function(){throw new Error("Cannot invoke toString on a Matrix interface")},e},{isClass:!0}),po="DenseMatrix",mo=["Matrix"],go=Q(po,mo,e=>{var{Matrix:r}=e;function t(s,o){if(!(this instanceof t))throw new SyntaxError("Constructor must be called with the new operator");if(o&&!Ue(o))throw new Error("Invalid datatype: "+o);if(_e(s))s.type==="DenseMatrix"?(this._data=pe(s._data),this._size=pe(s._size),this._datatype=o||s._datatype):(this._data=s.toArray(),this._size=s.size(),this._datatype=o||s._datatype);else if(s&&se(s.data)&&se(s.size))this._data=s.data,this._size=s.size,ot(this._data,this._size),this._datatype=o||s.datatype;else if(se(s))this._data=d(s),this._size=Ke(this._data),ot(this._data,this._size),this._datatype=o;else{if(s)throw new TypeError("Unsupported type of data ("+We(s)+")");this._data=[],this._size=[0],this._datatype=o}}t.prototype=new r,t.prototype.createDenseMatrix=function(s,o){return new t(s,o)},t.prototype.type="DenseMatrix",t.prototype.isDenseMatrix=!0,t.prototype.getDataType=function(){return gr(this._data,We)},t.prototype.storage=function(){return"dense"},t.prototype.datatype=function(){return this._datatype},t.prototype.create=function(s,o){return new t(s,o)},t.prototype.subset=function(s,o,f){switch(arguments.length){case 1:return i(this,s);case 2:case 3:return a(this,s,o,f);default:throw new SyntaxError("Wrong number of arguments")}},t.prototype.get=function(s){if(!se(s))throw new TypeError("Array expected");if(s.length!==this._size.length)throw new re(s.length,this._size.length);for(var o=0;o<s.length;o++)ue(s[o],this._size[o]);for(var f=this._data,c=0,h=s.length;c<h;c++){var u=s[c];ue(u,f.length),f=f[u]}return f},t.prototype.set=function(s,o,f){if(!se(s))throw new TypeError("Array expected");if(s.length<this._size.length)throw new re(s.length,this._size.length,"<");var c,h,u,m=s.map(function(N){return N+1});p(this,m,f);var g=this._data;for(c=0,h=s.length-1;c<h;c++)u=s[c],ue(u,g.length),g=g[u];return u=s[s.length-1],ue(u,g.length),g[u]=o,this};function i(s,o){if(!Nr(o))throw new TypeError("Invalid index");var f=o.isScalar();if(f)return s.get(o.min());var c=o.size();if(c.length!==s._size.length)throw new re(c.length,s._size.length);for(var h=o.min(),u=o.max(),m=0,g=s._size.length;m<g;m++)ue(h[m],s._size[m]),ue(u[m],s._size[m]);return new t(n(s._data,o,c.length,0),s._datatype)}function n(s,o,f,c){var h=c===f-1,u=o.dimension(c);return h?u.map(function(m){return ue(m,s.length),s[m]}).valueOf():u.map(function(m){ue(m,s.length);var g=s[m];return n(g,o,f,c+1)}).valueOf()}function a(s,o,f,c){if(!o||o.isIndex!==!0)throw new TypeError("Invalid index");var h=o.size(),u=o.isScalar(),m;if(_e(f)?(m=f.size(),f=f.valueOf()):m=Ke(f),u){if(m.length!==0)throw new TypeError("Scalar expected");s.set(o.min(),f,c)}else{if(h.length<s._size.length)throw new re(h.length,s._size.length,"<");if(m.length<h.length){for(var g=0,N=0;h[g]===1&&m[g]===1;)g++;for(;h[g]===1;)N++,g++;f=tn(f,h.length,N,m)}if(!dr(h,m))throw new re(h,m,">");var w=o.max().map(function(y){return y+1});p(s,w,c);var M=h.length,_=0;l(s._data,o,f,M,_)}return s}function l(s,o,f,c,h){var u=h===c-1,m=o.dimension(h);u?m.forEach(function(g,N){ue(g),s[g]=f[N[0]]}):m.forEach(function(g,N){ue(g),l(s[g],o,f[N[0]],c,h+1)})}t.prototype.resize=function(s,o,f){if(!Ht(s))throw new TypeError("Array or Matrix expected");var c=s.valueOf().map(u=>Array.isArray(u)&&u.length===1?u[0]:u),h=f?this.clone():this;return v(h,c,o)};function v(s,o,f){if(o.length===0){for(var c=s._data;se(c);)c=c[0];return c}return s._size=o.slice(0),s._data=Ur(s._data,s._size,f),s}t.prototype.reshape=function(s,o){var f=o?this.clone():this;f._data=Wi(f._data,s);var c=f._size.reduce((h,u)=>h*u);return f._size=Xr(s,c),f};function p(s,o,f){for(var c=s._size.slice(0),h=!1;c.length<o.length;)c.push(0),h=!0;for(var u=0,m=o.length;u<m;u++)o[u]>c[u]&&(c[u]=o[u],h=!0);h&&v(s,c,f)}t.prototype.clone=function(){var s=new t({data:pe(this._data),size:pe(this._size),datatype:this._datatype});return s},t.prototype.size=function(){return this._size.slice(0)},t.prototype.map=function(s){var o=this,f=function u(m,g){return se(m)?m.map(function(N,w){return u(N,g.concat(w))}):s(m,g,o)},c=f(this._data,[]),h=this._datatype!==void 0?gr(c,We):void 0;return new t(c,h)},t.prototype.forEach=function(s){var o=this,f=function c(h,u){se(h)?h.forEach(function(m,g){c(m,u.concat(g))}):s(h,u,o)};f(this._data,[])},t.prototype[Symbol.iterator]=function*(){var s=function*o(f,c){if(se(f))for(var h=0;h<f.length;h++)yield*o(f[h],c.concat(h));else yield{value:f,index:c}};yield*s(this._data,[])},t.prototype.rows=function(){var s=[],o=this.size();if(o.length!==2)throw new TypeError("Rows can only be returned for a 2D matrix.");var f=this._data;for(var c of f)s.push(new t([c],this._datatype));return s},t.prototype.columns=function(){var s=this,o=[],f=this.size();if(f.length!==2)throw new TypeError("Rows can only be returned for a 2D matrix.");for(var c=this._data,h=function(g){var N=c.map(w=>[w[g]]);o.push(new t(N,s._datatype))},u=0;u<f[1];u++)h(u);return o},t.prototype.toArray=function(){return pe(this._data)},t.prototype.valueOf=function(){return this._data},t.prototype.format=function(s){return ge(this._data,s)},t.prototype.toString=function(){return ge(this._data)},t.prototype.toJSON=function(){return{mathjs:"DenseMatrix",data:this._data,size:this._size,datatype:this._datatype}},t.prototype.diagonal=function(s){if(s){if(Ce(s)&&(s=s.toNumber()),!le(s)||!ye(s))throw new TypeError("The parameter k must be an integer number")}else s=0;for(var o=s>0?s:0,f=s<0?-s:0,c=this._size[0],h=this._size[1],u=Math.min(c-f,h-o),m=[],g=0;g<u;g++)m[g]=this._data[g+f][g+o];return new t({data:m,size:[u],datatype:this._datatype})},t.diagonal=function(s,o,f,c){if(!se(s))throw new TypeError("Array expected, size parameter");if(s.length!==2)throw new Error("Only two dimensions matrix are supported");if(s=s.map(function(x){if(Ce(x)&&(x=x.toNumber()),!le(x)||!ye(x)||x<1)throw new Error("Size values must be positive integers");return x}),f){if(Ce(f)&&(f=f.toNumber()),!le(f)||!ye(f))throw new TypeError("The parameter k must be an integer number")}else f=0;var h=f>0?f:0,u=f<0?-f:0,m=s[0],g=s[1],N=Math.min(m-u,g-h),w;if(se(o)){if(o.length!==N)throw new Error("Invalid value array length");w=function(b){return o[b]}}else if(_e(o)){var M=o.size();if(M.length!==1||M[0]!==N)throw new Error("Invalid matrix length");w=function(b){return o.get([b])}}else w=function(){return o};c||(c=Ce(w(0))?w(0).mul(0):0);var _=[];if(s.length>0){_=Ur(_,s,c);for(var y=0;y<N;y++)_[y+u][y+h]=w(y)}return new t({data:_,size:[m,g]})},t.fromJSON=function(s){return new t(s)},t.prototype.swapRows=function(s,o){if(!le(s)||!ye(s)||!le(o)||!ye(o))throw new Error("Row index must be positive integers");if(this._size.length!==2)throw new Error("Only two dimensional matrix is supported");return ue(s,this._size[0]),ue(o,this._size[0]),t._swapRows(s,o,this._data),this},t._swapRows=function(s,o,f){var c=f[s];f[s]=f[o],f[o]=c};function d(s){for(var o=0,f=s.length;o<f;o++){var c=s[o];se(c)?s[o]=d(c):c&&c.isMatrix===!0&&(s[o]=d(c.valueOf()))}return s}return t},{isClass:!0});function Xe(e,r,t){return e&&typeof e.map=="function"?e.map(function(i){return Xe(i,r)}):r(e)}var bn="number",Nn="number, number";function Mn(e){return Math.abs(e)}Mn.signature=bn;function En(e,r){return e+r}En.signature=Nn;function Sn(e,r){return e*r}Sn.signature=Nn;function xn(e){return-e}xn.signature=bn;var wo="number";function Cn(e){return e===0}Cn.signature=wo;var ct="isZero",yo=["typed"],_o=Q(ct,yo,e=>{var{typed:r}=e;return r(ct,{number:Cn,BigNumber:function(i){return i.isZero()},Complex:function(i){return i.re===0&&i.im===0},Fraction:function(i){return i.d===1&&i.n===0},Unit:function(i){return this(i.value)},"Array | Matrix":function(i){return Xe(i,this)}})});function bo(e,r,t){if(t==null)return e.eq(r);if(e.eq(r))return!0;if(e.isNaN()||r.isNaN())return!1;if(e.isFinite()&&r.isFinite()){var i=e.minus(r).abs();if(i.isZero())return!0;var n=e.constructor.max(e.abs(),r.abs());return i.lte(n.times(t))}return!1}function No(e,r,t){return mr(e.re,r.re,t)&&mr(e.im,r.im,t)}var br="equalScalar",Mo=["typed","config"],Eo=Q(br,Mo,e=>{var{typed:r,config:t}=e;return r(br,{"boolean, boolean":function(n,a){return n===a},"number, number":function(n,a){return mr(n,a,t.epsilon)},"BigNumber, BigNumber":function(n,a){return n.eq(a)||bo(n,a,t.epsilon)},"Fraction, Fraction":function(n,a){return n.equals(a)},"Complex, Complex":function(n,a){return No(n,a,t.epsilon)},"Unit, Unit":function(n,a){if(!n.equalBase(a))throw new Error("Cannot compare units with different base");return this(n.value,a.value)}})});Q(br,["typed","config"],e=>{var{typed:r,config:t}=e;return r(br,{"number, number":function(n,a){return mr(n,a,t.epsilon)}})});var So="SparseMatrix",xo=["typed","equalScalar","Matrix"],Co=Q(So,xo,e=>{var{typed:r,equalScalar:t,Matrix:i}=e;function n(u,m){if(!(this instanceof n))throw new SyntaxError("Constructor must be called with the new operator");if(m&&!Ue(m))throw new Error("Invalid datatype: "+m);if(_e(u))a(this,u,m);else if(u&&se(u.index)&&se(u.ptr)&&se(u.size))this._values=u.values,this._index=u.index,this._ptr=u.ptr,this._size=u.size,this._datatype=m||u.datatype;else if(se(u))l(this,u,m);else{if(u)throw new TypeError("Unsupported type of data ("+We(u)+")");this._values=[],this._index=[],this._ptr=[0],this._size=[0,0],this._datatype=m}}function a(u,m,g){m.type==="SparseMatrix"?(u._values=m._values?pe(m._values):void 0,u._index=pe(m._index),u._ptr=pe(m._ptr),u._size=pe(m._size),u._datatype=g||m._datatype):l(u,m.valueOf(),g||m._datatype)}function l(u,m,g){u._values=[],u._index=[],u._ptr=[],u._datatype=g;var N=m.length,w=0,M=t,_=0;if(Ue(g)&&(M=r.find(t,[g,g])||t,_=r.convert(0,g)),N>0){var y=0;do{u._ptr.push(u._index.length);for(var x=0;x<N;x++){var b=m[x];if(se(b)){if(y===0&&w<b.length&&(w=b.length),y<b.length){var S=b[y];M(S,_)||(u._values.push(S),u._index.push(x))}}else y===0&&w<1&&(w=1),M(b,_)||(u._values.push(b),u._index.push(x))}y++}while(y<w)}u._ptr.push(u._index.length),u._size=[N,w]}n.prototype=new i,n.prototype.createSparseMatrix=function(u,m){return new n(u,m)},n.prototype.type="SparseMatrix",n.prototype.isSparseMatrix=!0,n.prototype.getDataType=function(){return gr(this._values,We)},n.prototype.storage=function(){return"sparse"},n.prototype.datatype=function(){return this._datatype},n.prototype.create=function(u,m){return new n(u,m)},n.prototype.density=function(){var u=this._size[0],m=this._size[1];return u!==0&&m!==0?this._index.length/(u*m):0},n.prototype.subset=function(u,m,g){if(!this._values)throw new Error("Cannot invoke subset on a Pattern only matrix");switch(arguments.length){case 1:return v(this,u);case 2:case 3:return p(this,u,m,g);default:throw new SyntaxError("Wrong number of arguments")}};function v(u,m){if(!Nr(m))throw new TypeError("Invalid index");var g=m.isScalar();if(g)return u.get(m.min());var N=m.size();if(N.length!==u._size.length)throw new re(N.length,u._size.length);var w,M,_,y,x=m.min(),b=m.max();for(w=0,M=u._size.length;w<M;w++)ue(x[w],u._size[w]),ue(b[w],u._size[w]);var S=u._values,O=u._index,z=u._ptr,I=m.dimension(0),q=m.dimension(1),P=[],B=[];I.forEach(function(H,J){B[H]=J[0],P[H]=!0});var $=S?[]:void 0,V=[],R=[];return q.forEach(function(H){for(R.push(V.length),_=z[H],y=z[H+1];_<y;_++)w=O[_],P[w]===!0&&(V.push(B[w]),$&&$.push(S[_]))}),R.push(V.length),new n({values:$,index:V,ptr:R,size:N,datatype:u._datatype})}function p(u,m,g,N){if(!m||m.isIndex!==!0)throw new TypeError("Invalid index");var w=m.size(),M=m.isScalar(),_;if(_e(g)?(_=g.size(),g=g.toArray()):_=Ke(g),M){if(_.length!==0)throw new TypeError("Scalar expected");u.set(m.min(),g,N)}else{if(w.length!==1&&w.length!==2)throw new re(w.length,u._size.length,"<");if(_.length<w.length){for(var y=0,x=0;w[y]===1&&_[y]===1;)y++;for(;w[y]===1;)x++,y++;g=tn(g,w.length,x,_)}if(!dr(w,_))throw new re(w,_,">");if(w.length===1){var b=m.dimension(0);b.forEach(function(z,I){ue(z),u.set([z,0],g[I[0]],N)})}else{var S=m.dimension(0),O=m.dimension(1);S.forEach(function(z,I){ue(z),O.forEach(function(q,P){ue(q),u.set([z,q],g[I[0]][P[0]],N)})})}}return u}n.prototype.get=function(u){if(!se(u))throw new TypeError("Array expected");if(u.length!==this._size.length)throw new re(u.length,this._size.length);if(!this._values)throw new Error("Cannot invoke get on a Pattern only matrix");var m=u[0],g=u[1];ue(m,this._size[0]),ue(g,this._size[1]);var N=d(m,this._ptr[g],this._ptr[g+1],this._index);return N<this._ptr[g+1]&&this._index[N]===m?this._values[N]:0},n.prototype.set=function(u,m,g){if(!se(u))throw new TypeError("Array expected");if(u.length!==this._size.length)throw new re(u.length,this._size.length);if(!this._values)throw new Error("Cannot invoke set on a Pattern only matrix");var N=u[0],w=u[1],M=this._size[0],_=this._size[1],y=t,x=0;Ue(this._datatype)&&(y=r.find(t,[this._datatype,this._datatype])||t,x=r.convert(0,this._datatype)),(N>M-1||w>_-1)&&(f(this,Math.max(N+1,M),Math.max(w+1,_),g),M=this._size[0],_=this._size[1]),ue(N,M),ue(w,_);var b=d(N,this._ptr[w],this._ptr[w+1],this._index);return b<this._ptr[w+1]&&this._index[b]===N?y(m,x)?s(b,w,this._values,this._index,this._ptr):this._values[b]=m:o(b,N,w,m,this._values,this._index,this._ptr),this};function d(u,m,g,N){if(g-m===0)return g;for(var w=m;w<g;w++)if(N[w]===u)return w;return m}function s(u,m,g,N,w){g.splice(u,1),N.splice(u,1);for(var M=m+1;M<w.length;M++)w[M]--}function o(u,m,g,N,w,M,_){w.splice(u,0,N),M.splice(u,0,m);for(var y=g+1;y<_.length;y++)_[y]++}n.prototype.resize=function(u,m,g){if(!Ht(u))throw new TypeError("Array or Matrix expected");var N=u.valueOf().map(M=>Array.isArray(M)&&M.length===1?M[0]:M);if(N.length!==2)throw new Error("Only two dimensions matrix are supported");N.forEach(function(M){if(!le(M)||!ye(M)||M<0)throw new TypeError("Invalid size, must contain positive integers (size: "+ge(N)+")")});var w=g?this.clone():this;return f(w,N[0],N[1],m)};function f(u,m,g,N){var w=N||0,M=t,_=0;Ue(u._datatype)&&(M=r.find(t,[u._datatype,u._datatype])||t,_=r.convert(0,u._datatype),w=r.convert(w,u._datatype));var y=!M(w,_),x=u._size[0],b=u._size[1],S,O,z;if(g>b){for(O=b;O<g;O++)if(u._ptr[O]=u._values.length,y)for(S=0;S<x;S++)u._values.push(w),u._index.push(S);u._ptr[g]=u._values.length}else g<b&&(u._ptr.splice(g+1,b-g),u._values.splice(u._ptr[g],u._values.length),u._index.splice(u._ptr[g],u._index.length));if(b=g,m>x){if(y){var I=0;for(O=0;O<b;O++){u._ptr[O]=u._ptr[O]+I,z=u._ptr[O+1]+I;var q=0;for(S=x;S<m;S++,q++)u._values.splice(z+q,0,w),u._index.splice(z+q,0,S),I++}u._ptr[b]=u._values.length}}else if(m<x){var P=0;for(O=0;O<b;O++){u._ptr[O]=u._ptr[O]-P;var B=u._ptr[O],$=u._ptr[O+1]-P;for(z=B;z<$;z++)S=u._index[z],S>m-1&&(u._values.splice(z,1),u._index.splice(z,1),P++)}u._ptr[O]=u._values.length}return u._size[0]=m,u._size[1]=g,u}n.prototype.reshape=function(u,m){if(!se(u))throw new TypeError("Array expected");if(u.length!==2)throw new Error("Sparse matrices can only be reshaped in two dimensions");u.forEach(function(H){if(!le(H)||!ye(H)||H<=-2||H===0)throw new TypeError("Invalid size, must contain positive integers or -1 (size: "+ge(u)+")")});var g=this._size[0]*this._size[1];u=Xr(u,g);var N=u[0]*u[1];if(g!==N)throw new Error("Reshaping sparse matrix will result in the wrong number of elements");var w=m?this.clone():this;if(this._size[0]===u[0]&&this._size[1]===u[1])return w;for(var M=[],_=0;_<w._ptr.length;_++)for(var y=0;y<w._ptr[_+1]-w._ptr[_];y++)M.push(_);for(var x=w._values.slice(),b=w._index.slice(),S=0;S<w._index.length;S++){var O=b[S],z=M[S],I=O*w._size[1]+z;M[S]=I%u[1],b[S]=Math.floor(I/u[1])}w._values.length=0,w._index.length=0,w._ptr.length=u[1]+1,w._size=u.slice();for(var q=0;q<w._ptr.length;q++)w._ptr[q]=0;for(var P=0;P<x.length;P++){var B=b[P],$=M[P],V=x[P],R=d(B,w._ptr[$],w._ptr[$+1],w._index);o(R,B,$,V,w._values,w._index,w._ptr)}return w},n.prototype.clone=function(){var u=new n({values:this._values?pe(this._values):void 0,index:pe(this._index),ptr:pe(this._ptr),size:pe(this._size),datatype:this._datatype});return u},n.prototype.size=function(){return this._size.slice(0)},n.prototype.map=function(u,m){if(!this._values)throw new Error("Cannot invoke map on a Pattern only matrix");var g=this,N=this._size[0],w=this._size[1],M=function(y,x,b){return u(y,[x,b],g)};return c(this,0,N-1,0,w-1,M,m)};function c(u,m,g,N,w,M,_){var y=[],x=[],b=[],S=t,O=0;Ue(u._datatype)&&(S=r.find(t,[u._datatype,u._datatype])||t,O=r.convert(0,u._datatype));for(var z=function(X,he,ve){X=M(X,he,ve),S(X,O)||(y.push(X),x.push(he))},I=N;I<=w;I++){b.push(y.length);var q=u._ptr[I],P=u._ptr[I+1];if(_)for(var B=q;B<P;B++){var $=u._index[B];$>=m&&$<=g&&z(u._values[B],$-m,I-N)}else{for(var V={},R=q;R<P;R++){var H=u._index[R];V[H]=u._values[R]}for(var J=m;J<=g;J++){var j=J in V?V[J]:0;z(j,J-m,I-N)}}}return b.push(y.length),new n({values:y,index:x,ptr:b,size:[g-m+1,w-N+1]})}n.prototype.forEach=function(u,m){if(!this._values)throw new Error("Cannot invoke forEach on a Pattern only matrix");for(var g=this,N=this._size[0],w=this._size[1],M=0;M<w;M++){var _=this._ptr[M],y=this._ptr[M+1];if(m)for(var x=_;x<y;x++){var b=this._index[x];u(this._values[x],[b,M],g)}else{for(var S={},O=_;O<y;O++){var z=this._index[O];S[z]=this._values[O]}for(var I=0;I<N;I++){var q=I in S?S[I]:0;u(q,[I,M],g)}}}},n.prototype[Symbol.iterator]=function*(){if(!this._values)throw new Error("Cannot iterate a Pattern only matrix");for(var u=this._size[1],m=0;m<u;m++)for(var g=this._ptr[m],N=this._ptr[m+1],w=g;w<N;w++){var M=this._index[w];yield{value:this._values[w],index:[M,m]}}},n.prototype.toArray=function(){return h(this._values,this._index,this._ptr,this._size,!0)},n.prototype.valueOf=function(){return h(this._values,this._index,this._ptr,this._size,!1)};function h(u,m,g,N,w){var M=N[0],_=N[1],y=[],x,b;for(x=0;x<M;x++)for(y[x]=[],b=0;b<_;b++)y[x][b]=0;for(b=0;b<_;b++)for(var S=g[b],O=g[b+1],z=S;z<O;z++)x=m[z],y[x][b]=u?w?pe(u[z]):u[z]:1;return y}return n.prototype.format=function(u){for(var m=this._size[0],g=this._size[1],N=this.density(),w="Sparse Matrix ["+ge(m,u)+" x "+ge(g,u)+"] density: "+ge(N,u)+`
`,M=0;M<g;M++)for(var _=this._ptr[M],y=this._ptr[M+1],x=_;x<y;x++){var b=this._index[x];w+=`
    (`+ge(b,u)+", "+ge(M,u)+") ==> "+(this._values?ge(this._values[x],u):"X")}return w},n.prototype.toString=function(){return ge(this.toArray())},n.prototype.toJSON=function(){return{mathjs:"SparseMatrix",values:this._values,index:this._index,ptr:this._ptr,size:this._size,datatype:this._datatype}},n.prototype.diagonal=function(u){if(u){if(Ce(u)&&(u=u.toNumber()),!le(u)||!ye(u))throw new TypeError("The parameter k must be an integer number")}else u=0;var m=u>0?u:0,g=u<0?-u:0,N=this._size[0],w=this._size[1],M=Math.min(N-g,w-m),_=[],y=[],x=[];x[0]=0;for(var b=m;b<w&&_.length<M;b++)for(var S=this._ptr[b],O=this._ptr[b+1],z=S;z<O;z++){var I=this._index[z];if(I===b-m+g){_.push(this._values[z]),y[_.length-1]=I-g;break}}return x.push(_.length),new n({values:_,index:y,ptr:x,size:[M,1]})},n.fromJSON=function(u){return new n(u)},n.diagonal=function(u,m,g,N,w){if(!se(u))throw new TypeError("Array expected, size parameter");if(u.length!==2)throw new Error("Only two dimensions matrix are supported");if(u=u.map(function(H){if(Ce(H)&&(H=H.toNumber()),!le(H)||!ye(H)||H<1)throw new Error("Size values must be positive integers");return H}),g){if(Ce(g)&&(g=g.toNumber()),!le(g)||!ye(g))throw new TypeError("The parameter k must be an integer number")}else g=0;var M=t,_=0;Ue(w)&&(M=r.find(t,[w,w])||t,_=r.convert(0,w));var y=g>0?g:0,x=g<0?-g:0,b=u[0],S=u[1],O=Math.min(b-x,S-y),z;if(se(m)){if(m.length!==O)throw new Error("Invalid value array length");z=function(J){return m[J]}}else if(_e(m)){var I=m.size();if(I.length!==1||I[0]!==O)throw new Error("Invalid matrix length");z=function(J){return m.get([J])}}else z=function(){return m};for(var q=[],P=[],B=[],$=0;$<S;$++){B.push(q.length);var V=$-y;if(V>=0&&V<O){var R=z(V);M(R,_)||(P.push(V+x),q.push(R))}}return B.push(q.length),new n({values:q,index:P,ptr:B,size:[b,S]})},n.prototype.swapRows=function(u,m){if(!le(u)||!ye(u)||!le(m)||!ye(m))throw new Error("Row index must be positive integers");if(this._size.length!==2)throw new Error("Only two dimensional matrix is supported");return ue(u,this._size[0]),ue(m,this._size[0]),n._swapRows(u,m,this._size[1],this._values,this._index,this._ptr),this},n._forEachRow=function(u,m,g,N,w){for(var M=N[u],_=N[u+1],y=M;y<_;y++)w(g[y],m[y])},n._swapRows=function(u,m,g,N,w,M){for(var _=0;_<g;_++){var y=M[_],x=M[_+1],b=d(u,y,x,w),S=d(m,y,x,w);if(b<x&&S<x&&w[b]===u&&w[S]===m){if(N){var O=N[b];N[b]=N[S],N[S]=O}continue}if(b<x&&w[b]===u&&(S>=x||w[S]!==m)){var z=N?N[b]:void 0;w.splice(S,0,m),N&&N.splice(S,0,z),w.splice(S<=b?b+1:b,1),N&&N.splice(S<=b?b+1:b,1);continue}if(S<x&&w[S]===m&&(b>=x||w[b]!==u)){var I=N?N[S]:void 0;w.splice(b,0,u),N&&N.splice(b,0,I),w.splice(b<=S?S+1:S,1),N&&N.splice(b<=S?S+1:S,1)}}},n},{isClass:!0}),Ao="number",Do=["typed"];function Oo(e){var r=e.match(/(0[box])([0-9a-fA-F]*)\.([0-9a-fA-F]*)/);if(r){var t={"0b":2,"0o":8,"0x":16}[r[1]],i=r[2],n=r[3];return{input:e,radix:t,integerPart:i,fractionalPart:n}}else return null}function zo(e){for(var r=parseInt(e.integerPart,e.radix),t=0,i=0;i<e.fractionalPart.length;i++){var n=parseInt(e.fractionalPart[i],e.radix);t+=n/Math.pow(e.radix,i+1)}var a=r+t;if(isNaN(a))throw new SyntaxError('String "'+e.input+'" is no valid number');return a}var Fo=Q(Ao,Do,e=>{var{typed:r}=e,t=r("number",{"":function(){return 0},number:function(n){return n},string:function(n){if(n==="NaN")return NaN;var a=Oo(n);if(a)return zo(a);var l=0,v=n.match(/(0[box][0-9a-fA-F]*)i([0-9]*)/);v&&(l=Number(v[2]),n=v[1]);var p=Number(n);if(isNaN(p))throw new SyntaxError('String "'+n+'" is no valid number');if(v){if(p>2**l-1)throw new SyntaxError('String "'.concat(n,'" is out of range'));p>=2**(l-1)&&(p=p-2**l)}return p},BigNumber:function(n){return n.toNumber()},Fraction:function(n){return n.valueOf()},Unit:function(n){throw new Error("Second argument with valueless unit expected")},null:function(n){return 0},"Unit, string | Unit":function(n,a){return n.toNumber(a)},"Array | Matrix":function(n){return Xe(n,this)}});return t.fromJSON=function(i){return parseFloat(i.value)},t}),$o="bignumber",Io=["typed","BigNumber"],Po=Q($o,Io,e=>{var{typed:r,BigNumber:t}=e;return r("bignumber",{"":function(){return new t(0)},number:function(n){return new t(n+"")},string:function(n){var a=n.match(/(0[box][0-9a-fA-F]*)i([0-9]*)/);if(a){var l=a[2],v=t(a[1]),p=new t(2).pow(Number(l));if(v.gt(p.sub(1)))throw new SyntaxError('String "'.concat(n,'" is out of range'));var d=new t(2).pow(Number(l)-1);return v.gte(d)?v.sub(p):v}return new t(n)},BigNumber:function(n){return n},Fraction:function(n){return new t(n.n).div(n.d).times(n.s)},null:function(n){return new t(0)},"Array | Matrix":function(n){return Xe(n,this)}})}),Bo="fraction",To=["typed","Fraction"],Lo=Q(Bo,To,e=>{var{typed:r,Fraction:t}=e;return r("fraction",{number:function(n){if(!isFinite(n)||isNaN(n))throw new Error(n+" cannot be represented as a fraction");return new t(n)},string:function(n){return new t(n)},"number, number":function(n,a){return new t(n,a)},null:function(n){return new t(0)},BigNumber:function(n){return new t(n.toString())},Fraction:function(n){return n},Object:function(n){return new t(n)},"Array | Matrix":function(n){return Xe(n,this)}})}),lt="matrix",qo=["typed","Matrix","DenseMatrix","SparseMatrix"],Ro=Q(lt,qo,e=>{var{typed:r,Matrix:t,DenseMatrix:i,SparseMatrix:n}=e;return r(lt,{"":function(){return a([])},string:function(v){return a([],v)},"string, string":function(v,p){return a([],v,p)},Array:function(v){return a(v)},Matrix:function(v){return a(v,v.storage())},"Array | Matrix, string":a,"Array | Matrix, string, string":a});function a(l,v,p){if(v==="dense"||v==="default"||v===void 0)return new i(l,p);if(v==="sparse")return new n(l,p);throw new TypeError("Unknown matrix type "+JSON.stringify(v)+".")}}),ht="unaryMinus",Uo=["typed"],Zo=Q(ht,Uo,e=>{var{typed:r}=e;return r(ht,{number:xn,Complex:function(i){return i.neg()},BigNumber:function(i){return i.neg()},Fraction:function(i){return i.neg()},Unit:function(i){var n=i.clone();return n.value=this(i.value),n},"Array | Matrix":function(i){return Xe(i,this)}})}),vt="abs",Vo=["typed"],Ho=Q(vt,Vo,e=>{var{typed:r}=e;return r(vt,{number:Mn,Complex:function(i){return i.abs()},BigNumber:function(i){return i.abs()},Fraction:function(i){return i.abs()},"Array | Matrix":function(i){return Xe(i,this)},Unit:function(i){return i.abs()}})}),pt="addScalar",ko=["typed"],Wo=Q(pt,ko,e=>{var{typed:r}=e;return r(pt,{"number, number":En,"Complex, Complex":function(i,n){return i.add(n)},"BigNumber, BigNumber":function(i,n){return i.plus(n)},"Fraction, Fraction":function(i,n){return i.add(n)},"Unit, Unit":function(i,n){if(i.value===null||i.value===void 0)throw new Error("Parameter x contains a unit with undefined value");if(n.value===null||n.value===void 0)throw new Error("Parameter y contains a unit with undefined value");if(!i.equalBase(n))throw new Error("Units do not match");var a=i.clone();return a.value=this(a.value,n.value),a.fixPrefix=!1,a}})}),Ko="algorithm11",Go=["typed","equalScalar"],An=Q(Ko,Go,e=>{var{typed:r,equalScalar:t}=e;return function(n,a,l,v){var p=n._values,d=n._index,s=n._ptr,o=n._size,f=n._datatype;if(!p)throw new Error("Cannot perform operation on Pattern Sparse Matrix and Scalar value");var c=o[0],h=o[1],u,m=t,g=0,N=l;typeof f=="string"&&(u=f,m=r.find(t,[u,u]),g=r.convert(0,u),a=r.convert(a,u),N=r.find(l,[u,u]));for(var w=[],M=[],_=[],y=0;y<h;y++){_[y]=M.length;for(var x=s[y],b=s[y+1],S=x;S<b;S++){var O=d[S],z=v?N(a,p[S]):N(p[S],a);m(z,g)||(M.push(O),w.push(z))}}return _[h]=M.length,n.createSparseMatrix({values:w,index:M,ptr:_,size:[c,h],datatype:u})}}),Jo="algorithm14",Yo=["typed"],jr=Q(Jo,Yo,e=>{var{typed:r}=e;return function(n,a,l,v){var p=n._data,d=n._size,s=n._datatype,o,f=l;typeof s=="string"&&(o=s,a=r.convert(a,o),f=r.find(l,[o,o]));var c=d.length>0?t(f,0,d,d[0],p,a,v):[];return n.createDenseMatrix({data:c,size:pe(d),datatype:o})};function t(i,n,a,l,v,p,d){var s=[];if(n===a.length-1)for(var o=0;o<l;o++)s[o]=d?i(p,v[o]):i(v[o],p);else for(var f=0;f<l;f++)s[f]=t(i,n+1,a,a[n+1],v[f],p,d);return s}}),Xo="algorithm01",Qo=["typed"],jo=Q(Xo,Qo,e=>{var{typed:r}=e;return function(i,n,a,l){var v=i._data,p=i._size,d=i._datatype,s=n._values,o=n._index,f=n._ptr,c=n._size,h=n._datatype;if(p.length!==c.length)throw new re(p.length,c.length);if(p[0]!==c[0]||p[1]!==c[1])throw new RangeError("Dimension mismatch. Matrix A ("+p+") must match Matrix B ("+c+")");if(!s)throw new Error("Cannot perform operation on Dense Matrix and Pattern Sparse Matrix");var u=p[0],m=p[1],g=typeof d=="string"&&d===h?d:void 0,N=g?r.find(a,[g,g]):a,w,M,_=[];for(w=0;w<u;w++)_[w]=[];var y=[],x=[];for(M=0;M<m;M++){for(var b=M+1,S=f[M],O=f[M+1],z=S;z<O;z++)w=o[z],y[w]=l?N(s[z],v[w][M]):N(v[w][M],s[z]),x[w]=b;for(w=0;w<u;w++)x[w]===b?_[w][M]=y[w]:_[w][M]=v[w][M]}return i.createDenseMatrix({data:_,size:[u,m],datatype:g})}}),es="algorithm10",rs=["typed","DenseMatrix"],ts=Q(es,rs,e=>{var{typed:r,DenseMatrix:t}=e;return function(n,a,l,v){var p=n._values,d=n._index,s=n._ptr,o=n._size,f=n._datatype;if(!p)throw new Error("Cannot perform operation on Pattern Sparse Matrix and Scalar value");var c=o[0],h=o[1],u,m=l;typeof f=="string"&&(u=f,a=r.convert(a,u),m=r.find(l,[u,u]));for(var g=[],N=[],w=[],M=0;M<h;M++){for(var _=M+1,y=s[M],x=s[M+1],b=y;b<x;b++){var S=d[b];N[S]=p[b],w[S]=_}for(var O=0;O<c;O++)M===0&&(g[O]=[]),w[O]===_?g[O][M]=v?m(a,N[O]):m(N[O],a):g[O][M]=a}return new t({data:g,size:[c,h],datatype:u})}}),ns="algorithm13",is=["typed"],as=Q(ns,is,e=>{var{typed:r}=e;return function(n,a,l){var v=n._data,p=n._size,d=n._datatype,s=a._data,o=a._size,f=a._datatype,c=[];if(p.length!==o.length)throw new re(p.length,o.length);for(var h=0;h<p.length;h++){if(p[h]!==o[h])throw new RangeError("Dimension mismatch. Matrix A ("+p+") must match Matrix B ("+o+")");c[h]=p[h]}var u,m=l;typeof d=="string"&&d===f&&(u=d,m=r.find(l,[u,u]));var g=c.length>0?t(m,0,c,c[0],v,s):[];return n.createDenseMatrix({data:g,size:c,datatype:u})};function t(i,n,a,l,v,p){var d=[];if(n===a.length-1)for(var s=0;s<l;s++)d[s]=i(v[s],p[s]);else for(var o=0;o<l;o++)d[o]=t(i,n+1,a,a[n+1],v[o],p[o]);return d}}),os="algorithm03",ss=["typed"],us=Q(os,ss,e=>{var{typed:r}=e;return function(i,n,a,l){var v=i._data,p=i._size,d=i._datatype,s=n._values,o=n._index,f=n._ptr,c=n._size,h=n._datatype;if(p.length!==c.length)throw new re(p.length,c.length);if(p[0]!==c[0]||p[1]!==c[1])throw new RangeError("Dimension mismatch. Matrix A ("+p+") must match Matrix B ("+c+")");if(!s)throw new Error("Cannot perform operation on Dense Matrix and Pattern Sparse Matrix");var u=p[0],m=p[1],g,N=0,w=a;typeof d=="string"&&d===h&&(g=d,N=r.convert(0,g),w=r.find(a,[g,g]));for(var M=[],_=0;_<u;_++)M[_]=[];for(var y=[],x=[],b=0;b<m;b++){for(var S=b+1,O=f[b],z=f[b+1],I=O;I<z;I++){var q=o[I];y[q]=l?w(s[I],v[q][b]):w(v[q][b],s[I]),x[q]=S}for(var P=0;P<u;P++)x[P]===S?M[P][b]=y[P]:M[P][b]=l?w(N,v[P][b]):w(v[P][b],N)}return i.createDenseMatrix({data:M,size:[u,m],datatype:g})}}),fs="algorithm05",cs=["typed","equalScalar"],ls=Q(fs,cs,e=>{var{typed:r,equalScalar:t}=e;return function(n,a,l){var v=n._values,p=n._index,d=n._ptr,s=n._size,o=n._datatype,f=a._values,c=a._index,h=a._ptr,u=a._size,m=a._datatype;if(s.length!==u.length)throw new re(s.length,u.length);if(s[0]!==u[0]||s[1]!==u[1])throw new RangeError("Dimension mismatch. Matrix A ("+s+") must match Matrix B ("+u+")");var g=s[0],N=s[1],w,M=t,_=0,y=l;typeof o=="string"&&o===m&&(w=o,M=r.find(t,[w,w]),_=r.convert(0,w),y=r.find(l,[w,w]));var x=v&&f?[]:void 0,b=[],S=[],O=x?[]:void 0,z=x?[]:void 0,I=[],q=[],P,B,$,V;for(B=0;B<N;B++){S[B]=b.length;var R=B+1;for($=d[B],V=d[B+1];$<V;$++)P=p[$],b.push(P),I[P]=R,O&&(O[P]=v[$]);for($=h[B],V=h[B+1];$<V;$++)P=c[$],I[P]!==R&&b.push(P),q[P]=R,z&&(z[P]=f[$]);if(x)for($=S[B];$<b.length;){P=b[$];var H=I[P],J=q[P];if(H===R||J===R){var j=H===R?O[P]:_,ee=J===R?z[P]:_,X=y(j,ee);M(X,_)?b.splice($,1):(x.push(X),$++)}}}return S[N]=b.length,n.createSparseMatrix({values:x,index:b,ptr:S,size:[g,N],datatype:w})}}),hs="multiplyScalar",vs=["typed"],ps=Q(hs,vs,e=>{var{typed:r}=e;return r("multiplyScalar",{"number, number":Sn,"Complex, Complex":function(i,n){return i.mul(n)},"BigNumber, BigNumber":function(i,n){return i.times(n)},"Fraction, Fraction":function(i,n){return i.mul(n)},"number | Fraction | BigNumber | Complex, Unit":function(i,n){var a=n.clone();return a.value=a.value===null?a._normalize(i):this(a.value,i),a},"Unit, number | Fraction | BigNumber | Complex":function(i,n){var a=i.clone();return a.value=a.value===null?a._normalize(n):this(a.value,n),a},"Unit, Unit":function(i,n){return i.multiply(n)}})}),dt="multiply",ds=["typed","matrix","addScalar","multiplyScalar","equalScalar","dot"],ms=Q(dt,ds,e=>{var{typed:r,matrix:t,addScalar:i,multiplyScalar:n,equalScalar:a,dot:l}=e,v=An({typed:r,equalScalar:a}),p=jr({typed:r});function d(_,y){switch(_.length){case 1:switch(y.length){case 1:if(_[0]!==y[0])throw new RangeError("Dimension mismatch in multiplication. Vectors must have the same length");break;case 2:if(_[0]!==y[0])throw new RangeError("Dimension mismatch in multiplication. Vector length ("+_[0]+") must match Matrix rows ("+y[0]+")");break;default:throw new Error("Can only multiply a 1 or 2 dimensional matrix (Matrix B has "+y.length+" dimensions)")}break;case 2:switch(y.length){case 1:if(_[1]!==y[0])throw new RangeError("Dimension mismatch in multiplication. Matrix columns ("+_[1]+") must match Vector length ("+y[0]+")");break;case 2:if(_[1]!==y[0])throw new RangeError("Dimension mismatch in multiplication. Matrix A columns ("+_[1]+") must match Matrix B rows ("+y[0]+")");break;default:throw new Error("Can only multiply a 1 or 2 dimensional matrix (Matrix B has "+y.length+" dimensions)")}break;default:throw new Error("Can only multiply a 1 or 2 dimensional matrix (Matrix A has "+_.length+" dimensions)")}}function s(_,y,x){if(x===0)throw new Error("Cannot multiply two empty vectors");return l(_,y)}function o(_,y){if(y.storage()!=="dense")throw new Error("Support for SparseMatrix not implemented");return f(_,y)}function f(_,y){var x=_._data,b=_._size,S=_._datatype,O=y._data,z=y._size,I=y._datatype,q=b[0],P=z[1],B,$=i,V=n;S&&I&&S===I&&typeof S=="string"&&(B=S,$=r.find(i,[B,B]),V=r.find(n,[B,B]));for(var R=[],H=0;H<P;H++){for(var J=V(x[0],O[0][H]),j=1;j<q;j++)J=$(J,V(x[j],O[j][H]));R[H]=J}return _.createDenseMatrix({data:R,size:[P],datatype:B})}var c=r("_multiplyMatrixVector",{"DenseMatrix, any":u,"SparseMatrix, any":N}),h=r("_multiplyMatrixMatrix",{"DenseMatrix, DenseMatrix":m,"DenseMatrix, SparseMatrix":g,"SparseMatrix, DenseMatrix":w,"SparseMatrix, SparseMatrix":M});function u(_,y){var x=_._data,b=_._size,S=_._datatype,O=y._data,z=y._datatype,I=b[0],q=b[1],P,B=i,$=n;S&&z&&S===z&&typeof S=="string"&&(P=S,B=r.find(i,[P,P]),$=r.find(n,[P,P]));for(var V=[],R=0;R<I;R++){for(var H=x[R],J=$(H[0],O[0]),j=1;j<q;j++)J=B(J,$(H[j],O[j]));V[R]=J}return _.createDenseMatrix({data:V,size:[I],datatype:P})}function m(_,y){var x=_._data,b=_._size,S=_._datatype,O=y._data,z=y._size,I=y._datatype,q=b[0],P=b[1],B=z[1],$,V=i,R=n;S&&I&&S===I&&typeof S=="string"&&($=S,V=r.find(i,[$,$]),R=r.find(n,[$,$]));for(var H=[],J=0;J<q;J++){var j=x[J];H[J]=[];for(var ee=0;ee<B;ee++){for(var X=R(j[0],O[0][ee]),he=1;he<P;he++)X=V(X,R(j[he],O[he][ee]));H[J][ee]=X}}return _.createDenseMatrix({data:H,size:[q,B],datatype:$})}function g(_,y){var x=_._data,b=_._size,S=_._datatype,O=y._values,z=y._index,I=y._ptr,q=y._size,P=y._datatype;if(!O)throw new Error("Cannot multiply Dense Matrix times Pattern only Matrix");var B=b[0],$=q[1],V,R=i,H=n,J=a,j=0;S&&P&&S===P&&typeof S=="string"&&(V=S,R=r.find(i,[V,V]),H=r.find(n,[V,V]),J=r.find(a,[V,V]),j=r.convert(0,V));for(var ee=[],X=[],he=[],ve=y.createSparseMatrix({values:ee,index:X,ptr:he,size:[B,$],datatype:V}),me=0;me<$;me++){he[me]=X.length;var oe=I[me],xe=I[me+1];if(xe>oe)for(var ce=0,ie=0;ie<B;ie++){for(var Ae=ie+1,be=void 0,te=oe;te<xe;te++){var Ne=z[te];ce!==Ae?(be=H(x[ie][Ne],O[te]),ce=Ae):be=R(be,H(x[ie][Ne],O[te]))}ce===Ae&&!J(be,j)&&(X.push(ie),ee.push(be))}}return he[$]=X.length,ve}function N(_,y){var x=_._values,b=_._index,S=_._ptr,O=_._datatype;if(!x)throw new Error("Cannot multiply Pattern only Matrix times Dense Matrix");var z=y._data,I=y._datatype,q=_._size[0],P=y._size[0],B=[],$=[],V=[],R,H=i,J=n,j=a,ee=0;O&&I&&O===I&&typeof O=="string"&&(R=O,H=r.find(i,[R,R]),J=r.find(n,[R,R]),j=r.find(a,[R,R]),ee=r.convert(0,R));var X=[],he=[];V[0]=0;for(var ve=0;ve<P;ve++){var me=z[ve];if(!j(me,ee))for(var oe=S[ve],xe=S[ve+1],ce=oe;ce<xe;ce++){var ie=b[ce];he[ie]?X[ie]=H(X[ie],J(me,x[ce])):(he[ie]=!0,$.push(ie),X[ie]=J(me,x[ce]))}}for(var Ae=$.length,be=0;be<Ae;be++){var te=$[be];B[be]=X[te]}return V[1]=$.length,_.createSparseMatrix({values:B,index:$,ptr:V,size:[q,1],datatype:R})}function w(_,y){var x=_._values,b=_._index,S=_._ptr,O=_._datatype;if(!x)throw new Error("Cannot multiply Pattern only Matrix times Dense Matrix");var z=y._data,I=y._datatype,q=_._size[0],P=y._size[0],B=y._size[1],$,V=i,R=n,H=a,J=0;O&&I&&O===I&&typeof O=="string"&&($=O,V=r.find(i,[$,$]),R=r.find(n,[$,$]),H=r.find(a,[$,$]),J=r.convert(0,$));for(var j=[],ee=[],X=[],he=_.createSparseMatrix({values:j,index:ee,ptr:X,size:[q,B],datatype:$}),ve=[],me=[],oe=0;oe<B;oe++){X[oe]=ee.length;for(var xe=oe+1,ce=0;ce<P;ce++){var ie=z[ce][oe];if(!H(ie,J))for(var Ae=S[ce],be=S[ce+1],te=Ae;te<be;te++){var Ne=b[te];me[Ne]!==xe?(me[Ne]=xe,ee.push(Ne),ve[Ne]=R(ie,x[te])):ve[Ne]=V(ve[Ne],R(ie,x[te]))}}for(var De=X[oe],Ve=ee.length,Te=De;Te<Ve;Te++){var rr=ee[Te];j[Te]=ve[rr]}}return X[B]=ee.length,he}function M(_,y){var x=_._values,b=_._index,S=_._ptr,O=_._datatype,z=y._values,I=y._index,q=y._ptr,P=y._datatype,B=_._size[0],$=y._size[1],V=x&&z,R,H=i,J=n;O&&P&&O===P&&typeof O=="string"&&(R=O,H=r.find(i,[R,R]),J=r.find(n,[R,R]));for(var j=V?[]:void 0,ee=[],X=[],he=_.createSparseMatrix({values:j,index:ee,ptr:X,size:[B,$],datatype:R}),ve=V?[]:void 0,me=[],oe,xe,ce,ie,Ae,be,te,Ne,De=0;De<$;De++){X[De]=ee.length;var Ve=De+1;for(Ae=q[De],be=q[De+1],ie=Ae;ie<be;ie++)if(Ne=I[ie],V)for(xe=S[Ne],ce=S[Ne+1],oe=xe;oe<ce;oe++)te=b[oe],me[te]!==Ve?(me[te]=Ve,ee.push(te),ve[te]=J(z[ie],x[oe])):ve[te]=H(ve[te],J(z[ie],x[oe]));else for(xe=S[Ne],ce=S[Ne+1],oe=xe;oe<ce;oe++)te=b[oe],me[te]!==Ve&&(me[te]=Ve,ee.push(te));if(V)for(var Te=X[De],rr=ee.length,Qe=Te;Qe<rr;Qe++){var E=ee[Qe];j[Qe]=ve[E]}}return X[$]=ee.length,he}return r(dt,Yt({"Array, Array":function(y,x){d(Ke(y),Ke(x));var b=this(t(y),t(x));return _e(b)?b.valueOf():b},"Matrix, Matrix":function(y,x){var b=y.size(),S=x.size();return d(b,S),b.length===1?S.length===1?s(y,x,b[0]):o(y,x):S.length===1?c(y,x):h(y,x)},"Matrix, Array":function(y,x){return this(y,t(x))},"Array, Matrix":function(y,x){return this(t(y,x.storage()),x)},"SparseMatrix, any":function(y,x){return v(y,x,n,!1)},"DenseMatrix, any":function(y,x){return p(y,x,n,!1)},"any, SparseMatrix":function(y,x){return v(x,y,n,!0)},"any, DenseMatrix":function(y,x){return p(x,y,n,!0)},"Array, any":function(y,x){return p(t(y),x,n,!1).valueOf()},"any, Array":function(y,x){return p(t(x),y,n,!0).valueOf()},"any, any":n,"any, any, ...any":function(y,x,b){for(var S=this(y,x),O=0;O<b.length;O++)S=this(S,b[O]);return S}},n.signatures))}),mt="subtract",gs=["typed","matrix","equalScalar","addScalar","unaryMinus","DenseMatrix"],ws=Q(mt,gs,e=>{var{typed:r,matrix:t,equalScalar:i,addScalar:n,unaryMinus:a,DenseMatrix:l}=e,v=jo({typed:r}),p=us({typed:r}),d=ls({typed:r,equalScalar:i}),s=ts({typed:r,DenseMatrix:l}),o=as({typed:r}),f=jr({typed:r});return r(mt,{"number, number":function(h,u){return h-u},"Complex, Complex":function(h,u){return h.sub(u)},"BigNumber, BigNumber":function(h,u){return h.minus(u)},"Fraction, Fraction":function(h,u){return h.sub(u)},"Unit, Unit":function(h,u){if(h.value===null)throw new Error("Parameter x contains a unit with undefined value");if(u.value===null)throw new Error("Parameter y contains a unit with undefined value");if(!h.equalBase(u))throw new Error("Units do not match");var m=h.clone();return m.value=this(m.value,u.value),m.fixPrefix=!1,m},"SparseMatrix, SparseMatrix":function(h,u){return vr(h,u),d(h,u,this)},"SparseMatrix, DenseMatrix":function(h,u){return vr(h,u),p(u,h,this,!0)},"DenseMatrix, SparseMatrix":function(h,u){return vr(h,u),v(h,u,this,!1)},"DenseMatrix, DenseMatrix":function(h,u){return vr(h,u),o(h,u,this)},"Array, Array":function(h,u){return this(t(h),t(u)).valueOf()},"Array, Matrix":function(h,u){return this(t(h),u)},"Matrix, Array":function(h,u){return this(h,t(u))},"SparseMatrix, any":function(h,u){return s(h,a(u),n)},"DenseMatrix, any":function(h,u){return f(h,u,this)},"any, SparseMatrix":function(h,u){return s(u,h,this,!0)},"any, DenseMatrix":function(h,u){return f(u,h,this,!0)},"Array, any":function(h,u){return f(t(h),u,this,!1).valueOf()},"any, Array":function(h,u){return f(t(u),h,this,!0).valueOf()}})});function vr(e,r){var t=e.size(),i=r.size();if(t.length!==i.length)throw new re(t.length,i.length)}var gt="conj",ys=["typed"],_s=Q(gt,ys,e=>{var{typed:r}=e;return r(gt,{number:function(i){return i},BigNumber:function(i){return i},Complex:function(i){return i.conjugate()},"Array | Matrix":function(i){return Xe(i,this)}})}),wt="identity",bs=["typed","config","matrix","BigNumber","DenseMatrix","SparseMatrix"],Ns=Q(wt,bs,e=>{var{typed:r,config:t,matrix:i,BigNumber:n,DenseMatrix:a,SparseMatrix:l}=e;return r(wt,{"":function(){return t.matrix==="Matrix"?i([]):[]},string:function(s){return i(s)},"number | BigNumber":function(s){return p(s,s,t.matrix==="Matrix"?"dense":void 0)},"number | BigNumber, string":function(s,o){return p(s,s,o)},"number | BigNumber, number | BigNumber":function(s,o){return p(s,o,t.matrix==="Matrix"?"dense":void 0)},"number | BigNumber, number | BigNumber, string":function(s,o,f){return p(s,o,f)},Array:function(s){return v(s)},"Array, string":function(s,o){return v(s,o)},Matrix:function(s){return v(s.valueOf(),s.storage())},"Matrix, string":function(s,o){return v(s.valueOf(),o)}});function v(d,s){switch(d.length){case 0:return s?i(s):[];case 1:return p(d[0],d[0],s);case 2:return p(d[0],d[1],s);default:throw new Error("Vector containing two values expected")}}function p(d,s,o){var f=Ce(d)||Ce(s)?n:null;if(Ce(d)&&(d=d.toNumber()),Ce(s)&&(s=s.toNumber()),!ye(d)||d<1)throw new Error("Parameters in function identity must be positive integers");if(!ye(s)||s<1)throw new Error("Parameters in function identity must be positive integers");var c=f?new n(1):1,h=f?new f(0):0,u=[d,s];if(o){if(o==="sparse")return l.diagonal(u,c,0,h);if(o==="dense")return a.diagonal(u,c,0,h);throw new TypeError('Unknown matrix type "'.concat(o,'"'))}for(var m=Ur([],u,h),g=d<s?d:s,N=0;N<g;N++)m[N][N]=c;return m}});function Ms(){throw new Error('No "bignumber" implementation available')}function Es(){throw new Error('No "fraction" implementation available')}function Ss(){throw new Error('No "matrix" implementation available')}var yt="size",xs=["typed","config","?matrix"],Cs=Q(yt,xs,e=>{var{typed:r,config:t,matrix:i}=e;return r(yt,{Matrix:function(a){return a.create(a.size())},Array:Ke,string:function(a){return t.matrix==="Array"?[a.length]:i([a.length])},"number | Complex | BigNumber | Unit | boolean | null":function(a){return t.matrix==="Array"?[]:i?i([]):Ss()}})}),As="numeric",Ds=["number","?bignumber","?fraction"],Os=Q(As,Ds,e=>{var{number:r,bignumber:t,fraction:i}=e,n={string:!0,number:!0,BigNumber:!0,Fraction:!0},a={number:l=>r(l),BigNumber:t?l=>t(l):Ms,Fraction:i?l=>i(l):Es};return function(v,p){var d=We(v);if(!(d in n))throw new TypeError("Cannot convert "+v+' of type "'+d+'"; valid input types are '+Object.keys(n).join(", "));if(!(p in a))throw new TypeError("Cannot convert "+v+' to type "'+p+'"; valid output types are '+Object.keys(a).join(", "));return p===d?v:a[p](v)}}),_t="divideScalar",zs=["typed","numeric"],Fs=Q(_t,zs,e=>{var{typed:r,numeric:t}=e;return r(_t,{"number, number":function(n,a){return n/a},"Complex, Complex":function(n,a){return n.div(a)},"BigNumber, BigNumber":function(n,a){return n.div(a)},"Fraction, Fraction":function(n,a){return n.div(a)},"Unit, number | Fraction | BigNumber":function(n,a){var l=n.clone(),v=t(1,We(a));return l.value=this(l.value===null?l._normalize(v):l.value,a),l},"number | Fraction | BigNumber, Unit":function(n,a){var l=a.clone();l=l.pow(-1);var v=t(1,We(n));return l.value=this(n,a.value===null?a._normalize(v):a.value),l},"Unit, Unit":function(n,a){return n.divide(a)}})}),bt="dot",$s=["typed","addScalar","multiplyScalar","conj","size"],Is=Q(bt,$s,e=>{var{typed:r,addScalar:t,multiplyScalar:i,conj:n,size:a}=e;return r(bt,{"Array | DenseMatrix, Array | DenseMatrix":v,"SparseMatrix, SparseMatrix":p});function l(s,o){var f=d(s),c=d(o),h,u;if(f.length===1)h=f[0];else if(f.length===2&&f[1]===1)h=f[0];else throw new RangeError("Expected a column vector, instead got a matrix of size ("+f.join(", ")+")");if(c.length===1)u=c[0];else if(c.length===2&&c[1]===1)u=c[0];else throw new RangeError("Expected a column vector, instead got a matrix of size ("+c.join(", ")+")");if(h!==u)throw new RangeError("Vectors must have equal length ("+h+" != "+u+")");if(h===0)throw new RangeError("Cannot calculate the dot product of empty vectors");return h}function v(s,o){var f=l(s,o),c=_e(s)?s._data:s,h=_e(s)?s._datatype:void 0,u=_e(o)?o._data:o,m=_e(o)?o._datatype:void 0,g=d(s).length===2,N=d(o).length===2,w=t,M=i;if(h&&m&&h===m&&typeof h=="string"){var _=h;w=r.find(t,[_,_]),M=r.find(i,[_,_])}if(!g&&!N){for(var y=M(n(c[0]),u[0]),x=1;x<f;x++)y=w(y,M(n(c[x]),u[x]));return y}if(!g&&N){for(var b=M(n(c[0]),u[0][0]),S=1;S<f;S++)b=w(b,M(n(c[S]),u[S][0]));return b}if(g&&!N){for(var O=M(n(c[0][0]),u[0]),z=1;z<f;z++)O=w(O,M(n(c[z][0]),u[z]));return O}if(g&&N){for(var I=M(n(c[0][0]),u[0][0]),q=1;q<f;q++)I=w(I,M(n(c[q][0]),u[q][0]));return I}}function p(s,o){l(s,o);for(var f=s._index,c=s._values,h=o._index,u=o._values,m=0,g=t,N=i,w=0,M=0;w<f.length&&M<h.length;){var _=f[w],y=h[M];if(_<y){w++;continue}if(_>y){M++;continue}_===y&&(m=g(m,N(c[w],u[M])),w++,M++)}return m}function d(s){return _e(s)?s.size():a(s)}}),Nt="det",Ps=["typed","matrix","subtract","multiply","divideScalar","isZero","unaryMinus"],Bs=Q(Nt,Ps,e=>{var{typed:r,matrix:t,subtract:i,multiply:n,divideScalar:a,isZero:l,unaryMinus:v}=e;return r(Nt,{any:function(s){return pe(s)},"Array | Matrix":function(s){var o;switch(_e(s)?o=s.size():Array.isArray(s)?(s=t(s),o=s.size()):o=[],o.length){case 0:return pe(s);case 1:if(o[0]===1)return pe(s.valueOf()[0]);throw new RangeError("Matrix must be square (size: "+ge(o)+")");case 2:{var f=o[0],c=o[1];if(f===c)return p(s.clone().valueOf(),f);throw new RangeError("Matrix must be square (size: "+ge(o)+")")}default:throw new RangeError("Matrix must be two dimensional (size: "+ge(o)+")")}}});function p(d,s,o){if(s===1)return pe(d[0][0]);if(s===2)return i(n(d[0][0],d[1][1]),n(d[1][0],d[0][1]));for(var f=!1,c=new Array(s).fill(0).map((x,b)=>b),h=0;h<s;h++){var u=c[h];if(l(d[u][h])){var m=void 0;for(m=h+1;m<s;m++)if(!l(d[c[m]][h])){u=c[m],c[m]=c[h],c[h]=u,f=!f;break}if(m===s)return d[u][h]}for(var g=d[u][h],N=h===0?1:d[c[h-1]][h-1],w=h+1;w<s;w++)for(var M=c[w],_=h+1;_<s;_++)d[M][_]=a(i(n(d[M][_],g),n(d[M][h],d[u][_])),N)}var y=d[c[s-1]][s-1];return f?v(y):y}}),Mt="inv",Ts=["typed","matrix","divideScalar","addScalar","multiply","unaryMinus","det","identity","abs"],Ls=Q(Mt,Ts,e=>{var{typed:r,matrix:t,divideScalar:i,addScalar:n,multiply:a,unaryMinus:l,det:v,identity:p,abs:d}=e;return r(Mt,{"Array | Matrix":function(f){var c=_e(f)?f.size():Ke(f);switch(c.length){case 1:if(c[0]===1)return _e(f)?t([i(1,f.valueOf()[0])]):[i(1,f[0])];throw new RangeError("Matrix must be square (size: "+ge(c)+")");case 2:{var h=c[0],u=c[1];if(h===u)return _e(f)?t(s(f.valueOf(),h,u),f.storage()):s(f,h,u);throw new RangeError("Matrix must be square (size: "+ge(c)+")")}default:throw new RangeError("Matrix must be two dimensional (size: "+ge(c)+")")}},any:function(f){return i(1,f)}});function s(o,f,c){var h,u,m,g,N;if(f===1){if(g=o[0][0],g===0)throw Error("Cannot calculate inverse, determinant is zero");return[[i(1,g)]]}else if(f===2){var w=v(o);if(w===0)throw Error("Cannot calculate inverse, determinant is zero");return[[i(o[1][1],w),i(l(o[0][1]),w)],[i(l(o[1][0]),w),i(o[0][0],w)]]}else{var M=o.concat();for(h=0;h<f;h++)M[h]=M[h].concat();for(var _=p(f).valueOf(),y=0;y<c;y++){var x=d(M[y][y]),b=y;for(h=y+1;h<f;)d(M[h][y])>x&&(x=d(M[h][y]),b=h),h++;if(x===0)throw Error("Cannot calculate inverse, determinant is zero");h=b,h!==y&&(N=M[y],M[y]=M[h],M[h]=N,N=_[y],_[y]=_[h],_[h]=N);var S=M[y],O=_[y];for(h=0;h<f;h++){var z=M[h],I=_[h];if(h!==y){if(z[y]!==0){for(m=i(l(z[y]),S[y]),u=y;u<c;u++)z[u]=n(z[u],a(m,S[u]));for(u=0;u<c;u++)I[u]=n(I[u],a(m,O[u]))}}else{for(m=S[y],u=y;u<c;u++)z[u]=i(z[u],m);for(u=0;u<c;u++)I[u]=i(I[u],m)}}}return _}}}),qs="divide",Rs=["typed","matrix","multiply","equalScalar","divideScalar","inv"],Us=Q(qs,Rs,e=>{var{typed:r,matrix:t,multiply:i,equalScalar:n,divideScalar:a,inv:l}=e,v=An({typed:r,equalScalar:n}),p=jr({typed:r});return r("divide",Yt({"Array | Matrix, Array | Matrix":function(s,o){return i(s,l(o))},"DenseMatrix, any":function(s,o){return p(s,o,a,!1)},"SparseMatrix, any":function(s,o){return v(s,o,a,!1)},"Array, any":function(s,o){return p(t(s),o,a,!1).valueOf()},"any, Array | Matrix":function(s,o){return i(s,l(o))}},a.signatures))}),et=io({config:lr}),Zs=so({}),Dn=co({}),rt=vo({}),Ar=go({Matrix:rt}),de=sa({BigNumber:et,Complex:Zs,DenseMatrix:Ar,Fraction:Dn}),Vs=Ho({typed:de}),Dr=Wo({typed:de}),Hs=Po({BigNumber:et,typed:de}),ks=_s({typed:de}),Or=Eo({config:lr,typed:de}),Ws=_o({typed:de}),On=ps({typed:de}),Ks=Fo({typed:de}),zn=Co({Matrix:rt,equalScalar:Or,typed:de}),tt=Zo({typed:de}),Gs=Lo({Fraction:Dn,typed:de}),er=Ro({DenseMatrix:Ar,Matrix:rt,SparseMatrix:zn,typed:de}),Js=Os({bignumber:Hs,fraction:Gs,number:Ks}),Ys=Cs({matrix:er,config:lr,typed:de}),Xs=ws({DenseMatrix:Ar,addScalar:Dr,equalScalar:Or,matrix:er,typed:de,unaryMinus:tt}),nt=Fs({numeric:Js,typed:de}),Qs=Is({addScalar:Dr,conj:ks,multiplyScalar:On,size:Ys,typed:de}),js=Ns({BigNumber:et,DenseMatrix:Ar,SparseMatrix:zn,config:lr,matrix:er,typed:de}),zr=ms({addScalar:Dr,dot:Qs,equalScalar:Or,matrix:er,multiplyScalar:On,typed:de}),eu=Bs({divideScalar:nt,isZero:Ws,matrix:er,multiply:zr,subtract:Xs,typed:de,unaryMinus:tt}),ru=Ls({abs:Vs,addScalar:Dr,det:eu,divideScalar:nt,identity:js,matrix:er,multiply:zr,typed:de,unaryMinus:tt}),tu=Us({divideScalar:nt,equalScalar:Or,inv:ru,matrix:er,multiply:zr,typed:de});function nu(e){return e*Math.PI/180}function iu(e){return zr(e,tu(parseInt(fe.state.canvasStyleData.scale),100))}function Et(e){return Math.abs(Math.cos(nu(e)))}function St(e){return(e+360)%360}function xt(e){return e?"infinite":"no-infinite"}const au=async(e,r=[])=>{const t=n=>new Promise(a=>{const{animationTime:l,value:v="",isLoop:p}=n;e.style.setProperty("--time",l+"s"),e.classList.add(v,"animated",xt(p));const d=()=>{e.removeEventListener("animationend",d),e.removeEventListener("animationcancel",d),e.classList.remove(v,"animated",xt(p)),e.style.removeProperty("--time"),a()};e.addEventListener("animationend",d),e.addEventListener("animationcancel",d)}),i=r.length;for(let n=0;n<i;n++)await t(r[n])};function ou(e,r=[]){Object.keys(e).forEach(t=>{r.includes(t)||(t!="rotate"?e[t]:t+""+e[t])})}function su(e){if(e={...e},e.rotate){const r=e.width*Et(e.rotate)+e.height*(e.rotate,void 0),t=(e.width-r)/2;e.left+=t,e.right=e.left+r,e.height*Et(e.rotate)+e.width*(e.rotate,void 0)}else e.bottom=e.top+e.height,e.right=e.left+e.width;return e}const Ct=17,At=91,uu=86,fu=67,cu=88,lu=89,hu=90,vu=71,pu=66,du=76,mu=85,gu=83,wu=80,yu=68,Fn=46,_u=69;let Lr=!1;const bu=()=>{fe.commit("paste"),fe.commit("recordSnapshot")},Nu=()=>{fe.commit("redo")},Mu=()=>{fe.commit("undo")},Eu=()=>{Pe.$emit("save")},Su=()=>{Pe.$emit("preview")},xu=()=>{Pe.$emit("clearCanvas")},Cu=()=>{fe.commit("unlock")},Au=()=>{fe.commit("lock")},Dt=()=>{fe.state.curComponent&&(fe.commit("deleteComponent"),fe.commit("recordSnapshot"))},Du=()=>{fe.commit("copy")},Ou=()=>{fe.commit("cut")},zu=()=>{fe.state.areaData.components.length&&(fe.commit("compose"),fe.commit("recordSnapshot"))},Fu=()=>{const e=fe.state.curComponent;e&&!e.isLock&&e.component=="Group"&&(fe.commit("decompose"),fe.commit("recordSnapshot"))},$n={[uu]:bu,[lu]:Nu,[hu]:Mu,[gu]:Eu,[wu]:Su,[_u]:xu},Ot={...$n,[mu]:Cu},zt={...$n,[fu]:Du,[cu]:Ou,[vu]:zu,[pu]:Fu,[yu]:Dt,[Fn]:Dt,[du]:Au},$u=()=>{window.onkeydown=e=>{if(!fe.state.isInEdiotr)return;const{curComponent:r}=fe.state,{keyCode:t}=e;t===Ct||t===At?Lr=!0:t==Fn&&r?(fe.commit("deleteComponent"),fe.commit("recordSnapshot")):Lr&&((!r||!r.isLock)&&zt[t]?(e.preventDefault(),zt[t]()):r&&r.isLock&&Ot[t]&&(e.preventDefault(),Ot[t]()))},window.onkeyup=e=>{(e.keyCode===Ct||e.keyCode===At)&&(Lr=!1)},window.onmousedown=()=>{fe.commit("setInEditorStatus",!1)}};var Iu=function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("div",[t("div",{staticClass:"toolbar"},[t("el-button",{on:{click:e.undo}},[e._v("\u64A4\u6D88 undo")]),t("el-button",{on:{click:e.redo}},[e._v("\u91CD\u505A redo")]),t("label",{staticClass:"insert",attrs:{for:"input"}},[e._v("\u63D2\u5165\u56FE\u7247")]),t("input",{attrs:{id:"input",type:"file",hidden:""},on:{change:e.handleFileChange}}),t("el-button",{staticStyle:{"margin-left":"10px"},on:{click:e.preview}},[e._v("\u9884\u89C8")]),t("el-button",{on:{click:e.save}},[e._v("\u4FDD\u5B58")]),t("el-button",{on:{click:e.clearCanvas}},[e._v("\u6E05\u7A7A\u753B\u5E03")]),t("el-button",{attrs:{disabled:!e.areaData.components.length},on:{click:e.compose}},[e._v("\u7EC4\u5408")]),t("el-button",{attrs:{disabled:!e.curComponent||e.curComponent.isLock||e.curComponent.component!="Group"},on:{click:e.decompose}},[e._v(" \u62C6\u5206 ")]),t("el-button",{attrs:{disabled:!e.curComponent||e.curComponent.isLock},on:{click:e.lock}},[e._v("\u9501\u5B9A")]),t("el-button",{attrs:{disabled:!e.curComponent||!e.curComponent.isLock},on:{click:e.unlock}},[e._v("\u89E3\u9501")]),t("div",{staticClass:"canvas-config"},[t("span",[e._v("\u753B\u5E03\u5927\u5C0F")]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.canvasStyleData.width,expression:"canvasStyleData.width"}],domProps:{value:e.canvasStyleData.width},on:{input:function(i){i.target.composing||e.$set(e.canvasStyleData,"width",i.target.value)}}}),t("span",[e._v("*")]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.canvasStyleData.height,expression:"canvasStyleData.height"}],domProps:{value:e.canvasStyleData.height},on:{input:function(i){i.target.composing||e.$set(e.canvasStyleData,"height",i.target.value)}}})]),t("div",{staticClass:"canvas-config"},[t("span",[e._v("\u753B\u5E03\u6BD4\u4F8B")]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.scale,expression:"scale"}],domProps:{value:e.scale},on:{input:[function(i){i.target.composing||(e.scale=i.target.value)},e.handleScaleChange]}}),e._v(" % ")])],1)])},Pu=[];const Bu={components:{},data(){return{isShowPreview:!1,needToChange:["top","left","width","height","fontSize"],scale:"100%",timer:null}},computed:sr(["componentData","canvasStyleData","areaData","curComponent","curComponentIndex"]),created(){Pe.$on("preview",this.preview),Pe.$on("save",this.save),Pe.$on("clearCanvas",this.clearCanvas),this.scale=this.canvasStyleData.scale},methods:{format(e){},getOriginStyle(e){},handleScaleChange(){},lock(){},unlock(){},compose(){},decompose(){},undo(){},redo(){},handleFileChange(){},preview(){},save(){},clearCanvas(){},handlePreviewChange(){}}},Ft={};var Tu=Je(Bu,Iu,Pu,!1,Lu,"2b8f57ca",null,null);function Lu(e){for(let r in Ft)this[r]=Ft[r]}var qu=function(){return Tu.exports}(),Ru=function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("div",{staticClass:"component-list",on:{dragstart:e.handleDragStart}},e._l(e.componentList,function(i,n){return t("div",{key:n,staticClass:"list",attrs:{draggable:"","data-index":n}},[t("span",{staticClass:"iconfont",class:"icon-"+i.icon}),t("span",[e._v(e._s(i.label))])])}),0)},Uu=[];const Zu={data(){return{componentList:Ut}},methods:{handleDragStart(e){e.dataTransfer.setData("index",e.target.dataset.index)}}},$t={};var Vu=Je(Zu,Ru,Uu,!1,Hu,"4757d6e4",null,null);function Hu(e){for(let r in $t)this[r]=$t[r]}var In=function(){return Vu.exports}(),ku=function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("svg",{staticClass:"grid",attrs:{width:"100%",height:"100%",xmlns:"http://www.w3.org/2000/svg"}},[t("defs",[t("pattern",{attrs:{id:"smallGrid",width:"7.236328125",height:"7.236328125",patternUnits:"userSpaceOnUse"}},[t("path",{attrs:{d:"M 7.236328125 0 L 0 0 0 7.236328125",fill:"none",stroke:"rgba(207, 207, 207, 0.3)","stroke-width":"1"}})]),t("pattern",{attrs:{id:"grid",width:"36.181640625",height:"36.181640625",patternUnits:"userSpaceOnUse"}},[t("rect",{attrs:{width:"36.181640625",height:"36.181640625",fill:"url(#smallGrid)"}}),t("path",{attrs:{d:"M 36.181640625 0 L 0 0 0 36.181640625",fill:"none",stroke:"rgba(186, 186, 186, 0.5)","stroke-width":"1"}})])]),t("rect",{attrs:{width:"100%",height:"100%",fill:"url(#grid)"}})])},Wu=[];const Ku={},It={};var Gu=Je(Ku,ku,Wu,!1,Ju,"5a5f3a06",null,null);function Ju(e){for(let r in It)this[r]=It[r]}var Yu=function(){return Gu.exports}(),Xu=function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("div",{directives:[{name:"show",rawName:"v-show",value:e.menuShow,expression:"menuShow"}],staticClass:"contextmenu",style:{top:e.menuTop+"px",left:e.menuLeft+"px"}},[t("ul",{on:{mouseup:e.handleMouseUp}},[e.curComponent?[e.curComponent.isLock?t("li",{on:{click:e.unlock}},[e._v("\u89E3\u9501")]):[t("li",{on:{click:e.copy}},[e._v("\u590D\u5236")]),t("li",{on:{click:e.paste}},[e._v("\u7C98\u8D34")]),t("li",{on:{click:e.cut}},[e._v("\u526A\u5207")]),t("li",{on:{click:e.deleteComponent}},[e._v("\u5220\u9664")]),t("li",{on:{click:e.lock}},[e._v("\u9501\u5B9A")]),t("li",{on:{click:e.topComponent}},[e._v("\u7F6E\u9876")]),t("li",{on:{click:e.bottomComponent}},[e._v("\u7F6E\u5E95")]),t("li",{on:{click:e.upComponent}},[e._v("\u4E0A\u79FB")]),t("li",{on:{click:e.downComponent}},[e._v("\u4E0B\u79FB")])]]:t("li",{on:{click:e.paste}},[e._v("\u7C98\u8D34")])],2)])},Qu=[];const ju={data(){return{copyData:null}},computed:sr(["menuTop","menuLeft","menuShow","curComponent"]),methods:{lock(){this.$store.commit("lock")},unlock(){this.$store.commit("unlock")},handleMouseUp(){this.$store.commit("setClickComponentStatus",!0)},cut(){this.$store.commit("cut")},copy(){this.$store.commit("copy")},paste(){this.$store.commit("paste",!0),this.$store.commit("recordSnapshot")},deleteComponent(){this.$store.commit("deleteComponent"),this.$store.commit("recordSnapshot")},upComponent(){this.$store.commit("upComponent"),this.$store.commit("recordSnapshot")},downComponent(){this.$store.commit("downComponent"),this.$store.commit("recordSnapshot")},topComponent(){this.$store.commit("topComponent"),this.$store.commit("recordSnapshot")},bottomComponent(){this.$store.commit("bottomComponent"),this.$store.commit("recordSnapshot")}}},Pt={};var ef=Je(ju,Xu,Qu,!1,rf,"6a2116bc",null,null);function rf(e){for(let r in Pt)this[r]=Pt[r]}var tf=function(){return ef.exports}(),nf=function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("div",{staticClass:"shape",class:{active:e.active},on:{click:e.selectCurComponent,mousedown:e.handleMouseDownOnShape}},[t("span",{directives:[{name:"show",rawName:"v-show",value:e.isActive(),expression:"isActive()"}],staticClass:"iconfont icon-xiangyouxuanzhuan",on:{mousedown:e.handleRotate}}),t("span",{directives:[{name:"show",rawName:"v-show",value:e.element.isLock,expression:"element.isLock"}],staticClass:"iconfont icon-suo"}),e._l(e.isActive()?e.pointList:[],function(i){return t("div",{key:i,staticClass:"shape-point",style:e.getPointStyle(i),on:{mousedown:function(n){return e.handleMouseDownOnPoint(i,n)}}})}),e._t("default")],2)},af=[];const of={props:{active:{type:Boolean,default:!1},element:{require:!0,type:Object,default:()=>{}},defaultStyle:{require:!0,type:Object,default:()=>{}},index:{require:!0,type:[Number,String],default:0}},data(){return{pointList:["lt","t","rt","r","rb","b","lb","l"],initialAngle:{lt:0,t:45,rt:90,r:135,rb:180,b:225,lb:270,l:315},angleToCursor:[{start:338,end:23,cursor:"nw"},{start:23,end:68,cursor:"n"},{start:68,end:113,cursor:"ne"},{start:113,end:158,cursor:"e"},{start:158,end:203,cursor:"se"},{start:203,end:248,cursor:"s"},{start:248,end:293,cursor:"sw"},{start:293,end:338,cursor:"w"}],cursors:{}}},computed:sr(["curComponent","editor"]),mounted(){this.curComponent&&(this.cursors=this.getCursor()),Pe.$on("runAnimation",()=>{this.element==this.curComponent&&(console.log("this.$el",this.$el),au(this.$el,this.curComponent.animations))}),Pe.$on("stopAnimation",()=>{this.$el.classList.remove("animated","infinite")})},methods:{isActive(){return this.active&&!this.element.isLock},getPointStyle(e){const{width:r,height:t}=this.defaultStyle,i=/t/.test(e),n=/b/.test(e),a=/l/.test(e),l=/r/.test(e);let v=0,p=0;return e.length===2?(v=a?0:r,p=i?0:t):((i||n)&&(v=r/2,p=i?0:t),(a||l)&&(v=a?0:r,p=Math.floor(t/2))),{marginLeft:"-4px",marginTop:"-4px",left:`${v}px`,top:`${p}px`,cursor:this.cursors[e]}},getCursor(){const{angleToCursor:e,initialAngle:r,pointList:t,curComponent:i}=this,{rotate:n}=St(i.style.rotate),a={};let l=-1;return t.forEach(v=>{const p=St(r[v]+n),d=e.length;for(;;){l=(l+1)%d;const s=e[l];if(p<23||p>=338){a[v]="nw-resize";return}if(s.start<=p&&p<s.end){a[v]=s.cursor+"-resize";return}}}),console.log("getCursor",a),a},handleRotate(e){},handleMouseDownOnShape(e){this.$store.commit("setInEditorStatus",!0),this.$store.commit("setClickComponentStatus",!0),this.element.component!="v-text"&&this.element.component!="rect-shape"&&e.preventDefault(),e.stopPropagation(),this.$store.commit("setCurComponent",{component:this.element,index:this.index})},handleMouseDownOnPoint(e,r){r.stopPropagation(),r.preventDefault()},selectCurComponent(e){e.stopPropagation(),e.preventDefault(),this.$store.commit("hideContextMenu")}}},Bt={};var sf=Je(of,nf,af,!1,uf,"42449e92",null,null);function uf(e){for(let r in Bt)this[r]=Bt[r]}var ff=function(){return sf.exports}(),cf=function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("div",{staticClass:"mark-line"},e._l(e.lines,function(i){return t("div",{directives:[{name:"show",rawName:"v-show",value:e.lineStatus[i]||!1,expression:"lineStatus[line] || false"}],key:i,ref:i,refInFor:!0,staticClass:"line",class:i.includes("x")?"xline":"yline"})}),0)},lf=[];const hf={data(){return{lines:["xt","xc","xb","yl","yc","yr"],diff:3,lineStatus:{xt:!1,xc:!1,xb:!1,yl:!1,yc:!1,yr:!1}}},computed:sr(["componentData","curComponent"]),mounted(){Pe.$on("move",(e,r)=>{this.showLine(e,r)}),Pe.$on("unmove",()=>{this.hideLine()})},methods:{hideLine(){Object.keys(this.lineStatus).forEach(e=>{this.lineStatus[e]=!1})},showLine(e,r){const t=this.$refs;console.log("line",t),this.componentData,su(this.curComponent.style)}}},Tt={};var vf=Je(hf,cf,lf,!1,pf,null,null,null);function pf(e){for(let r in Tt)this[r]=Tt[r]}var df=function(){return vf.exports}(),mf=function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("div",{staticClass:"editor",class:{edit:e.isEdit},style:{width:e.changeStyleWithScale(e.canvasStyleData.width)+"px",height:e.changeStyleWithScale(e.canvasStyleData.height)+"px"},attrs:{id:"editor"},on:{contextmenu:e.handleContextMenu,mousedown:e.handleMouseDown}},[t("Grid"),e._l(e.componentData,function(i,n){return t("Shape",{key:i.id,class:{lock:i.isLock},style:e.getShapeStyle(i.style),attrs:{"default-style":i.style,active:i.id==(e.curComponent||{}).id,element:i,index:n}},[i.component!="v-text"?t(i.component,{tag:"component",staticClass:"component",style:e.getComponentStyle(i.style),attrs:{id:"component"+i.id,"prop-value":i.propValue,element:i}}):t(i.component,{tag:"component",staticClass:"component",style:e.getComponentStyle(i.style),attrs:{id:"component"+i.id,"prop-value":i.propValue,element:i},on:{input:e.handleInput}})],1)}),t("ContextMenu"),t("MarkLine")],2)},gf=[];const wf=(e,r)=>{console.log("element, text",e,r);let{lineHeight:t,fontSize:i,height:n}=e.style;t===""&&(t=1.5);const a=(r.split("<br>").length-1)*t*i;return n>a?n:a},yf={components:{Grid:Yu,ContextMenu:tf,MarkLine:df,Shape:ff,ComponentList:In},props:{isEdit:{type:Boolean,default:!0}},data(){return{editorX:0,editorY:0,start:{x:0,y:0},width:0,height:0,isShowArea:!1}},computed:sr(["componentData","curComponent","canvasStyleData","editor"]),mounted(){this.$store.commit("getEditor"),Pe.$on("hideArea",()=>{this.hideArea()})},methods:{changeStyleWithScale:iu,handleInput(e,r){this.$store.commit("setShapeStyle",{height:wf(e,r)})},handleContextMenu(e){e.stopPropagation(),e.preventDefault()},handleMouseDown(e){},getShapeStyle(e){const r={};return["width","height","top","left","rotate"].forEach(t=>{t!="rotate"?r[t]=e[t]+"px":r.transform="rotate("+e[t]+"deg)"}),r},getComponentStyle(e){return ou(e,["top","left","width","height","rotate"])}}},Lt={};var _f=Je(yf,mf,gf,!1,bf,"0c239c28",null,null);function bf(e){for(let r in Lt)this[r]=Lt[r]}var Nf=function(){return _f.exports}(),Mf=function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("div",{staticClass:"home"},[t("Toolbar"),t("main",[t("section",{staticClass:"left"},[t("ComponentList")],1),t("section",{staticClass:"center"},[t("div",{staticClass:"content",on:{drop:e.handleDrop,dragover:e.handleDragOver,mousedown:e.handleMouseDown,mouseup:e.deselectCurComponent}},[t("Editor")],1)]),t("section",{staticClass:"right"},[e._v("right")])])],1)},Ef=[];const Pn=e=>{e.forEach(r=>{r.id=Zt(),r.component==="Group"&&Pn(r.propValue)})},Sf={components:{Toolbar:qu,ComponentList:In,Editor:Nf},computed:sr(["componentData","curComponent","isClickComponent","canvasStyleData","editor"]),created(){this.restore(),$u()},methods:{restore(){const e=localStorage.getItem("canvasData"),r=localStorage.getItem("canvasStyle");e&&this.$store.commit("setComponentData",Pn(JSON.parse(e))),r&&this.$store.commit("setCanvasStyle",r)},handleDrop(e){e.preventDefault(),e.stopPropagation();const r=e.dataTransfer.getData("index"),t=this.editor.getBoundingClientRect();if(r){const i=ui(Ut[r]);i.style.top=e.clientY-t.y,i.style.left=e.clientX-t.x,i.id=Zt(),this.$store.commit("addComponent",{component:i}),this.$store.commit("recordSnapshot")}},handleDragOver(e){e.preventDefault(),e.dataTransfer.dropEffect="copy"},handleMouseDown(e){e.stopPropagation(),this.$store.commit("setClickComponentStatus",!1),this.$store.commit("setInEditorStatus",!0)},deselectCurComponent(e){}}},qt={};var xf=Je(Sf,Mf,Ef,!1,Cf,null,null,null);function Cf(e){for(let r in qt)this[r]=qt[r]}var Df=function(){return xf.exports}();export{Df as default};
