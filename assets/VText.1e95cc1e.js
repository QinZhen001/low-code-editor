import{b as a,n as l}from"./index.f072b22a.js";import{k as s}from"./shortcutKey.741a974a.js";var o=function(){var e=this,n=e.$createElement,t=e._self._c||n;return e.editMode=="edit"?t("div",{staticClass:"v-text",on:{keydown:e.handleKeydown,keyup:e.handleKeyup}},[t("div",{ref:"text",class:{canEdit:e.canEdit},style:{verticalAlign:e.element.style.verticalAlign},attrs:{contenteditable:e.canEdit,tabindex:e.element.id},domProps:{innerHTML:e._s(e.element.propValue)},on:{dblclick:e.setEdit,paste:e.clearStyle,mousedown:e.handleMousedown,blur:e.handleBlur,input:e.handleInput}})]):t("div",{staticClass:"v-text preview"},[t("div",{style:{verticalAlign:e.element.style.verticalAlign},domProps:{innerHTML:e._s(e.element.propValue)}})])},r=[];const d={props:{propValue:{type:String,require:!0,default:""},element:{type:Object,default:()=>{}}},data(){return{canEdit:!1,ctrlKey:17,isCtrlDown:!1}},computed:{...a(["editMode"])},methods:{handleKeydown(e){this.canEdit&&e.stopPropagation(),e.keyCode==this.ctrlKey?this.isCtrlDown=!0:(this.isCtrlDown&&this.canEdit&&s.includes(e.keyCode)||e.keyCode==46)&&e.stopPropagation()},handleKeyup(e){this.canEdit&&e.stopPropagation(),e.keyCode==this.ctrlKey&&(this.isCtrlDown=!1)},setEdit(){this.element.isLock||(this.canEdit=!0,this.selectText(this.$refs.text))},clearStyle(e){e.preventDefault();const t=e.clipboardData.getData("text/plain")||"";t!==""&&document.execCommand("insertText",!1,t),this.$emit("input",this.element,e.target.innerHTML)},handleMousedown(e){this.canEdit&&e.stopPropagation()},handleBlur(e){this.element.propValue=e.target.innerHTML||"&nbsp;",e.target.innerHTML!==""?this.element.propValue=e.target.innerHTML:(this.element.propValue="",this.$nextTick(()=>{this.element.propValue="&nbsp;"})),this.canEdit=!1},handleInput(e){this.$emit("input",this.element,e.target.innerHTML)},selectText(e){const n=window.getSelection(),t=document.createRange();t.selectNodeContents(e),n.removeAllRanges(),n.addRange(t)}}},i={};var c=l(d,o,r,!1,p,"703b55e9",null,null);function p(e){for(let n in i)this[n]=i[n]}var m=function(){return c.exports}();export{m as default};
